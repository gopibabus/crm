!function(){var e,t,n,i,r,o,a;function s(e){return y(e)||k(e)||C(e)||g()}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=h(e);if(t){var r=h(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return y(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(l){s=!0,r=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(e,t)||C(e,t)||g()}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e){if(Array.isArray(e))return e}function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=C(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function S(e){return function(e){if(Array.isArray(e))return w(e)}(e)||k(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function k(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function j(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),e}var E=Math.pow;(self.webpackChunkshell=self.webpackChunkshell||[]).push([["dist_core___ivy_ngcc___fesm2015_core_js-_0b010"],{35478:function(d,p,g){"use strict";g.r(p),g.d(p,{ActionGroupMenuComponent:function(){return Dv},ActionGroupMenuModule:function(){return tg},ActionMenuComponent:function(){return Uw},ActionMenuModule:function(){return Kw},ActionNameMapper:function(){return Zy},AdminCardComponent:function(){return ij},AdminCardModule:function(){return rj},AdminMetadataStore:function(){return zS},AdminPanelComponent:function(){return oj},AdminPanelModule:function(){return aj},AppMetadataStore:function(){return qS},AppStateStore:function(){return jv},AsyncActionHandler:function(){return Hg},AsyncActionService:function(){return ty},AsyncProcessLineAction:function(){return iI},AsyncProcessRecordAction:function(){return Cj},AsyncProcessRecordThreadItemAction:function(){return Ek},AsyncProcessRecordThreadListAction:function(){return Ck},AsyncProcessSubpanelAction:function(){return Jk},AsyncProcessSubpanelLineAction:function(){return hx},AttributeBuilder:function(){return sv},AuthGuard:function(){return Kx},AuthService:function(){return YS},BaseActionManager:function(){return Mg},BaseActionsAdapter:function(){return yk},BaseBooleanComponent:function(){return Ky},BaseChartComponent:function(){return og},BaseChartModule:function(){return ag},BaseComposite:function(){return SS},BaseDateComponent:function(){return Cy},BaseDateTimeComponent:function(){return Sy},BaseEnumComponent:function(){return cy},BaseFavoritesComponent:function(){return ok},BaseFieldComponent:function(){return ly},BaseFieldGridComponent:function(){return jg},BaseFieldModule:function(){return Ax},BaseFieldRegistry:function(){return pS},BaseGroupedMenuItemComponent:function(){return OC},BaseHomeMenuItemComponent:function(){return VC},BaseLineActionsAdapter:function(){return oI},BaseLineItemsComponent:function(){return MS},BaseMenuFavoritesComponent:function(){return uk},BaseMenuItemComponent:function(){return zC},BaseMenuItemLinkComponent:function(){return _C},BaseMenuItemsListComponent:function(){return NC},BaseMenuRecentlyViewedComponent:function(){return PC},BaseMetadataResolver:function(){return qx},BaseMobileGroupedMenuComponent:function(){return QC},BaseMobileMenuComponent:function(){return HC},BaseMobileModuleMenuComponent:function(){return JC},BaseModuleResolver:function(){return Wx},BaseMultiEnumComponent:function(){return dy},BaseNameComponent:function(){return hy},BaseNavbarComponent:function(){return kC},BaseNumberComponent:function(){return jy},BaseRecordActionsAdapter:function(){return bk},BaseRecordContainerStore:function(){return gh},BaseRecordResolver:function(){return Yx},BaseRelateComponent:function(){return bb},BaseRouteService:function(){return QS},BaseSaveRecordMapper:function(){return gv},BaseSubMenuFavoritesComponent:function(){return ak},BaseSubMenuRecentlyViewedComponent:function(){return nk},BaseWidgetComponent:function(){return ZI},BaseWidgetModule:function(){return Lx},BooleanDetailFieldComponent:function(){return zy},BooleanDetailFieldModule:function(){return Ob},BooleanEditFieldComponent:function(){return _b},BooleanEditFieldModule:function(){return Fb},BooleanFilterFieldComponent:function(){return lb},BooleanFilterFieldModule:function(){return cb},BottomWidgetAdapter:function(){return Mj},BulkActionMenuComponent:function(){return ng},BulkActionMenuModule:function(){return ig},BulkActionsAdapter:function(){return eE},BulkActionsAdapterFactory:function(){return tE},ButtonComponent:function(){return Hv},ButtonGroupComponent:function(){return Wv},ButtonGroupModule:function(){return Qv},ButtonLoadingDirective:function(){return Ox},ButtonLoadingUiModule:function(){return Dx},ButtonModule:function(){return qv},ButtonUtils:function(){return rg},CancelCreateAction:function(){return Sj},CancelRecordPanelAction:function(){return Yj},ChangelogAsyncAction:function(){return ey},ChartComponent:function(){return yg},ChartDataStore:function(){return zI},ChartDataStoreFactory:function(){return GI},ChartMessageAreaComponent:function(){return ug},ChartMessageAreaModule:function(){return cg},ChartModule:function(){return bg},ChartRegistry:function(){return gg},ChartSidebarWidgetComponent:function(){return HI},ChartSidebarWidgetModule:function(){return qI},ClassicModalComponent:function(){return Jg},ClassicModalModule:function(){return uw},ClassicViewResolver:function(){return uj},ClassicViewUiComponent:function(){return sj},ClassicViewUiModule:function(){return lj},CloseButtonComponent:function(){return Sg},CloseButtonModule:function(){return Cg},CollectionGQL:function(){return Vm},ColumnChooserComponent:function(){return kg},ColumnChooserModule:function(){return xg},CompositeComponent:function(){return CS},CompositeModule:function(){return kS},ConfirmationModalService:function(){return vk},CreateRecordComponent:function(){return dj},CreateRecordModule:function(){return Rj},CreateRelatedLineAction:function(){return nI},CreateViewStore:function(){return cj},CurrencyDetailFieldComponent:function(){return Ey},CurrencyDetailFieldModule:function(){return My},CurrencyFormatter:function(){return iv},CurrencyService:function(){return Ug},CurrencyUnitConverter:function(){return BI},CurrencyValidator:function(){return Oh},DataTypeFormatter:function(){return rv},DataTypeSeriesMapper:function(){return VI},DataTypeUnitConverter:function(){return $I},DateAdapter:function(){return Ny},DateDetailFieldComponent:function(){return ky},DateDetailFieldModule:function(){return wy},DateEditFieldComponent:function(){return sb},DateEditFieldModule:function(){return xb},DateFilterFieldComponent:function(){return Ry},DateFilterFieldModule:function(){return $b},DateFormatter:function(){return Ah},DateParserFormatter:function(){return Ay},DateTimeDetailFieldComponent:function(){return Ty},DateTimeDetailFieldModule:function(){return Py},DateTimeEditFieldComponent:function(){return Oy},DateTimeEditFieldModule:function(){return Dy},DateTimeFilterFieldComponent:function(){return By},DateTimeFilterFieldModule:function(){return $y},DateTimeModel:function(){return Ly},DateTimeValidator:function(){return Ph},DateValidator:function(){return Rh},DatetimeFormatter:function(){return Dh},DisplayTypeAction:function(){return Pg},DropdownButtonComponent:function(){return Av},DropdownButtonModule:function(){return Zv},DropdownEnumDetailFieldComponent:function(){return zb},DropdownEnumDetailFieldModule:function(){return Gb},DropdownEnumEditFieldComponent:function(){return Ub},DropdownEnumEditFieldModule:function(){return Kb},DropdownSubmenuComponent:function(){return Nv},DropdownSubmenuModule:function(){return Kv},DuplicateEmailValidator:function(){return tv},DynamicEnumDetailFieldComponent:function(){return Nx},DynamicEnumDetailFieldModule:function(){return Rx},DynamicEnumEditFieldComponent:function(){return Tx},DynamicEnumEditFieldModule:function(){return Px},DynamicFieldComponent:function(){return gS},DynamicFieldModule:function(){return yS},DynamicLabelComponent:function(){return Yv},DynamicLabelModule:function(){return Xv},DynamicLabelService:function(){return kv},EmailDetailFieldsComponent:function(){return Bx},EmailDetailFieldsModule:function(){return $x},EmailFormatter:function(){return Kh},EmailListFieldsComponent:function(){return Wy},EmailListFieldsModule:function(){return Qy},EmailPrimarySelectAction:function(){return Bg},EmailValidator:function(){return Gh},EntityGQL:function(){return qm},EntityMutationGQL:function(){return Jm},EnumDetailFieldComponent:function(){return py},EnumDetailFieldModule:function(){return my},EnumEditFieldComponent:function(){return Uy},EnumEditFieldModule:function(){return Xy},ErrorInterceptor:function(){return zx},ExportAsyncAction:function(){return Wg},ExtensionLoader:function(){return Hx},FavoriteToggleComponent:function(){return cI},FavoriteToggleModule:function(){return dI},FavoritesService:function(){return lI},FieldBuilder:function(){return ov},FieldComponent:function(){return ES},FieldGridComponent:function(){return Eg},FieldGridModule:function(){return OS},FieldLayoutComponent:function(){return DS},FieldLayoutModule:function(){return AS},FieldLogicActionHandler:function(){return _g},FieldLogicManager:function(){return ry},FieldManager:function(){return dv},FieldModule:function(){return LS},FieldRegistry:function(){return jS},FileDetailFieldComponent:function(){return tb},FileDetailFieldModule:function(){return nb},FilterAdapter:function(){return nE},FilterAttributeBuilder:function(){return uv},FilterFieldBuilder:function(){return lv},FilterListStore:function(){return _w},FilterListStoreFactory:function(){return Fw},FilterUiComponent:function(){return NS},FilterUiModule:function(){return RS},FiltersListGQL:function(){return Mw},FloatDetailFieldComponent:function(){return ib},FloatDetailFieldModule:function(){return ab},FloatValidator:function(){return $h},FooterUiComponent:function(){return XS},FooterUiModule:function(){return JS},FormControlUtils:function(){return jh},FormatCurrencyModule:function(){return xy},FormatCurrencyPipe:function(){return Iy},FormatNumberModule:function(){return ob},FormatNumberPipe:function(){return rb},FullNameDetailFieldsComponent:function(){return vy},FullNameDetailFieldsModule:function(){return gy},FullPageSpinnerComponent:function(){return eC},FullPageSpinnerModule:function(){return tC},GlobalSearch:function(){return Uk},GridWidgetComponent:function(){return lC},GridWidgetModule:function(){return hC},GroupFieldBuilder:function(){return av},GroupFieldComponent:function(){return hS},GroupFieldModule:function(){return bS},GroupedMenuItemComponent:function(){return AC},GroupedMenuItemRegistry:function(){return DC},HistorySidebarWidgetComponent:function(){return JI},HistorySidebarWidgetModule:function(){return ex},HistoryTimelineAdapter:function(){return YI},HistoryTimelineAdapterFactory:function(){return XI},HistoryTimelineStore:function(){return WI},HistoryTimelineStoreFactory:function(){return QI},HomeMenuItemComponent:function(){return KC},HomeMenuItemRegistry:function(){return UC},HomeUiComponent:function(){return vC},HomeUiModule:function(){return Zk},HomeUiRoutes:function(){return gC},HtmlDetailFieldComponent:function(){return Qb},HtmlDetailFieldModule:function(){return Yb},HtmlSanitizeModule:function(){return Ux},HtmlSanitizePipe:function(){return Vx},IconDetailFieldComponent:function(){return aS},IconListFieldModule:function(){return sS},IframePageChangeObserver:function(){return Xg},IframeResizeHandlerHandler:function(){return Yg},ImageComponent:function(){return Vv},ImageModule:function(){return Uv},ImmediateDebounce:function(){return uI},InlineLoadingSpinnerComponent:function(){return Jv},InlineLoadingSpinnerModule:function(){return eg},InstallAction:function(){return Pj},InstallActionManager:function(){return Bj},InstallActionsAdapter:function(){return Uj},InstallAuthGuard:function(){return Gx},InstallContainerComponent:function(){return zj},InstallContainerModule:function(){return Gj},InstallContentAdapter:function(){return Kj},InstallErrorModalComponent:function(){return qk},InstallErrorModalModule:function(){return Wk},InstallHeaderComponent:function(){return Zj},InstallHeaderModule:function(){return Hj},InstallViewActionHandler:function(){return Tj},InstallViewComponent:function(){return qj},InstallViewModule:function(){return Wj},InstallViewStore:function(){return Vj},IntDetailFieldComponent:function(){return Nb},IntDetailFieldModule:function(){return Tb},IntValidator:function(){return Uh},LabelComponent:function(){return zv},LabelModule:function(){return Gv},LanguageStore:function(){return Ov},LegacyEntrypointLinkBuilder:function(){return eb},LineActionActionHandler:function(){return tI},LineActionActionManager:function(){return rI},LineActionMenuComponent:function(){return iw},LineActionModule:function(){return rw},LineActionsAdapter:function(){return iE},LineChartComponent:function(){return pg},LineChartModule:function(){return mg},LineItemBuilder:function(){return cv},LineItemsComponent:function(){return _S},LineItemsModule:function(){return FS},LinkModel:function(){return hw},LinkRouteAsyncActionService:function(){return vS},LinkTarget:function(){return bC},ListComponent:function(){return pE},ListContainerComponent:function(){return uE},ListContainerModule:function(){return cE},ListFilterComponent:function(){return MI},ListFilterModule:function(){return _I},ListFilterStore:function(){return II},ListFilterStoreFactory:function(){return EI},ListGQL:function(){return Xm},ListHeaderComponent:function(){return dE},ListHeaderModule:function(){return fE},ListModule:function(){return mE},ListViewRecordPanelActionAdapterFactory:function(){return oE},ListViewRecordPanelActionHandler:function(){return Qj},ListViewRecordPanelActionsAdapter:function(){return rE},ListViewSidebarWidgetAdapter:function(){return sE},ListViewStore:function(){return Vw},LoadMoreComponent:function(){return ow},LoadMoreModule:function(){return aw},LoadingBuffer:function(){return Wm},LoadingBufferFactory:function(){return Qm},LoadingSpinnerComponent:function(){return Pk},LoadingSpinnerModule:function(){return Bk},LocalStorageService:function(){return nh},LoginAuthGuard:function(){return Zx},LoginUiComponent:function(){return hE},LoginUiModule:function(){return gE},LoginUiRoutes:function(){return vE},LogoAbstract:function(){return yC},LogoUiComponent:function(){return xC},LogoUiModule:function(){return jC},LogoutComponent:function(){return yE},LogoutModule:function(){return bE},LogoutUiComponent:function(){return EC},LogoutUiModule:function(){return MC},MaxColumnsCalculator:function(){return vb},MenuFavoritesComponent:function(){return dk},MenuFavoritesRegistry:function(){return ck},MenuItemComponent:function(){return ZC},MenuItemLinkComponent:function(){return LC},MenuItemLinkRegistry:function(){return FC},MenuItemRegistry:function(){return GC},MenuItemsListComponent:function(){return TC},MenuItemsListRegistry:function(){return RC},MenuRecentlyViewedComponent:function(){return $C},MenuRecentlyViewedRegistry:function(){return BC},MessageModalComponent:function(){return hk},MessageModalModule:function(){return fw},MessageService:function(){return Ym},MessageUiComponent:function(){return sw},MessageUiModule:function(){return lw},MetadataStore:function(){return xh},MinimiseButtonComponent:function(){return dC},MinimiseButtonModule:function(){return fC},MobileGroupedMenuComponent:function(){return XC},MobileGroupedMenuRegistry:function(){return YC},MobileMenuComponent:function(){return WC},MobileMenuRegistry:function(){return qC},MobileModuleMenuComponent:function(){return tk},MobileModuleMenuRegistry:function(){return ek},ModalButtonGroupComponent:function(){return cw},ModalButtonGroupModule:function(){return dw},ModalComponent:function(){return wg},ModalModule:function(){return Ig},ModalRecordFilterAdapter:function(){return fb},ModalRecordListTableAdapter:function(){return pb},ModuleNameMapper:function(){return Gy},ModuleNavigation:function(){return qy},ModuleTitleComponent:function(){return pw},ModuleTitleModule:function(){return mw},MultiEnumDetailFieldComponent:function(){return Vy},MultiEnumDetailFieldModule:function(){return Jy},MultiEnumEditFieldComponent:function(){return Ab},MultiEnumEditFieldModule:function(){return Rb},MultiEnumFilterFieldComponent:function(){return fy},MultiEnumFilterFieldModule:function(){return jb},NavbarAbstract:function(){return SC},NavbarRegistry:function(){return wC},NavbarUiComponent:function(){return IC},NavbarUiModule:function(){return Gk},NavigationStore:function(){return $S},NoopAsyncAction:function(){return Qg},NotificationsComponent:function(){return fk},NotificationsModule:function(){return Vk},NotificationsService:function(){return wv},NumberFormatter:function(){return Fh},PaginationComponent:function(){return vw},PaginationModule:function(){return gw},PanelComponent:function(){return cC},PanelModule:function(){return pC},PasswordDetailFieldComponent:function(){return Xb},PasswordDetailFieldModule:function(){return Jb},PasswordEditFieldComponent:function(){return eS},PasswordEditFieldModule:function(){return tS},PhoneDetailFieldComponent:function(){return uy},PhoneDetailFieldModule:function(){return Ib},PhoneFormatter:function(){return Zh},PhoneValidator:function(){return qh},PieGridChartComponent:function(){return sg},PieGridChartModule:function(){return fg},PopupButtonComponent:function(){return yw},PopupButtonModule:function(){return bw},PrimaryEmailValidator:function(){return Jh},ProcessService:function(){return th},RadioEnumDetailFieldComponent:function(){return Zb},RadioEnumDetailFieldModule:function(){return Hb},RadioEnumEditFieldComponent:function(){return qb},RadioEnumEditFieldModule:function(){return Wb},RangeValidator:function(){return Yh},RecentlyViewedService:function(){return Qx},RecordActionHandler:function(){return pj},RecordActionManager:function(){return kj},RecordActionsAdapter:function(){return Lj},RecordCancelAction:function(){return mj},RecordComponent:function(){return Aj},RecordContainerComponent:function(){return _j},RecordContainerModule:function(){return Fj},RecordContentAdapter:function(){return jj},RecordContentComponent:function(){return kw},RecordContentModule:function(){return ww},RecordContentSkeletonComponent:function(){return Iw},RecordContentSkeletonModule:function(){return xw},RecordCreateAction:function(){return yj},RecordDetailsPopupButtonComponent:function(){return Sw},RecordDetailsPopupButtonModule:function(){return Cw},RecordEditAction:function(){return gj},RecordFetchGQL:function(){return mv},RecordFlexboxComponent:function(){return Nk},RecordFlexboxModule:function(){return Rk},RecordGridComponent:function(){return pk},RecordGridModule:function(){return mk},RecordHeaderComponent:function(){return Oj},RecordHeaderModule:function(){return Dj},RecordListModalComponent:function(){return gb},RecordListModalModule:function(){return FI},RecordListModalStore:function(){return mb},RecordListModalStoreFactory:function(){return hb},RecordListStore:function(){return ph},RecordListStoreFactory:function(){return mh},RecordManager:function(){return vv},RecordModule:function(){return Nj},RecordPanelActionHandler:function(){return OI},RecordPanelActionManager:function(){return Jj},RecordPanelAdapter:function(){return aE},RecordPanelComponent:function(){return LI},RecordPanelModule:function(){return DI},RecordPanelStore:function(){return AI},RecordPanelStoreFactory:function(){return NI},RecordSaveAction:function(){return hj},RecordSaveGQL:function(){return hv},RecordSaveNewAction:function(){return bj},RecordStore:function(){return pv},RecordStoreFactory:function(){return yv},RecordStoreList:function(){return hh},RecordThreadComponent:function(){return xk},RecordThreadItemActionHandler:function(){return jk},RecordThreadItemActionManager:function(){return Lk},RecordThreadItemActionsAdapter:function(){return Ok},RecordThreadItemActionsAdapterFactory:function(){return Dk},RecordThreadItemCancelAction:function(){return Mk},RecordThreadItemComponent:function(){return Ak},RecordThreadItemEditAction:function(){return _k},RecordThreadItemModule:function(){return Tk},RecordThreadItemSaveAction:function(){return Fk},RecordThreadItemStore:function(){return yh},RecordThreadItemStoreFactory:function(){return bv},RecordThreadListActionHandler:function(){return Sk},RecordThreadListActionManager:function(){return kk},RecordThreadListActionsAdapter:function(){return wk},RecordThreadListActionsAdapterFactory:function(){return Ik},RecordThreadModule:function(){return $k},RecordThreadSidebarWidgetComponent:function(){return tx},RecordThreadSidebarWidgetModule:function(){return nx},RecordThreadStore:function(){return Sv},RecordThreadStoreFactory:function(){return Cv},RecordToggleWidgetsAction:function(){return vj},RecordViewStore:function(){return Rw},RecoverPasswordService:function(){return Xx},RedirectAsyncAction:function(){return qg},RelateDetailFieldComponent:function(){return db},RelateDetailFieldsModule:function(){return Eb},RelateEditFieldComponent:function(){return Sb},RelateEditFieldModule:function(){return Cb},RelateFilterFieldComponent:function(){return kb},RelateFilterFieldModule:function(){return Mb},RelateService:function(){return yb},RequiredAction:function(){return Vg},RequiredValidator:function(){return _h},RouteConverter:function(){return CC},RunBulkActionRecordPanelAction:function(){return Xj},SaveFilterStoreFactory:function(){return wI},SavedFilterActionAdapterFactory:function(){return jI},SavedFilterActionHandler:function(){return fI},SavedFilterActionManager:function(){return hI},SavedFilterActionsAdapter:function(){return xI},SavedFilterDeleteAction:function(){return mI},SavedFilterRecordStore:function(){return gI},SavedFilterRecordStoreFactory:function(){return yI},SavedFilterSaveAction:function(){return pI},SavedFilterSaveGQL:function(){return CI},SavedFilterStore:function(){return SI},SavedSearchRecordMapper:function(){return kI},ScreenSize:function(){return Zm},ScreenSizeObserverService:function(){return Hm},SearchBarComponent:function(){return Kk},SearchBarModule:function(){return zk},SelectModalService:function(){return gk},SeriesMapper:function(){return UI},SeriesStatisticsStore:function(){return TI},SeriesStatisticsStoreFactory:function(){return tj},SeriesTraverser:function(){return PI},SettingsMenuComponent:function(){return zw},SettingsMenuModule:function(){return Gw},SidebarWidgetAdapter:function(){return fj},SidebarWidgetComponent:function(){return lx},SidebarWidgetModule:function(){return ux},SidebarWidgetRegistry:function(){return sx},SingleValueStatisticsStore:function(){return aC},SingleValueStatisticsStoreFactory:function(){return sC},SortButtonComponent:function(){return jw},SortButtonModule:function(){return Ew},StandardFieldRegistry:function(){return mS},StateManager:function(){return WS},StatisticsBatch:function(){return Aw},StatisticsFetchGQL:function(){return nC},StatisticsSidebarWidgetComponent:function(){return ix},StatisticsSidebarWidgetModule:function(){return rx},StatisticsStore:function(){return rC},StatisticsStoreFactory:function(){return nj},StatisticsTopWidgetComponent:function(){return xx},StatisticsTopWidgetModule:function(){return jx},StatusBarComponent:function(){return Tw},StatusBarModule:function(){return Zw},SubMenuFavoritesComponent:function(){return lk},SubMenuFavoritesRegistry:function(){return sk},SubMenuRecentlyViewedComponent:function(){return rk},SubMenuRecentlyViewedRegistry:function(){return ik},SubpanelActionAdapterFactory:function(){return dx},SubpanelActionHandler:function(){return Qk},SubpanelActionManager:function(){return nw},SubpanelActionsAdapter:function(){return cx},SubpanelClearFilterAction:function(){return tw},SubpanelComponent:function(){return Cx},SubpanelContainerComponent:function(){return wx},SubpanelContainerModule:function(){return Ix},SubpanelCreateAction:function(){return Yk},SubpanelFilterAdapter:function(){return fx},SubpanelFilterAdapterFactory:function(){return px},SubpanelLineActionHandler:function(){return mx},SubpanelLineActionManager:function(){return vx},SubpanelLineActionsAdapter:function(){return gx},SubpanelLineActionsAdapterFactory:function(){return yx},SubpanelModule:function(){return kx},SubpanelSelectAction:function(){return Xk},SubpanelShowFilterAction:function(){return ew},SubpanelStore:function(){return Lw},SubpanelStoreFactory:function(){return Ow},SubpanelTableAdapter:function(){return bx},SubpanelTableAdapterFactory:function(){return Sx},SystemConfigStore:function(){return Gm},SystemNameService:function(){return Jx},TableAdapter:function(){return lE},TableBodyComponent:function(){return Qw},TableBodyModule:function(){return Yw},TableComponent:function(){return Hw},TableFooterComponent:function(){return Xw},TableFooterModule:function(){return Jw},TableHeaderComponent:function(){return qw},TableHeaderModule:function(){return Ww},TableModule:function(){return eI},TextDetailFieldComponent:function(){return _y},TextDetailFieldModule:function(){return wb},TextEditFieldComponent:function(){return Bb},TextEditFieldModule:function(){return Vb},TextListFieldComponent:function(){return lS},TextListFieldModule:function(){return uS},ThemeImagesStore:function(){return $v},TinymceDetailFieldComponent:function(){return nS},TinymceDetailFieldModule:function(){return iS},TinymceEditFieldComponent:function(){return rS},TinymceEditFieldModule:function(){return oS},TopWidgetAdapter:function(){return Ej},TopWidgetComponent:function(){return _x},TopWidgetModule:function(){return Fx},UpdateBaseCurrencyAction:function(){return Kg},UpdateCurrencyAction:function(){return zg},UpdateFlexRelateModuleAction:function(){return Gg},UrlDetailFieldComponent:function(){return by},UrlDetailFieldModule:function(){return Db},UserActionMenuUiComponent:function(){return aI},UserActionMenuUiModule:function(){return sI},UserPreferenceStore:function(){return ah},UserService:function(){return ej},ValidationManager:function(){return nv},VarcharDetailFieldComponent:function(){return yy},VarcharDetailFieldModule:function(){return Pb},VarcharEditFieldComponent:function(){return Fy},VarcharEditFieldModule:function(){return Lb},VarcharFilterFieldComponent:function(){return Yy},VarcharFilterFieldModule:function(){return ub},VerticalBarChartComponent:function(){return lg},VerticalBarChartModule:function(){return dg},ViewStore:function(){return Dw},WidgetPanelComponent:function(){return uC},WidgetPanelModule:function(){return mC},alertTypes:function(){return Hk},baseFieldComponents:function(){return dS},baseFieldModules:function(){return cS},baseViewFieldsMap:function(){return fS},booleanRequiredValidator:function(){return Mh},chartModules:function(){return hg},chartTypeMap:function(){return vg},componentTypeMap:function(){return ax},currencyValidator:function(){return Lh},dateTimeValidator:function(){return Th},dateValidator:function(){return Nh},duplicateEmailValidator:function(){return ev},emailValidator:function(){return zh},fieldComponents:function(){return IS},fieldModules:function(){return wS},floatValidator:function(){return Bh},intValidator:function(){return Vh},maxValidator:function(){return Qh},minValidator:function(){return Wh},phoneValidator:function(){return Hh},primaryEmailValidator:function(){return Xh},requiredValidator:function(){return Eh},sidebarWidgetModules:function(){return ox},topWidgetComponentTypeMap:function(){return Mx},topWidgetModules:function(){return Ex},viewFieldsMap:function(){return xS},"\u0275a":function(){return Tg},"\u0275b":function(){return Lg},"\u0275c":function(){return Fg},"\u0275d":function(){return Og},"\u0275e":function(){return Dg},"\u0275f":function(){return Ag},"\u0275g":function(){return Ng},"\u0275h":function(){return Rg},"\u0275i":function(){return $g},"\u0275j":function(){return Zg},"\u0275k":function(){return ny},"\u0275l":function(){return iy},"\u0275m":function(){return sy},"\u0275n":function(){return ay},"\u0275o":function(){return oy},"\u0275p":function(){return xj},"\u0275q":function(){return Ij},"\u0275r":function(){return wj}});var y,C,k=g(14468),w=g(80273),x=g(71180),M=g(92343),_=g(78193),F=g(34832),L=g.n(F),O=g(99957),D=g(66825),A=new Set,N=((C=function(){function e(t){I(this,e),this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):R}return j(e,[{key:"matchMedia",value:function(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function(e){if(!A.has(e))try{y||((y=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild(y)),y.sheet&&(y.sheet.insertRule("@media ".concat(e," {body{ }}"),0),A.add(e))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}]),e}()).\u0275fac=function(e){return new(e||C)(k.\u0275\u0275inject(D.t4))},C.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new C(k.\u0275\u0275inject(D.t4))},token:C,providedIn:"root"}),C);function R(e){return{matches:"all"===e||""===e,media:e,addListener:function(){},removeListener:function(){}}}var T=function(){var e=function(){function e(t,n){I(this,e),this._mediaMatcher=t,this._zone=n,this._queries=new Map,this._destroySubject=new x.Subject}return j(e,[{key:"ngOnDestroy",value:function(){this._destroySubject.next(),this._destroySubject.complete()}},{key:"isMatched",value:function(e){var t=this;return P((0,O.Eq)(e)).some(function(e){return t._registerQuery(e).mql.matches})}},{key:"observe",value:function(e){var t=this,n=P((0,O.Eq)(e)).map(function(e){return t._registerQuery(e).observable}),i=(0,x.combineLatest)(n);return(i=(0,x.concat)(i.pipe((0,M.take)(1)),i.pipe((0,M.skip)(1),(0,M.debounceTime)(0)))).pipe((0,M.map)(function(e){var t={matches:!1,breakpoints:{}};return e.forEach(function(e){var n=e.matches,i=e.query;t.matches=t.matches||n,t.breakpoints[i]=n}),t}))}},{key:"_registerQuery",value:function(e){var t=this;if(this._queries.has(e))return this._queries.get(e);var n=this._mediaMatcher.matchMedia(e),i={observable:new x.Observable(function(e){var i=function(n){return t._zone.run(function(){return e.next(n)})};return n.addListener(i),function(){n.removeListener(i)}}).pipe((0,M.startWith)(n),(0,M.map)(function(t){var n=t.matches;return{query:e,matches:n}}),(0,M.takeUntil)(this._destroySubject)),mql:n};return this._queries.set(e,i),i}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(N),k.\u0275\u0275inject(k.NgZone))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(N),k.\u0275\u0275inject(k.NgZone))},token:e,providedIn:"root"}),e}();function P(e){return e.map(function(e){return e.split(",")}).reduce(function(e,t){return e.concat(t)}).map(function(e){return e.trim()})}var B=g(1090),$=g(63593),V=g(25864),U=g(79503),K=g(39298),z=g(48317),G=g(61855),Z=g(87255),H=g(92594),q=g(85526),W=g(26670),Q=new k.InjectionToken("EventArgument",{providedIn:"root",factory:function(){return"$event"}}),Y=new k.InjectionToken("DynamicComponentInjector"),X=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}();function J(e){return new k.SimpleChange(void 0,e,!0)}function ee(){}var te=function(){var e=function(){function e(t,n,i){I(this,e),this.differs=t,this.cfr=n,this.eventArgument=i,this.checkInit=this.failInit,this.lastComponentInst=null,this.inputsDiffer=this.differs.find({}).create(),this.compFactory=null,this.outputsShouldDisconnect$=new x.Subject,this.outputsChanged=function(){return!1}}return j(e,[{key:"compRef",get:function(){return this.compInjector.componentRef}},{key:"componentInst",get:function(){return this.compRef?this.compRef.instance:null}},{key:"componentInstChanged",get:function(){return this.lastComponentInst!==this.componentInst&&(this.lastComponentInst=this.componentInst,!0)}},{key:"compCdr",get:function(){return this.compRef?this.compRef.injector.get(k.ChangeDetectorRef):null}},{key:"ngOnDestroy",value:function(){this._disconnectOutputs()}},{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.checkInit=e?ee:this.failInit,this.compInjector=e,t.trackOutputChanges){var n=this.differs.find({}).create();this.outputsChanged=function(e){return!!n.diff(e)}}}},{key:"update",value:function(e,t,n,i){this.checkInit(),this.updateIO(e,t);var r=this.componentInstChanged;if(r||n){var o=this._getInputsChanges();o&&this._updateInputChanges(o),this.updateInputs(r||!this.lastInputChanges)}(r||i)&&this.bindOutputs()}},{key:"maybeUpdate",value:function(){if(this.checkInit(),this.componentInstChanged)return this.updateInputs(!0),void this.bindOutputs();if(this.outputsChanged(this.outputs)&&this.bindOutputs(),this.inputs){var e=this._getInputsChanges();if(e){var t=!!this.lastInputChanges;this._updateInputChanges(e),t&&this.updateInputs()}}}},{key:"updateIO",value:function(e,t){this.inputs=e,this.outputs=t}},{key:"updateInputs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&this._updateCompFactory();var t=this.componentInst,n=this.inputs;!n||!t||(n=this._resolveInputs(n),Object.keys(n).forEach(function(e){return t[e]=n[e]}),this.compCdr&&this.compCdr.markForCheck(),this.notifyOnInputChanges(this.lastInputChanges,e))}},{key:"bindOutputs",value:function(){var e=this;this._disconnectOutputs();var t=this.componentInst,n=this.outputs;!n||!t||(n=this._resolveOutputs(n),Object.keys(n).filter(function(e){return t[e]}).forEach(function(i){return t[i].pipe((0,M.takeUntil)(e.outputsShouldDisconnect$)).subscribe(function(e){return n[i](e)})}))}},{key:"notifyOnInputChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;!this.componentInst.ngOnChanges||(t&&(e=this._collectFirstChanges()),this.componentInst.ngOnChanges(e))}},{key:"_disconnectOutputs",value:function(){this.outputsShouldDisconnect$.next()}},{key:"_getInputsChanges",value:function(){return this.inputsDiffer.diff(this.inputs)}},{key:"_updateInputChanges",value:function(e){this.lastInputChanges=this._collectChangesFromDiffer(e)}},{key:"_collectFirstChanges",value:function(){var e={},t=this.inputs;return Object.keys(t).forEach(function(n){return e[n]=J(t[n])}),this._resolveChanges(e)}},{key:"_collectChangesFromDiffer",value:function(e){var t={};return e.forEachAddedItem(function(e){return t[e.key]=J(e.currentValue)}),e.forEachChangedItem(function(e){return t[e.key]=function(e,t){return new k.SimpleChange(t,e,!1)}(e.currentValue,e.previousValue)}),this._resolveChanges(t)}},{key:"_resolveCompFactory",value:function(){try{try{return this.cfr.resolveComponentFactory(this.compRef.componentType)}catch(e){return this.cfr.resolveComponentFactory(this.compRef.instance.constructor)}}catch(e){return null}}},{key:"_updateCompFactory",value:function(){this.compFactory=this._resolveCompFactory()}},{key:"_resolveInputs",value:function(e){return this.compFactory?this._remapIO(e,this.compFactory.inputs):e}},{key:"_resolveOutputs",value:function(e){return e=this._processOutputs(e),this.compFactory?this._remapIO(e,this.compFactory.outputs):e}},{key:"_processOutputs",value:function(e){var t=this,n={};return Object.keys(e).forEach(function(i){var r=e[i];n[i]="function"==typeof r?r:r&&t._processOutputArgs(r)}),n}},{key:"_processOutputArgs",value:function(e){var t=this,n=e.handler,i="args"in e?e.args||[]:[this.eventArgument];return function(e){return n.apply(void 0,S(i.map(function(n){return n===t.eventArgument?e:n})))}}},{key:"_resolveChanges",value:function(e){return this.compFactory?this._remapIO(e,this.compFactory.inputs):e}},{key:"_remapIO",value:function(e,t){var n=this,i={};return Object.keys(e).forEach(function(r){var o=n._findPropByTplInMapping(r,t)||r;i[o]=e[r]}),i}},{key:"_findPropByTplInMapping",value:function(e,t){var n,i=b(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.templateName===e)return r.propName}}catch(o){i.e(o)}finally{i.f()}return null}},{key:"failInit",value:function(){throw Error("IoService: ComponentInjector was not set! Please call init() method!")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(k.KeyValueDiffers),k.\u0275\u0275inject(k.ComponentFactoryResolver),k.\u0275\u0275inject(Q))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),ne=function(){var e=function(){function e(t,n){I(this,e),this.ioService=t,this.componentInjector=n,this.ioService.init(this.componentInjector)}return j(e,[{key:"inputs",get:function(){return this.ndcDynamicInputs||this.ngComponentOutletNdcDynamicInputs}},{key:"outputs",get:function(){return this.ndcDynamicOutputs||this.ngComponentOutletNdcDynamicOutputs}},{key:"ngOnChanges",value:function(e){this.ioService.update(this.inputs,this.outputs,this.inputsChanged(e),this.outputsChanged(e))}},{key:"ngDoCheck",value:function(){this.ioService.maybeUpdate()}},{key:"inputsChanged",value:function(e){return"ngComponentOutletNdcDynamicInputs"in e||"ndcDynamicInputs"in e}},{key:"outputsChanged",value:function(e){return"ngComponentOutletNdcDynamicOutputs"in e||"ndcDynamicOutputs"in e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(te),k.\u0275\u0275directiveInject(Y,8))},e.\u0275dir=k.\u0275\u0275defineDirective({type:e,selectors:[["","ndcDynamicInputs",""],["","ndcDynamicOutputs",""],["","ngComponentOutletNdcDynamicInputs",""],["","ngComponentOutletNdcDynamicOutputs",""]],inputs:{ndcDynamicInputs:"ndcDynamicInputs",ngComponentOutletNdcDynamicInputs:"ngComponentOutletNdcDynamicInputs",ndcDynamicOutputs:"ndcDynamicOutputs",ngComponentOutletNdcDynamicOutputs:"ngComponentOutletNdcDynamicOutputs"},features:[k.\u0275\u0275ProvidersFeature([te]),k.\u0275\u0275NgOnChangesFeature]}),e}(),ie=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule],X]}),e}(),re=function(){var e=function(){function e(t,n){I(this,e),this.vcr=t,this.cfr=n,this.ndcDynamicCreated=new k.EventEmitter}return j(e,[{key:"ngOnChanges",value:function(e){e.ndcDynamicComponent&&this.createDynamicComponent()}},{key:"createDynamicComponent",value:function(){this.vcr.clear(),this.componentRef=null,this.ndcDynamicComponent&&(this.componentRef=this.vcr.createComponent(this.cfr.resolveComponentFactory(this.ndcDynamicComponent),0,this._resolveInjector(),this.ndcDynamicContent),this.ndcDynamicCreated.emit(this.componentRef))}},{key:"_resolveInjector",value:function(){var e=this.ndcDynamicInjector||this.vcr.injector;return this.ndcDynamicProviders&&(e=k.Injector.create({providers:this.ndcDynamicProviders,parent:e})),e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(k.ViewContainerRef),k.\u0275\u0275directiveInject(k.ComponentFactoryResolver))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ndc-dynamic"]],inputs:{ndcDynamicComponent:"ndcDynamicComponent",ndcDynamicInjector:"ndcDynamicInjector",ndcDynamicProviders:"ndcDynamicProviders",ndcDynamicContent:"ndcDynamicContent"},outputs:{ndcDynamicCreated:"ndcDynamicCreated"},features:[k.\u0275\u0275ProvidersFeature([{provide:Y,useExisting:e}]),k.\u0275\u0275NgOnChangesFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),oe=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,ie],ie]}),e}();new k.InjectionToken("WindowRef",{providedIn:"root",factory:function(){return window}});var ae=g(21669),se=g(64604);"undefined"!=typeof Element&&Element;var le=g(73331);function ue(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];r?e.setProperty(i,r,(null==n?void 0:n.has(i))?"important":""):e.removeProperty(i)}return e}function ce(e,t){var n=t?"":"none";ue(e.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":n,"-ms-user-select":n,"-webkit-user-select":n,"-moz-user-select":n})}function de(e,t,n){ue(e.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},n)}function fe(e,t){return t&&"none"!=t?e+" "+t:e}function pe(e){var t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function me(e,t){return e.getPropertyValue(t).split(",").map(function(e){return e.trim()})}function he(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}function ve(e,t,n){var i=e.top,r=e.bottom,o=e.left,a=e.right;return n>=i&&n<=r&&t>=o&&t<=a}function ge(e,t,n){e.top+=t,e.bottom=e.top+e.height,e.left+=n,e.right=e.left+e.width}function ye(e,t,n,i){var r=e.top,o=e.right,a=e.bottom,s=e.left,l=e.width*t,u=e.height*t;return i>r-u&&i<a+u&&n>s-l&&n<o+l}var be=function(){function e(t,n){I(this,e),this._document=t,this._viewportRuler=n,this.positions=new Map}return j(e,[{key:"clear",value:function(){this.positions.clear()}},{key:"cache",value:function(e){var t=this;this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),e.forEach(function(e){t.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:he(e)})})}},{key:"handleScroll",value:function(e){var t=(0,D.sA)(e),n=this.positions.get(t);if(!n)return null;var i,r,o=t===this._document?t.documentElement:t,a=n.scrollPosition;if(t===this._document){var s=this._viewportRuler.getViewportScrollPosition();i=s.top,r=s.left}else i=t.scrollTop,r=t.scrollLeft;var l=a.top-i,u=a.left-r;return this.positions.forEach(function(e,n){e.clientRect&&t!==n&&o.contains(n)&&ge(e.clientRect,l,u)}),a.top=i,a.left=r,{top:l,left:u}}}]),e}();function Se(e){var t=e.cloneNode(!0),n=t.querySelectorAll("[id]"),i=e.nodeName.toLowerCase();t.removeAttribute("id");for(var r=0;r<n.length;r++)n[r].removeAttribute("id");return"canvas"===i?Ie(e,t):("input"===i||"select"===i||"textarea"===i)&&we(e,t),Ce("canvas",e,t,Ie),Ce("input, textarea, select",e,t,we),t}function Ce(e,t,n,i){var r=t.querySelectorAll(e);if(r.length)for(var o=n.querySelectorAll(e),a=0;a<r.length;a++)i(r[a],o[a])}var ke=0;function we(e,t){"file"!==t.type&&(t.value=e.value),"radio"===t.type&&t.name&&(t.name="mat-clone-".concat(t.name,"-").concat(ke++))}function Ie(e,t){var n=t.getContext("2d");if(n)try{n.drawImage(e,0,0)}catch(i){}}var xe=(0,D.i$)({passive:!0}),je=(0,D.i$)({passive:!1}),Ee=new Set(["position"]),Me=function(){function e(t,n,i,r,o,a){var s=this;I(this,e),this._config=n,this._document=i,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=a,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new x.Subject,this._pointerMoveSubscription=x.Subscription.EMPTY,this._pointerUpSubscription=x.Subscription.EMPTY,this._scrollSubscription=x.Subscription.EMPTY,this._resizeSubscription=x.Subscription.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new x.Subject,this.started=new x.Subject,this.released=new x.Subject,this.ended=new x.Subject,this.entered=new x.Subject,this.exited=new x.Subject,this.dropped=new x.Subject,this.moved=this._moveEvents,this._pointerDown=function(e){if(s.beforeStarted.next(),s._handles.length){var t=s._handles.find(function(t){var n=(0,D.sA)(e);return!!n&&(n===t||t.contains(n))});t&&!s._disabledHandles.has(t)&&!s.disabled&&s._initializeDragSequence(t,e)}else s.disabled||s._initializeDragSequence(s._rootElement,e)},this._pointerMove=function(e){var t=s._getPointerPositionOnPage(e);if(s._hasStartedDragging){s._boundaryElement&&(!s._previewRect||!s._previewRect.width&&!s._previewRect.height)&&(s._previewRect=(s._preview||s._rootElement).getBoundingClientRect()),e.preventDefault();var n=s._getConstrainedPointerPosition(t);if(s._hasMoved=!0,s._lastKnownPointerPosition=t,s._updatePointerDirectionDelta(n),s._dropContainer)s._updateActiveDropContainer(n,t);else{var i=s._activeTransform;i.x=n.x-s._pickupPositionOnPage.x+s._passiveTransform.x,i.y=n.y-s._pickupPositionOnPage.y+s._passiveTransform.y,s._applyRootElementTransform(i.x,i.y),"undefined"!=typeof SVGElement&&s._rootElement instanceof SVGElement&&s._rootElement.setAttribute("transform","translate(".concat(i.x," ").concat(i.y,")"))}s._moveEvents.observers.length&&s._ngZone.run(function(){s._moveEvents.next({source:s,pointerPosition:n,event:e,distance:s._getDragDistance(n),delta:s._pointerDirectionDelta})})}else if(Math.abs(t.x-s._pickupPositionOnPage.x)+Math.abs(t.y-s._pickupPositionOnPage.y)>=s._config.dragStartThreshold){var r=Date.now()>=s._dragStartTime+s._getDragStartDelay(e),o=s._dropContainer;if(!r)return void s._endDragSequence(e);(!o||!o.isDragging()&&!o.isReceiving())&&(e.preventDefault(),s._hasStartedDragging=!0,s._ngZone.run(function(){return s._startDragSequence(e)}))}},this._pointerUp=function(e){s._endDragSequence(e)},this.withRootElement(t).withParent(n.parentDragRef||null),this._parentPositions=new be(i,o),a.registerDragItem(this)}return j(e,[{key:"disabled",get:function(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)},set:function(e){var t=(0,O.Ig)(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(function(e){return ce(e,t)}))}},{key:"getPlaceholderElement",value:function(){return this._placeholder}},{key:"getRootElement",value:function(){return this._rootElement}},{key:"getVisibleElement",value:function(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}},{key:"withHandles",value:function(e){var t=this;this._handles=e.map(function(e){return(0,O.fI)(e)}),this._handles.forEach(function(e){return ce(e,t.disabled)}),this._toggleNativeDragInteractions();var n=new Set;return this._disabledHandles.forEach(function(e){t._handles.indexOf(e)>-1&&n.add(e)}),this._disabledHandles=n,this}},{key:"withPreviewTemplate",value:function(e){return this._previewTemplate=e,this}},{key:"withPlaceholderTemplate",value:function(e){return this._placeholderTemplate=e,this}},{key:"withRootElement",value:function(e){var t=this,n=(0,O.fI)(e);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(function(){n.addEventListener("mousedown",t._pointerDown,je),n.addEventListener("touchstart",t._pointerDown,xe)}),this._initialTransform=void 0,this._rootElement=n),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}},{key:"withBoundaryElement",value:function(e){var t=this;return this._boundaryElement=e?(0,O.fI)(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(function(){return t._containInsideBoundaryOnResize()})),this}},{key:"withParent",value:function(e){return this._parentDragRef=e,this}},{key:"dispose",value:function(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&Le(this._rootElement),Le(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}},{key:"isDragging",value:function(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}},{key:"reset",value:function(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}},{key:"disableHandle",value:function(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),ce(e,!0))}},{key:"enableHandle",value:function(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),ce(e,this.disabled))}},{key:"withDirection",value:function(e){return this._direction=e,this}},{key:"_withDropContainer",value:function(e){this._dropContainer=e}},{key:"getFreeDragPosition",value:function(){var e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}},{key:"setFreeDragPosition",value:function(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}},{key:"withPreviewContainer",value:function(e){return this._previewContainer=e,this}},{key:"_sortFromLastPointerPosition",value:function(){var e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}},{key:"_removeSubscriptions",value:function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}},{key:"_destroyPreview",value:function(){this._preview&&Le(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}},{key:"_destroyPlaceholder",value:function(){this._placeholder&&Le(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}},{key:"_endDragSequence",value:function(e){var t=this;if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(function(){t._cleanupDragArtifacts(e),t._cleanupCachedDimensions(),t._dragDropRegistry.stopDragging(t)});else{this._passiveTransform.x=this._activeTransform.x;var n=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(function(){t.ended.next({source:t,distance:t._getDragDistance(n),dropPoint:n})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}},{key:"_startDragSequence",value:function(e){Oe(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();var t=this._dropContainer;if(t){var n=this._rootElement,i=n.parentNode,r=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();i.insertBefore(o,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),de(n,!1,Ee),this._document.body.appendChild(i.replaceChild(r,n)),this._getPreviewInsertionPoint(i,a).appendChild(this._preview),this.started.next({source:this}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}},{key:"_initializeDragSequence",value:function(e,t){var n=this;this._parentDragRef&&t.stopPropagation();var i,r=this.isDragging(),o=Oe(t),a=!o&&0!==t.button,s=this._rootElement,l=(0,D.sA)(t),u=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),c=o?function(e){var t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}(t):0===(i=t).offsetX&&0===i.offsetY;if(l&&l.draggable&&"mousedown"===t.type&&t.preventDefault(),!(r||a||u||c)){this._handles.length&&(this._rootElementTapHighlight=s.style.webkitTapHighlightColor||"",s.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(function(e){return n._updateOnScroll(e)}),this._boundaryElement&&(this._boundaryRect=he(this._boundaryElement));var d=this._previewTemplate;this._pickupPositionInElement=d&&d.template&&!d.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);var f=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:f.x,y:f.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}}},{key:"_cleanupDragArtifacts",value:function(e){var t=this;de(this._rootElement,!0,Ee),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(function(){var n=t._dropContainer,i=n.getItemIndex(t),r=t._getPointerPositionOnPage(e),o=t._getDragDistance(r),a=n._isOverContainer(r.x,r.y);t.ended.next({source:t,distance:o,dropPoint:r}),t.dropped.next({item:t,currentIndex:i,previousIndex:t._initialIndex,container:n,previousContainer:t._initialContainer,isPointerOverContainer:a,distance:o,dropPoint:r}),n.drop(t,i,t._initialIndex,t._initialContainer,a,o,r),t._dropContainer=t._initialContainer})}},{key:"_updateActiveDropContainer",value:function(e,t){var n=this,i=e.x,r=e.y,o=t.x,a=t.y,s=this._initialContainer._getSiblingContainerFromPosition(this,i,r);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,r)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(function(){n.exited.next({item:n,container:n._dropContainer}),n._dropContainer.exit(n),n._dropContainer=s,n._dropContainer.enter(n,i,r,s===n._initialContainer&&s.sortingDisabled?n._initialIndex:void 0),n.entered.next({item:n,container:s,currentIndex:s.getItemIndex(n)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(o,a),this._dropContainer._sortItem(this,i,r,this._pointerDirectionDelta),this._applyPreviewTransform(i-this._pickupPositionInElement.x,r-this._pickupPositionInElement.y))}},{key:"_createPreviewElement",value:function(){var e,t=this._previewTemplate,n=this.previewClass,i=t?t.template:null;if(i&&t){var r=t.matchSize?this._rootElement.getBoundingClientRect():null,o=t.viewContainer.createEmbeddedView(i,t.context);o.detectChanges(),e=De(o,this._document),this._previewRef=o,t.matchSize?Ae(e,r):e.style.transform=_e(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var a=this._rootElement;Ae(e=Se(a),a.getBoundingClientRect()),this._initialTransform&&(e.style.transform=this._initialTransform)}return ue(e.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":"".concat(this._config.zIndex||1e3)},Ee),ce(e,!1),e.classList.add("cdk-drag-preview"),e.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach(function(t){return e.classList.add(t)}):e.classList.add(n)),e}},{key:"_animatePreviewToPlaceholder",value:function(){var e=this;if(!this._hasMoved)return Promise.resolve();var t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);var n=function(e){var t=getComputedStyle(e),n=me(t,"transition-property"),i=n.find(function(e){return"transform"===e||"all"===e});if(!i)return 0;var r=n.indexOf(i),o=me(t,"transition-duration"),a=me(t,"transition-delay");return pe(o[r])+pe(a[r])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular(function(){return new Promise(function(t){var i=function n(i){var o;(!i||(0,D.sA)(i)===e._preview&&"transform"===i.propertyName)&&(null===(o=e._preview)||void 0===o||o.removeEventListener("transitionend",n),t(),clearTimeout(r))},r=setTimeout(i,1.5*n);e._preview.addEventListener("transitionend",i)})})}},{key:"_createPlaceholderElement",value:function(){var e,t=this._placeholderTemplate,n=t?t.template:null;return n?(this._placeholderRef=t.viewContainer.createEmbeddedView(n,t.context),this._placeholderRef.detectChanges(),e=De(this._placeholderRef,this._document)):e=Se(this._rootElement),e.classList.add("cdk-drag-placeholder"),e}},{key:"_getPointerPositionInElement",value:function(e,t){var n=this._rootElement.getBoundingClientRect(),i=e===this._rootElement?null:e,r=i?i.getBoundingClientRect():n,o=Oe(t)?t.targetTouches[0]:t,a=this._getViewportScrollPosition();return{x:r.left-n.left+(o.pageX-r.left-a.left),y:r.top-n.top+(o.pageY-r.top-a.top)}}},{key:"_getPointerPositionOnPage",value:function(e){var t=this._getViewportScrollPosition(),n=Oe(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=n.pageX-t.left,r=n.pageY-t.top;if(this._ownerSVGElement){var o=this._ownerSVGElement.getScreenCTM();if(o){var a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=r,a.matrixTransform(o.inverse())}}return{x:i,y:r}}},{key:"_getConstrainedPointerPosition",value:function(e){var t=this._dropContainer?this._dropContainer.lockAxis:null,n=this.constrainPosition?this.constrainPosition(e,this):e,i=n.x,r=n.y;if("x"===this.lockAxis||"x"===t?r=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(i=this._pickupPositionOnPage.x),this._boundaryRect){var o=this._pickupPositionInElement,a=o.x,s=o.y,l=this._boundaryRect,u=this._previewRect,c=l.top+s,d=l.bottom-(u.height-s);i=Fe(i,l.left+a,l.right-(u.width-a)),r=Fe(r,c,d)}return{x:i,y:r}}},{key:"_updatePointerDirectionDelta",value:function(e){var t=e.x,n=e.y,i=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-r.x),a=Math.abs(n-r.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=t>r.x?1:-1,r.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=n>r.y?1:-1,r.y=n),i}},{key:"_toggleNativeDragInteractions",value:function(){if(this._rootElement&&this._handles){var e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,ce(this._rootElement,e))}}},{key:"_removeRootElementListeners",value:function(e){e.removeEventListener("mousedown",this._pointerDown,je),e.removeEventListener("touchstart",this._pointerDown,xe)}},{key:"_applyRootElementTransform",value:function(e,t){var n=_e(e,t);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform&&"none"!=this._rootElement.style.transform?this._rootElement.style.transform:""),this._rootElement.style.transform=fe(n,this._initialTransform)}},{key:"_applyPreviewTransform",value:function(e,t){var n,i=(null===(n=this._previewTemplate)||void 0===n?void 0:n.template)?void 0:this._initialTransform,r=_e(e,t);this._preview.style.transform=fe(r,i)}},{key:"_getDragDistance",value:function(e){var t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}},{key:"_cleanupCachedDimensions",value:function(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}},{key:"_containInsideBoundaryOnResize",value:function(){var e=this._passiveTransform,t=e.x,n=e.y;if(!(0===t&&0===n||this.isDragging())&&this._boundaryElement){var i=this._boundaryElement.getBoundingClientRect(),r=this._rootElement.getBoundingClientRect();if(!(0===i.width&&0===i.height||0===r.width&&0===r.height)){var o=i.left-r.left,a=r.right-i.right,s=i.top-r.top,l=r.bottom-i.bottom;i.width>r.width?(o>0&&(t+=o),a>0&&(t-=a)):t=0,i.height>r.height?(s>0&&(n+=s),l>0&&(n-=l)):n=0,(t!==this._passiveTransform.x||n!==this._passiveTransform.y)&&this.setFreeDragPosition({y:n,x:t})}}}},{key:"_getDragStartDelay",value:function(e){var t=this.dragStartDelay;return"number"==typeof t?t:Oe(e)?t.touch:t?t.mouse:0}},{key:"_updateOnScroll",value:function(e){var t=this._parentPositions.handleScroll(e);if(t){var n=(0,D.sA)(e);this._boundaryRect&&(n===this._document||n!==this._boundaryElement&&n.contains(this._boundaryElement))&&ge(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}},{key:"_getViewportScrollPosition",value:function(){var e=this._parentPositions.positions.get(this._document);return e?e.scrollPosition:this._viewportRuler.getViewportScrollPosition()}},{key:"_getShadowRoot",value:function(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,D.kV)(this._rootElement)),this._cachedShadowRoot}},{key:"_getPreviewInsertionPoint",value:function(e,t){var n=this._previewContainer||"global";if("parent"===n)return e;if("global"===n){var i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return(0,O.fI)(n)}}]),e}();function _e(e,t){return"translate3d(".concat(Math.round(e),"px, ").concat(Math.round(t),"px, 0)")}function Fe(e,t,n){return Math.max(t,Math.min(n,e))}function Le(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Oe(e){return"t"===e.type[0]}function De(e,t){var n=e.rootNodes;if(1===n.length&&n[0].nodeType===t.ELEMENT_NODE)return n[0];var i=t.createElement("div");return n.forEach(function(e){return i.appendChild(e)}),i}function Ae(e,t){e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px"),e.style.transform=_e(t.left,t.top)}function Ne(e,t,n){var i=Re(t,e.length-1),r=Re(n,e.length-1);if(i!==r){for(var o=e[i],a=r<i?-1:1,s=i;s!==r;s+=a)e[s]=e[s+a];e[r]=o}}function Re(e,t){return Math.max(0,Math.min(t,e))}var Te=function(){function e(t,n,i,r,o){var a=this;I(this,e),this._dragDropRegistry=n,this._ngZone=r,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=function(){return!0},this.sortPredicate=function(){return!0},this.beforeStarted=new x.Subject,this.entered=new x.Subject,this.exited=new x.Subject,this.dropped=new x.Subject,this.sorted=new x.Subject,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=x.Subscription.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new x.Subject,this._cachedShadowRoot=null,this._startScrollInterval=function(){a._stopScrolling(),(0,x.interval)(0,x.animationFrameScheduler).pipe((0,M.takeUntil)(a._stopScrollTimers)).subscribe(function(){var e=a._scrollNode,t=a.autoScrollStep;1===a._verticalScrollDirection?Be(e,-t):2===a._verticalScrollDirection&&Be(e,t),1===a._horizontalScrollDirection?$e(e,-t):2===a._horizontalScrollDirection&&$e(e,t)})},this.element=(0,O.fI)(t),this._document=i,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new be(i,o)}return j(e,[{key:"dispose",value:function(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}},{key:"isDragging",value:function(){return this._isDragging}},{key:"start",value:function(){this._draggingStarted(),this._notifyReceivingSiblings()}},{key:"enter",value:function(e,t,n,i){var r;this._draggingStarted(),null==i?-1===(r=this.sortingDisabled?this._draggables.indexOf(e):-1)&&(r=this._getItemIndexFromPointerPosition(e,t,n)):r=i;var o=this._activeDraggables,a=o.indexOf(e),s=e.getPlaceholderElement(),l=o[r];if(l===e&&(l=o[r+1]),a>-1&&o.splice(a,1),l&&!this._dragDropRegistry.isDragging(l)){var u=l.getRootElement();u.parentElement.insertBefore(s,u),o.splice(r,0,e)}else if(this._shouldEnterAsFirstChild(t,n)){var c=o[0].getRootElement();c.parentNode.insertBefore(s,c),o.unshift(e)}else(0,O.fI)(this.element).appendChild(s),o.push(e);s.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}},{key:"exit",value:function(e){this._reset(),this.exited.next({item:e,container:this})}},{key:"drop",value:function(e,t,n,i,r,o,a){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:n,container:this,previousContainer:i,isPointerOverContainer:r,distance:o,dropPoint:a})}},{key:"withItems",value:function(e){var t=this,n=this._draggables;return this._draggables=e,e.forEach(function(e){return e._withDropContainer(t)}),this.isDragging()&&(n.filter(function(e){return e.isDragging()}).every(function(t){return-1===e.indexOf(t)})?this._reset():this._cacheItems()),this}},{key:"withDirection",value:function(e){return this._direction=e,this}},{key:"connectedTo",value:function(e){return this._siblings=e.slice(),this}},{key:"withOrientation",value:function(e){return this._orientation=e,this}},{key:"withScrollableParents",value:function(e){var t=(0,O.fI)(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t].concat(S(e)):e.slice(),this}},{key:"getScrollableParents",value:function(){return this._scrollableElements}},{key:"getItemIndex",value:function(e){return this._isDragging?Pe("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,function(t){return t.drag===e}):this._draggables.indexOf(e)}},{key:"isReceiving",value:function(){return this._activeSiblings.size>0}},{key:"_sortItem",value:function(e,t,n,i){if(!this.sortingDisabled&&this._clientRect&&ye(this._clientRect,.05,t,n)){var r=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,n,i);if(!(-1===o&&r.length>0)){var a="horizontal"===this._orientation,s=Pe(r,function(t){return t.drag===e}),l=r[o],u=l.clientRect,c=s>o?1:-1,d=this._getItemOffsetPx(r[s].clientRect,u,c),f=this._getSiblingOffsetPx(s,r,c),p=r.slice();Ne(r,s,o),this.sorted.next({previousIndex:s,currentIndex:o,container:this,item:e}),r.forEach(function(t,n){if(p[n]!==t){var i=t.drag===e,r=i?d:f,o=i?e.getPlaceholderElement():t.drag.getRootElement();t.offset+=r,a?(o.style.transform=fe("translate3d(".concat(Math.round(t.offset),"px, 0, 0)"),t.initialTransform),ge(t.clientRect,0,r)):(o.style.transform=fe("translate3d(0, ".concat(Math.round(t.offset),"px, 0)"),t.initialTransform),ge(t.clientRect,r,0))}}),this._previousSwap.overlaps=ve(u,t,n),this._previousSwap.drag=l.drag,this._previousSwap.delta=a?i.x:i.y}}}},{key:"_startScrollingIfNecessary",value:function(e,t){var n=this;if(!this.autoScrollDisabled){var i,r=0,o=0;if(this._parentPositions.positions.forEach(function(a,s){var l;s===n._document||!a.clientRect||i||ye(a.clientRect,.05,e,t)&&(l=v(function(e,t,n,i){var r=Ve(t,i),o=Ue(t,n),a=0,s=0;if(r){var l=e.scrollTop;1===r?l>0&&(a=1):e.scrollHeight-l>e.clientHeight&&(a=2)}if(o){var u=e.scrollLeft;1===o?u>0&&(s=1):e.scrollWidth-u>e.clientWidth&&(s=2)}return[a,s]}(s,a.clientRect,e,t),2),r=l[0],o=l[1],(r||o)&&(i=s))}),!r&&!o){var a=this._viewportRuler.getViewportSize(),s=a.width,l=a.height,u={width:s,height:l,top:0,right:s,bottom:l,left:0};r=Ve(u,t),o=Ue(u,e),i=window}i&&(r!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=o,this._scrollNode=i,(r||o)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}}},{key:"_stopScrolling",value:function(){this._stopScrollTimers.next()}},{key:"_draggingStarted",value:function(){var e=(0,O.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}},{key:"_cacheParentPositions",value:function(){var e=(0,O.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}},{key:"_cacheItemPositions",value:function(){var e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(function(e){var t=e.getVisibleElement();return{drag:e,offset:0,initialTransform:t.style.transform||"",clientRect:he(t)}}).sort(function(t,n){return e?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top})}},{key:"_reset",value:function(){var e=this;this._isDragging=!1;var t=(0,O.fI)(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(function(t){var n,i=t.getRootElement();if(i){var r=null===(n=e._itemPositions.find(function(e){return e.drag===t}))||void 0===n?void 0:n.initialTransform;i.style.transform=r||""}}),this._siblings.forEach(function(t){return t._stopReceiving(e)}),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}},{key:"_getSiblingOffsetPx",value:function(e,t,n){var i="horizontal"===this._orientation,r=t[e].clientRect,o=t[e+-1*n],a=r[i?"width":"height"]*n;if(o){var s=i?"left":"top",l=i?"right":"bottom";-1===n?a-=o.clientRect[s]-r[l]:a+=r[s]-o.clientRect[l]}return a}},{key:"_getItemOffsetPx",value:function(e,t,n){var i="horizontal"===this._orientation,r=i?t.left-e.left:t.top-e.top;return-1===n&&(r+=i?t.width-e.width:t.height-e.height),r}},{key:"_shouldEnterAsFirstChild",value:function(e,t){if(!this._activeDraggables.length)return!1;var n=this._itemPositions,i="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){var r=n[n.length-1].clientRect;return i?e>=r.right:t>=r.bottom}var o=n[0].clientRect;return i?e<=o.left:t<=o.top}},{key:"_getItemIndexFromPointerPosition",value:function(e,t,n,i){var r=this,o="horizontal"===this._orientation,a=Pe(this._itemPositions,function(a,s,l){var u=a.drag,c=a.clientRect;if(u===e)return l.length<2;if(i){var d=o?i.x:i.y;if(u===r._previousSwap.drag&&r._previousSwap.overlaps&&d===r._previousSwap.delta)return!1}return o?t>=Math.floor(c.left)&&t<Math.floor(c.right):n>=Math.floor(c.top)&&n<Math.floor(c.bottom)});return-1!==a&&this.sortPredicate(a,e,this)?a:-1}},{key:"_cacheItems",value:function(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}},{key:"_isOverContainer",value:function(e,t){return null!=this._clientRect&&ve(this._clientRect,e,t)}},{key:"_getSiblingContainerFromPosition",value:function(e,t,n){return this._siblings.find(function(i){return i._canReceive(e,t,n)})}},{key:"_canReceive",value:function(e,t,n){if(!this._clientRect||!ve(this._clientRect,t,n)||!this.enterPredicate(e,this))return!1;var i=this._getShadowRoot().elementFromPoint(t,n);if(!i)return!1;var r=(0,O.fI)(this.element);return i===r||r.contains(i)}},{key:"_startReceiving",value:function(e,t){var n=this,i=this._activeSiblings;!i.has(e)&&t.every(function(e){return n.enterPredicate(e,n)||n._draggables.indexOf(e)>-1})&&(i.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}},{key:"_stopReceiving",value:function(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}},{key:"_listenToScrollEvents",value:function(){var e=this;this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(function(t){if(e.isDragging()){var n=e._parentPositions.handleScroll(t);n&&(e._itemPositions.forEach(function(e){ge(e.clientRect,n.top,n.left)}),e._itemPositions.forEach(function(t){var n=t.drag;e._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()}))}else e.isReceiving()&&e._cacheParentPositions()})}},{key:"_getShadowRoot",value:function(){if(!this._cachedShadowRoot){var e=(0,D.kV)((0,O.fI)(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}},{key:"_notifyReceivingSiblings",value:function(){var e=this,t=this._activeDraggables.filter(function(e){return e.isDragging()});this._siblings.forEach(function(n){return n._startReceiving(e,t)})}}]),e}();function Pe(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1}function Be(e,t){e===window?e.scrollBy(0,t):e.scrollTop+=t}function $e(e,t){e===window?e.scrollBy(t,0):e.scrollLeft+=t}function Ve(e,t){var n=e.top,i=e.bottom,r=.05*e.height;return t>=n-r&&t<=n+r?1:t>=i-r&&t<=i+r?2:0}function Ue(e,t){var n=e.left,i=e.right,r=.05*e.width;return t>=n-r&&t<=n+r?1:t>=i-r&&t<=i+r?2:0}var Ke=(0,D.i$)({passive:!1,capture:!0}),ze=function(){var e=function(){function e(t,n){var i=this;I(this,e),this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=function(e){return e.isDragging()},this.pointerMove=new x.Subject,this.pointerUp=new x.Subject,this.scroll=new x.Subject,this._preventDefaultWhileDragging=function(e){i._activeDragInstances.length>0&&e.preventDefault()},this._persistentTouchmoveListener=function(e){i._activeDragInstances.length>0&&(i._activeDragInstances.some(i._draggingPredicate)&&e.preventDefault(),i.pointerMove.next(e))},this._document=n}return j(e,[{key:"registerDropContainer",value:function(e){this._dropInstances.has(e)||this._dropInstances.add(e)}},{key:"registerDragItem",value:function(e){var t=this;this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(function(){t._document.addEventListener("touchmove",t._persistentTouchmoveListener,Ke)})}},{key:"removeDropContainer",value:function(e){this._dropInstances.delete(e)}},{key:"removeDragItem",value:function(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Ke)}},{key:"startDragging",value:function(e,t){var n=this;if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){var i=t.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:function(e){return n.pointerUp.next(e)},options:!0}).set("scroll",{handler:function(e){return n.scroll.next(e)},options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Ke}),i||this._globalListeners.set("mousemove",{handler:function(e){return n.pointerMove.next(e)},options:Ke}),this._ngZone.runOutsideAngular(function(){n._globalListeners.forEach(function(e,t){n._document.addEventListener(t,e.handler,e.options)})})}}},{key:"stopDragging",value:function(e){var t=this._activeDragInstances.indexOf(e);t>-1&&(this._activeDragInstances.splice(t,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}},{key:"isDragging",value:function(e){return this._activeDragInstances.indexOf(e)>-1}},{key:"scrolled",value:function(e){var t=this,n=[this.scroll];return e&&e!==this._document&&n.push(new x.Observable(function(n){return t._ngZone.runOutsideAngular(function(){var i=function(e){t._activeDragInstances.length&&n.next(e)};return e.addEventListener("scroll",i,!0),function(){e.removeEventListener("scroll",i,!0)}})})),x.merge.apply(void 0,n)}},{key:"ngOnDestroy",value:function(){var e=this;this._dragInstances.forEach(function(t){return e.removeDragItem(t)}),this._dropInstances.forEach(function(t){return e.removeDropContainer(t)}),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}},{key:"_clearGlobalListeners",value:function(){var e=this;this._globalListeners.forEach(function(t,n){e._document.removeEventListener(n,t.handler,t.options)}),this._globalListeners.clear()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(k.NgZone),k.\u0275\u0275inject(B.DOCUMENT))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(k.NgZone),k.\u0275\u0275inject(B.DOCUMENT))},token:e,providedIn:"root"}),e}(),Ge={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Ze=function(){var e=function(){function e(t,n,i,r){I(this,e),this._document=t,this._ngZone=n,this._viewportRuler=i,this._dragDropRegistry=r}return j(e,[{key:"createDrag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ge;return new Me(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}},{key:"createDropList",value:function(e){return new Te(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(B.DOCUMENT),k.\u0275\u0275inject(k.NgZone),k.\u0275\u0275inject(ae.rL),k.\u0275\u0275inject(ze))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(B.DOCUMENT),k.\u0275\u0275inject(k.NgZone),k.\u0275\u0275inject(ae.rL),k.\u0275\u0275inject(ze))},token:e,providedIn:"root"}),e}(),He=new k.InjectionToken("CDK_DRAG_PARENT"),qe=new k.InjectionToken("CdkDropListGroup"),We=new k.InjectionToken("CDK_DRAG_CONFIG"),Qe=0,Ye=new k.InjectionToken("CdkDropList"),Xe=function(){var e=function(){function e(t,n,i,r,o,a,s){var l=this;I(this,e),this.element=t,this._changeDetectorRef=i,this._scrollDispatcher=r,this._dir=o,this._group=a,this._destroyed=new x.Subject,this.connectedTo=[],this.id="cdk-drop-list-"+Qe++,this.enterPredicate=function(){return!0},this.sortPredicate=function(){return!0},this.dropped=new k.EventEmitter,this.entered=new k.EventEmitter,this.exited=new k.EventEmitter,this.sorted=new k.EventEmitter,this._unsortedItems=new Set,this._dropListRef=n.createDropList(t),this._dropListRef.data=this,s&&this._assignDefaults(s),this._dropListRef.enterPredicate=function(e,t){return l.enterPredicate(e.data,t.data)},this._dropListRef.sortPredicate=function(e,t,n){return l.sortPredicate(e,t.data,n.data)},this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),a&&a._items.add(this)}return j(e,[{key:"disabled",get:function(){return this._disabled||!!this._group&&this._group.disabled},set:function(e){this._dropListRef.disabled=this._disabled=(0,O.Ig)(e)}},{key:"addItem",value:function(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"removeItem",value:function(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"getSortedItems",value:function(){return Array.from(this._unsortedItems).sort(function(e,t){return e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1})}},{key:"ngOnDestroy",value:function(){var t=e._dropLists.indexOf(this);t>-1&&e._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}},{key:"_setupInputSyncSubscription",value:function(t){var n=this;this._dir&&this._dir.change.pipe((0,M.startWith)(this._dir.value),(0,M.takeUntil)(this._destroyed)).subscribe(function(e){return t.withDirection(e)}),t.beforeStarted.subscribe(function(){var i=(0,O.Eq)(n.connectedTo).map(function(t){return"string"==typeof t?e._dropLists.find(function(e){return e.id===t}):t});if(n._group&&n._group._items.forEach(function(e){-1===i.indexOf(e)&&i.push(e)}),!n._scrollableParentsResolved){var r=n._scrollDispatcher.getAncestorScrollContainers(n.element).map(function(e){return e.getElementRef().nativeElement});n._dropListRef.withScrollableParents(r),n._scrollableParentsResolved=!0}t.disabled=n.disabled,t.lockAxis=n.lockAxis,t.sortingDisabled=(0,O.Ig)(n.sortingDisabled),t.autoScrollDisabled=(0,O.Ig)(n.autoScrollDisabled),t.autoScrollStep=(0,O.su)(n.autoScrollStep,2),t.connectedTo(i.filter(function(e){return e&&e!==n}).map(function(e){return e._dropListRef})).withOrientation(n.orientation)})}},{key:"_handleEvents",value:function(e){var t=this;e.beforeStarted.subscribe(function(){t._syncItemsWithRef(),t._changeDetectorRef.markForCheck()}),e.entered.subscribe(function(e){t.entered.emit({container:t,item:e.item.data,currentIndex:e.currentIndex})}),e.exited.subscribe(function(e){t.exited.emit({container:t,item:e.item.data}),t._changeDetectorRef.markForCheck()}),e.sorted.subscribe(function(e){t.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:t,item:e.item.data})}),e.dropped.subscribe(function(e){t.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance,dropPoint:e.dropPoint}),t._changeDetectorRef.markForCheck()})}},{key:"_assignDefaults",value:function(e){var t=e.lockAxis,n=e.draggingDisabled,i=e.sortingDisabled,r=e.listAutoScrollDisabled,o=e.listOrientation;this.disabled=null!=n&&n,this.sortingDisabled=null!=i&&i,this.autoScrollDisabled=null!=r&&r,this.orientation=o||"vertical",t&&(this.lockAxis=t)}},{key:"_syncItemsWithRef",value:function(){this._dropListRef.withItems(this.getSortedItems().map(function(e){return e._dragRef}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(k.ElementRef),k.\u0275\u0275directiveInject(Ze),k.\u0275\u0275directiveInject(k.ChangeDetectorRef),k.\u0275\u0275directiveInject(ae.mF),k.\u0275\u0275directiveInject(le.Is,8),k.\u0275\u0275directiveInject(qe,12),k.\u0275\u0275directiveInject(We,8))},e.\u0275dir=k.\u0275\u0275defineDirective({type:e,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,t){2&e&&(k.\u0275\u0275attribute("id",t.id),k.\u0275\u0275classProp("cdk-drop-list-disabled",t.disabled)("cdk-drop-list-dragging",t._dropListRef.isDragging())("cdk-drop-list-receiving",t._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],orientation:["cdkDropListOrientation","orientation"],lockAxis:["cdkDropListLockAxis","lockAxis"],data:["cdkDropListData","data"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[k.\u0275\u0275ProvidersFeature([{provide:qe,useValue:void 0},{provide:Ye,useExisting:e}])]}),e._dropLists=[],e}(),Je=new k.InjectionToken("CdkDragHandle"),et=new k.InjectionToken("CdkDragPlaceholder"),tt=new k.InjectionToken("CdkDragPreview"),nt=function(){var e=function(){function e(t,n,i,r,o,a,s,l,u,c,d){var f=this;I(this,e),this.element=t,this.dropContainer=n,this._ngZone=r,this._viewContainerRef=o,this._dir=s,this._changeDetectorRef=u,this._selfHandle=c,this._parentDrag=d,this._destroyed=new x.Subject,this.started=new k.EventEmitter,this.released=new k.EventEmitter,this.ended=new k.EventEmitter,this.entered=new k.EventEmitter,this.exited=new k.EventEmitter,this.dropped=new k.EventEmitter,this.moved=new x.Observable(function(e){var t=f._dragRef.moved.pipe((0,M.map)(function(e){return{source:f,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta,distance:e.distance}})).subscribe(e);return function(){t.unsubscribe()}}),this._dragRef=l.createDrag(t,{dragStartThreshold:a&&null!=a.dragStartThreshold?a.dragStartThreshold:5,pointerDirectionChangeThreshold:a&&null!=a.pointerDirectionChangeThreshold?a.pointerDirectionChangeThreshold:5,zIndex:null==a?void 0:a.zIndex}),this._dragRef.data=this,e._dragInstances.push(this),a&&this._assignDefaults(a),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}return j(e,[{key:"disabled",get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(e){this._disabled=(0,O.Ig)(e),this._dragRef.disabled=this._disabled}},{key:"getPlaceholderElement",value:function(){return this._dragRef.getPlaceholderElement()}},{key:"getRootElement",value:function(){return this._dragRef.getRootElement()}},{key:"reset",value:function(){this._dragRef.reset()}},{key:"getFreeDragPosition",value:function(){return this._dragRef.getFreeDragPosition()}},{key:"ngAfterViewInit",value:function(){var e=this;this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.pipe((0,M.take)(1),(0,M.takeUntil)(e._destroyed)).subscribe(function(){e._updateRootElement(),e._setupHandlesListener(),e.freeDragPosition&&e._dragRef.setFreeDragPosition(e.freeDragPosition)})})}},{key:"ngOnChanges",value:function(e){var t=e.rootElementSelector,n=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}},{key:"ngOnDestroy",value:function(){var t=this;this.dropContainer&&this.dropContainer.removeItem(this);var n=e._dragInstances.indexOf(this);n>-1&&e._dragInstances.splice(n,1),this._ngZone.runOutsideAngular(function(){t._destroyed.next(),t._destroyed.complete(),t._dragRef.dispose()})}},{key:"_updateRootElement",value:function(){var e=this.element.nativeElement,t=this.rootElementSelector?it(e,this.rootElementSelector):e;this._dragRef.withRootElement(t||e)}},{key:"_getBoundaryElement",value:function(){var e=this.boundaryElement;return e?"string"==typeof e?it(this.element.nativeElement,e):(0,O.fI)(e):null}},{key:"_syncInputs",value:function(t){var n=this;t.beforeStarted.subscribe(function(){if(!t.isDragging()){var e=n._dir,i=n.dragStartDelay,r=n._placeholderTemplate?{template:n._placeholderTemplate.templateRef,context:n._placeholderTemplate.data,viewContainer:n._viewContainerRef}:null,o=n._previewTemplate?{template:n._previewTemplate.templateRef,context:n._previewTemplate.data,matchSize:n._previewTemplate.matchSize,viewContainer:n._viewContainerRef}:null;t.disabled=n.disabled,t.lockAxis=n.lockAxis,t.dragStartDelay="object"==typeof i&&i?i:(0,O.su)(i),t.constrainPosition=n.constrainPosition,t.previewClass=n.previewClass,t.withBoundaryElement(n._getBoundaryElement()).withPlaceholderTemplate(r).withPreviewTemplate(o).withPreviewContainer(n.previewContainer||"global"),e&&t.withDirection(e.value)}}),t.beforeStarted.pipe((0,M.take)(1)).subscribe(function(){var i,r;if(n._parentDrag)t.withParent(n._parentDrag._dragRef);else for(var o=n.element.nativeElement.parentElement;o;){if(null===(i=o.classList)||void 0===i?void 0:i.contains("cdk-drag")){t.withParent((null===(r=e._dragInstances.find(function(e){return e.element.nativeElement===o}))||void 0===r?void 0:r._dragRef)||null);break}o=o.parentElement}})}},{key:"_handleEvents",value:function(e){var t=this;e.started.subscribe(function(){t.started.emit({source:t}),t._changeDetectorRef.markForCheck()}),e.released.subscribe(function(){t.released.emit({source:t})}),e.ended.subscribe(function(e){t.ended.emit({source:t,distance:e.distance,dropPoint:e.dropPoint}),t._changeDetectorRef.markForCheck()}),e.entered.subscribe(function(e){t.entered.emit({container:e.container.data,item:t,currentIndex:e.currentIndex})}),e.exited.subscribe(function(e){t.exited.emit({container:e.container.data,item:t})}),e.dropped.subscribe(function(e){t.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:t,distance:e.distance,dropPoint:e.dropPoint})})}},{key:"_assignDefaults",value:function(e){var t=e.lockAxis,n=e.dragStartDelay,i=e.constrainPosition,r=e.previewClass,o=e.boundaryElement,a=e.draggingDisabled,s=e.rootElementSelector,l=e.previewContainer;this.disabled=null!=a&&a,this.dragStartDelay=n||0,t&&(this.lockAxis=t),i&&(this.constrainPosition=i),r&&(this.previewClass=r),o&&(this.boundaryElement=o),s&&(this.rootElementSelector=s),l&&(this.previewContainer=l)}},{key:"_setupHandlesListener",value:function(){var e=this;this._handles.changes.pipe((0,M.startWith)(this._handles),(0,M.tap)(function(t){var n=t.filter(function(t){return t._parentDrag===e}).map(function(e){return e.element});e._selfHandle&&e.rootElementSelector&&n.push(e.element),e._dragRef.withHandles(n)}),(0,M.switchMap)(function(e){return x.merge.apply(void 0,S(e.map(function(e){return e._stateChanges.pipe((0,M.startWith)(e))})))}),(0,M.takeUntil)(this._destroyed)).subscribe(function(t){var n=e._dragRef,i=t.element.nativeElement;t.disabled?n.disableHandle(i):n.enableHandle(i)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(k.ElementRef),k.\u0275\u0275directiveInject(Ye,12),k.\u0275\u0275directiveInject(B.DOCUMENT),k.\u0275\u0275directiveInject(k.NgZone),k.\u0275\u0275directiveInject(k.ViewContainerRef),k.\u0275\u0275directiveInject(We,8),k.\u0275\u0275directiveInject(le.Is,8),k.\u0275\u0275directiveInject(Ze),k.\u0275\u0275directiveInject(k.ChangeDetectorRef),k.\u0275\u0275directiveInject(Je,10),k.\u0275\u0275directiveInject(He,12))},e.\u0275dir=k.\u0275\u0275defineDirective({type:e,selectors:[["","cdkDrag",""]],contentQueries:function(e,t,n){var i;(1&e&&(k.\u0275\u0275contentQuery(n,tt,5),k.\u0275\u0275contentQuery(n,et,5),k.\u0275\u0275contentQuery(n,Je,5)),2&e)&&(k.\u0275\u0275queryRefresh(i=k.\u0275\u0275loadQuery())&&(t._previewTemplate=i.first),k.\u0275\u0275queryRefresh(i=k.\u0275\u0275loadQuery())&&(t._placeholderTemplate=i.first),k.\u0275\u0275queryRefresh(i=k.\u0275\u0275loadQuery())&&(t._handles=i))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,t){2&e&&k.\u0275\u0275classProp("cdk-drag-disabled",t.disabled)("cdk-drag-dragging",t._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],previewContainer:["cdkDragPreviewContainer","previewContainer"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[k.\u0275\u0275ProvidersFeature([{provide:He,useExisting:e}]),k.\u0275\u0275NgOnChangesFeature]}),e._dragInstances=[],e}();function it(e,t){for(var n=e.parentElement;n;){if(n.matches?n.matches(t):n.msMatchesSelector(t))return n;n=n.parentElement}return null}var rt=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({providers:[Ze],imports:[ae.ZD]}),e}();function ot(){return(ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var at={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null},st=function(e){if(e)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(at)};function lt(e){return"number"==typeof e}function ut(e){return!(!e||"object"!=typeof e||"function"!=typeof e.constructor)&&(!0===e.isBigNumber&&"object"==typeof e.constructor.prototype&&!0===e.constructor.prototype.isBigNumber||"function"==typeof e.constructor.isDecimal&&!0===e.constructor.isDecimal(e))}function ct(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isComplex||!1}function dt(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isFraction||!1}function ft(e){return e&&!0===e.constructor.prototype.isUnit||!1}function pt(e){return"string"==typeof e}ot(st,at,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]});var mt=Array.isArray;function ht(e){return e&&!0===e.constructor.prototype.isMatrix||!1}function vt(e){return Array.isArray(e)||ht(e)}function gt(e){return e&&e.isDenseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function yt(e){return e&&e.isSparseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function bt(e){return e&&!0===e.constructor.prototype.isRange||!1}function St(e){return e&&!0===e.constructor.prototype.isIndex||!1}function Ct(e){return"boolean"==typeof e}function kt(e){return e&&!0===e.constructor.prototype.isResultSet||!1}function wt(e){return e&&!0===e.constructor.prototype.isHelp||!1}function It(e){return"function"==typeof e}function xt(e){return e instanceof Date}function jt(e){return e instanceof RegExp}function Et(e){return!(!e||"object"!=typeof e||e.constructor!==Object||ct(e)||dt(e))}function Mt(e){return null===e}function _t(e){return void 0===e}function Ft(e){return e&&!0===e.isAccessorNode&&!0===e.constructor.prototype.isNode||!1}function Lt(e){return e&&!0===e.isArrayNode&&!0===e.constructor.prototype.isNode||!1}function Ot(e){return e&&!0===e.isAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function Dt(e){return e&&!0===e.isBlockNode&&!0===e.constructor.prototype.isNode||!1}function At(e){return e&&!0===e.isConditionalNode&&!0===e.constructor.prototype.isNode||!1}function Nt(e){return e&&!0===e.isConstantNode&&!0===e.constructor.prototype.isNode||!1}function Rt(e){return e&&!0===e.isFunctionAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function Tt(e){return e&&!0===e.isFunctionNode&&!0===e.constructor.prototype.isNode||!1}function Pt(e){return e&&!0===e.isIndexNode&&!0===e.constructor.prototype.isNode||!1}function Bt(e){return e&&!0===e.isNode&&!0===e.constructor.prototype.isNode||!1}function $t(e){return e&&!0===e.isObjectNode&&!0===e.constructor.prototype.isNode||!1}function Vt(e){return e&&!0===e.isOperatorNode&&!0===e.constructor.prototype.isNode||!1}function Ut(e){return e&&!0===e.isParenthesisNode&&!0===e.constructor.prototype.isNode||!1}function Kt(e){return e&&!0===e.isRangeNode&&!0===e.constructor.prototype.isNode||!1}function zt(e){return e&&!0===e.isSymbolNode&&!0===e.constructor.prototype.isNode||!1}function Gt(e){return e&&!0===e.constructor.prototype.isChain||!1}function Zt(e){var t=typeof e;return"object"===t?null===e?"null":Array.isArray(e)?"Array":e instanceof Date?"Date":e instanceof RegExp?"RegExp":ut(e)?"BigNumber":ct(e)?"Complex":dt(e)?"Fraction":ht(e)?"Matrix":ft(e)?"Unit":St(e)?"Index":bt(e)?"Range":kt(e)?"ResultSet":Bt(e)?e.type:Gt(e)?"Chain":wt(e)?"Help":"Object":"function"===t?"Function":t}function Ht(e){var t=typeof e;if("number"===t||"string"===t||"boolean"===t||null==e)return e;if("function"==typeof e.clone)return e.clone();if(Array.isArray(e))return e.map(function(e){return Ht(e)});if(e instanceof Date)return new Date(e.valueOf());if(ut(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return function(e,t){var n={};for(var i in e)Qt(e,i)&&(n[i]=t(e[i]));return n}(e,Ht)}function qt(e,t){for(var n in t)Qt(t,n)&&(e[n]=t[n]);return e}function Wt(e,t){var n,i,r;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(i=0,r=e.length;i<r;i++)if(!Wt(e[i],t[i]))return!1;return!0}if("function"==typeof e)return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!Wt(e[n],t[n]))return!1;for(n in t)if(!(n in e)||!Wt(e[n],t[n]))return!1;return!0}return e===t}function Qt(e,t){return e&&Object.hasOwnProperty.call(e,t)}function Yt(e,t,n,i){function r(i){var r=function(e,t){for(var n={},i=0;i<t.length;i++){var r=t[i],o=e[r];void 0!==o&&(n[r]=o)}return n}(i,t.map(Xt));return function(e,t,n){if(!t.filter(function(e){return!function(e){return e&&"?"===e[0]}(e)}).every(function(e){return void 0!==n[e]})){var i=t.filter(function(e){return void 0===n[e]});throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(i.map(function(e){return'"'.concat(e,'"')}).join(", "),"."))}}(e,t,i),n(r)}return r.isFactory=!0,r.fn=e,r.dependencies=t.slice().sort(),i&&(r.meta=i),r}function Xt(e){return e&&"?"===e[0]?e.slice(1):e}var Jt=g(81275);function en(e){return"boolean"==typeof e||!!isFinite(e)&&e===Math.round(e)}function tn(e,t,n){var i={2:"0b",8:"0o",16:"0x"}[t],r="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!en(n))throw new Error("size must be an integer");if(e>E(2,n-1)-1||e<-E(2,n-1))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!en(e))throw new Error("Value must be an integer");e<0&&(e+=E(2,n)),r="i".concat(n)}var o="";return e<0&&(e=-e,o="-"),"".concat(o).concat(i).concat(e.toString(t)).concat(r)}function nn(e,t){if("function"==typeof t)return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var n,i,r="auto";if(t&&(t.notation&&(r=t.notation),lt(t)?n=t:lt(t.precision)&&(n=t.precision),t.wordSize&&"number"!=typeof(i=t.wordSize)))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return on(e,n);case"exponential":return an(e,n);case"engineering":return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=sn(rn(e),t),i=n.exponent,r=n.coefficients,o=i%3==0?i:i<0?i-3-i%3:i-i%3;if(lt(t))for(;t>r.length||i-o+1>r.length;)r.push(0);else for(var a=Math.abs(i-o)-(r.length-1),s=0;s<a;s++)r.push(0);for(var l=Math.abs(i-o),u=1;l>0;)u++,l--;var c=r.slice(u).join(""),d=lt(t)&&c.length||c.match(/[1-9]/)?"."+c:"",f=r.slice(0,u).join("")+d+"e"+(i>=0?"+":"")+o.toString();return n.sign+f}(e,n);case"bin":return tn(e,2,i);case"oct":return tn(e,8,i);case"hex":return tn(e,16,i);case"auto":return function(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var i=n&&void 0!==n.lowerExp?n.lowerExp:-3,r=n&&void 0!==n.upperExp?n.upperExp:5,o=rn(e),a=t?sn(o,t):o;if(a.exponent<i||a.exponent>=r)return an(e,t);var s=a.coefficients,l=a.exponent;s.length<t&&(s=s.concat(ln(t-s.length))),s=s.concat(ln(l-s.length+1+(s.length<t?t-s.length:0)));var u=l>0?l:0;return u<(s=ln(-l).concat(s)).length-1&&s.splice(u+1,0,"."),a.sign+s.join("")}(e,n,t&&t).replace(/((\.\d*?)(0+))($|e)/,function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function rn(e){var t=String(e).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],i=t[2],r=parseFloat(t[4]||"0"),o=i.indexOf(".");r+=-1!==o?o-1:i.length-1;var a=i.replace(".","").replace(/^0*/,function(e){return r-=e.length,""}).replace(/0*$/,"").split("").map(function(e){return parseInt(e)});return 0===a.length&&(a.push(0),r++),{sign:n,coefficients:a,exponent:r}}function on(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=rn(e),i="number"==typeof t?sn(n,n.exponent+1+t):n,r=i.coefficients,o=i.exponent+1,a=o+(t||0);return r.length<a&&(r=r.concat(ln(a-r.length))),o<0&&(r=ln(1-o).concat(r),o=1),o<r.length&&r.splice(o,0,0===o?"0.":"."),i.sign+r.join("")}function an(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=rn(e),i=t?sn(n,t):n,r=i.coefficients,o=i.exponent;r.length<t&&(r=r.concat(ln(t-r.length)));var a=r.shift();return i.sign+a+(r.length>0?"."+r.join(""):"")+"e"+(o>=0?"+":"")+o}function sn(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},i=n.coefficients;t<=0;)i.unshift(0),n.exponent++,t++;if(i.length>t&&i.splice(t,i.length-t)[0]>=5){var r=t-1;for(i[r]++;10===i[r];)i.pop(),0===r&&(i.unshift(0),n.exponent++,r++),i[--r]++}return n}function ln(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}Math,Math,Math,Math,Math,Math;var un=Number.EPSILON||2220446049250313e-31;function cn(e,t,n){if(null==n)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var i=Math.abs(e-t);return i<un||i<=Math.max(Math.abs(e),Math.abs(t))*n}return!1}Math,Math,Math,Math,Math;var dn=(Math,Yt("Complex",[],function(){return Jt.prototype.type="Complex",Jt.prototype.isComplex=!0,Jt.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Jt.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Jt.prototype.format=function(e){var t=this.im,n=this.re,i=nn(this.re,e),r=nn(this.im,e),o=lt(e)?e:e?e.precision:null;if(null!==o){var a=Math.pow(10,-o);Math.abs(n/t)<a&&(n=0),Math.abs(t/n)<a&&(t=0)}return 0===t?i:0===n?1===t?"i":-1===t?"-i":r+"i":t<0?-1===t?i+" - i":i+" - "+r.substring(1)+"i":1===t?i+" + i":i+" + "+r+"i"},Jt.fromPolar=function(e){switch(arguments.length){case 1:var t=arguments[0];if("object"==typeof t)return Jt(t);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var n=arguments[0],i=arguments[1];if(lt(n)){if(ft(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),lt(i))return new Jt({r:n,phi:i});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Jt.prototype.valueOf=Jt.prototype.toString,Jt.fromJSON=function(e){return new Jt(e)},Jt.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},Jt},{isClass:!0}));function fn(e){var t=0,n=1,i=Object.create(null),r=Object.create(null),o=0,a=function(e){var a=r[e];if(a&&(delete i[a],delete r[e],--t,n===a)){if(!t)return o=0,void(n=1);for(;!hasOwnProperty.call(i,++n););}};return e=Math.abs(e),{hit:function(s){var l=r[s],u=++o;if(i[u]=s,r[s]=u,!l)return++t<=e?void 0:(a(s=i[n]),s);if(delete i[l],n===l)for(;!hasOwnProperty.call(i,++n););},delete:a,clear:function(){t=o=0,n=1,i=Object.create(null),r=Object.create(null)}}}function pn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hasher,i=t.limit;return i=null==i?Number.POSITIVE_INFINITY:i,n=null==n?JSON.stringify:n,function t(){"object"!=typeof t.cache&&(t.cache={values:new Map,lru:fn(i||Number.POSITIVE_INFINITY)});for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=n(r);if(t.cache.values.has(a))return t.cache.lru.hit(a),t.cache.values.get(a);var s=e.apply(e,r);return t.cache.values.set(a,s),t.cache.values.delete(t.cache.lru.hit(a)),s}}pn(function(e){return new e(1).exp()},{hasher:hn}),pn(function(e){return new e(1).plus(new e(5).sqrt()).div(2)},{hasher:hn});var mn=pn(function(e){return e.acos(-1)},{hasher:hn});function hn(e){return e[0].precision}pn(function(e){return mn(e).times(2)},{hasher:hn}),Math,Math,Math;var vn=g(80672),gn=Yt("BigNumber",["?on","config"],function(e){var t=e.on,n=e.config,i=vn.clone({precision:n.precision,modulo:vn.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(e){return new i(e.value)},t&&t("config",function(e,t){e.precision!==t.precision&&i.config({precision:e.precision})}),i},{isClass:!0}),yn=Yt("Matrix",[],function(){function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function bn(e,t){return Yt(e,["config","BigNumber"],function(e){var n=e.config,i=e.BigNumber;return"BigNumber"===n.number?new i(t):t})}bn("fineStructure",.0072973525693),bn("weakMixingAngle",.2229),bn("efimovFactor",22.7),bn("sackurTetrode",-1.16487052358);var Sn=g(60530),Cn=Yt("Fraction",[],function(){return Sn.prototype.type="Fraction",Sn.prototype.isFraction=!0,Sn.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Sn.fromJSON=function(e){return new Sn(e)},Sn},{isClass:!0});function kn(e,t,n){var i=new(0,e.constructor)(2),r="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!en(n))throw new Error("size must be an integer");if(e.greaterThan(i.pow(n-1).sub(1))||e.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(i.pow(n))),r="i".concat(n)}switch(t){case 2:return"".concat(e.toBinary()).concat(r);case 8:return"".concat(e.toOctal()).concat(r);case 16:return"".concat(e.toHexadecimal()).concat(r);default:throw new Error("Base ".concat(t," not supported "))}}function wn(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential()}function In(e,t){return"number"==typeof e?nn(e,t):ut(e)?function(e,t){if("function"==typeof t)return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var n,i,r="auto";if(void 0!==t&&(t.notation&&(r=t.notation),"number"==typeof t?n=t:t.precision&&(n=t.precision),t.wordSize&&"number"!=typeof(i=t.wordSize)))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return function(e,t){return e.toFixed(t)}(e,n);case"exponential":return wn(e,n);case"engineering":return function(e,t){var n=e.e,i=n%3==0?n:n<0?n-3-n%3:n-n%3,r=e.mul(Math.pow(10,-i)),o=r.toPrecision(t);return-1!==o.indexOf("e")&&(o=r.toString()),o+"e"+(n>=0?"+":"")+i.toString()}(e,n);case"bin":return kn(e,2,i);case"oct":return kn(e,8,i);case"hex":return kn(e,16,i);case"auto":var o=t&&void 0!==t.lowerExp?t.lowerExp:-3,a=t&&void 0!==t.upperExp?t.upperExp:5;if(e.isZero())return"0";var s=e.toSignificantDigits(n),l=s.e;return(l>=o&&l<a?s.toFixed():wn(e,n)).replace(/((\.\d*?)(0+))($|e)/,function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(e,t):function(e){return e&&"object"==typeof e&&"number"==typeof e.s&&"number"==typeof e.n&&"number"==typeof e.d||!1}(e)?t&&"decimal"===t.fraction?e.toString():e.s*e.n+"/"+e.d:Array.isArray(e)?xn(e,t):pt(e)?'"'+e+'"':"function"==typeof e?e.syntax?String(e.syntax):"function":e&&"object"==typeof e?"function"==typeof e.format?e.format(t):e&&e.toString(t)!=={}.toString()?e.toString(t):"{"+Object.keys(e).map(function(n){return'"'+n+'": '+In(e[n],t)}).join(", ")+"}":String(e)}function xn(e,t){if(Array.isArray(e)){for(var n="[",i=e.length,r=0;r<i;r++)0!==r&&(n+=", "),n+=xn(e[r],t);return n+"]"}return In(e,t)}function jn(e,t,n){if(!(this instanceof jn))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=(new Error).stack}function En(e,t,n){if(!(this instanceof En))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),this.message=void 0!==this.min&&this.index<this.min?"Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?"Index out of range ("+this.index+" > "+(this.max-1)+")":"Index out of range ("+this.index+")",this.stack=(new Error).stack}function Mn(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function _n(e,t,n){var i,r=e.length;if(r!==t[n])throw new jn(r,t[n]);if(n<t.length-1){var o=n+1;for(i=0;i<r;i++){if(!Array.isArray(e[i]))throw new jn(t.length-1,t.length,"<");_n(e[i],t,o)}}else for(i=0;i<r;i++)if(Array.isArray(e[i]))throw new jn(t.length+1,t.length,">")}function Fn(e,t){if(0===t.length){if(Array.isArray(e))throw new jn(e.length,0)}else _n(e,t,0)}function Ln(e,t){if(!lt(e)||!en(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||"number"==typeof t&&e>=t)throw new En(e,t)}function On(e,t,n){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Error("Resizing to scalar is not supported");return t.forEach(function(e){if(!lt(e)||!en(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+In(t)+")")}),Dn(e,t,0,void 0!==n?n:0),e}function Dn(e,t,n,i){var r,o,a=t[n],s=Math.min(e.length,a);if(e.length=a,n<t.length-1){var l=n+1;for(r=0;r<s;r++)o=e[r],Array.isArray(o)||(e[r]=o=[o]),Dn(o,t,l,i);for(r=s;r<a;r++)e[r]=o=[],Dn(o,t,l,i)}else{for(r=0;r<s;r++)for(;Array.isArray(e[r]);)e[r]=e[r][0];for(r=s;r<a;r++)e[r]=i}}function An(e,t){var n=Nn(e),i=e.slice(),r=e.indexOf(-1);if(e.indexOf(-1,r+1)>=0)throw new Error("More than one wildcard in sizes");if(r>=0){if(t%n!=0)throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-n);i[r]=-t/n}return i}function Nn(e){return e.reduce(function(e,t){return e*t},1)}function Rn(e,t,n,i){var r=i||Mn(e);if(n)for(var o=0;o<n;o++)e=[e],r.unshift(1);for(e=Tn(e,t,0);r.length<t;)r.push(1);return e}function Tn(e,t,n){var i,r;if(Array.isArray(e)){var o=n+1;for(i=0,r=e.length;i<r;i++)e[i]=Tn(e[i],t,o)}else for(var a=n;a<t;a++)e=[e];return e}function Pn(e,t){for(var n,i=0,r=0;r<e.length;r++){var o=e[r],a=Array.isArray(o);if(0===r&&a&&(i=o.length),a&&o.length!==i)return;var s=a?Pn(o,t):t(o);if(void 0===n)n=s;else if(n!==s)return"mixed"}return n}(jn.prototype=new RangeError).constructor=RangeError,jn.prototype.name="DimensionError",jn.prototype.isDimensionError=!0,(En.prototype=new RangeError).constructor=RangeError,En.prototype.name="IndexError",En.prototype.isIndexError=!0;var Bn=Yt("DenseMatrix",["Matrix"],function(e){var t=e.Matrix;function n(e,t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!pt(t))throw new Error("Invalid datatype: "+t);if(ht(e))"DenseMatrix"===e.type?(this._data=Ht(e._data),this._size=Ht(e._size),this._datatype=t||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=t||e._datatype);else if(e&&mt(e.data)&&mt(e.size))this._data=e.data,this._size=e.size,Fn(this._data,this._size),this._datatype=t||e.datatype;else if(mt(e))this._data=u(e),this._size=Mn(this._data),Fn(this._data,this._size),this._datatype=t;else{if(e)throw new TypeError("Unsupported type of data ("+Zt(e)+")");this._data=[],this._size=[0],this._datatype=t}}function i(e,t){if(!St(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var i=t.size();if(i.length!==e._size.length)throw new jn(i.length,e._size.length);for(var o=t.min(),a=t.max(),s=0,l=e._size.length;s<l;s++)Ln(o[s],e._size[s]),Ln(a[s],e._size[s]);return new n(r(e._data,t,i.length,0),e._datatype)}function r(e,t,n,i){var o=i===n-1,a=t.dimension(i);return o?a.map(function(t){return Ln(t,e.length),e[t]}).valueOf():a.map(function(o){return Ln(o,e.length),r(e[o],t,n,i+1)}).valueOf()}function o(e,t,n,i){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var r,o=t.size(),s=t.isScalar();if(ht(n)?(r=n.size(),n=n.valueOf()):r=Mn(n),s){if(0!==r.length)throw new TypeError("Scalar expected");e.set(t.min(),n,i)}else{if(o.length<e._size.length)throw new jn(o.length,e._size.length,"<");if(r.length<o.length){for(var u=0,c=0;1===o[u]&&1===r[u];)u++;for(;1===o[u];)c++,u++;n=Rn(n,o.length,c,r)}if(!Wt(o,r))throw new jn(o,r,">");l(e,t.max().map(function(e){return e+1}),i),a(e._data,t,n,o.length,0)}return e}function a(e,t,n,i,r){var o=r===i-1;t.dimension(r).forEach(o?function(t,i){Ln(t),e[t]=n[i[0]]}:function(o,s){Ln(o),a(e[o],t,n[s[0]],i,r+1)})}function s(e,t,n){if(0===t.length){for(var i=e._data;mt(i);)i=i[0];return i}return e._size=t.slice(0),e._data=On(e._data,e._size,n),e}function l(e,t,n){for(var i=e._size.slice(0),r=!1;i.length<t.length;)i.push(0),r=!0;for(var o=0,a=t.length;o<a;o++)t[o]>i[o]&&(i[o]=t[o],r=!0);r&&s(e,i,n)}function u(e){for(var t=0,n=e.length;t<n;t++){var i=e[t];mt(i)?e[t]=u(i):i&&!0===i.isMatrix&&(e[t]=u(i.valueOf()))}return e}return(n.prototype=new t).createDenseMatrix=function(e,t){return new n(e,t)},n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return Pn(this._data,Zt)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(e,t){return new n(e,t)},n.prototype.subset=function(e,t,n){switch(arguments.length){case 1:return i(this,e);case 2:case 3:return o(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(e){if(!mt(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new jn(e.length,this._size.length);for(var t=0;t<e.length;t++)Ln(e[t],this._size[t]);for(var n=this._data,i=0,r=e.length;i<r;i++){var o=e[i];Ln(o,n.length),n=n[o]}return n},n.prototype.set=function(e,t,n){if(!mt(e))throw new TypeError("Array expected");if(e.length<this._size.length)throw new jn(e.length,this._size.length,"<");var i,r,o;l(this,e.map(function(e){return e+1}),n);var a=this._data;for(i=0,r=e.length-1;i<r;i++)Ln(o=e[i],a.length),a=a[o];return Ln(o=e[e.length-1],a.length),a[o]=t,this},n.prototype.resize=function(e,t,n){if(!vt(e))throw new TypeError("Array or Matrix expected");var i=e.valueOf().map(function(e){return Array.isArray(e)&&1===e.length?e[0]:e});return s(n?this.clone():this,i,t)},n.prototype.reshape=function(e,t){var n=t?this.clone():this;n._data=function(e,t){var n=function(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function e(n){Array.isArray(n)?n.forEach(e):t.push(n)}),t}(e),i=n.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new jn(0,i,"!=");var r=Nn(t=An(t,i));if(i!==r)throw new jn(r,i,"!=");try{return function(e,t){for(var n,i=e,r=t.length-1;r>0;r--){var o=t[r];n=[];for(var a=i.length/o,s=0;s<a;s++)n.push(i.slice(s*o,(s+1)*o));i=n}return i}(n,t)}catch(o){throw o instanceof jn?new jn(r,i,"!="):o}}(n._data,e);var i=n._size.reduce(function(e,t){return e*t});return n._size=An(e,i),n},n.prototype.clone=function(){return new n({data:Ht(this._data),size:Ht(this._size),datatype:this._datatype})},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(e){var t=this,i=function n(i,r){return mt(i)?i.map(function(e,t){return n(e,r.concat(t))}):e(i,r,t)}(this._data,[]);return new n(i,void 0!==this._datatype?Pn(i,Zt):void 0)},n.prototype.forEach=function(e){var t=this;!function n(i,r){mt(i)?i.forEach(function(e,t){n(e,r.concat(t))}):e(i,r,t)}(this._data,[])},n.prototype[Symbol.iterator]=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(regeneratorRuntime.mark(function e(t,n){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!mt(t)){r.next=9;break}i=0;case 2:if(!(i<t.length)){r.next=7;break}return r.delegateYield(e(t[i],n.concat(i)),"t0",4);case 4:i++,r.next=2;break;case 7:r.next=11;break;case 9:return r.next=11,{value:t,index:n};case 11:case"end":return r.stop()}},e)})(this._data,[]),"t0",1);case 1:case"end":return e.stop()}},e,this)}),n.prototype.rows=function(){var e=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var t,i=b(this._data);try{for(i.s();!(t=i.n()).done;){var r=t.value;e.push(new n([r],this._datatype))}}catch(o){i.e(o)}finally{i.f()}return e},n.prototype.columns=function(){var e=this,t=[],i=this.size();if(2!==i.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var r=this._data,o=function(i){var o=r.map(function(e){return[e[i]]});t.push(new n(o,e._datatype))},a=0;a<i[1];a++)o(a);return t},n.prototype.toArray=function(){return Ht(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(e){return In(this._data,e)},n.prototype.toString=function(){return In(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(e){if(e){if(ut(e)&&(e=e.toNumber()),!lt(e)||!en(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var t=e>0?e:0,i=e<0?-e:0,r=Math.min(this._size[0]-i,this._size[1]-t),o=[],a=0;a<r;a++)o[a]=this._data[a+i][a+t];return new n({data:o,size:[r],datatype:this._datatype})},n.diagonal=function(e,t,i,r){if(!mt(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(ut(e)&&(e=e.toNumber()),!lt(e)||!en(e)||e<1)throw new Error("Size values must be positive integers");return e}),i){if(ut(i)&&(i=i.toNumber()),!lt(i)||!en(i))throw new TypeError("The parameter k must be an integer number")}else i=0;var o,a=i>0?i:0,s=i<0?-i:0,l=e[0],u=e[1],c=Math.min(l-s,u-a);if(mt(t)){if(t.length!==c)throw new Error("Invalid value array length");o=function(e){return t[e]}}else if(ht(t)){var d=t.size();if(1!==d.length||d[0]!==c)throw new Error("Invalid matrix length");o=function(e){return t.get([e])}}else o=function(){return t};r||(r=ut(o(0))?o(0).mul(0):0);var f=[];if(e.length>0){f=On(f,e,r);for(var p=0;p<c;p++)f[p+s][p+a]=o(p)}return new n({data:f,size:[l,u]})},n.fromJSON=function(e){return new n(e)},n.prototype.swapRows=function(e,t){if(!(lt(e)&&en(e)&&lt(t)&&en(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Ln(e,this._size[0]),Ln(t,this._size[0]),n._swapRows(e,t,this._data),this},n._swapRows=function(e,t,n){var i=n[e];n[e]=n[t],n[t]=i},n},{isClass:!0}),$n=g(26572);function Vn(e,t){return!(!e||"object"!=typeof e||!Qt(Kn,t)&&(t in Object.prototype||t in Function.prototype))}function Un(e){return"object"==typeof e&&e&&e.constructor===Object}var Kn={length:!0,name:!0},zn={toString:!0,valueOf:!0,toLocaleString:!0};function Gn(e){return!!e&&(e instanceof Map||e instanceof function(){function e(t){I(this,e),this.wrappedObject=t}return j(e,[{key:"keys",value:function(){return Object.keys(this.wrappedObject)}},{key:"get",value:function(e){return function(e,t){if(Un(e)&&Vn(e,t))return e[t];throw"function"==typeof e[t]&&function(e,t){return!(null==e||"function"!=typeof e[t]||Qt(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)||!Qt(zn,t)&&(t in Object.prototype||t in Function.prototype))}(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}(this.wrappedObject,e)}},{key:"set",value:function(e,t){return function(e,t,n){if(Un(e)&&Vn(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}(this.wrappedObject,e,t),this}},{key:"has",value:function(e){return function(e,t){return t in e}(this.wrappedObject,e)}}]),e}()||"function"==typeof e.set&&"function"==typeof e.get&&"function"==typeof e.keys&&"function"==typeof e.has)}var Zn=function(){return Zn=$n.create,$n},Hn=Yt("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],function(e){var t=e.BigNumber,n=e.Complex,i=e.DenseMatrix,r=e.Fraction,o=Zn();return o.types=[{name:"number",test:lt},{name:"Complex",test:ct},{name:"BigNumber",test:ut},{name:"Fraction",test:dt},{name:"Unit",test:ft},{name:"string",test:pt},{name:"Chain",test:Gt},{name:"Array",test:mt},{name:"Matrix",test:ht},{name:"DenseMatrix",test:gt},{name:"SparseMatrix",test:yt},{name:"Range",test:bt},{name:"Index",test:St},{name:"boolean",test:Ct},{name:"ResultSet",test:kt},{name:"Help",test:wt},{name:"function",test:It},{name:"Date",test:xt},{name:"RegExp",test:jt},{name:"null",test:Mt},{name:"undefined",test:_t},{name:"AccessorNode",test:Ft},{name:"ArrayNode",test:Lt},{name:"AssignmentNode",test:Ot},{name:"BlockNode",test:Dt},{name:"ConditionalNode",test:At},{name:"ConstantNode",test:Nt},{name:"FunctionNode",test:Tt},{name:"FunctionAssignmentNode",test:Rt},{name:"IndexNode",test:Pt},{name:"Node",test:Bt},{name:"ObjectNode",test:$t},{name:"OperatorNode",test:Vt},{name:"ParenthesisNode",test:Ut},{name:"RangeNode",test:Kt},{name:"SymbolNode",test:zt},{name:"Map",test:Gn},{name:"Object",test:Et}],o.conversions=[{from:"number",to:"BigNumber",convert:function(e){if(t||qn(e),e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t(e)}},{from:"number",to:"Complex",convert:function(e){return n||Wn(e),new n(e,0)}},{from:"number",to:"string",convert:function(e){return e+""}},{from:"BigNumber",to:"Complex",convert:function(e){return n||Wn(e),new n(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(e){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return n||Wn(e),new n(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){r||Qn(e);var t=new r(e);if(t.valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return t}},{from:"string",to:"number",convert:function(e){var t=Number(e);if(isNaN(t))throw new Error('Cannot convert "'+e+'" to a number');return t}},{from:"string",to:"BigNumber",convert:function(e){t||qn(e);try{return new t(e)}catch(n){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(e){r||Qn(e);try{return new r(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){n||Wn(e);try{return new n(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(e){return+e}},{from:"boolean",to:"BigNumber",convert:function(e){return t||qn(e),new t(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return r||Qn(e),new r(+e)}},{from:"boolean",to:"string",convert:function(e){return String(e)}},{from:"Array",to:"Matrix",convert:function(e){return i||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new i(e)}},{from:"Matrix",to:"Array",convert:function(e){return e.valueOf()}}],o});function qn(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function Wn(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function Qn(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}function Yn(e,t,n){return e&&"function"==typeof e.map?e.map(function(e){return Yn(e,t,n)}):t(e)}function Xn(e,t,n){if(null==n)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var i=e.minus(t).abs();if(i.isZero())return!0;var r=e.constructor.max(e.abs(),t.abs());return i.lte(r.times(n))}return!1}var Jn="equalScalar",ei=Yt(Jn,["typed","config"],function(e){var t=e.typed,n=e.config;return t(Jn,{"boolean, boolean":function(e,t){return e===t},"number, number":function(e,t){return cn(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.eq(t)||Xn(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return e.equals(t)},"Complex, Complex":function(e,t){return function(e,t,n){return cn(e.re,t.re,n)&&cn(e.im,t.im,n)}(e,t,n.epsilon)},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)}})});Yt(Jn,["typed","config"],function(e){var t=e.typed,n=e.config;return t(Jn,{"number, number":function(e,t){return cn(e,t,n.epsilon)}})});var ti=Yt("number",["typed"],function(e){var t=(0,e.typed)("number",{"":function(){return 0},number:function(e){return e},string:function(e){if("NaN"===e)return NaN;var t=function(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);return t?{input:e,radix:{"0b":2,"0o":8,"0x":16}[t[1]],integerPart:t[2],fractionalPart:t[3]}:null}(e);if(t)return function(e){for(var t=parseInt(e.integerPart,e.radix),n=0,i=0;i<e.fractionalPart.length;i++)n+=parseInt(e.fractionalPart[i],e.radix)/Math.pow(e.radix,i+1);var r=t+n;if(isNaN(r))throw new SyntaxError('String "'+e.input+'" is no valid number');return r}(t);var n=0,i=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);i&&(n=Number(i[2]),e=i[1]);var r=Number(e);if(isNaN(r))throw new SyntaxError('String "'+e+'" is no valid number');if(i){if(r>E(2,n)-1)throw new SyntaxError('String "'.concat(e,'" is out of range'));r>=E(2,n-1)&&(r-=E(2,n))}return r},BigNumber:function(e){return e.toNumber()},Fraction:function(e){return e.valueOf()},Unit:function(e){throw new Error("Second argument with valueless unit expected")},null:function(e){return 0},"Unit, string | Unit":function(e,t){return e.toNumber(t)},"Array | Matrix":function(e){return Yn(e,this)}});return t.fromJSON=function(e){return parseFloat(e.value)},t}),ni="number",ii="number, number";function ri(e){return Math.abs(e)}function oi(e,t){return e+t}function ai(e,t){return e*t}function si(e){return-e}function li(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(on(e,t))}ri.signature=ni,oi.signature=ii,ai.signature=ii,si.signature=ni,li.signature=ii;var ui=Yt("multiplyScalar",["typed"],function(e){return(0,e.typed)("multiplyScalar",{"number, number":ai,"Complex, Complex":function(e,t){return e.mul(t)},"BigNumber, BigNumber":function(e,t){return e.times(t)},"Fraction, Fraction":function(e,t){return e.mul(t)},"number | Fraction | BigNumber | Complex, Unit":function(e,t){var n=t.clone();return n.value=null===n.value?n._normalize(e):this(n.value,e),n},"Unit, number | Fraction | BigNumber | Complex":function(e,t){var n=e.clone();return n.value=null===n.value?n._normalize(t):this(n.value,t),n},"Unit, Unit":function(e,t){return e.multiply(t)}})});Math.pow(2,53),Yt("oct",["typed","format"],function(e){var t=e.typed,n=e.format;return t("oct",{"number | BigNumber":function(e){return n(e,{notation:"oct"})},"number | BigNumber, number":function(e,t){return n(e,{notation:"oct",wordSize:t})}})}),g(30214),Date.now();var ci=Yt("fraction",["typed","Fraction"],function(e){var t=e.typed,n=e.Fraction;return t("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new n(e)},string:function(e){return new n(e)},"number, number":function(e,t){return new n(e,t)},null:function(e){return new n(0)},BigNumber:function(e){return new n(e.toString())},Fraction:function(e){return e},Object:function(e){return new n(e)},"Array | Matrix":function(e){return Yn(e,this)}})}),di="unaryMinus",fi=Yt(di,["typed"],function(e){return(0,e.typed)(di,{number:si,Complex:function(e){return e.neg()},BigNumber:function(e){return e.neg()},Fraction:function(e){return e.neg()},Unit:function(e){var t=e.clone();return t.value=this(e.value),t},"Array | Matrix":function(e){return Yn(e,this,!0)}})}),pi="addScalar",mi=Yt(pi,["typed"],function(e){return(0,e.typed)(pi,{"number, number":oi,"Complex, Complex":function(e,t){return e.add(t)},"BigNumber, BigNumber":function(e,t){return e.plus(t)},"Fraction, Fraction":function(e,t){return e.add(t)},"Unit, Unit":function(e,t){if(null==e.value)throw new Error("Parameter x contains a unit with undefined value");if(null==t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=this(n.value,t.value),n.fixPrefix=!1,n}})}),hi=Yt("conj",["typed"],function(e){return(0,e.typed)("conj",{number:function(e){return e},BigNumber:function(e){return e},Complex:function(e){return e.conjugate()},"Array | Matrix":function(e){return Yn(e,this)}})});Yt("bin",["typed","format"],function(e){var t=e.typed,n=e.format;return t("bin",{"number | BigNumber":function(e){return n(e,{notation:"bin"})},"number | BigNumber, number":function(e,t){return n(e,{notation:"bin",wordSize:t})}})});var vi=Yt("SparseMatrix",["typed","equalScalar","Matrix"],function(e){var t=e.typed,n=e.equalScalar,i=e.Matrix;function r(e,t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!pt(t))throw new Error("Invalid datatype: "+t);if(ht(e))!function(e,t,n){"SparseMatrix"===t.type?(e._values=t._values?Ht(t._values):void 0,e._index=Ht(t._index),e._ptr=Ht(t._ptr),e._size=Ht(t._size),e._datatype=n||t._datatype):o(e,t.valueOf(),n||t._datatype)}(this,e,t);else if(e&&mt(e.index)&&mt(e.ptr)&&mt(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=t||e.datatype;else if(mt(e))o(this,e,t);else{if(e)throw new TypeError("Unsupported type of data ("+Zt(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=t}}function o(e,i,r){e._values=[],e._index=[],e._ptr=[],e._datatype=r;var o=i.length,a=0,s=n,l=0;if(pt(r)&&(s=t.find(n,[r,r])||n,l=t.convert(0,r)),o>0){var u=0;do{e._ptr.push(e._index.length);for(var c=0;c<o;c++){var d=i[c];if(mt(d)){if(0===u&&a<d.length&&(a=d.length),u<d.length){var f=d[u];s(f,l)||(e._values.push(f),e._index.push(c))}}else 0===u&&a<1&&(a=1),s(d,l)||(e._values.push(d),e._index.push(c))}u++}while(u<a)}e._ptr.push(e._index.length),e._size=[o,a]}function a(e,t){if(!St(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var n=t.size();if(n.length!==e._size.length)throw new jn(n.length,e._size.length);var i,o,a,s,l=t.min(),u=t.max();for(i=0,o=e._size.length;i<o;i++)Ln(l[i],e._size[i]),Ln(u[i],e._size[i]);var c=e._values,d=e._index,f=e._ptr,p=t.dimension(0),m=t.dimension(1),h=[],v=[];p.forEach(function(e,t){v[e]=t[0],h[e]=!0});var g=c?[]:void 0,y=[],b=[];return m.forEach(function(e){for(b.push(y.length),a=f[e],s=f[e+1];a<s;a++)!0===h[i=d[a]]&&(y.push(v[i]),g&&g.push(c[a]))}),b.push(y.length),new r({values:g,index:y,ptr:b,size:n,datatype:e._datatype})}function s(e,t,n,i){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var r,o=t.size(),a=t.isScalar();if(ht(n)?(r=n.size(),n=n.toArray()):r=Mn(n),a){if(0!==r.length)throw new TypeError("Scalar expected");e.set(t.min(),n,i)}else{if(1!==o.length&&2!==o.length)throw new jn(o.length,e._size.length,"<");if(r.length<o.length){for(var s=0,l=0;1===o[s]&&1===r[s];)s++;for(;1===o[s];)l++,s++;n=Rn(n,o.length,l,r)}if(!Wt(o,r))throw new jn(o,r,">");for(var u=t.min()[0],c=t.min()[1],d=r[0],f=r[1],p=0;p<d;p++)for(var m=0;m<f;m++)e.set([p+u,m+c],n[p][m],i)}return e}function l(e,t,n,i){if(n-t==0)return n;for(var r=t;r<n;r++)if(i[r]===e)return r;return t}function u(e,t,n,i,r,o,a){r.splice(e,0,i),o.splice(e,0,t);for(var s=n+1;s<a.length;s++)a[s]++}function c(e,i,r,o){var a=o||0,s=n,l=0;pt(e._datatype)&&(s=t.find(n,[e._datatype,e._datatype])||n,l=t.convert(0,e._datatype),a=t.convert(a,e._datatype));var u,c,d,f=!s(a,l),p=e._size[0],m=e._size[1];if(r>m){for(c=m;c<r;c++)if(e._ptr[c]=e._values.length,f)for(u=0;u<p;u++)e._values.push(a),e._index.push(u);e._ptr[r]=e._values.length}else r<m&&(e._ptr.splice(r+1,m-r),e._values.splice(e._ptr[r],e._values.length),e._index.splice(e._ptr[r],e._index.length));if(m=r,i>p){if(f){var h=0;for(c=0;c<m;c++){e._ptr[c]=e._ptr[c]+h,d=e._ptr[c+1]+h;var v=0;for(u=p;u<i;u++,v++)e._values.splice(d+v,0,a),e._index.splice(d+v,0,u),h++}e._ptr[m]=e._values.length}}else if(i<p){var g=0;for(c=0;c<m;c++){e._ptr[c]=e._ptr[c]-g;var y=e._ptr[c+1]-g;for(d=e._ptr[c];d<y;d++)(u=e._index[d])>i-1&&(e._values.splice(d,1),e._index.splice(d,1),g++)}e._ptr[c]=e._values.length}return e._size[0]=i,e._size[1]=r,e}function d(e,t,n,i,r){var o,a,s=i[0],l=i[1],u=[];for(o=0;o<s;o++)for(u[o]=[],a=0;a<l;a++)u[o][a]=0;for(a=0;a<l;a++)for(var c=n[a+1],d=n[a];d<c;d++)u[o=t[d]][a]=e?r?Ht(e[d]):e[d]:1;return u}return(r.prototype=new i).createSparseMatrix=function(e,t){return new r(e,t)},r.prototype.type="SparseMatrix",r.prototype.isSparseMatrix=!0,r.prototype.getDataType=function(){return Pn(this._values,Zt)},r.prototype.storage=function(){return"sparse"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(e,t){return new r(e,t)},r.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&&0!==t?this._index.length/(e*t):0},r.prototype.subset=function(e,t,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,e);case 2:case 3:return s(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(e){if(!mt(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new jn(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var t=e[0],n=e[1];Ln(t,this._size[0]),Ln(n,this._size[1]);var i=l(t,this._ptr[n],this._ptr[n+1],this._index);return i<this._ptr[n+1]&&this._index[i]===t?this._values[i]:0},r.prototype.set=function(e,i,r){if(!mt(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new jn(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var o=e[0],a=e[1],s=this._size[0],d=this._size[1],f=n,p=0;pt(this._datatype)&&(f=t.find(n,[this._datatype,this._datatype])||n,p=t.convert(0,this._datatype)),(o>s-1||a>d-1)&&(c(this,Math.max(o+1,s),Math.max(a+1,d),r),s=this._size[0],d=this._size[1]),Ln(o,s),Ln(a,d);var m=l(o,this._ptr[a],this._ptr[a+1],this._index);return m<this._ptr[a+1]&&this._index[m]===o?f(i,p)?function(e,t,n,i,r){n.splice(e,1),i.splice(e,1);for(var o=t+1;o<r.length;o++)r[o]--}(m,a,this._values,this._index,this._ptr):this._values[m]=i:u(m,o,a,i,this._values,this._index,this._ptr),this},r.prototype.resize=function(e,t,n){if(!vt(e))throw new TypeError("Array or Matrix expected");var i=e.valueOf().map(function(e){return Array.isArray(e)&&1===e.length?e[0]:e});if(2!==i.length)throw new Error("Only two dimensions matrix are supported");return i.forEach(function(e){if(!lt(e)||!en(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+In(i)+")")}),c(n?this.clone():this,i[0],i[1],t)},r.prototype.reshape=function(e,t){if(!mt(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");e.forEach(function(t){if(!lt(t)||!en(t)||t<=-2||0===t)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+In(e)+")")});var n=this._size[0]*this._size[1];if(n!==(e=An(e,n))[0]*e[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var i=t?this.clone():this;if(this._size[0]===e[0]&&this._size[1]===e[1])return i;for(var r=[],o=0;o<i._ptr.length;o++)for(var a=0;a<i._ptr[o+1]-i._ptr[o];a++)r.push(o);for(var s=i._values.slice(),c=i._index.slice(),d=0;d<i._index.length;d++){var f=c[d]*i._size[1]+r[d];r[d]=f%e[1],c[d]=Math.floor(f/e[1])}i._values.length=0,i._index.length=0,i._ptr.length=e[1]+1,i._size=e.slice();for(var p=0;p<i._ptr.length;p++)i._ptr[p]=0;for(var m=0;m<s.length;m++){var h=c[m],v=r[m],g=s[m];u(l(h,i._ptr[v],i._ptr[v+1],i._index),h,v,g,i._values,i._index,i._ptr)}return i},r.prototype.clone=function(){return new r({values:this._values?Ht(this._values):void 0,index:Ht(this._index),ptr:Ht(this._ptr),size:Ht(this._size),datatype:this._datatype})},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(e,i){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var o=this;return function(e,i,o,a,s,l,u){var c=[],d=[],f=[],p=n,m=0;pt(e._datatype)&&(p=t.find(n,[e._datatype,e._datatype])||n,m=t.convert(0,e._datatype));for(var h=function(e,t,n){e=l(e,t,n),p(e,m)||(c.push(e),d.push(t))},v=0;v<=s;v++){f.push(c.length);var g=e._ptr[v],y=e._ptr[v+1];if(u)for(var b=g;b<y;b++){var S=e._index[b];S>=0&&S<=o&&h(e._values[b],S-0,v-0)}else{for(var C={},k=g;k<y;k++)C[e._index[k]]=e._values[k];for(var w=0;w<=o;w++)h(w in C?C[w]:0,w-0,v-0)}}return f.push(c.length),new r({values:c,index:d,ptr:f,size:[o-0+1,s-0+1]})}(this,0,this._size[0]-1,0,this._size[1]-1,function(t,n,i){return e(t,[n,i],o)},i)},r.prototype.forEach=function(e,t){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this._size[0],i=this._size[1],r=0;r<i;r++){var o=this._ptr[r],a=this._ptr[r+1];if(t)for(var s=o;s<a;s++)e(this._values[s],[this._index[s],r],this);else{for(var l={},u=o;u<a;u++)l[this._index[u]]=this._values[u];for(var c=0;c<n;c++)e(c in l?l[c]:0,[c,r],this)}}},r.prototype[Symbol.iterator]=regeneratorRuntime.mark(function e(){var t,n,i,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._values){e.next=2;break}throw new Error("Cannot iterate a Pattern only matrix");case 2:t=this._size[1],n=0;case 3:if(!(n<t)){e.next=15;break}i=this._ptr[n+1],r=this._ptr[n];case 5:if(!(r<i)){e.next=12;break}return o=this._index[r],e.next=9,{value:this._values[r],index:[o,n]};case 9:r++,e.next=5;break;case 12:n++,e.next=3;break;case 15:case"end":return e.stop()}},e,this)}),r.prototype.toArray=function(){return d(this._values,this._index,this._ptr,this._size,!0)},r.prototype.valueOf=function(){return d(this._values,this._index,this._ptr,this._size,!1)},r.prototype.format=function(e){for(var t=this._size[0],n=this._size[1],i=this.density(),r="Sparse Matrix ["+In(t,e)+" x "+In(n,e)+"] density: "+In(i,e)+"\n",o=0;o<n;o++)for(var a=this._ptr[o+1],s=this._ptr[o];s<a;s++)r+="\n    ("+In(this._index[s],e)+", "+In(o,e)+") ==> "+(this._values?In(this._values[s],e):"X");return r},r.prototype.toString=function(){return In(this.toArray())},r.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(e){if(e){if(ut(e)&&(e=e.toNumber()),!lt(e)||!en(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var t=e>0?e:0,n=e<0?-e:0,i=this._size[1],o=Math.min(this._size[0]-n,i-t),a=[],s=[],l=[];l[0]=0;for(var u=t;u<i&&a.length<o;u++)for(var c=this._ptr[u+1],d=this._ptr[u];d<c;d++){var f=this._index[d];if(f===u-t+n){a.push(this._values[d]),s[a.length-1]=f-n;break}}return l.push(a.length),new r({values:a,index:s,ptr:l,size:[o,1]})},r.fromJSON=function(e){return new r(e)},r.diagonal=function(e,i,o,a,s){if(!mt(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(ut(e)&&(e=e.toNumber()),!lt(e)||!en(e)||e<1)throw new Error("Size values must be positive integers");return e}),o){if(ut(o)&&(o=o.toNumber()),!lt(o)||!en(o))throw new TypeError("The parameter k must be an integer number")}else o=0;var l=n,u=0;pt(s)&&(l=t.find(n,[s,s])||n,u=t.convert(0,s));var c,d=o>0?o:0,f=o<0?-o:0,p=e[0],m=e[1],h=Math.min(p-f,m-d);if(mt(i)){if(i.length!==h)throw new Error("Invalid value array length");c=function(e){return i[e]}}else if(ht(i)){var v=i.size();if(1!==v.length||v[0]!==h)throw new Error("Invalid matrix length");c=function(e){return i.get([e])}}else c=function(){return i};for(var g=[],y=[],b=[],S=0;S<m;S++){b.push(g.length);var C=S-d;if(C>=0&&C<h){var k=c(C);l(k,u)||(y.push(C+f),g.push(k))}}return b.push(g.length),new r({values:g,index:y,ptr:b,size:[p,m]})},r.prototype.swapRows=function(e,t){if(!(lt(e)&&en(e)&&lt(t)&&en(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Ln(e,this._size[0]),Ln(t,this._size[0]),r._swapRows(e,t,this._size[1],this._values,this._index,this._ptr),this},r._forEachRow=function(e,t,n,i,r){for(var o=i[e+1],a=i[e];a<o;a++)r(n[a],t[a])},r._swapRows=function(e,t,n,i,r,o){for(var a=0;a<n;a++){var s=o[a],u=o[a+1],c=l(e,s,u,r),d=l(t,s,u,r);if(c<u&&d<u&&r[c]===e&&r[d]===t){if(i){var f=i[c];i[c]=i[d],i[d]=f}}else if(c<u&&r[c]===e&&(d>=u||r[d]!==t)){var p=i?i[c]:void 0;r.splice(d,0,t),i&&i.splice(d,0,p),r.splice(d<=c?c+1:c,1),i&&i.splice(d<=c?c+1:c,1)}else if(d<u&&r[d]===t&&(c>=u||r[c]!==e)){var m=i?i[d]:void 0;r.splice(c,0,e),i&&i.splice(c,0,m),r.splice(c<=d?d+1:d,1),i&&i.splice(c<=d?d+1:d,1)}}},r},{isClass:!0}),gi=Yt("matrix",["typed","Matrix","DenseMatrix","SparseMatrix"],function(e){var t=e.typed,n=e.DenseMatrix,i=e.SparseMatrix;return t("matrix",{"":function(){return r([])},string:function(e){return r([],e)},"string, string":function(e,t){return r([],e,t)},Array:function(e){return r(e)},Matrix:function(e){return r(e,e.storage())},"Array | Matrix, string":r,"Array | Matrix, string, string":r});function r(e,t,r){if("dense"===t||"default"===t||void 0===t)return new n(e,r);if("sparse"===t)return new i(e,r);throw new TypeError("Unknown matrix type "+JSON.stringify(t)+".")}}),yi=Yt("abs",["typed"],function(e){return(0,e.typed)("abs",{number:ri,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},Fraction:function(e){return e.abs()},"Array | Matrix":function(e){return Yn(e,this,!0)},Unit:function(e){return e.abs()}})}),bi=Yt("algorithm01",["typed"],function(e){var t=e.typed;return function(e,n,i,r){var o=e._data,a=e._size,s=e._datatype,l=n._values,u=n._index,c=n._ptr,d=n._size,f=n._datatype;if(a.length!==d.length)throw new jn(a.length,d.length);if(a[0]!==d[0]||a[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+d+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p,m,h=a[0],v=a[1],g="string"==typeof s&&s===f?s:void 0,y=g?t.find(i,[g,g]):i,b=[];for(p=0;p<h;p++)b[p]=[];var S=[],C=[];for(m=0;m<v;m++){for(var k=m+1,w=c[m+1],I=c[m];I<w;I++)S[p=u[I]]=r?y(l[I],o[p][m]):y(o[p][m],l[I]),C[p]=k;for(p=0;p<h;p++)b[p][m]=C[p]===k?S[p]:o[p][m]}return e.createDenseMatrix({data:b,size:[h,v],datatype:g})}}),Si=Yt("algorithm10",["typed","DenseMatrix"],function(e){var t=e.typed,n=e.DenseMatrix;return function(e,i,r,o){var a=e._values,s=e._index,l=e._ptr,u=e._size,c=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d,f=u[0],p=u[1],m=r;"string"==typeof c&&(i=t.convert(i,d=c),m=t.find(r,[d,d]));for(var h=[],v=[],g=[],y=0;y<p;y++){for(var b=y+1,S=l[y+1],C=l[y];C<S;C++){var k=s[C];v[k]=a[C],g[k]=b}for(var w=0;w<f;w++)0===y&&(h[w]=[]),h[w][y]=g[w]===b?o?m(i,v[w]):m(v[w],i):i}return new n({data:h,size:[f,p],datatype:d})}}),Ci=Yt("algorithm13",["typed"],function(e){var t=e.typed;return function(e,i,r){var o=e._data,a=e._size,s=e._datatype,l=i._data,u=i._size,c=i._datatype,d=[];if(a.length!==u.length)throw new jn(a.length,u.length);for(var f=0;f<a.length;f++){if(a[f]!==u[f])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+u+")");d[f]=a[f]}var p,m=r;"string"==typeof s&&s===c&&(m=t.find(r,[p=s,p]));var h=d.length>0?n(m,0,d,d[0],o,l):[];return e.createDenseMatrix({data:h,size:d,datatype:p})};function n(e,t,i,r,o,a){var s=[];if(t===i.length-1)for(var l=0;l<r;l++)s[l]=e(o[l],a[l]);else for(var u=0;u<r;u++)s[u]=n(e,t+1,i,i[t+1],o[u],a[u]);return s}}),ki=Yt("algorithm14",["typed"],function(e){var t=e.typed;return function(e,i,r,o){var a,s=e._data,l=e._size,u=e._datatype,c=r;"string"==typeof u&&(i=t.convert(i,a=u),c=t.find(r,[a,a]));var d=l.length>0?n(c,0,l,l[0],s,i,o):[];return e.createDenseMatrix({data:d,size:Ht(l),datatype:a})};function n(e,t,i,r,o,a,s){var l=[];if(t===i.length-1)for(var u=0;u<r;u++)l[u]=s?e(a,o[u]):e(o[u],a);else for(var c=0;c<r;c++)l[c]=n(e,t+1,i,i[t+1],o[c],a,s);return l}}),wi=Yt("algorithm03",["typed"],function(e){var t=e.typed;return function(e,n,i,r){var o=e._data,a=e._size,s=e._datatype,l=n._values,u=n._index,c=n._ptr,d=n._size,f=n._datatype;if(a.length!==d.length)throw new jn(a.length,d.length);if(a[0]!==d[0]||a[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+d+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p,m=a[0],h=a[1],v=0,g=i;"string"==typeof s&&s===f&&(v=t.convert(0,p=s),g=t.find(i,[p,p]));for(var y=[],b=0;b<m;b++)y[b]=[];for(var S=[],C=[],k=0;k<h;k++){for(var w=k+1,I=c[k+1],x=c[k];x<I;x++){var j=u[x];S[j]=r?g(l[x],o[j][k]):g(o[j][k],l[x]),C[j]=w}for(var E=0;E<m;E++)y[E][k]=C[E]===w?S[E]:r?g(v,o[E][k]):g(o[E][k],v)}return e.createDenseMatrix({data:y,size:[m,h],datatype:p})}}),Ii=Yt("algorithm05",["typed","equalScalar"],function(e){var t=e.typed,n=e.equalScalar;return function(e,i,r){var o=e._values,a=e._index,s=e._ptr,l=e._size,u=e._datatype,c=i._values,d=i._index,f=i._ptr,p=i._size,m=i._datatype;if(l.length!==p.length)throw new jn(l.length,p.length);if(l[0]!==p[0]||l[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");var h,v=l[0],g=l[1],y=n,b=0,S=r;"string"==typeof u&&u===m&&(y=t.find(n,[h=u,h]),b=t.convert(0,h),S=t.find(r,[h,h]));var C,k,w,I,x=o&&c?[]:void 0,j=[],E=[],M=x?[]:void 0,_=x?[]:void 0,F=[],L=[];for(k=0;k<g;k++){E[k]=j.length;var O=k+1;for(w=s[k],I=s[k+1];w<I;w++)j.push(C=a[w]),F[C]=O,M&&(M[C]=o[w]);for(w=f[k],I=f[k+1];w<I;w++)F[C=d[w]]!==O&&j.push(C),L[C]=O,_&&(_[C]=c[w]);if(x)for(w=E[k];w<j.length;){var D=F[C=j[w]],A=L[C];if(D===O||A===O){var N=S(D===O?M[C]:b,A===O?_[C]:b);y(N,b)?j.splice(w,1):(x.push(N),w++)}}}return E[g]=j.length,e.createSparseMatrix({values:x,index:j,ptr:E,size:[v,g],datatype:h})}}),xi=Yt("algorithm11",["typed","equalScalar"],function(e){var t=e.typed,n=e.equalScalar;return function(e,i,r,o){var a=e._values,s=e._index,l=e._ptr,u=e._size,c=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d,f=u[0],p=u[1],m=n,h=0,v=r;"string"==typeof c&&(m=t.find(n,[d=c,d]),h=t.convert(0,d),i=t.convert(i,d),v=t.find(r,[d,d]));for(var g=[],y=[],b=[],S=0;S<p;S++){b[S]=y.length;for(var C=l[S+1],k=l[S];k<C;k++){var w=s[k],I=o?v(i,a[k]):v(a[k],i);m(I,h)||(y.push(w),g.push(I))}}return b[p]=y.length,e.createSparseMatrix({values:g,index:y,ptr:b,size:[f,p],datatype:d})}}),ji=Yt("algorithm12",["typed","DenseMatrix"],function(e){var t=e.typed,n=e.DenseMatrix;return function(e,i,r,o){var a=e._values,s=e._index,l=e._ptr,u=e._size,c=e._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d,f=u[0],p=u[1],m=r;"string"==typeof c&&(i=t.convert(i,d=c),m=t.find(r,[d,d]));for(var h=[],v=[],g=[],y=0;y<p;y++){for(var b=y+1,S=l[y+1],C=l[y];C<S;C++){var k=s[C];v[k]=a[C],g[k]=b}for(var w=0;w<f;w++)0===y&&(h[w]=[]),h[w][y]=g[w]===b?o?m(i,v[w]):m(v[w],i):o?m(i,0):m(0,i)}return new n({data:h,size:[f,p],datatype:d})}}),Ei=Yt("algorithm07",["typed","DenseMatrix"],function(e){var t=e.typed,n=e.DenseMatrix;return function(e,r,o){var a=e._size,s=e._datatype,l=r._size,u=r._datatype;if(a.length!==l.length)throw new jn(a.length,l.length);if(a[0]!==l[0]||a[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+l+")");var c,d=a[0],f=a[1],p=0,m=o;"string"==typeof s&&s===u&&(p=t.convert(0,c=s),m=t.find(o,[c,c]));var h,v,g=[];for(h=0;h<d;h++)g[h]=[];var y=[],b=[],S=[],C=[];for(v=0;v<f;v++){var k=v+1;for(i(e,v,S,y,k),i(r,v,C,b,k),h=0;h<d;h++)g[h][v]=m(S[h]===k?y[h]:p,C[h]===k?b[h]:p)}return new n({data:g,size:[d,f],datatype:c})};function i(e,t,n,i,r){for(var o=e._values,a=e._index,s=e._ptr,l=s[t],u=s[t+1];l<u;l++){var c=a[l];n[c]=r,i[c]=o[l]}}}),Mi="identity",_i=Yt(Mi,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],function(e){var t=e.typed,n=e.config,i=e.matrix,r=e.BigNumber,o=e.DenseMatrix,a=e.SparseMatrix;return t(Mi,{"":function(){return"Matrix"===n.matrix?i([]):[]},string:function(e){return i(e)},"number | BigNumber":function(e){return l(e,e,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, string":function(e,t){return l(e,e,t)},"number | BigNumber, number | BigNumber":function(e,t){return l(e,t,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(e,t,n){return l(e,t,n)},Array:function(e){return s(e)},"Array, string":function(e,t){return s(e,t)},Matrix:function(e){return s(e.valueOf(),e.storage())},"Matrix, string":function(e,t){return s(e.valueOf(),t)}});function s(e,t){switch(e.length){case 0:return t?i(t):[];case 1:return l(e[0],e[0],t);case 2:return l(e[0],e[1],t);default:throw new Error("Vector containing two values expected")}}function l(e,t,n){var i=ut(e)||ut(t)?r:null;if(ut(e)&&(e=e.toNumber()),ut(t)&&(t=t.toNumber()),!en(e)||e<1)throw new Error("Parameters in function identity must be positive integers");if(!en(t)||t<1)throw new Error("Parameters in function identity must be positive integers");var s=i?new r(1):1,l=i?new i(0):0,u=[e,t];if(n){if("sparse"===n)return a.diagonal(u,s,0,l);if("dense"===n)return o.diagonal(u,s,0,l);throw new TypeError('Unknown matrix type "'.concat(n,'"'))}for(var c=On([],u,l),d=e<t?e:t,f=0;f<d;f++)c[f][f]=s;return c}});function Fi(){throw new Error('No "bignumber" implementation available')}function Li(){throw new Error('No "fraction" implementation available')}var Oi=Yt("size",["typed","config","?matrix"],function(e){var t=e.typed,n=e.config,i=e.matrix;return t("size",{Matrix:function(e){return e.create(e.size())},Array:Mn,string:function(e){return"Array"===n.matrix?[e.length]:i([e.length])},"number | Complex | BigNumber | Unit | boolean | null":function(e){return"Array"===n.matrix?[]:i?i([]):function(){throw new Error('No "matrix" implementation available')}()}})}),Di=Yt("zeros",["typed","config","matrix","BigNumber"],function(e){var t=e.typed,n=e.config,i=e.matrix,r=e.BigNumber;return t("zeros",{"":function(){return"Array"===n.matrix?o([]):o([],"default")},"...number | BigNumber | string":function(e){if("string"==typeof e[e.length-1]){var t=e.pop();return o(e,t)}return"Array"===n.matrix?o(e):o(e,"default")},Array:o,Matrix:function(e){var t=e.storage();return o(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return o(e.valueOf(),t)}});function o(e,t){var n=function(e){var t=!1;return e.forEach(function(e,n,i){ut(e)&&(t=!0,i[n]=e.toNumber())}),t}(e)?new r(0):0;if(function(e){e.forEach(function(e){if("number"!=typeof e||!en(e)||e<0)throw new Error("Parameters in function zeros must be positive integers")})}(e),t){var o=i(t);return e.length>0?o.resize(e,n):o}var a=[];return e.length>0?On(a,e,n):a}});function Ai(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ni(Object(n),!0).forEach(function(t){Ai(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ni(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}Yt("hex",["typed","format"],function(e){var t=e.typed,n=e.format;return t("hex",{"number | BigNumber":function(e){return n(e,{notation:"hex"})},"number | BigNumber, number":function(e,t){return n(e,{notation:"hex",wordSize:t})}})});var Ti="Number of decimals in function round must be an integer",Pi=Yt("round",["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,i=e.equalScalar,r=e.zeros,o=e.BigNumber,a=e.DenseMatrix,s=xi({typed:t,equalScalar:i}),l=ji({typed:t,DenseMatrix:a}),u=ki({typed:t});return t("round",Ri(Ri({},Bi),{},{Complex:function(e){return e.round()},"Complex, number":function(e,t){if(t%1)throw new TypeError(Ti);return e.round(t)},"Complex, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Ti);var n=t.toNumber();return e.round(n)},"number, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Ti);return new o(e).toDecimalPlaces(t.toNumber())},BigNumber:function(e){return e.toDecimalPlaces(0)},"BigNumber, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Ti);return e.toDecimalPlaces(t.toNumber())},Fraction:function(e){return e.round()},"Fraction, number":function(e,t){if(t%1)throw new TypeError(Ti);return e.round(t)},"Array | Matrix":function(e){return Yn(e,this,!0)},"SparseMatrix, number | BigNumber":function(e,t){return s(e,t,this,!1)},"DenseMatrix, number | BigNumber":function(e,t){return u(e,t,this,!1)},"number | Complex | BigNumber, SparseMatrix":function(e,t){return i(e,0)?r(t.size(),t.storage()):l(t,e,this,!0)},"number | Complex | BigNumber, DenseMatrix":function(e,t){return i(e,0)?r(t.size(),t.storage()):u(t,e,this,!0)},"Array, number | BigNumber":function(e,t){return u(n(e),t,this,!1).valueOf()},"number | Complex | BigNumber, Array":function(e,t){return u(n(t),e,this,!0).valueOf()}}))}),Bi={number:li,"number, number":function(e,t){if(!en(t))throw new TypeError(Ti);if(t<0||t>15)throw new Error("Number of decimals in function round must be in the range of 0-15");return li(e,t)}},$i="smaller",Vi=Yt($i,["typed","config","matrix","DenseMatrix"],function(e){var t=e.typed,n=e.config,i=e.matrix,r=e.DenseMatrix,o=wi({typed:t}),a=Ei({typed:t,DenseMatrix:r}),s=ji({typed:t,DenseMatrix:r}),l=Ci({typed:t}),u=ki({typed:t});return t($i,{"boolean, boolean":function(e,t){return e<t},"number, number":function(e,t){return e<t&&!cn(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.lt(t)&&!Xn(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return-1===e.compare(t)},"Complex, Complex":function(e,t){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,this)},"Array, Array":function(e,t){return this(i(e),i(t)).valueOf()},"Array, Matrix":function(e,t){return this(i(e),t)},"Matrix, Array":function(e,t){return this(e,i(t))},"SparseMatrix, any":function(e,t){return s(e,t,this,!1)},"DenseMatrix, any":function(e,t){return u(e,t,this,!1)},"any, SparseMatrix":function(e,t){return s(t,e,this,!0)},"any, DenseMatrix":function(e,t){return u(t,e,this,!0)},"Array, any":function(e,t){return u(i(e),t,this,!1).valueOf()},"any, Array":function(e,t){return u(i(t),e,this,!0).valueOf()}})}),Ui=Yt("larger",["typed","config","matrix","DenseMatrix"],function(e){var t=e.typed,n=e.config,i=e.matrix,r=e.DenseMatrix,o=wi({typed:t}),a=Ei({typed:t,DenseMatrix:r}),s=ji({typed:t,DenseMatrix:r}),l=Ci({typed:t}),u=ki({typed:t});return t("larger",{"boolean, boolean":function(e,t){return e>t},"number, number":function(e,t){return e>t&&!cn(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.gt(t)&&!Xn(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return 1===e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,this)},"Array, Array":function(e,t){return this(i(e),i(t)).valueOf()},"Array, Matrix":function(e,t){return this(i(e),t)},"Matrix, Array":function(e,t){return this(e,i(t))},"SparseMatrix, any":function(e,t){return s(e,t,this,!1)},"DenseMatrix, any":function(e,t){return u(e,t,this,!1)},"any, SparseMatrix":function(e,t){return s(t,e,this,!0)},"any, DenseMatrix":function(e,t){return u(t,e,this,!0)},"Array, any":function(e,t){return u(i(e),t,this,!1).valueOf()},"any, Array":function(e,t){return u(i(t),e,this,!0).valueOf()}})}),Ki="unequal",zi=(Yt(Ki,["typed","equalScalar"],function(e){var t=e.typed,n=e.equalScalar;return t(Ki,{"any, any":function(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:!n(e,t)}})}),Yt("FibonacciHeap",["smaller","larger"],function(e){var t=e.smaller,n=e.larger,i=1/Math.log((1+Math.sqrt(5))/2);function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function o(e,t,n){t.left.right=t.right,t.right.left=t.left,n.degree--,n.child===t&&(n.child=t.right),0===n.degree&&(n.child=null),t.left=e,t.right=e.right,e.right=t,t.right.left=t,t.parent=null,t.mark=!1}function a(e,t){var n=t.parent;!n||(t.mark?(o(e,t,n),a(n)):t.mark=!0)}r.prototype.type="FibonacciHeap",r.prototype.isFibonacciHeap=!0,r.prototype.insert=function(e,n){var i={key:e,value:n,degree:0};if(this._minimum){var r=this._minimum;i.left=r,i.right=r.right,r.right=i,i.right.left=i,t(e,r.key)&&(this._minimum=i)}else i.left=i,i.right=i,this._minimum=i;return this._size++,i},r.prototype.size=function(){return this._size},r.prototype.clear=function(){this._minimum=null,this._size=0},r.prototype.isEmpty=function(){return 0===this._size},r.prototype.extractMinimum=function(){var e=this._minimum;if(null===e)return e;for(var r=this._minimum,o=e.degree,a=e.child;o>0;){var l=a.right;a.left.right=a.right,a.right.left=a.left,a.left=r,a.right=r.right,r.right=a,a.right.left=a,a.parent=null,a=l,o--}return e.left.right=e.right,e.right.left=e.left,r=e===e.right?null:function(e,r){var o,a=Math.floor(Math.log(r)*i)+1,l=new Array(a),u=0,c=e;if(c)for(u++,c=c.right;c!==e;)u++,c=c.right;for(;u>0;){for(var d=c.degree,f=c.right;o=l[d];){if(n(c.key,o.key)){var p=o;o=c,c=p}s(o,c),l[d]=null,d++}l[d]=c,c=f,u--}e=null;for(var m=0;m<a;m++)(o=l[m])&&(e?(o.left.right=o.right,o.right.left=o.left,o.left=e,o.right=e.right,e.right=o,o.right.left=o,t(o.key,e.key)&&(e=o)):e=o);return e}(r=e.right,this._size),this._size--,this._minimum=r,e},r.prototype.remove=function(e){this._minimum=function(e,n,i){n.key=-1;var r=n.parent;return r&&t(n.key,r.key)&&(o(e,n,r),a(e,r)),t(n.key,e.key)&&(e=n),e}(this._minimum,e),this.extractMinimum()};var s=function(e,t){e.left.right=e.right,e.right.left=e.left,e.parent=t,t.child?(e.left=t.child,e.right=t.child.right,t.child.right=e,e.right.left=e):(t.child=e,e.right=e,e.left=e),t.degree++,e.mark=!1};return r},{isClass:!0})),Gi=Yt("dot",["typed","addScalar","multiplyScalar","conj","size"],function(e){var t=e.typed,n=e.addScalar,i=e.multiplyScalar,r=e.conj,o=e.size;return t("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(e,o){var l=a(e,o),u=ht(e)?e._data:e,c=ht(e)?e._datatype:void 0,d=ht(o)?o._data:o,f=ht(o)?o._datatype:void 0,p=2===s(e).length,m=2===s(o).length,h=n,v=i;if(c&&f&&c===f&&"string"==typeof c){var g=c;h=t.find(n,[g,g]),v=t.find(i,[g,g])}if(!p&&!m){for(var y=v(r(u[0]),d[0]),b=1;b<l;b++)y=h(y,v(r(u[b]),d[b]));return y}if(!p&&m){for(var S=v(r(u[0]),d[0][0]),C=1;C<l;C++)S=h(S,v(r(u[C]),d[C][0]));return S}if(p&&!m){for(var k=v(r(u[0][0]),d[0]),w=1;w<l;w++)k=h(k,v(r(u[w][0]),d[w]));return k}if(p&&m){for(var I=v(r(u[0][0]),d[0][0]),x=1;x<l;x++)I=h(I,v(r(u[x][0]),d[x][0]));return I}},"SparseMatrix, SparseMatrix":function(e,t){a(e,t);for(var r=e._index,o=e._values,s=t._index,l=t._values,u=0,c=n,d=i,f=0,p=0;f<r.length&&p<s.length;){var m=r[f],h=s[p];m<h?f++:m>h?p++:m===h&&(u=c(u,d(o[f],l[p])),f++,p++)}return u}});function a(e,t){var n,i,r=s(e),o=s(t);if(1===r.length)n=r[0];else{if(2!==r.length||1!==r[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+r.join(", ")+")");n=r[0]}if(1===o.length)i=o[0];else{if(2!==o.length||1!==o[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+o.join(", ")+")");i=o[0]}if(n!==i)throw new RangeError("Vectors must have equal length ("+n+" != "+i+")");if(0===n)throw new RangeError("Cannot calculate the dot product of empty vectors");return n}function s(e){return ht(e)?e.size():o(e)}}),Zi="multiply",Hi=Yt(Zi,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],function(e){var t=e.typed,n=e.matrix,i=e.addScalar,r=e.multiplyScalar,o=e.equalScalar,a=e.dot,s=xi({typed:t,equalScalar:o}),l=ki({typed:t});function u(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+e[0]+") must match Matrix rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+e[1]+") must match Vector length ("+t[0]+")");break;case 2:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+e[1]+") must match Matrix B rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+e.length+" dimensions)")}}var c=t("_multiplyMatrixVector",{"DenseMatrix, any":function(e,n){var o,a=e._data,s=e._size,l=e._datatype,u=n._data,c=n._datatype,d=s[0],f=s[1],p=i,m=r;l&&c&&l===c&&"string"==typeof l&&(p=t.find(i,[o=l,o]),m=t.find(r,[o,o]));for(var h=[],v=0;v<d;v++){for(var g=a[v],y=m(g[0],u[0]),b=1;b<f;b++)y=p(y,m(g[b],u[b]));h[v]=y}return e.createDenseMatrix({data:h,size:[d],datatype:o})},"SparseMatrix, any":function(e,n){var a=e._values,s=e._index,l=e._ptr,u=e._datatype;if(!a)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,d=n._data,f=n._datatype,p=e._size[0],m=n._size[0],h=[],v=[],g=[],y=i,b=r,S=o,C=0;u&&f&&u===f&&"string"==typeof u&&(y=t.find(i,[c=u,c]),b=t.find(r,[c,c]),S=t.find(o,[c,c]),C=t.convert(0,c));var k=[],w=[];g[0]=0;for(var I=0;I<m;I++){var x=d[I];if(!S(x,C))for(var j=l[I+1],E=l[I];E<j;E++){var M=s[E];w[M]?k[M]=y(k[M],b(x,a[E])):(w[M]=!0,v.push(M),k[M]=b(x,a[E]))}}for(var _=v.length,F=0;F<_;F++)h[F]=k[v[F]];return g[1]=v.length,e.createSparseMatrix({values:h,index:v,ptr:g,size:[p,1],datatype:c})}}),d=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(e,n){var o,a=e._data,s=e._size,l=e._datatype,u=n._data,c=n._datatype,d=s[0],f=s[1],p=n._size[1],m=i,h=r;l&&c&&l===c&&"string"==typeof l&&(m=t.find(i,[o=l,o]),h=t.find(r,[o,o]));for(var v=[],g=0;g<d;g++){var y=a[g];v[g]=[];for(var b=0;b<p;b++){for(var S=h(y[0],u[0][b]),C=1;C<f;C++)S=m(S,h(y[C],u[C][b]));v[g][b]=S}}return e.createDenseMatrix({data:v,size:[d,p],datatype:o})},"DenseMatrix, SparseMatrix":function(e,n){var a=e._data,s=e._size,l=e._datatype,u=n._values,c=n._index,d=n._ptr,f=n._size,p=n._datatype;if(!u)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var m,h=s[0],v=f[1],g=i,y=r,b=o,S=0;l&&p&&l===p&&"string"==typeof l&&(g=t.find(i,[m=l,m]),y=t.find(r,[m,m]),b=t.find(o,[m,m]),S=t.convert(0,m));for(var C=[],k=[],w=[],I=n.createSparseMatrix({values:C,index:k,ptr:w,size:[h,v],datatype:m}),x=0;x<v;x++){w[x]=k.length;var j=d[x],E=d[x+1];if(E>j)for(var M=0,_=0;_<h;_++){for(var F=_+1,L=void 0,O=j;O<E;O++){var D=c[O];M!==F?(L=y(a[_][D],u[O]),M=F):L=g(L,y(a[_][D],u[O]))}M===F&&!b(L,S)&&(k.push(_),C.push(L))}}return w[v]=k.length,I},"SparseMatrix, DenseMatrix":function(e,n){var a=e._values,s=e._index,l=e._ptr,u=e._datatype;if(!a)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,d=n._data,f=n._datatype,p=e._size[0],m=n._size[0],h=n._size[1],v=i,g=r,y=o,b=0;u&&f&&u===f&&"string"==typeof u&&(v=t.find(i,[c=u,c]),g=t.find(r,[c,c]),y=t.find(o,[c,c]),b=t.convert(0,c));for(var S=[],C=[],k=[],w=e.createSparseMatrix({values:S,index:C,ptr:k,size:[p,h],datatype:c}),I=[],x=[],j=0;j<h;j++){k[j]=C.length;for(var E=j+1,M=0;M<m;M++){var _=d[M][j];if(!y(_,b))for(var F=l[M+1],L=l[M];L<F;L++){var O=s[L];x[O]!==E?(x[O]=E,C.push(O),I[O]=g(_,a[L])):I[O]=v(I[O],g(_,a[L]))}}for(var D=C.length,A=k[j];A<D;A++)S[A]=I[C[A]]}return k[h]=C.length,w},"SparseMatrix, SparseMatrix":function(e,n){var o,a=e._values,s=e._index,l=e._ptr,u=e._datatype,c=n._values,d=n._index,f=n._ptr,p=n._datatype,m=e._size[0],h=n._size[1],v=a&&c,g=i,y=r;u&&p&&u===p&&"string"==typeof u&&(g=t.find(i,[o=u,o]),y=t.find(r,[o,o]));for(var b,S,C,k,w,I,x=v?[]:void 0,j=[],E=[],M=e.createSparseMatrix({values:x,index:j,ptr:E,size:[m,h],datatype:o}),_=v?[]:void 0,F=[],L=0;L<h;L++){E[L]=j.length;var O=L+1;for(k=f[L+1],C=f[L];C<k;C++)if(I=d[C],v)for(S=l[I+1],b=l[I];b<S;b++)F[w=s[b]]!==O?(F[w]=O,j.push(w),_[w]=y(c[C],a[b])):_[w]=g(_[w],y(c[C],a[b]));else for(S=l[I+1],b=l[I];b<S;b++)F[w=s[b]]!==O&&(F[w]=O,j.push(w));if(v)for(var D=j.length,A=E[L];A<D;A++)x[A]=_[j[A]]}return E[h]=j.length,M}});return t(Zi,qt({"Array, Array":function(e,t){u(Mn(e),Mn(t));var i=this(n(e),n(t));return ht(i)?i.valueOf():i},"Matrix, Matrix":function(e,n){var o=e.size(),s=n.size();return u(o,s),1===o.length?1===s.length?function(e,t,n){if(0===n)throw new Error("Cannot multiply two empty vectors");return a(e,t)}(e,n,o[0]):function(e,n){if("dense"!==n.storage())throw new Error("Support for SparseMatrix not implemented");return function(e,n){var o,a=e._data,s=e._datatype,l=n._data,u=n._datatype,c=e._size[0],d=n._size[1],f=i,p=r;s&&u&&s===u&&"string"==typeof s&&(f=t.find(i,[o=s,o]),p=t.find(r,[o,o]));for(var m=[],h=0;h<d;h++){for(var v=p(a[0],l[0][h]),g=1;g<c;g++)v=f(v,p(a[g],l[g][h]));m[h]=v}return e.createDenseMatrix({data:m,size:[d],datatype:o})}(e,n)}(e,n):1===s.length?c(e,n):d(e,n)},"Matrix, Array":function(e,t){return this(e,n(t))},"Array, Matrix":function(e,t){return this(n(e,t.storage()),t)},"SparseMatrix, any":function(e,t){return s(e,t,r,!1)},"DenseMatrix, any":function(e,t){return l(e,t,r,!1)},"any, SparseMatrix":function(e,t){return s(t,e,r,!0)},"any, DenseMatrix":function(e,t){return l(t,e,r,!0)},"Array, any":function(e,t){return l(n(e),t,r,!1).valueOf()},"any, Array":function(e,t){return l(n(t),e,r,!0).valueOf()},"any, any":r,"any, any, ...any":function(e,t,n){for(var i=this(e,t),r=0;r<n.length;r++)i=this(i,n[r]);return i}},r.signatures))});function qi(e,t,n,i){if(!(this instanceof qi))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=t,this.min=n,this.max=i,this.message="Wrong number of arguments in function "+e+" ("+t+" provided, "+n+(null!=i?"-"+i:"")+" expected)",this.stack=(new Error).stack}(qi.prototype=new Error).constructor=Error,qi.prototype.name="ArgumentsError",qi.prototype.isArgumentsError=!0,g(3258);var Wi=Yt("bignumber",["typed","BigNumber"],function(e){var t=e.typed,n=e.BigNumber;return t("bignumber",{"":function(){return new n(0)},number:function(e){return new n(e+"")},string:function(e){var t=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(t){var i=t[2],r=n(t[1]),o=new n(2).pow(Number(i));if(r.gt(o.sub(1)))throw new SyntaxError('String "'.concat(e,'" is out of range'));var a=new n(2).pow(Number(i)-1);return r.gte(a)?r.sub(o):r}return new n(e)},BigNumber:function(e){return e},Fraction:function(e){return new n(e.n).div(e.d).times(e.s)},null:function(e){return new n(0)},"Array | Matrix":function(e){return Yn(e,this)}})}),Qi=Yt("numeric",["number","?bignumber","?fraction"],function(e){var t=e.number,n=e.bignumber,i=e.fraction,r={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:function(e){return t(e)},BigNumber:n?function(e){return n(e)}:Fi,Fraction:i?function(e){return i(e)}:Li};return function(e,t){var n=Zt(e);if(!(n in r))throw new TypeError("Cannot convert "+e+' of type "'+n+'"; valid input types are '+Object.keys(r).join(", "));if(!(t in o))throw new TypeError("Cannot convert "+e+' to type "'+t+'"; valid output types are '+Object.keys(o).join(", "));return t===n?e:o[t](e)}}),Yi="subtract",Xi=Yt(Yi,["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],function(e){var t=e.typed,n=e.matrix,i=e.equalScalar,r=e.addScalar,o=e.unaryMinus,a=e.DenseMatrix,s=bi({typed:t}),l=wi({typed:t}),u=Ii({typed:t,equalScalar:i}),c=Si({typed:t,DenseMatrix:a}),d=Ci({typed:t}),f=ki({typed:t});return t(Yi,{"number, number":function(e,t){return e-t},"Complex, Complex":function(e,t){return e.sub(t)},"BigNumber, BigNumber":function(e,t){return e.minus(t)},"Fraction, Fraction":function(e,t){return e.sub(t)},"Unit, Unit":function(e,t){if(null===e.value)throw new Error("Parameter x contains a unit with undefined value");if(null===t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=this(n.value,t.value),n.fixPrefix=!1,n},"SparseMatrix, SparseMatrix":function(e,t){return Ji(e,t),u(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return Ji(e,t),l(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return Ji(e,t),s(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return Ji(e,t),d(e,t,this)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"SparseMatrix, any":function(e,t){return c(e,o(t),r)},"DenseMatrix, any":function(e,t){return f(e,t,this)},"any, SparseMatrix":function(e,t){return c(t,e,this,!0)},"any, DenseMatrix":function(e,t){return f(t,e,this,!0)},"Array, any":function(e,t){return f(n(e),t,this,!1).valueOf()},"any, Array":function(e,t){return f(n(t),e,this,!0).valueOf()}})});function Ji(e,t){var n=e.size(),i=t.size();if(n.length!==i.length)throw new jn(n.length,i.length)}var er=(Yt("equal",["typed","equalScalar"],function(e){var t=e.typed,n=e.equalScalar;return t("equal",{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:n(e,t)}})}),"divideScalar"),tr=Yt(er,["typed","numeric"],function(e){var t=e.typed,n=e.numeric;return t(er,{"number, number":function(e,t){return e/t},"Complex, Complex":function(e,t){return e.div(t)},"BigNumber, BigNumber":function(e,t){return e.div(t)},"Fraction, Fraction":function(e,t){return e.div(t)},"Unit, number | Fraction | BigNumber":function(e,t){var i=e.clone(),r=n(1,Zt(t));return i.value=this(null===i.value?i._normalize(r):i.value,t),i},"number | Fraction | BigNumber, Unit":function(e,t){var i=t.clone();i=i.pow(-1);var r=n(1,Zt(e));return i.value=this(e,null===t.value?t._normalize(r):t.value),i},"Unit, Unit":function(e,t){return e.divide(t)}})}),nr=Yt("Spa",["addScalar","equalScalar","FibonacciHeap"],function(e){var t=e.addScalar,n=e.equalScalar,i=e.FibonacciHeap;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new i}return r.prototype.type="Spa",r.prototype.isSpa=!0,r.prototype.set=function(e,t){if(this._values[e])this._values[e].value=t;else{var n=this._heap.insert(e,t);this._values[e]=n}},r.prototype.get=function(e){var t=this._values[e];return t?t.value:0},r.prototype.accumulate=function(e,n){var i=this._values[e];i?i.value=t(i.value,n):(i=this._heap.insert(e,n),this._values[e]=i)},r.prototype.forEach=function(e,t,i){var r=this._heap,o=this._values,a=[],s=r.extractMinimum();for(s&&a.push(s);s&&s.key<=t;)s.key>=e&&(n(s.value,0)||i(s.key,s.value,this)),(s=r.extractMinimum())&&a.push(s);for(var l=0;l<a.length;l++){var u=a[l];o[(s=r.insert(u.key,u.value)).key]=s}},r.prototype.swap=function(e,t){var n=this._values[e],i=this._values[t];if(!n&&i)n=this._heap.insert(e,i.value),this._heap.remove(i),this._values[e]=n,this._values[t]=void 0;else if(n&&!i)i=this._heap.insert(t,n.value),this._heap.remove(n),this._values[t]=i,this._values[e]=void 0;else if(n&&i){var r=n.value;n.value=i.value,i.value=r}},r},{isClass:!0}),ir=Yt("lup",["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],function(e){var t=e.typed,n=e.matrix,i=e.abs,r=e.addScalar,o=e.divideScalar,a=e.multiplyScalar,s=e.subtract,l=e.larger,u=e.equalScalar,c=e.unaryMinus,d=e.DenseMatrix,f=e.SparseMatrix,p=e.Spa;return t("lup",{DenseMatrix:function(e){return m(e)},SparseMatrix:function(e){return function(e){var t,n,r,s=e._size[0],d=e._size[1],m=Math.min(s,d),h=e._values,v=e._index,g=e._ptr,y=[],b=[],S=[],C=[s,m],k=[],w=[],I=[],x=[m,d],j=[],E=[];for(t=0;t<s;t++)j[t]=t,E[t]=t;var M=function(){var e=new p;n<s&&(S.push(y.length),y.push(1),b.push(n)),I.push(k.length);var d=g[n+1];for(r=g[n];r<d;r++)e.set(j[t=v[r]],h[r]);n>0&&e.forEach(0,n-1,function(t,n){f._forEachRow(t,y,b,S,function(i,r){i>t&&e.accumulate(i,c(a(r,n)))})});var m=n,M=e.get(n),_=i(M);e.forEach(n+1,s-1,function(e,t){var n=i(t);l(n,_)&&(m=e,_=n,M=t)}),n!==m&&(f._swapRows(n,m,C[1],y,b,S),f._swapRows(n,m,x[1],k,w,I),e.swap(n,m),function(e,t){var n=E[e],i=E[t];j[n]=t,j[i]=e,E[e]=i,E[t]=n}(n,m)),e.forEach(0,s-1,function(e,t){e<=n?(k.push(t),w.push(e)):(t=o(t,M),u(t,0)||(y.push(t),b.push(e)))})};for(n=0;n<d;n++)M();return I.push(k.length),S.push(y.length),{L:new f({values:y,index:b,ptr:S,size:C}),U:new f({values:k,index:w,ptr:I,size:x}),p:j,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}(e)},Array:function(e){var t=m(n(e));return{L:t.L.valueOf(),U:t.U.valueOf(),p:t.p}}});function m(e){var t,n,c,f=e._size[0],p=e._size[1],m=Math.min(f,p),h=Ht(e._data),v=[],g=[f,m],y=[],b=[m,p],S=[];for(t=0;t<f;t++)S[t]=t;for(n=0;n<p;n++){if(n>0)for(t=0;t<f;t++){var C=Math.min(t,n),k=0;for(c=0;c<C;c++)k=r(k,a(h[t][c],h[c][n]));h[t][n]=s(h[t][n],k)}var w=n,I=0,x=0;for(t=n;t<f;t++){var j=h[t][n],E=i(j);l(E,I)&&(w=t,I=E,x=j)}if(n!==w&&(S[n]=[S[w],S[w]=S[n]][0],d._swapRows(n,w,h)),n<f)for(t=n+1;t<f;t++)u(h[t][n],0)||(h[t][n]=o(h[t][n],x))}for(n=0;n<p;n++)for(t=0;t<f;t++)0===n&&(t<p&&(y[t]=[]),v[t]=[]),t<n?(t<p&&(y[t][n]=h[t][n]),n<f&&(v[t][n]=0)):t!==n?(t<p&&(y[t][n]=0),n<f&&(v[t][n]=h[t][n])):(t<p&&(y[t][n]=h[t][n]),n<f&&(v[t][n]=1));var M=new d({data:v,size:g}),_=new d({data:y,size:b}),F=[];for(t=0,m=S.length;t<m;t++)F[S[t]]=t;return{L:M,U:_,p:F,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}}),rr=Yt("det",["typed","matrix","subtract","multiply","unaryMinus","lup"],function(e){var t=e.typed,n=e.matrix,i=e.subtract,r=e.multiply,o=e.unaryMinus,a=e.lup;return t("det",{any:function(e){return Ht(e)},"Array | Matrix":function(e){var t;switch((t=ht(e)?e.size():Array.isArray(e)?(e=n(e)).size():[]).length){case 0:return Ht(e);case 1:if(1===t[0])return Ht(e.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+In(t)+")");case 2:var s=t[0];if(s===t[1])return function(e,t,n){if(1===t)return Ht(e[0][0]);if(2===t)return i(r(e[0][0],e[1][1]),r(e[1][0],e[0][1]));for(var s=a(e),l=s.U[0][0],u=1;u<t;u++)l=r(l,s.U[u][u]);for(var c=0,d=0,f=[];;){for(;f[d];)d++;if(d>=t)break;for(var p=d,m=0;!f[s.p[p]];)f[s.p[p]]=!0,p=s.p[p],m++;m%2==0&&c++}return c%2==0?l:o(l)}(e.clone().valueOf(),s);throw new RangeError("Matrix must be square (size: "+In(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+In(t)+")")}}})}),or=Yt("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],function(e){var t=e.typed,n=e.matrix,i=e.divideScalar,r=e.addScalar,o=e.multiply,a=e.unaryMinus,s=e.det,l=e.identity,u=e.abs;return t("inv",{"Array | Matrix":function(e){var t=ht(e)?e.size():Mn(e);switch(t.length){case 1:if(1===t[0])return ht(e)?n([i(1,e.valueOf()[0])]):[i(1,e[0])];throw new RangeError("Matrix must be square (size: "+In(t)+")");case 2:var r=t[0],o=t[1];if(r===o)return ht(e)?n(c(e.valueOf(),r,o),e.storage()):c(e,r,o);throw new RangeError("Matrix must be square (size: "+In(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+In(t)+")")}},any:function(e){return i(1,e)}});function c(e,t,n){var c,d,f,p,m;if(1===t){if(0===(p=e[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[i(1,p)]]}if(2===t){var h=s(e);if(0===h)throw Error("Cannot calculate inverse, determinant is zero");return[[i(e[1][1],h),i(a(e[0][1]),h)],[i(a(e[1][0]),h),i(e[0][0],h)]]}var v=e.concat();for(c=0;c<t;c++)v[c]=v[c].concat();for(var g=l(t).valueOf(),y=0;y<n;y++){var b=u(v[y][y]),S=y;for(c=y+1;c<t;)u(v[c][y])>b&&(b=u(v[c][y]),S=c),c++;if(0===b)throw Error("Cannot calculate inverse, determinant is zero");(c=S)!==y&&(m=v[y],v[y]=v[c],v[c]=m,m=g[y],g[y]=g[c],g[c]=m);var C=v[y],k=g[y];for(c=0;c<t;c++){var w=v[c],I=g[c];if(c!==y){if(0!==w[y]){for(f=i(a(w[y]),C[y]),d=y;d<n;d++)w[d]=r(w[d],o(f,C[d]));for(d=0;d<n;d++)I[d]=r(I[d],o(f,k[d]))}}else{for(f=C[y],d=y;d<n;d++)w[d]=i(w[d],f);for(d=0;d<n;d++)I[d]=i(I[d],f)}}}return g}}),ar=Yt("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],function(e){var t=e.typed,n=e.matrix,i=e.multiply,r=e.equalScalar,o=e.divideScalar,a=e.inv,s=xi({typed:t,equalScalar:r}),l=ki({typed:t});return t("divide",qt({"Array | Matrix, Array | Matrix":function(e,t){return i(e,a(t))},"DenseMatrix, any":function(e,t){return l(e,t,o,!1)},"SparseMatrix, any":function(e,t){return s(e,t,o,!1)},"Array, any":function(e,t){return l(n(e),t,o,!1).valueOf()},"any, Array | Matrix":function(e,t){return i(e,a(t))}},o.signatures))}),sr=dn({}),lr=gn({config:st}),ur=yn({}),cr=Cn({}),dr=Bn({Matrix:ur}),fr=Hn({BigNumber:lr,Complex:sr,DenseMatrix:dr,Fraction:cr}),pr=ei({config:st,typed:fr}),mr=ti({typed:fr}),hr=ui({typed:fr}),vr=ci({Fraction:cr,typed:fr}),gr=fi({typed:fr}),yr=mi({typed:fr}),br=hi({typed:fr}),Sr=vi({Matrix:ur,equalScalar:pr,typed:fr}),Cr=gi({DenseMatrix:dr,Matrix:ur,SparseMatrix:Sr,typed:fr}),kr=yi({typed:fr}),wr=_i({BigNumber:lr,DenseMatrix:dr,SparseMatrix:Sr,config:st,matrix:Cr,typed:fr}),Ir=Oi({matrix:Cr,config:st,typed:fr}),xr=Pi({BigNumber:lr,DenseMatrix:dr,equalScalar:pr,matrix:Cr,typed:fr,zeros:Di({BigNumber:lr,config:st,matrix:Cr,typed:fr})}),jr=Vi({DenseMatrix:dr,config:st,matrix:Cr,typed:fr}),Er=Ui({DenseMatrix:dr,config:st,matrix:Cr,typed:fr}),Mr=zi({larger:Er,smaller:jr}),_r=Hi({addScalar:yr,dot:Gi({addScalar:yr,conj:br,multiplyScalar:hr,size:Ir,typed:fr}),equalScalar:pr,matrix:Cr,multiplyScalar:hr,typed:fr}),Fr=Qi({bignumber:Wi({BigNumber:lr,typed:fr}),fraction:vr,number:mr}),Lr=Xi({DenseMatrix:dr,addScalar:yr,equalScalar:pr,matrix:Cr,typed:fr,unaryMinus:gr}),Or=tr({numeric:Fr,typed:fr}),Dr=ar({divideScalar:Or,equalScalar:pr,inv:or({abs:kr,addScalar:yr,det:rr({lup:ir({DenseMatrix:dr,Spa:nr({FibonacciHeap:Mr,addScalar:yr,equalScalar:pr}),SparseMatrix:Sr,abs:kr,addScalar:yr,divideScalar:Or,equalScalar:pr,larger:Er,matrix:Cr,multiplyScalar:hr,subtract:Lr,typed:fr,unaryMinus:gr}),matrix:Cr,multiply:_r,subtract:Lr,typed:fr,unaryMinus:gr}),divideScalar:Or,identity:wr,matrix:Cr,multiply:_r,typed:fr,unaryMinus:gr}),matrix:Cr,multiply:_r,typed:fr}),Ar=g(78510),Nr=g(84562),Rr=g(3227),Tr=g(12445);function Pr(e,t){}var Br=function(){var e="undefined"!=typeof window?window:void 0;return e&&e.tinymce?e.tinymce:null},$r=function(){var e=function e(){I(this,e),this.onBeforePaste=new k.EventEmitter,this.onBlur=new k.EventEmitter,this.onClick=new k.EventEmitter,this.onContextMenu=new k.EventEmitter,this.onCopy=new k.EventEmitter,this.onCut=new k.EventEmitter,this.onDblclick=new k.EventEmitter,this.onDrag=new k.EventEmitter,this.onDragDrop=new k.EventEmitter,this.onDragEnd=new k.EventEmitter,this.onDragGesture=new k.EventEmitter,this.onDragOver=new k.EventEmitter,this.onDrop=new k.EventEmitter,this.onFocus=new k.EventEmitter,this.onFocusIn=new k.EventEmitter,this.onFocusOut=new k.EventEmitter,this.onKeyDown=new k.EventEmitter,this.onKeyPress=new k.EventEmitter,this.onKeyUp=new k.EventEmitter,this.onMouseDown=new k.EventEmitter,this.onMouseEnter=new k.EventEmitter,this.onMouseLeave=new k.EventEmitter,this.onMouseMove=new k.EventEmitter,this.onMouseOut=new k.EventEmitter,this.onMouseOver=new k.EventEmitter,this.onMouseUp=new k.EventEmitter,this.onPaste=new k.EventEmitter,this.onSelectionChange=new k.EventEmitter,this.onActivate=new k.EventEmitter,this.onAddUndo=new k.EventEmitter,this.onBeforeAddUndo=new k.EventEmitter,this.onBeforeExecCommand=new k.EventEmitter,this.onBeforeGetContent=new k.EventEmitter,this.onBeforeRenderUI=new k.EventEmitter,this.onBeforeSetContent=new k.EventEmitter,this.onChange=new k.EventEmitter,this.onClearUndos=new k.EventEmitter,this.onDeactivate=new k.EventEmitter,this.onDirty=new k.EventEmitter,this.onExecCommand=new k.EventEmitter,this.onGetContent=new k.EventEmitter,this.onHide=new k.EventEmitter,this.onInit=new k.EventEmitter,this.onInitNgModel=new k.EventEmitter,this.onLoadContent=new k.EventEmitter,this.onNodeChange=new k.EventEmitter,this.onPostProcess=new k.EventEmitter,this.onPostRender=new k.EventEmitter,this.onPreInit=new k.EventEmitter,this.onPreProcess=new k.EventEmitter,this.onProgressState=new k.EventEmitter,this.onRedo=new k.EventEmitter,this.onRemove=new k.EventEmitter,this.onReset=new k.EventEmitter,this.onResizeEditor=new k.EventEmitter,this.onSaveContent=new k.EventEmitter,this.onSetAttrib=new k.EventEmitter,this.onObjectResizeStart=new k.EventEmitter,this.onObjectResized=new k.EventEmitter,this.onObjectSelected=new k.EventEmitter,this.onSetContent=new k.EventEmitter,this.onShow=new k.EventEmitter,this.onSubmit=new k.EventEmitter,this.onUndo=new k.EventEmitter,this.onVisualAid=new k.EventEmitter};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=k.\u0275\u0275defineDirective({type:e,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),e}(),Vr=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Ur=function(e,t){return"string"==typeof e?e.split(",").map(function(e){return e.trim()}):Array.isArray(e)?e:t},Kr=0,zr=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++Kr+String(t)},Gr=function(e){return void 0!==e&&"textarea"===e.tagName.toLowerCase()},Zr=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},Hr=function(e,t){return Zr(e).concat(Zr(t))},qr=function(){},Wr=function(e){return null==e},Qr=function(){return{listeners:[],scriptId:zr("tiny-script"),scriptLoaded:!1}},Yr=function(){var e=Qr();return{load:function(t,n,i){e.scriptLoaded?i():(e.listeners.push(i),t.getElementById(e.scriptId)||function(t,n,i,r){var o=n.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.id=t,o.src=i;o.addEventListener("load",function t(){o.removeEventListener("load",t),e.listeners.forEach(function(e){return e()}),e.scriptLoaded=!0}),n.head&&n.head.appendChild(o)}(e.scriptId,t,n))},reinitialize:function(){e=Qr()}}}(),Xr=new k.InjectionToken("TINYMCE_SCRIPT_SRC"),Jr={provide:V.NG_VALUE_ACCESSOR,useExisting:(0,k.forwardRef)(function(){return eo}),multi:!0},eo=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this)).platformId=r,a.tinymceScriptSrc=o,a.cloudChannel="5",a.apiKey="no-api-key",a.id="",a.modelEvents="change input undo redo",a.onTouchedCallback=qr,a._elementRef=e,a.ngZone=i,a.initialise=a.initialise.bind(m(a)),a}return j(n,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=e,this._editor&&this._editor.initialized&&this._editor.setMode(e?"readonly":"design")}},{key:"editor",get:function(){return this._editor}},{key:"writeValue",value:function(e){this._editor&&this._editor.initialized?this._editor.setContent(Wr(e)?"":e):this.initialValue=null===e?void 0:e}},{key:"registerOnChange",value:function(e){this.onChangeCallback=e}},{key:"registerOnTouched",value:function(e){this.onTouchedCallback=e}},{key:"setDisabledState",value:function(e){this._editor?this._editor.setMode(e?"readonly":"design"):e&&(this.init=Object.assign(Object.assign({},this.init),{readonly:!0}))}},{key:"ngAfterViewInit",value:function(){var e;(0,B.isPlatformBrowser)(this.platformId)&&(this.id=this.id||zr("tiny-angular"),this.inline=void 0!==this.inline?!1!==this.inline:!!(null===(e=this.init)||void 0===e?void 0:e.inline),this.createElement(),null!==Br()?this.initialise():this._element&&this._element.ownerDocument&&Yr.load(this._element.ownerDocument,this.getScriptSrc(),this.initialise.bind(this)))}},{key:"ngOnDestroy",value:function(){null!==Br()&&Br().remove(this._editor)}},{key:"createElement",value:function(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn("TinyMCE-Angular: an element with id [".concat(this.id,"] already exists. Editors with duplicate Id will not be able to mount")),this._element.id=this.id,Gr(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}},{key:"initialise",value:function(){var e=this,t=Object.assign(Object.assign({},this.init),{target:this._element,inline:this.inline,readonly:this.disabled,plugins:Hr(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:function(t){var n,i;e._editor=t,t.on("init",function(n){e.initEditor(t)}),i=t,function(e){var t=Ur(e.ignoreEvents,[]);return Ur(e.allowedEvents,Vr).filter(function(e){return Vr.includes(e)&&!t.includes(e)})}(n=e).forEach(function(e){var t=n[e];i.on(e.substring(2),function(e){return n.ngZone.run(function(){return t.emit({event:e,editor:i})})})}),e.init&&"function"==typeof e.init.setup&&e.init.setup(t)}});Gr(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(function(){Br().init(t)})}},{key:"getScriptSrc",value:function(){return Wr(this.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(this.apiKey,"/tinymce/").concat(this.cloudChannel,"/tinymce.min.js"):this.tinymceScriptSrc}},{key:"initEditor",value:function(e){var t=this;e.on("blur",function(){return t.ngZone.run(function(){return t.onTouchedCallback()})}),e.on(this.modelEvents,function(){return t.ngZone.run(function(){return t.emitOnChange(e)})}),"string"==typeof this.initialValue&&this.ngZone.run(function(){e.setContent(t.initialValue),e.getContent()!==t.initialValue&&t.emitOnChange(e),void 0!==t.onInitNgModel&&t.onInitNgModel.emit(e)})}},{key:"emitOnChange",value:function(e){this.onChangeCallback&&this.onChangeCallback(e.getContent({format:this.outputFormat}))}}]),n}($r);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(k.ElementRef),k.\u0275\u0275directiveInject(k.NgZone),k.\u0275\u0275directiveInject(k.PLATFORM_ID),k.\u0275\u0275directiveInject(Xr,8))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",id:"id",modelEvents:"modelEvents",disabled:"disabled",initialValue:"initialValue",init:"init",inline:"inline",outputFormat:"outputFormat",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents"},features:[k.\u0275\u0275ProvidersFeature([Jr]),k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:0,template:function(e,t){1&e&&k.\u0275\u0275template(0,Pr,0,0,"ng-template")},styles:["[_nghost-%COMP%] { display: block; }"]}),e}(),to=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule]]}),e}(),no=g(15508),io=g(89370),ro=g(23886),oo=g(88383),ao={},so={},lo=!1;var uo=g(54464);function co(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-button-group",2),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275property("config$",n.config$)("klass",n.buttonGroupClass)}}function fo(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,co,1,2,"scrm-button-group",1),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.config$)}}function po(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",6),k.\u0275\u0275element(1,"scrm-label",7),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("labelKey",n.confirmationLabel)}}var mo=function(){return{}};function ho(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",6),k.\u0275\u0275element(1,"scrm-dynamic-label",8),k.\u0275\u0275elementEnd()),2&e){var n,i,r=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("labelKey",r.confirmationDynamicLabel)("module",null!==(n=null==r.actionContext?null:r.actionContext.module)&&void 0!==n?n:"")("fields",null!==(i=null==r.actionContext||null==r.actionContext.record?null:r.actionContext.record.fields)&&void 0!==i?i:k.\u0275\u0275pureFunction0(3,mo))}}function vo(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",9),k.\u0275\u0275element(1,"scrm-button",10),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.inlineCancelButton)}}function go(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",9),k.\u0275\u0275element(1,"scrm-button",10),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.inlineConfirmButton)}}function yo(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",3),k.\u0275\u0275template(2,po,2,1,"div",4),k.\u0275\u0275template(3,ho,2,4,"div",4),k.\u0275\u0275template(4,vo,2,1,"div",5),k.\u0275\u0275template(5,go,2,1,"div",5),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",n.confirmationLabel),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.confirmationDynamicLabel&&!n.confirmationLabel),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.inlineCancelButton),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.inlineConfirmButton)}}function bo(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-inline-loading-spinner",11),k.\u0275\u0275elementContainerEnd())}function So(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div"),k.\u0275\u0275template(2,fo,2,1,"ng-container",0),k.\u0275\u0275template(3,yo,6,4,"ng-container",0),k.\u0275\u0275template(4,bo,2,0,"ng-container",0),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275classMapInterpolate1("",n.klass," float-right action-group-menu"),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!n.inlineConfirmationEnabled&&!n.loading),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.inlineConfirmationEnabled&&!n.loading),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.loading)}}function Co(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-image",7),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("image",n.config.icon)("klass",n.config.iconKlass||"")}}function ko(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275text(1),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",n.config.label," ")}}function wo(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-label",8),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("labelKey",n.config.labelKey)}}function Io(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275element(1,"scrm-image",7),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2).$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("image",n.icon)("klass",n.iconKlass||"")}}function xo(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275text(1),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2).$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",n&&n.label," ")}}function jo(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-label",13),2&e){var n,i=k.\u0275\u0275nextContext(3).$implicit;k.\u0275\u0275property("labelKey",i.labelKey)("module",null!==(n=i.labelModule)&&void 0!==n?n:"")}}function Eo(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,jo,1,2,"scrm-label",12),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2).$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n&&n.labelKey)}}function Mo(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"a",9),k.\u0275\u0275listener("click",function(){k.\u0275\u0275restoreView(n);var e=k.\u0275\u0275nextContext().$implicit,t=k.\u0275\u0275nextContext(),i=k.\u0275\u0275reference(1);return e&&t.click(e.onClick,i)}),k.\u0275\u0275elementStart(2,"div",10),k.\u0275\u0275template(3,Io,2,2,"div",4),k.\u0275\u0275elementStart(4,"div",11),k.\u0275\u0275template(5,xo,2,1,"ng-container",4),k.\u0275\u0275template(6,Eo,2,1,"ng-container",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()}if(2&e){var i=k.\u0275\u0275nextContext().$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngClass",i&&i.klass),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",i.icon),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",i&&i.label),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i&&!i.label&&i.labelKey)}}function _o(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"scrm-dropdown-submenu",14),k.\u0275\u0275listener("item-clicked",function(){k.\u0275\u0275restoreView(n);var e=k.\u0275\u0275nextContext(2),t=k.\u0275\u0275reference(1);return e.close(t)}),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()}if(2&e){var i=k.\u0275\u0275nextContext().$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("item",i)}}function Fo(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Mo,7,4,"ng-container",4),k.\u0275\u0275template(2,_o,2,1,"ng-container",4),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n&&!i.isDropdown(n)),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n&&i.isDropdown(n))}}var Lo=["*"];function Oo(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-image",5),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("image",n.item.icon)}}function Do(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-image",5),2&e){var n=k.\u0275\u0275nextContext().$implicit;k.\u0275\u0275property("image",n.icon)}}function Ao(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"li",9),k.\u0275\u0275elementStart(1,"a",10),k.\u0275\u0275listener("click",function(){var e=k.\u0275\u0275restoreView(n).$implicit;return k.\u0275\u0275nextContext(2).click(e)}),k.\u0275\u0275template(2,Do,1,1,"scrm-image",2),k.\u0275\u0275text(3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngClass",i&&i.klass),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.icon),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",i&&i.label," ")}}function No(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",6),k.\u0275\u0275elementStart(1,"ul",7),k.\u0275\u0275template(2,Ao,4,3,"li",8),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("ngbCollapse",n.isCollapsed),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngForOf",n.item.items)}}function Ro(e,t){if(1&e&&k.\u0275\u0275element(0,"svg-icon",3),2&e){var n=k.\u0275\u0275nextContext().ngIf,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275classMap(i.wrapperClass),k.\u0275\u0275propertyInterpolate("name",n.name),k.\u0275\u0275property("svgClass",i.klass||"")("title",i.title||"")}}function To(e,t){if(1&e&&k.\u0275\u0275element(0,"img",4),2&e){var n=k.\u0275\u0275nextContext().ngIf,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275classMap(i.klass),k.\u0275\u0275propertyInterpolate("src",n.path,k.\u0275\u0275sanitizeUrl),k.\u0275\u0275property("title",i.title||"")}}function Po(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Ro,1,6,"svg-icon",1),k.\u0275\u0275template(2,To,1,5,"img",2),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","svg"===n.type),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","svg"!==n.type)}}function Bo(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Po,3,2,"ng-container",0),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.ngIf,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.getImage(n,i.image))}}function $o(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275text(1),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",n.language.getFieldLabel(n.labelKey,n.module)," ")}}function Vo(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275text(1),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",n.language.getListLabel(n.listKey,n.labelKey)," ")}}function Uo(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,$o,2,1,"ng-container",0),k.\u0275\u0275template(2,Vo,2,1,"ng-container",0),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!n.listKey&&n.labelKey),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.listKey&&n.labelKey)}}function Ko(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-image",4),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("image",n.config.icon)("klass",n.config.iconKlass||"")("title",n.language.getFieldLabel(n.config.titleKey||""))}}function zo(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275text(1),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate(n.config.label||"")}}function Go(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-label",5),2&e){var n,i=k.\u0275\u0275nextContext();k.\u0275\u0275property("labelKey",i.config.labelKey)("module",null!==(n=i.config.labelModule)&&void 0!==n?n:"")}}function Zo(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-button",4),2&e){var n=k.\u0275\u0275nextContext().$implicit;k.\u0275\u0275property("config",n)}}function Ho(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-dropdown-button",4),2&e){var n=k.\u0275\u0275nextContext().$implicit;k.\u0275\u0275property("config",n)}}function qo(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Zo,1,1,"scrm-button",3),k.\u0275\u0275template(2,Ho,1,1,"scrm-dropdown-button",3),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n&&!i.isDropdown(n)),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n&&i.isDropdown(n))}}function Wo(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-dropdown-button",5),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("config",n.dropdownConfig)}}function Qo(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275template(1,qo,3,2,"ng-container",1),k.\u0275\u0275template(2,Wo,1,1,"scrm-dropdown-button",2),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275classMap(n.klass),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.buttons.expanded),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.buttons.collapsed.length)}}function Yo(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"span",1),k.\u0275\u0275text(2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275textInterpolate(n.parsedLabel)}}function Xo(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-label",16),k.\u0275\u0275elementContainerEnd())}function Jo(e,t){1&e&&k.\u0275\u0275element(0,"scrm-chart-message-area",2)}function ea(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"ngx-charts-pie-grid",3),k.\u0275\u0275listener("resize",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().onResize()},!1,k.\u0275\u0275resolveWindow),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275nextContext();k.\u0275\u0275property("animations",!1)("view",i.view)("scheme",i.scheme)("label",i.language.getFieldLabel(i.label))("results",i.results)}}function ta(e,t){1&e&&k.\u0275\u0275element(0,"scrm-chart-message-area",2)}function na(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(2,"div"),k.\u0275\u0275text(3),k.\u0275\u0275elementEnd()),2&e){var n=t.model,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate(n.name),k.\u0275\u0275advance(2),k.\u0275\u0275textInterpolate(i.formatTooltipValue(n.value))}}function ia(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"ngx-charts-bar-vertical",3),k.\u0275\u0275listener("resize",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().onResize()},!1,k.\u0275\u0275resolveWindow),k.\u0275\u0275template(1,na,4,2,"ng-template",null,4,k.\u0275\u0275templateRefExtractor),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275nextContext();k.\u0275\u0275property("animations",!1)("results",i.results)("view",i.view)("scheme",i.scheme)("gradient",i.gradient)("xAxis",i.xAxis)("yAxis",i.yAxis)("legend",i.legend)("legendPosition","below")("showXAxisLabel",i.showXAxisLabel)("showYAxisLabel",i.showYAxisLabel)("xAxisLabel",i.xAxisLabel)("yAxisLabel",i.yAxisLabel)("yAxisTickFormatting",i.yAxisTickFormatting)}}function ra(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",2),k.\u0275\u0275element(1,"scrm-label",3),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("labelKey",n.labelKey)}}function oa(e,t){1&e&&k.\u0275\u0275element(0,"scrm-chart-message-area",2)}function aa(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"ngx-charts-line-chart",3),k.\u0275\u0275listener("resize",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().onResize()},!1,k.\u0275\u0275resolveWindow),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275nextContext();k.\u0275\u0275property("animations",!1)("results",i.results)("view",i.view)("scheme",i.scheme)("gradient",i.gradient)("xAxis",i.xAxis)("yAxis",i.yAxis)("legend",i.legend)("xScaleMin",i.xScaleMin)("xScaleMax",i.xScaleMax)("xAxisTicks",i.xAxisTicks)("showXAxisLabel",i.showXAxisLabel)("showYAxisLabel",i.showYAxisLabel)("xAxisLabel",i.xAxisLabel)("legendPosition","below")("autoScale",!0)("yAxisTickFormatting",i.yAxisTickFormatting)("xAxisTickFormatting",i.xAxisTickFormatting)("tooltipDisabled",i.tooltipDisabled)("yAxisLabel",i.yAxisLabel)}}function sa(e,t){1&e&&k.\u0275\u0275element(0,"scrm-chart-message-area",2)}var la=function(e){return{dataSource:e}};function ua(e,t){if(1&e&&k.\u0275\u0275element(0,"ndc-dynamic",3),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("ndcDynamicComponent",n.chartType)("ndcDynamicInputs",k.\u0275\u0275pureFunction1(2,la,n.dataSource))}}function ca(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"scrm-button",1),k.\u0275\u0275elementStart(1,"span",2),k.\u0275\u0275text(2,"\xd7"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("config",n.getConfig())}}function da(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",16),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",i.getColumnLabel(n.label)," ")}}function fa(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",17),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",i.getColumnLabel(n.label)," ")}}var pa=function(e){return[e]};function ma(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-label",3),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("labelKey",n.titleKey)}}function ha(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-close-button",4),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("config",n.close)}}var va=[[["","modal-body",""]],[["","modal-footer",""]]],ga=["[modal-body]","[modal-footer]"];function ya(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"label",1),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2).$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("ngClass",i.labelClass),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate(n.field.label)}}function ba(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-label",8),2&e){var n=k.\u0275\u0275nextContext(2).$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("labelKey",n.field.labelKey)("ngClass",i.labelClass)}}function Sa(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275template(1,ya,2,2,"label",6),k.\u0275\u0275template(2,ba,1,2,"scrm-label",7),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275classProp("pr-3","inline"===i.labelDisplay),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.field.label),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!n.field.label&&n.field.labelKey)}}function Ca(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275element(1,"scrm-field",9),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275classProp("flex-grow-1","inline"===i.labelDisplay),k.\u0275\u0275advance(1),k.\u0275\u0275property("field",n.field)("klass",i.inputClass)("mode",i.fieldMode)("record",i.record)("type",n.field.type)}}function ka(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275projection(1),k.\u0275\u0275elementContainerEnd())}function wa(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275projection(1,1),k.\u0275\u0275elementContainerEnd())}function Ia(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275elementContainerStart(1),k.\u0275\u0275elementStart(2,"div",2),k.\u0275\u0275template(3,Sa,3,4,"div",3),k.\u0275\u0275template(4,Ca,2,7,"div",4),k.\u0275\u0275template(5,ka,2,0,"ng-container",5),k.\u0275\u0275template(6,wa,2,0,"ng-container",5),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd(),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("ngClass",i.colClass),k.\u0275\u0275advance(2),k.\u0275\u0275classProp("align-items-center","inline"===i.labelDisplay)("flex-column","top"===i.labelDisplay)("flex-row","inline"===i.labelDisplay)("justify-content-end",!n.field),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.field&&"none"!==n.field.display),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.field&&"none"!==n.field.display),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.actionSlot),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.specialSlot)}}function xa(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275template(1,Ia,7,13,"div",0),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext();k.\u0275\u0275property("ngClass",i.rowClass),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.cols)}}var ja=[[["","field-grid-actions",""]],[["","field-grid-actions",""]]],Ea=["[field-grid-actions]","[field-grid-actions]"],Ma=["dataContainer"],_a=["tag"];function Fa(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275text(1),k.\u0275\u0275pipe(2,"date"),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",k.\u0275\u0275pipeBind2(2,1,n.field.value,n.getDateFormat()),"\n")}}function La(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275text(1),k.\u0275\u0275pipe(2,"formatCurrency"),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",k.\u0275\u0275pipeBind2(2,1,n.getCurrencyValue(),n.getOptions()),"\n")}}function Oa(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275elementStart(1,"div"),k.\u0275\u0275elementStart(2,"ngb-datepicker",5),k.\u0275\u0275listener("dateSelect",function(e){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().onDateChange(e)}),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(3,"div",6),k.\u0275\u0275elementStart(4,"ngb-timepicker",7),k.\u0275\u0275listener("ngModelChange",function(e){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().onTimeChange(e)}),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("ngModel",i.dateTimeModel.date)("startDate",i.dateTimeModel.date),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngModel",i.dateTimeModel.time)("seconds",i.dateTimeModel.displaySeconds)("hourStep",i.dateTimeModel.hourStep)("minuteStep",i.dateTimeModel.minuteStep)("secondStep",i.dateTimeModel.secondStep)}}function Da(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"span"),k.\u0275\u0275text(1),k.\u0275\u0275pipe(2,"date"),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",k.\u0275\u0275pipeBind3(2,1,n.toDateTime(n.field.value),n.getDateTimeFormat(),n.getUserTimeZone())," ")}}function Aa(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Da,3,5,"span",0),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.field.value)}}function Na(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275elementStart(1,"div"),k.\u0275\u0275elementStart(2,"ngb-datepicker",5),k.\u0275\u0275listener("dateSelect",function(e){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().onDateChange(e)}),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(3,"div",6),k.\u0275\u0275elementStart(4,"ngb-timepicker",7),k.\u0275\u0275listener("ngModelChange",function(e){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().onTimeChange(e)}),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("ngModel",i.dateTimeModel.date)("startDate",i.dateTimeModel.date),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngModel",i.dateTimeModel.time)("seconds",i.dateTimeModel.displaySeconds)("hourStep",i.dateTimeModel.hourStep)("minuteStep",i.dateTimeModel.minuteStep)("secondStep",i.dateTimeModel.secondStep)}}function Ra(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"li"),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate(n.label)}}function Ta(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"a",3),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275propertyInterpolate1("href","mailto:",n.field.value,"",k.\u0275\u0275sanitizeUrl),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate(n.field.value)}}function Pa(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"a",4),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().openEmail()}),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate(i.field.value)}}function Ba(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275text(1),k.\u0275\u0275pipe(2,"formatNumber"),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",k.\u0275\u0275pipeBind1(2,1,n.field.value),"\n")}}function $a(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-label",3),k.\u0275\u0275elementContainerEnd())}function Va(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-list-filter",9),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("config",n.filterConfig)}}function Ua(e,t){1&e&&k.\u0275\u0275element(0,"scrm-loading-spinner",11),2&e&&k.\u0275\u0275property("overlay",!0)}function Ka(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Ua,1,1,"scrm-loading-spinner",10),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n)}}function za(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-button",9),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.buildSelectButton())}}function Ga(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div"),k.\u0275\u0275elementStart(2,"div",4),k.\u0275\u0275elementStart(3,"div",5),k.\u0275\u0275elementStart(4,"div",6),k.\u0275\u0275template(5,Va,1,1,"scrm-list-filter",7),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(6,"div",8),k.\u0275\u0275elementStart(7,"div",6),k.\u0275\u0275element(8,"scrm-table",9),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(9,Ka,2,1,"ng-container",2),k.\u0275\u0275pipe(10,"async"),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(11,za,2,1,"ng-container",2),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(5),k.\u0275\u0275property("ngIf",n.filterConfig),k.\u0275\u0275advance(3),k.\u0275\u0275property("config",n.tableConfig),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(10,4,n.loading$)),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",n.multiSelect)}}function Za(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",3),k.\u0275\u0275elementStart(2,"tag-input",4,5),k.\u0275\u0275listener("keyup.enter",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().selectFirstElement()})("onAdd",function(e){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().onAdd(e)})("onBlur",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().resetStatus()})("onRemove",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().onRemove()})("ngModelChange",function(e){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().selectedValues=e}),k.\u0275\u0275element(4,"tag-input-dropdown",6),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(5,"div",7),k.\u0275\u0275element(6,"scrm-button",8),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()}if(2&e){var i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275classMap(i.getInvalidClass()),k.\u0275\u0275property("ngModel",i.selectedValues)("clearOnBlur",!0)("displayBy",i.getRelateFieldName())("inputClass",i.getInvalidClass())("onTextChangeDebounce",500)("onlyFromAutocomplete",!0)("placeholder",i.getPlaceholderLabel())("secondaryPlaceholder",i.getPlaceholderLabel()),k.\u0275\u0275advance(2),k.\u0275\u0275property("autocompleteObservable",i.search)("displayBy",i.getRelateFieldName())("keepOpen",!1)("showDropdownIfEmpty",!0),k.\u0275\u0275advance(2),k.\u0275\u0275property("config",i.selectButton)}}function Ha(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"small",9),k.\u0275\u0275element(1,"scrm-label",10),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("labelKey",n.getMessage())("module",n.module)}}function qa(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"small",8),k.\u0275\u0275element(1,"scrm-label",9),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("labelKey",n.getMessage())("module",n.module)}}function Wa(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275text(1),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate(n.field.value)}}function Qa(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275text(1),k.\u0275\u0275pipe(2,"formatNumber"),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",k.\u0275\u0275pipeBind1(2,1,n.field.value),"\n")}}function Ya(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"option",4),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275classMap(i.getId(n)),k.\u0275\u0275property("ngValue",n.value),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",n.label," ")}}function Xa(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Ya,2,5,"option",3),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.options)}}function Ja(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275element(1,"input",2),k.\u0275\u0275elementStart(2,"label",3),k.\u0275\u0275text(3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext();k.\u0275\u0275classMapInterpolate1("form-check radioenum-input ",i.getId(n),""),k.\u0275\u0275classProp("form-check-inline","row"===i.displayDirection),k.\u0275\u0275advance(1),k.\u0275\u0275propertyInterpolate("id",i.getId(n)),k.\u0275\u0275property("checked",i.field.value===n.value)("formControl",i.field.formControl)("value",n.value),k.\u0275\u0275advance(1),k.\u0275\u0275propertyInterpolate("for",i.getId(n)),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",n.label," ")}}function es(e,t){1&e&&k.\u0275\u0275element(0,"br")}function ts(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275text(1," ... "),k.\u0275\u0275elementContainerEnd())}function ns(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275elementStart(1,"span"),k.\u0275\u0275text(2),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(3,es,1,0,"br",2),k.\u0275\u0275template(4,ts,2,0,"ng-container",2),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=t.last,r=k.\u0275\u0275nextContext();k.\u0275\u0275property("ngClass",r.klass)("title",r.field.value),k.\u0275\u0275advance(2),k.\u0275\u0275textInterpolate(n),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!i),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i&&r.isTruncated)}}function is(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-label",1),k.\u0275\u0275elementContainerEnd())}function rs(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"span",7),k.\u0275\u0275elementStart(1,"label"),k.\u0275\u0275element(2,"scrm-label",8),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2).$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(2),k.\u0275\u0275property("labelKey",n.labelKey)("module",i.getModule())}}function os(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"span",9),k.\u0275\u0275element(1,"scrm-dynamic-field",10),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2).$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("componentType",i.getComponentType(n.type,n.definition))("field",n)("klass",i.klass)("mode",i.mode)("record",i.record)("parent",i.parent)("type",n.type)}}function as(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",4),k.\u0275\u0275template(1,rs,3,2,"span",5),k.\u0275\u0275template(2,os,2,7,"span",6),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275classProp("flex-fill","edit"===i.mode&&"flex-row"===i.getDirection()),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.labelKey&&i.showLabel(n.definition.name)),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.type)}}function ss(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,as,3,4,"div",3),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.isModeEnabled(i.mode,n))}}function ls(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div"),k.\u0275\u0275template(2,ss,2,1,"ng-container",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275classMapInterpolate1("d-flex ",n.getDirection()," justify-content-start align-items-start field-group h-100"),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.getFields())}}var us=function(e,t,n,i,r){return{mode:e,field:t,klass:n,record:i,parent:r}};function cs(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"a",1),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).onClick()}),k.\u0275\u0275element(2,"ndc-dynamic",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()}if(2&e){var i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(2),k.\u0275\u0275property("ndcDynamicComponent",i.componentType)("ndcDynamicInputs",k.\u0275\u0275pureFunction5(2,us,i.mode,i.field,i.klass,i.record,i.parent))}}function ds(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"a",3),k.\u0275\u0275element(2,"ndc-dynamic",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("routerLink",n.getLink()),k.\u0275\u0275advance(1),k.\u0275\u0275property("ndcDynamicComponent",n.componentType)("ndcDynamicInputs",k.\u0275\u0275pureFunction5(3,us,n.mode,n.field,n.klass,n.record,n.parent))}}function fs(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"ndc-dynamic",2),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ndcDynamicComponent",n.componentType)("ndcDynamicInputs",k.\u0275\u0275pureFunction5(2,us,n.mode,n.field,n.klass,n.record,n.parent))}}function ps(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,cs,3,8,"ng-container",0),k.\u0275\u0275template(2,ds,3,9,"ng-container",0),k.\u0275\u0275template(3,fs,2,8,"ng-container",0),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.hasOnClick()),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.isLink()&&!n.hasOnClick()),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!n.isLink()&&!n.hasOnClick())}}function ms(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",4),k.\u0275\u0275element(2,"div",5),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd())}var hs=function(e){return{field:e}};function vs(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",7),k.\u0275\u0275element(1,"scrm-dynamic-label",8),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("context",i.getMessageContext(n.value,i.record))("fields",k.\u0275\u0275pureFunction1(3,hs,i.field))("labelKey",i.getMessageLabelKey(n.value))}}function gs(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,vs,2,5,"div",6),k.\u0275\u0275pipe(2,"keyvalue"),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",k.\u0275\u0275pipeBind1(2,1,n.field.formControl.errors))}}function ys(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,gs,3,3,"ng-container",0),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.field.formControl.invalid&&n.field.formControl.touched)}}function bs(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-label",1),k.\u0275\u0275elementContainerEnd())}function Ss(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"label"),k.\u0275\u0275element(1,"scrm-label",6),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("labelKey",n.labelKey)("module",i.getModule())}}function Cs(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"span",7),k.\u0275\u0275element(1,"scrm-dynamic-field",8),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("componentType",i.getComponentType(n.type,n.definition))("field",n)("klass",i.klass)("mode",i.getMode())("record",i.record)("parent",i.parent)("type",n.type)}}function ks(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",3),k.\u0275\u0275elementStart(1,"span",4),k.\u0275\u0275template(2,Ss,2,2,"label",0),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(3,Cs,2,7,"span",5),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275classProp("flex-fill","edit"===i.mode&&"flex-row"===i.getDirection())("align-self-start","flex-row"===i.getDirection()&&n.labelKey&&i.showLabel(n)),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",n.labelKey&&i.showLabel(n)),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.type)}}function ws(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div"),k.\u0275\u0275template(2,ks,4,6,"div",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275classMapInterpolate1("d-flex ",n.getDirection()," justify-content-start align-items-end field-group h-100 composite-field-wrapper"),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.getAttributes())}}function Is(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-dynamic-field",3),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("componentType",n.componentType)("field",n.field)("klass",n.klass)("mode",n.componentMode)("record",n.record)("parent",n.record)("type",n.type)}}function xs(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-line-items-field",4),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("field",n.field)("klass",n.klass)("mode",n.componentMode)("record",n.record)("parent",n.record)}}function js(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Is,1,7,"scrm-dynamic-field",1),k.\u0275\u0275template(2,xs,1,5,"scrm-line-items-field",2),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","line-items"!==n.type),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","line-items"===n.type)}}function Es(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-label",1),k.\u0275\u0275elementContainerEnd())}function Ms(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275element(1,"scrm-dynamic-field",10),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(2).$implicit,r=k.\u0275\u0275nextContext(2);k.\u0275\u0275classMapInterpolate2("",n.type," ",n.name,""),k.\u0275\u0275advance(1),k.\u0275\u0275property("componentType",r.getComponentType(n.type,n.definition))("field",n)("klass",r.klass)("mode",r.mode)("record",i)("parent",r.parent)("type",n.type)}}function _s(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-button",11),2&e){var n=k.\u0275\u0275nextContext(2),i=n.$implicit,r=n.index,o=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("config",o.getRemoveItemButton(i,r))}}function Fs(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",6),k.\u0275\u0275elementStart(1,"div",7),k.\u0275\u0275template(2,Ms,2,11,"div",8),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(3,"div",9),k.\u0275\u0275template(4,_s,1,1,"scrm-button",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(2),k.\u0275\u0275property("ngForOf",i.getItemFields(n)),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",i.isEditable())}}function Ls(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Fs,5,2,"div",5),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!(n&&n.attributes&&n.attributes.deleted))}}function Os(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-button",11),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("config",n.getAddItemButton())}}function Ds(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",13),k.\u0275\u0275element(1,"scrm-dynamic-label",14),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(4);k.\u0275\u0275advance(1),k.\u0275\u0275property("context",i.getMessageContext(n.value,i.record))("fields",k.\u0275\u0275pureFunction1(3,hs,i.field))("labelKey",i.getMessageLabelKey(n.value))}}function As(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Ds,2,5,"div",12),k.\u0275\u0275pipe(2,"keyvalue"),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",k.\u0275\u0275pipeBind1(2,1,n.field.itemFormArray.errors))}}function Ns(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,As,3,3,"ng-container",0),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.field.itemFormArray.invalid)}}function Rs(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div"),k.\u0275\u0275elementStart(2,"div"),k.\u0275\u0275template(3,Ls,2,1,"ng-container",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(4,"div",3),k.\u0275\u0275template(5,Os,1,1,"scrm-button",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(6,Ns,2,1,"ng-container",0),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275classMapInterpolate2("line-items d-flex flex-column ",n.field.type," ",n.field.name,""),k.\u0275\u0275advance(1),k.\u0275\u0275classMapInterpolate1("d-flex ",n.getDirection()," justify-content-start align-items-end line-item h-100"),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.getItems()),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",n.isEditable()),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.isEditable()&&n.field.itemFormArray&&n.field.itemFormArray.errors)}}function Ts(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"span",10),k.\u0275\u0275text(2,"*"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd())}function Ps(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"button",11),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(4).dataSource.getEditAction()}),k.\u0275\u0275element(1,"scrm-image",12),k.\u0275\u0275elementEnd()}}var Bs=function(){return["edit","create"]};function $s(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",5),k.\u0275\u0275elementStart(2,"strong"),k.\u0275\u0275elementStart(3,"label",1),k.\u0275\u0275text(4),k.\u0275\u0275pipe(5,"uppercase"),k.\u0275\u0275elementEnd(),k.\u0275\u0275text(6,": "),k.\u0275\u0275template(7,Ts,3,0,"ng-container",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(8,"div",6),k.\u0275\u0275elementStart(9,"div",7),k.\u0275\u0275element(10,"scrm-field",8),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(11,"div"),k.\u0275\u0275template(12,Ps,2,0,"button",9),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(3),k.\u0275\u0275property("ngClass",i.labelClass),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate(k.\u0275\u0275pipeBind1(5,9,n.field.label)),k.\u0275\u0275advance(3),k.\u0275\u0275property("ngIf",n.field.definition.required&&k.\u0275\u0275pureFunction0(11,Bs).includes(i.config.mode)),k.\u0275\u0275advance(3),k.\u0275\u0275property("type",n.field.type)("mode",i.config.mode)("klass",i.inputClass)("field",n.field)("record",i.record),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",!1!==n.field.definition.inline_edit&&!n.field.readonly&&!n.field.definition.readonly&&i.dataSource.inlineEdit&&"detail"===i.config.mode)}}function Vs(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275projection(1),k.\u0275\u0275elementContainerEnd())}function Us(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275projection(1,1),k.\u0275\u0275elementContainerEnd())}function Ks(e,t){1&e&&k.\u0275\u0275element(0,"div",13)}function zs(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275template(1,$s,13,12,"ng-container",3),k.\u0275\u0275template(2,Vs,2,0,"ng-container",3),k.\u0275\u0275template(3,Us,2,0,"ng-container",3),k.\u0275\u0275template(4,Ks,1,0,"div",4),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=t.index,r=k.\u0275\u0275nextContext(),o=r.$implicit,a=r.index,s=k.\u0275\u0275nextContext();k.\u0275\u0275classProp("field-column-bordered",o.cols.length>1&&i<o.cols.length-1),k.\u0275\u0275property("ngClass",s.colClass),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.field&&"none"!==n.field.display),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.actionSlot),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.specialSlot),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.field&&"none"!==(null==n.field?null:n.field.display)&&a<s.fieldGrid.length-1)}}function Gs(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275template(1,zs,5,7,"div",2),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext();k.\u0275\u0275property("ngClass",i.rowClass),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.cols)}}var Zs=[[["","field-grid-actions",""]],[["","field-grid-special",""]]],Hs=["[field-grid-actions]","[field-grid-special]"];function qs(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",17),k.\u0275\u0275elementStart(1,"div",18),k.\u0275\u0275elementStart(2,"label",19),k.\u0275\u0275text(3,"Opportunity Name"),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(4,"input",20),k.\u0275\u0275elementStart(5,"label",21),k.\u0275\u0275element(6,"input",22),k.\u0275\u0275element(7,"span",23),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(8,"p",24),k.\u0275\u0275text(9," My Items "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(10,"label",21),k.\u0275\u0275element(11,"input",22),k.\u0275\u0275element(12,"span",23),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(13,"p",24),k.\u0275\u0275text(14," Open Items "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(15,"label",21),k.\u0275\u0275element(16,"input",22),k.\u0275\u0275element(17,"span",23),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(18,"p",24),k.\u0275\u0275text(19," My Favourites "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd())}function Ws(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",17),k.\u0275\u0275elementStart(1,"div",18),k.\u0275\u0275elementStart(2,"label",19),k.\u0275\u0275text(3,"Opportunity Name"),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(4,"input",25),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(5,"div",17),k.\u0275\u0275elementStart(6,"div",18),k.\u0275\u0275elementStart(7,"div",26),k.\u0275\u0275elementStart(8,"label",19),k.\u0275\u0275text(9,"Account Name"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(10,"div",17),k.\u0275\u0275elementStart(11,"div",13),k.\u0275\u0275element(12,"input",25),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(13,"div",12),k.\u0275\u0275elementStart(14,"div",26),k.\u0275\u0275elementStart(15,"button",27),k.\u0275\u0275element(16,"scrm-image",28),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(17,"button",29),k.\u0275\u0275element(18,"scrm-image",30),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(19,"div",17),k.\u0275\u0275elementStart(20,"div",18),k.\u0275\u0275elementStart(21,"label",19),k.\u0275\u0275text(22,"Opportunity Amount"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(23,"div",17),k.\u0275\u0275elementStart(24,"div",13),k.\u0275\u0275elementStart(25,"div",31),k.\u0275\u0275elementStart(26,"select"),k.\u0275\u0275elementStart(27,"option"),k.\u0275\u0275text(28,"Equals"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(29,"option"),k.\u0275\u0275text(30,"Greater than"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(31,"option"),k.\u0275\u0275text(32,"Less than"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(33,"div",12),k.\u0275\u0275element(34,"input",32),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(35,"div",17),k.\u0275\u0275elementStart(36,"div",18),k.\u0275\u0275elementStart(37,"label",19),k.\u0275\u0275text(38,"Expected Close Date"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(39,"div",17),k.\u0275\u0275elementStart(40,"div",33),k.\u0275\u0275elementStart(41,"div",31),k.\u0275\u0275elementStart(42,"select"),k.\u0275\u0275elementStart(43,"option"),k.\u0275\u0275text(44,"Equals"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(45,"option"),k.\u0275\u0275text(46,"Greater than"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(47,"option"),k.\u0275\u0275text(48,"Less than"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(49,"div",34),k.\u0275\u0275element(50,"input",35),k.\u0275\u0275elementStart(51,"button",36),k.\u0275\u0275element(52,"scrm-image",37),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(53,"div",17),k.\u0275\u0275elementStart(54,"div",18),k.\u0275\u0275elementStart(55,"label",19),k.\u0275\u0275text(56,"Next Step"),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(57,"input",25),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(58,"div",17),k.\u0275\u0275elementStart(59,"div",13),k.\u0275\u0275elementStart(60,"label",19),k.\u0275\u0275text(61,"Save Filter as:"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(62,"div",17),k.\u0275\u0275elementStart(63,"div",13),k.\u0275\u0275elementStart(64,"div",31),k.\u0275\u0275elementStart(65,"select"),k.\u0275\u0275elementStart(66,"option"),k.\u0275\u0275text(67,"Lorem Ipsum"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(68,"option"),k.\u0275\u0275text(69,"Lorem Ipsum"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(70,"option"),k.\u0275\u0275text(71,"Lorem Ipsum"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(72,"div",12),k.\u0275\u0275elementStart(73,"button",38),k.\u0275\u0275text(74,"Save"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(75,"div",17),k.\u0275\u0275elementStart(76,"div",18),k.\u0275\u0275elementStart(77,"label",19),k.\u0275\u0275text(78,"Order by column"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(79,"div",31),k.\u0275\u0275elementStart(80,"select"),k.\u0275\u0275elementStart(81,"option"),k.\u0275\u0275text(82,"Name"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(83,"option"),k.\u0275\u0275text(84,"Date Created"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(85,"option"),k.\u0275\u0275text(86,"Date Modified"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd())}function Qs(e,t){1&e&&(k.\u0275\u0275elementStart(0,"button",39),k.\u0275\u0275text(1," My Filters "),k.\u0275\u0275elementEnd())}function Ys(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"button",40),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).toggleAdvancedFilter()}),k.\u0275\u0275text(1," Advanced "),k.\u0275\u0275elementEnd()}}function Xs(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"button",40),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).toggleQuickFilter()}),k.\u0275\u0275text(1," Quick "),k.\u0275\u0275elementEnd()}}function Js(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",3),k.\u0275\u0275elementStart(1,"div",4),k.\u0275\u0275elementStart(2,"div",5),k.\u0275\u0275text(3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(4,"button",6),k.\u0275\u0275listener("click",function(){return t.$implicit.dismiss("Cross click")}),k.\u0275\u0275element(5,"scrm-image",7),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(6,"div",8),k.\u0275\u0275template(7,qs,20,0,"ng-template",9),k.\u0275\u0275template(8,Ws,87,0,"ng-template",9),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(9,"div",10),k.\u0275\u0275elementStart(10,"div",11),k.\u0275\u0275element(11,"div",12),k.\u0275\u0275elementStart(12,"div",13),k.\u0275\u0275elementStart(13,"div",14),k.\u0275\u0275elementStart(14,"button",15),k.\u0275\u0275text(15," Clear "),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(16,Qs,2,0,"ng-template",9),k.\u0275\u0275template(17,Ys,2,0,"ng-template",9),k.\u0275\u0275template(18,Xs,2,0,"ng-template",9),k.\u0275\u0275elementStart(19,"button",16),k.\u0275\u0275text(20," Search "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(3),k.\u0275\u0275textInterpolate(n.modalTitle),k.\u0275\u0275advance(4),k.\u0275\u0275property("ngIf",n.quickFilter),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.advancedFilter),k.\u0275\u0275advance(8),k.\u0275\u0275property("ngIf",n.advancedFilter),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.quickFilter),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.advancedFilter)}}function el(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",8),k.\u0275\u0275elementStart(2,"a",9),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().backToTop()}),k.\u0275\u0275elementStart(3,"span"),k.\u0275\u0275text(4," Back To Top "),k.\u0275\u0275element(5,"scrm-image",10),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()}}function tl(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",11),k.\u0275\u0275elementStart(1,"div",12),k.\u0275\u0275elementStart(2,"h5",13),k.\u0275\u0275text(3,"\xa9 Powered By SugarCRM"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(4,"button",14),k.\u0275\u0275listener("click",function(){return t.$implicit.dismiss("Cross click")}),k.\u0275\u0275element(5,"scrm-image",15),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(6,"div",16),k.\u0275\u0275elementStart(7,"p"),k.\u0275\u0275text(8," \xa9 2004-2013 SugarCRM Inc. The Program is provided AS IS, without warranty. Licensed under AGPLv3. "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(9,"p"),k.\u0275\u0275text(10," This program is free software; you can redistribute it and/or modify it under the terms of the GNU Affero General Public License version 3 as published by the Free Software Foundation, including the additional permission set forth in the source code header. "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(11,"p"),k.\u0275\u0275text(12," SugarCRM is a trademark of SugarCRM, Inc. All other company and product names may be trademarks of the respective companies with which they are associated. "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd())}function nl(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",17),k.\u0275\u0275elementStart(1,"div",12),k.\u0275\u0275elementStart(2,"h5",13),k.\u0275\u0275text(3,"\xa9 Supercharged by SuiteCRM"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(4,"button",14),k.\u0275\u0275listener("click",function(){return t.$implicit.dismiss("Cross click")}),k.\u0275\u0275element(5,"scrm-image",15),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(6,"div",16),k.\u0275\u0275elementStart(7,"p"),k.\u0275\u0275text(8," SuiteCRM has been written and assembled by SalesAgility. The Program is provided AS IS, without warranty. Licensed under AGPLv3. "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(9,"p"),k.\u0275\u0275text(10," This program is free software; you can redistribute it and/or modify it under the terms of the GNU Affero General Public License version 3 as published by the Free Software Foundation, including the additional permission set forth in the source code header. "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(11,"p"),k.\u0275\u0275text(12," SuiteCRM is a trademark of SalesAgility Ltd. All other company and product names may be trademarks of the respective companies with which they are associated. "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd())}function il(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",2),k.\u0275\u0275element(1,"scrm-label",3),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("labelKey",n.messageLabelKey)}}function rl(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",8),k.\u0275\u0275element(2,"scrm-image",9),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2).$implicit;k.\u0275\u0275advance(2),k.\u0275\u0275property("image",n.icon)("klass",n.iconClass)}}function ol(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",12),k.\u0275\u0275element(1,"scrm-field",13),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275property("type",n.field.type)("field",n.field)}}function al(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",14),k.\u0275\u0275element(1,"scrm-inline-loading-spinner"),k.\u0275\u0275elementEnd())}function sl(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,ol,2,2,"div",10),k.\u0275\u0275template(2,al,2,0,"div",11),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.ngIf,i=k.\u0275\u0275nextContext(5);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.field),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.loading&&i.loading)}}function ll(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",15),k.\u0275\u0275element(2,"scrm-label",16),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2).$implicit,i=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(2),k.\u0275\u0275property("labelKey",n.labelKey)("module",i.getContextModule())}}function ul(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",17),k.\u0275\u0275elementStart(2,"label"),k.\u0275\u0275text(3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(4).ngIf;k.\u0275\u0275advance(3),k.\u0275\u0275textInterpolate(n.description)}}function cl(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",19),k.\u0275\u0275element(1,"scrm-dynamic-label",20),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(3).$implicit,i=k.\u0275\u0275nextContext(2).ngIf,r=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("context",r.getMessageContext())("fields",r.getMessageFields(i.statistics))("labelKey",n.dynamicLabel)}}function dl(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",14),k.\u0275\u0275element(1,"scrm-inline-loading-spinner"),k.\u0275\u0275elementEnd())}function fl(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,cl,2,3,"div",18),k.\u0275\u0275template(2,dl,2,0,"div",11),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(5);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!n.loading),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.loading)}}function pl(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div"),k.\u0275\u0275text(2," - "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2).$implicit,i=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275classMapInterpolate1("widget-entry-value ",i.getSizeClass(n.size),"")}}function ml(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,rl,3,2,"ng-container",7),k.\u0275\u0275template(2,sl,3,2,"ng-container",7),k.\u0275\u0275template(3,ll,3,2,"ng-container",7),k.\u0275\u0275template(4,ul,4,1,"ng-container",7),k.\u0275\u0275template(5,fl,3,2,"ng-container",7),k.\u0275\u0275template(6,pl,3,3,"ng-container",7),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit,i=k.\u0275\u0275nextContext(2).ngIf,r=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.icon),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.statistic&&i.statistics[n.statistic]),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.labelKey),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.descriptionKey),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.dynamicLabel),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.statistic&&!r.loading&&(!i.statistics[n.statistic].field||i.statistics[n.statistic].field&&r.isEmptyFieldValue(i.statistics[n.statistic].field.value)))}}function hl(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275template(1,ml,7,6,"ng-container",7),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(3);k.\u0275\u0275classMapInterpolate2("",i.getColClass()," ",i.getClass(n),""),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","hidden"!==n.display)}}function vl(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div"),k.\u0275\u0275template(2,hl,2,5,"div",6),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275classMapInterpolate4("d-flex ",i.getJustify(n.justify)," ",i.getAlign(n.align)," ",i.getRowClass()," ",i.getLayoutRowClass(n),""),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.cols)}}function gl(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",4),k.\u0275\u0275template(1,vl,3,7,"ng-container",5),k.\u0275\u0275elementEnd()),2&e){var n=t.ngIf;k.\u0275\u0275propertyInterpolate("ngbTooltip",n.tooltipTitleText),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.layout)}}function yl(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",5),k.\u0275\u0275projection(1),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("@widgetContentFade",n.displayContent?"true":"false")}}var bl=[[["","widget-body",""]]],Sl=["[widget-body]"];function Cl(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-close-button",9),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("config",n.getCloseButton())}}function kl(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-minimise-button",10),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("config",n.minimiseButton)("status",n.minimiseStatus)}}function wl(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",11),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate(n.title)}}function Il(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",11),k.\u0275\u0275element(1,"scrm-label",12),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("labelKey",n.titleKey)}}function xl(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",2),k.\u0275\u0275elementStart(1,"div",3),k.\u0275\u0275elementStart(2,"div",4),k.\u0275\u0275template(3,Cl,1,1,"scrm-close-button",5),k.\u0275\u0275template(4,kl,1,2,"scrm-minimise-button",6),k.\u0275\u0275projection(5,1),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(6,wl,2,1,"div",7),k.\u0275\u0275template(7,Il,2,1,"div",7),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(8,"div",8),k.\u0275\u0275projection(9,2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(3),k.\u0275\u0275property("ngIf",n.isClosable()),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.isCollapsible()),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",n.title),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.titleKey)}}var jl=[[["","panel-body",""]],[["","panel-icon-area",""]],[["","panel-header-button",""]]],El=["[panel-body]","[panel-icon-area]","[panel-header-button]"];function Ml(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-button",1),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.internalConfig)}}function _l(e,t){1&e&&(k.\u0275\u0275elementStart(0,"nav",5),k.\u0275\u0275elementStart(1,"div",6),k.\u0275\u0275elementStart(2,"ul",7),k.\u0275\u0275elementStart(3,"li",8),k.\u0275\u0275text(4,"\xa0 "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd())}function Fl(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"nav",9),k.\u0275\u0275elementStart(2,"div",10),k.\u0275\u0275elementStart(3,"ul",7),k.\u0275\u0275elementStart(4,"li",11),k.\u0275\u0275element(5,"scrm-logo-ui"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd())}function Ll(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-mobile-menu",27),k.\u0275\u0275elementContainerEnd()),2&e){k.\u0275\u0275nextContext();var n=k.\u0275\u0275reference(3),i=k.\u0275\u0275nextContext(2).ngIf,r=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("all",r.navbar.all.modules)("current",r.navbar.current)("items",r.navbar.menu)("navigationType",i.userPreferences.navigation_paradigm||"")("onClose",r.getCloseCallBack(n))}}function Ol(e,t){1&e&&k.\u0275\u0275elementContainer(0)}function Dl(e,t){1&e&&k.\u0275\u0275element(0,"hr")}function Al(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"a",29),k.\u0275\u0275text(2),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(3,Dl,1,0,"hr",3),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit,i=t.first,r=t.last;k.\u0275\u0275advance(1),k.\u0275\u0275propertyInterpolate("href",n.link.url,k.\u0275\u0275sanitizeUrl),k.\u0275\u0275propertyInterpolate("target",n.link.target),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1("",n.link.label," "),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!0===r||!0===i)}}function Nl(e,t){if(1&e&&k.\u0275\u0275template(0,Al,4,4,"ng-container",28),2&e){var n=k.\u0275\u0275nextContext(4);k.\u0275\u0275property("ngForOf",n.navbar.globalActions)}}function Rl(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"ul",12),k.\u0275\u0275elementStart(2,"div",13,14),k.\u0275\u0275elementStart(4,"button",15),k.\u0275\u0275element(5,"scrm-image",16),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(6,"div",17),k.\u0275\u0275template(7,Ll,2,5,"ng-container",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(8,"div",18),k.\u0275\u0275template(9,Ol,1,0,"ng-container",19),k.\u0275\u0275elementStart(10,"div",20),k.\u0275\u0275elementStart(11,"li",21),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275reference(3).close()}),k.\u0275\u0275elementStart(12,"a",22,23),k.\u0275\u0275element(14,"scrm-image",24),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(15,"div",25),k.\u0275\u0275elementStart(16,"span",26),k.\u0275\u0275text(17),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(18,Nl,1,1,"ng-template",2),k.\u0275\u0275element(19,"scrm-logout-ui"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()}if(2&e){var i=k.\u0275\u0275reference(13);k.\u0275\u0275nextContext(2);var r=k.\u0275\u0275reference(4),o=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("autoClose",!1),k.\u0275\u0275advance(4),k.\u0275\u0275property("@mobileNavFade",void 0),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",o.navbar&&o.navbar.menu&&o.navbar.menu.length),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngTemplateOutlet",r),k.\u0275\u0275advance(6),k.\u0275\u0275styleProp("min-width",i.offsetWidth,"px"),k.\u0275\u0275advance(2),k.\u0275\u0275textInterpolate2("",o.navbar.currentUser.firstName," ",o.navbar.currentUser.lastName,""),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",o.navbar.globalActions)}}function Tl(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"li",39),k.\u0275\u0275element(2,"scrm-grouped-menu-item",40),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(5);k.\u0275\u0275advance(2),k.\u0275\u0275property("item",n.navbar.current)("subNavCollapse",n.subNavCollapse)}}function Pl(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"li",41),k.\u0275\u0275element(1,"scrm-menu-item",42),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(5);k.\u0275\u0275advance(1),k.\u0275\u0275property("item",n.navbar.current)}}function Bl(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"li",39),k.\u0275\u0275element(1,"scrm-grouped-menu-item",40),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(5);k.\u0275\u0275advance(1),k.\u0275\u0275property("item",n)("subNavCollapse",i.subNavCollapse)}}function $l(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"ul",35),k.\u0275\u0275template(2,Tl,3,2,"ng-container",3),k.\u0275\u0275template(3,Pl,2,1,"li",36),k.\u0275\u0275template(4,Bl,2,2,"li",37),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(5,"scrm-menu-items-list",38),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(4);k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",n.navbar.current&&n.navbar.current.isGroupedMenu),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.navbar.current&&!n.navbar.current.isGroupedMenu),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.navbar.menu),k.\u0275\u0275advance(1),k.\u0275\u0275property("items",n.navbar.all.modules)}}function Vl(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"li",41),k.\u0275\u0275element(1,"scrm-menu-item",42),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(5);k.\u0275\u0275advance(1),k.\u0275\u0275property("item",n.navbar.current)}}function Ul(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"li",39),k.\u0275\u0275element(2,"scrm-grouped-menu-item",40),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(5);k.\u0275\u0275advance(2),k.\u0275\u0275property("item",n.navbar.current)("subNavCollapse",n.subNavCollapse)}}function Kl(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"li",45),k.\u0275\u0275element(1,"scrm-menu-item",42),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("item",n)}}function zl(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"ul",7),k.\u0275\u0275template(2,Vl,2,1,"li",36),k.\u0275\u0275template(3,Ul,3,2,"ng-container",3),k.\u0275\u0275template(4,Kl,2,1,"li",43),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(5,"scrm-menu-items-list",44),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(4);k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",n.navbar.current&&!n.navbar.current.isGroupedMenu),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",(null==n.navbar.current?null:n.navbar.current.submenu)&&n.navbar.current.isGroupedMenu),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.navbar.menu),k.\u0275\u0275advance(1),k.\u0275\u0275property("items",n.navbar.all.modules)}}function Gl(e,t){1&e&&k.\u0275\u0275elementContainer(0)}function Zl(e,t){1&e&&k.\u0275\u0275element(0,"hr")}function Hl(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"a",29),k.\u0275\u0275text(2),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(3,Zl,1,0,"hr",3),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit,i=t.first,r=t.last;k.\u0275\u0275advance(1),k.\u0275\u0275propertyInterpolate("href",n.link.url,k.\u0275\u0275sanitizeUrl),k.\u0275\u0275propertyInterpolate("target",n.link.target),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1("",n.link.label," "),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!0===r||!0===i)}}function ql(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Hl,4,4,"ng-container",28),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(4);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.navbar.globalActions)}}function Wl(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"nav",30),k.\u0275\u0275elementStart(2,"div",31),k.\u0275\u0275element(3,"scrm-home-menu-item",32),k.\u0275\u0275template(4,$l,6,4,"ng-container",3),k.\u0275\u0275template(5,zl,6,4,"ng-container",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(6,Gl,1,0,"ng-container",19),k.\u0275\u0275elementStart(7,"div",20),k.\u0275\u0275elementStart(8,"ul",7),k.\u0275\u0275elementStart(9,"li",33),k.\u0275\u0275elementStart(10,"a",22),k.\u0275\u0275element(11,"scrm-image",24),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(12,"div",34),k.\u0275\u0275elementStart(13,"span",26),k.\u0275\u0275text(14),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(15,ql,2,1,"ng-container",3),k.\u0275\u0275element(16,"scrm-logout-ui"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2).ngIf,i=k.\u0275\u0275reference(4),r=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("ngbCollapse",r.mainNavCollapse),k.\u0275\u0275advance(1),k.\u0275\u0275property("active",n.appState.module&&"home"===n.appState.module)("route",r.getHomePage()),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","gm"==n.userPreferences.navigation_paradigm),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","gm"!=n.userPreferences.navigation_paradigm),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngTemplateOutlet",i),k.\u0275\u0275advance(8),k.\u0275\u0275textInterpolate2("",r.navbar.currentUser.firstName," ",r.navbar.currentUser.lastName,""),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",r.navbar.globalActions)}}function Ql(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Fl,6,0,"ng-container",3),k.\u0275\u0275template(2,Rl,20,9,"ng-container",3),k.\u0275\u0275template(3,Wl,17,9,"ng-container",3),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!n.isUserLoggedIn),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.isUserLoggedIn&&n.mobileNavbar),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.isUserLoggedIn&&!n.mobileNavbar)}}function Yl(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"a",57),k.\u0275\u0275element(2,"scrm-label",58),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n,i=k.\u0275\u0275nextContext().$implicit,r=k.\u0275\u0275nextContext(4);k.\u0275\u0275advance(1),k.\u0275\u0275property("routerLink",i.url)("queryParams",null!==(n=null==i?null:i.params)&&void 0!==n?n:null),k.\u0275\u0275advance(1),k.\u0275\u0275property("labelKey",i.labelKey)("module",r.navbar.current.module)}}function Xl(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"a",59),k.\u0275\u0275listener("click",function(){k.\u0275\u0275restoreView(n);var e=k.\u0275\u0275nextContext().$implicit;return k.\u0275\u0275nextContext(4).handleProcess(e)}),k.\u0275\u0275element(2,"scrm-label",58),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()}if(2&e){var i=k.\u0275\u0275nextContext().$implicit,r=k.\u0275\u0275nextContext(4);k.\u0275\u0275advance(2),k.\u0275\u0275property("labelKey",i.labelKey)("module",r.navbar.current.module)}}function Jl(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"li",56),k.\u0275\u0275template(1,Yl,3,4,"ng-container",3),k.\u0275\u0275template(2,Xl,3,2,"ng-container",3),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!n.process),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.process)}}function eu(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"li",53),k.\u0275\u0275element(2,"scrm-label",54),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(3,Jl,3,2,"li",55),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(2),k.\u0275\u0275property("module",n.navbar.current.module),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.currentQuickActions)}}function tu(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"a",57),k.\u0275\u0275element(2,"scrm-label",58),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n,i=k.\u0275\u0275nextContext().$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("routerLink",i.url)("queryParams",null!==(n=null==i?null:i.params)&&void 0!==n?n:null),k.\u0275\u0275advance(1),k.\u0275\u0275property("labelKey",i.labelKey)("module",i.module)}}function nu(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"a",59),k.\u0275\u0275listener("click",function(){k.\u0275\u0275restoreView(n);var e=k.\u0275\u0275nextContext().$implicit;return k.\u0275\u0275nextContext(4).handleProcess(e)}),k.\u0275\u0275element(2,"scrm-label",58),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()}if(2&e){var i=k.\u0275\u0275nextContext().$implicit;k.\u0275\u0275advance(2),k.\u0275\u0275property("labelKey",i.labelKey)("module",i.module)}}function iu(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"li",56),k.\u0275\u0275template(1,tu,3,4,"ng-container",3),k.\u0275\u0275template(2,nu,3,2,"ng-container",3),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!n.process),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.process)}}var ru=function(){return[]};function ou(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"li",53),k.\u0275\u0275element(2,"scrm-label",60),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(3,iu,3,2,"li",55),k.\u0275\u0275elementContainerEnd()),2&e){var n,i=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(3),k.\u0275\u0275property("ngForOf",null!==(n=null==i||null==i.navigation?null:i.navigation.quickActions)&&void 0!==n?n:k.\u0275\u0275pureFunction0(1,ru))}}function au(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275text(1),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2).ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate(n)}}function su(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"span",66),k.\u0275\u0275template(1,au,2,1,"ng-container",3),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n>0)}}function lu(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,su,2,1,"span",65),k.\u0275\u0275elementContainerEnd()),2&e){var n,i=t.ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",null!==(n=i)&&void 0!==n&&n)}}function uu(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"div",61),k.\u0275\u0275elementStart(1,"a",62),k.\u0275\u0275listener("mouseenter",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(3).markAsRead()}),k.\u0275\u0275element(2,"scrm-image",63),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(3,lu,2,1,"ng-container",3),k.\u0275\u0275pipe(4,"async"),k.\u0275\u0275elementStart(5,"div",64),k.\u0275\u0275element(6,"scrm-notifications"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(3),k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(4,1,i.notificationCount$))}}function cu(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",46),k.\u0275\u0275elementStart(1,"div",47),k.\u0275\u0275elementStart(2,"a",48),k.\u0275\u0275element(3,"scrm-image",49),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(4,"ul",50),k.\u0275\u0275template(5,eu,4,2,"ng-container",3),k.\u0275\u0275template(6,ou,4,2,"ng-container",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(7,"div",51),k.\u0275\u0275element(8,"scrm-search-bar"),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(9,uu,7,3,"div",52),k.\u0275\u0275elementEnd()),2&e){var n,i,r=k.\u0275\u0275nextContext().ngIf,o=k.\u0275\u0275nextContext();k.\u0275\u0275advance(4),k.\u0275\u0275classProp("dropdown-menu-right",!o.mobileNavbar),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",(null!==(n=null==o.navbar||null==o.navbar.current?null:o.navbar.current.module)&&void 0!==n?n:"")&&o.currentQuickActions.length),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",(null!==(i=null==o||null==o.navigation?null:o.navigation.quickActions)&&void 0!==i?i:k.\u0275\u0275pureFunction0(5,ru)).length),k.\u0275\u0275advance(3),k.\u0275\u0275property("ngIf",o.notificationsEnabled&&o.checkAppStrings(r.appStrings)&&o.arePreferencesInitialized(r.userPreferences))}}function du(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275template(1,_l,5,0,"ng-template",2),k.\u0275\u0275template(2,Ql,4,3,"ng-container",3),k.\u0275\u0275template(3,cu,10,6,"ng-template",null,4,k.\u0275\u0275templateRefExtractor),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!n.loaded),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.loaded)}}function fu(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"a",1),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().doLogout()}),k.\u0275\u0275text(2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()}if(2&e){var i=t.ngIf,r=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275textInterpolate(i.appStrings[r.logout.logoutAction.label]||"")}}function pu(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-image",6),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275propertyInterpolate("image",n.icon)}}function mu(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"a",4),k.\u0275\u0275template(1,pu,1,1,"scrm-image",5),k.\u0275\u0275text(2),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("ngClass",n.class)("queryParams",n.link.params)("routerLink",n.link.route),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.icon),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",n.link.label," ")}}function hu(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-image",6),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275propertyInterpolate("image",n.icon)}}function vu(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"a",7),k.\u0275\u0275template(1,hu,1,1,"scrm-image",5),k.\u0275\u0275text(2),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("href",n.link.url,k.\u0275\u0275sanitizeUrl)("ngClass",n.class),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.icon),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",n.link.label," ")}}function gu(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-image",6),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275propertyInterpolate("image",n.icon)}}function yu(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"a",8),k.\u0275\u0275template(1,gu,1,1,"scrm-image",5),k.\u0275\u0275text(2),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("ngClass",n.class),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.icon),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",n.link.label," ")}}function bu(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,mu,3,5,"a",1),k.\u0275\u0275template(2,vu,3,4,"a",2),k.\u0275\u0275template(3,yu,3,3,"a",3),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.link.route),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!n.link.route&&n.link.url),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!n.link.route&&!n.link.url)}}function Su(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-image",6),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275propertyInterpolate("image",n.icon)}}function Cu(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"a",9),k.\u0275\u0275listener("click",function(){k.\u0275\u0275restoreView(n);var e=k.\u0275\u0275nextContext();return e.handleProcess(e.link.process)}),k.\u0275\u0275template(2,Su,1,1,"scrm-image",5),k.\u0275\u0275text(3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()}if(2&e){var i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngClass",i.class),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.icon),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",i.link.label," ")}}var ku=function(e,t,n){return{link:e,icon:t,class:n}};function wu(e,t){if(1&e&&k.\u0275\u0275element(0,"ndc-dynamic",1),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("ndcDynamicComponent",n.getType)("ndcDynamicInputs",k.\u0275\u0275pureFunction3(2,ku,n.link,n.icon,n.class))}}function Iu(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"span",3),k.\u0275\u0275elementStart(1,"a",4),k.\u0275\u0275text(2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275textInterpolate1(" ",n.item.link.label," ")}}function xu(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"ul",5),k.\u0275\u0275elementStart(1,"li",6),k.\u0275\u0275element(2,"scrm-menu-item",7),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("item",n.item)}}function ju(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"li",16),k.\u0275\u0275element(1,"scrm-menu-item-link",17),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),k.\u0275\u0275property("icon",n.icon)("link",n.link)}}function Eu(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-sub-menu-recently-viewed",18),k.\u0275\u0275element(2,"scrm-sub-menu-favorites",18),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2).$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("module",n.module),k.\u0275\u0275advance(1),k.\u0275\u0275property("module",n.module)}}function Mu(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"ul",13),k.\u0275\u0275template(1,ju,2,4,"li",14),k.\u0275\u0275template(2,Eu,3,2,"ng-container",15),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit;k.\u0275\u0275classProp("rounded-0",n.submenu&&1===n.submenu.length),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.submenu),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n&&n.module)}}var _u=function(e,t){return{"sub-nav-link":!0,"nav-link":!0,"action-link":!0,"dropdown-item":e,"dropdown-toggle":t}};function Fu(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"li",10),k.\u0275\u0275element(1,"scrm-menu-item-link",11),k.\u0275\u0275template(2,Mu,3,4,"ul",12),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275classMap(k.\u0275\u0275pureFunction2(4,_u,n.submenu.length,n.submenu.length)),k.\u0275\u0275property("link",n.link),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.submenu.length)}}function Lu(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"ul",8),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().hideDropdown()}),k.\u0275\u0275template(1,Fu,3,7,"li",9),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275nextContext();k.\u0275\u0275property("ngbCollapse",i.subNavCollapse),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",i.item.submenu)}}var Ou=function(e,t){return{item:e,subNavCollapse:t}};function Du(e,t){if(1&e&&k.\u0275\u0275element(0,"ndc-dynamic",1),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("ndcDynamicComponent",n.getType)("ndcDynamicInputs",k.\u0275\u0275pureFunction2(2,Ou,n.item,n.subNavCollapse))}}function Au(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",8),k.\u0275\u0275element(1,"scrm-menu-item-link",9),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275classMap("nav-link action-link"),k.\u0275\u0275property("link",n.link)}}function Nu(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"div",6),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).hideDropdown()}),k.\u0275\u0275template(1,Au,2,3,"div",7),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",i.items)}}function Ru(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"ul",1),k.\u0275\u0275elementStart(1,"li",2),k.\u0275\u0275elementStart(2,"a",3),k.\u0275\u0275element(3,"scrm-label",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(4,Nu,2,1,"div",5),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(3),k.\u0275\u0275property("labelKey",n.labelKey),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.showDropdown)}}var Tu=function(e,t){return{items:e,labelKey:t}};function Pu(e,t){if(1&e&&k.\u0275\u0275element(0,"ndc-dynamic",1),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("ndcDynamicComponent",n.getType)("ndcDynamicInputs",k.\u0275\u0275pureFunction2(2,Tu,n.items,n.labelKey))}}function Bu(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"div",4),k.\u0275\u0275listener("click",function(){k.\u0275\u0275restoreView(n);var e=k.\u0275\u0275nextContext(3);return e.onClick&&e.onClick()}),k.\u0275\u0275elementStart(1,"a",5),k.\u0275\u0275text(2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit,r=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("routerLink",r.buildRoute(i)),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",i.attributes.item_summary," ")}}function $u(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Bu,3,2,"div",3),k.\u0275\u0275pipe(2,"slice"),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",k.\u0275\u0275pipeBind3(2,1,n.records,0,n.maxDisplayed))}}function Vu(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"h4",1),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().toggleCollapse()}),k.\u0275\u0275element(2,"scrm-label",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(3,$u,3,5,"ng-container",0),k.\u0275\u0275elementContainerEnd()}if(2&e){var i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(3),k.\u0275\u0275property("ngIf",!i.collapsed)}}var Uu=function(e,t,n){return{module:e,onClick:t,collapsible:n}};function Ku(e,t){if(1&e&&k.\u0275\u0275element(0,"ndc-dynamic",1),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("ndcDynamicComponent",n.getType)("ndcDynamicInputs",k.\u0275\u0275pureFunction3(2,Uu,n.module,n.onClick,n.collapsible))}}var zu=function(e,t){return{route:e,active:t}};function Gu(e,t){if(1&e&&k.\u0275\u0275element(0,"ndc-dynamic",1),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("ndcDynamicComponent",n.getType)("ndcDynamicInputs",k.\u0275\u0275pureFunction2(2,zu,n.route,n.active))}}function Zu(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",6),k.\u0275\u0275element(1,"scrm-menu-item-link",7),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275classMap("sub-nav-link nav-link action-link"),k.\u0275\u0275property("icon",n.icon)("link",n.link)}}function Hu(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-sub-menu-recently-viewed",8),k.\u0275\u0275element(2,"scrm-sub-menu-favorites",8),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("module",n.item.module),k.\u0275\u0275advance(1),k.\u0275\u0275property("module",n.item.module)}}function qu(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"div",3),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().hideDropdown()}),k.\u0275\u0275template(1,Zu,2,4,"div",4),k.\u0275\u0275template(2,Hu,3,2,"ng-container",5),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",i.item.submenu),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.item&&i.item.module)}}var Wu=function(e){return{"top-nav-link":!0,"nav-link-nongrouped":!0,"dropdown-toggle":e}},Qu=function(e){return{item:e}};function Yu(e,t){if(1&e&&k.\u0275\u0275element(0,"ndc-dynamic",1),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("ndcDynamicComponent",n.getType)("ndcDynamicInputs",k.\u0275\u0275pureFunction1(2,Qu,n.item))}}function Xu(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"li",5),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().navBackLink()}),k.\u0275\u0275element(2,"scrm-image",6),k.\u0275\u0275elementStart(3,"a",7),k.\u0275\u0275element(4,"scrm-label",8),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()}}function Ju(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"li",12),k.\u0275\u0275listener("click",function(e){k.\u0275\u0275restoreView(n);var t=k.\u0275\u0275nextContext(3);return t.changeSubNav(e,t.current.submenu,t.navigationType,t.current)}),k.\u0275\u0275elementStart(1,"a",13),k.\u0275\u0275text(2),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(3,"scrm-image",15),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(2),k.\u0275\u0275textInterpolate(i.current.link.label)}}function ec(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"li",12),k.\u0275\u0275listener("click",function(e){var t=k.\u0275\u0275restoreView(n).$implicit,i=k.\u0275\u0275nextContext(3);return i.changeSubNav(e,t.submenu,i.navigationType,t)}),k.\u0275\u0275elementStart(1,"a",13),k.\u0275\u0275text(2),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(3,"scrm-image",15),k.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit;k.\u0275\u0275advance(2),k.\u0275\u0275textInterpolate(i.link.label)}}function tc(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",9),k.\u0275\u0275template(2,Ju,4,1,"li",10),k.\u0275\u0275template(3,ec,4,1,"li",11),k.\u0275\u0275elementContainerStart(4),k.\u0275\u0275elementStart(5,"li",12),k.\u0275\u0275listener("click",function(e){k.\u0275\u0275restoreView(n);var t=k.\u0275\u0275nextContext(2);return t.changeSubNav(e,t.all,"gm",null)}),k.\u0275\u0275elementStart(6,"a",13),k.\u0275\u0275element(7,"scrm-label",14),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(8,"scrm-image",15),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()}if(2&e){var i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",i.isAdminNavbar),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",i.mainItems)}}function nc(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-mobile-grouped-menu",17),2&e){var n=k.\u0275\u0275nextContext(4);k.\u0275\u0275property("items",null==n.current?null:n.current.submenu)("onClose",n.onClose)}}function ic(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-mobile-module-menu",17),2&e){var n=k.\u0275\u0275nextContext(4);k.\u0275\u0275property("items",n.submenu)("onClose",n.onClose)}}function rc(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",9),k.\u0275\u0275elementStart(2,"li",18),k.\u0275\u0275element(3,"scrm-menu-recently-viewed",19),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(4,"li",18),k.\u0275\u0275element(5,"scrm-menu-favorites",19),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(4);k.\u0275\u0275advance(3),k.\u0275\u0275property("collapsible",!0)("module",n.subNavItem.module)("onClick",n.onClose),k.\u0275\u0275advance(2),k.\u0275\u0275property("collapsible",!0)("module",n.subNavItem.module)("onClick",n.onClose)}}function oc(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,nc,1,2,"scrm-mobile-grouped-menu",16),k.\u0275\u0275template(2,ic,1,2,"scrm-mobile-module-menu",16),k.\u0275\u0275template(3,rc,6,6,"ng-container",0),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.isAdminNavbar&&n.isAdminNavbarClicked),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!n.isAdminNavbarClicked),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.subNavItem&&n.subNavItem.module)}}function ac(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-mobile-grouped-menu",17),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("items",n.submenu)("onClose",n.onClose)}}function sc(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,oc,4,3,"ng-container",0),k.\u0275\u0275template(2,ac,2,2,"ng-container",0),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","gm"!==n.subNavigationType),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","gm"===n.subNavigationType)}}function lc(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,tc,9,2,"ng-container",0),k.\u0275\u0275template(2,sc,3,2,"ng-container",0),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.mainNavLink),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.mobileSubNav)}}var uc=function(e,t,n,i,r){return{current:e,items:t,all:n,onClose:i,navigationType:r}};function cc(e,t){if(1&e&&k.\u0275\u0275element(0,"ndc-dynamic",1),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("ndcDynamicComponent",n.getType)("ndcDynamicInputs",k.\u0275\u0275pureFunction5(2,uc,n.current,n.items,n.all,n.onClose,n.navigationType))}}function dc(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"li",7),k.\u0275\u0275listener("click",function(){k.\u0275\u0275restoreView(n);var e=k.\u0275\u0275nextContext(3);return e.onClose&&e.onClose()}),k.\u0275\u0275element(1,"scrm-menu-item-link",8),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275nextContext(2).$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275classMap("mobile-nav-link dropdown-item action-link pl-5 pr-3 pt-2 pb-2"),k.\u0275\u0275property("icon",i.icon||"")("link",i.link)}}function fc(e,t){1&e&&(k.\u0275\u0275elementStart(0,"ngb-panel",5),k.\u0275\u0275template(1,dc,2,4,"ng-template",6),k.\u0275\u0275elementEnd()),2&e&&k.\u0275\u0275property("cardClass","mobile-nav-group-item disabled")("disabled",!0)}function pc(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"li",13),k.\u0275\u0275listener("click",function(){k.\u0275\u0275restoreView(n);var e=k.\u0275\u0275nextContext(4);return e.onClose&&e.onClose()}),k.\u0275\u0275element(1,"scrm-menu-item-link",8),k.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275classMap("mobile-nav-link action-link pl-1 pr-3 pt-2 pb-2 w-100"),k.\u0275\u0275property("icon",i.icon||"")("link",i.link)}}function mc(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"li"),k.\u0275\u0275element(2,"scrm-menu-recently-viewed",14),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(3,"li"),k.\u0275\u0275element(4,"scrm-menu-favorites",14),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(3).$implicit,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("collapsible",!0)("module",n.module)("onClick",i.onClose),k.\u0275\u0275advance(2),k.\u0275\u0275property("collapsible",!0)("module",n.module)("onClick",i.onClose)}}function hc(e,t){if(1&e&&(k.\u0275\u0275template(0,pc,2,4,"li",11),k.\u0275\u0275template(1,mc,5,6,"ng-container",12)),2&e){var n=k.\u0275\u0275nextContext(2).$implicit;k.\u0275\u0275property("ngForOf",n.submenu),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n&&n.module)}}function vc(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"ngb-panel",9),k.\u0275\u0275template(1,hc,2,2,"ng-template",10),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit;k.\u0275\u0275property("title",n.link.label)}}function gc(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,fc,2,2,"ngb-panel",3),k.\u0275\u0275template(2,vc,2,1,"ngb-panel",4),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!n.submenu||!n.submenu.length),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.submenu&&n.submenu.length)}}var yc=function(e,t){return{items:e,onClose:t}};function bc(e,t){if(1&e&&k.\u0275\u0275element(0,"ndc-dynamic",1),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("ndcDynamicComponent",n.getType)("ndcDynamicInputs",k.\u0275\u0275pureFunction2(2,yc,n.items,n.onClose))}}function Sc(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275elementStart(2,"a",2),k.\u0275\u0275listener("click",function(){k.\u0275\u0275restoreView(n);var e=k.\u0275\u0275nextContext();return e.onClose&&e.onClose()}),k.\u0275\u0275element(3,"scrm-menu-item-link",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()}if(2&e){var i=t.$implicit;k.\u0275\u0275advance(3),k.\u0275\u0275classMap("mobile-nav-link dropdown-item action-link pl-3 pr-3 pt-2 pb-2"),k.\u0275\u0275property("icon",i.icon||"")("link",i.link)}}function Cc(e,t){if(1&e&&k.\u0275\u0275element(0,"ndc-dynamic",1),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("ndcDynamicComponent",n.getType)("ndcDynamicInputs",k.\u0275\u0275pureFunction2(2,yc,n.items,n.onClose))}}var kc=function(e,t,n){return{label:e,url:t,route:n}};function wc(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"li",7),k.\u0275\u0275element(1,"scrm-menu-item-link",8),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),k.\u0275\u0275property("link",k.\u0275\u0275pureFunction3(3,kc,n.attributes.item_summary,i.buildRoute(n),i.buildRoute(n)))}}function Ic(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"li",1),k.\u0275\u0275elementStart(2,"a",2),k.\u0275\u0275element(3,"scrm-image",3),k.\u0275\u0275element(4,"scrm-label",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(5,"ul",5),k.\u0275\u0275template(6,wc,2,7,"li",6),k.\u0275\u0275pipe(7,"slice"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(6),k.\u0275\u0275property("ngForOf",k.\u0275\u0275pipeBind3(7,1,n.records,0,n.maxDisplayed))}}var xc=function(e){return{module:e}};function jc(e,t){if(1&e&&k.\u0275\u0275element(0,"ndc-dynamic",1),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("ndcDynamicComponent",n.getType)("ndcDynamicInputs",k.\u0275\u0275pureFunction1(2,xc,n.module))}}function Ec(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"li",7),k.\u0275\u0275element(1,"scrm-menu-item-link",8),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275classMap("submenu-nav-link nav-link action-link"),k.\u0275\u0275property("link",k.\u0275\u0275pureFunction3(3,kc,n.attributes.parent_name,i.buildRoute(n),i.buildRoute(n)))}}function Mc(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"li",1),k.\u0275\u0275elementStart(2,"a",2),k.\u0275\u0275element(3,"scrm-image",3),k.\u0275\u0275element(4,"scrm-label",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(5,"ul",5),k.\u0275\u0275template(6,Ec,2,7,"li",6),k.\u0275\u0275pipe(7,"slice"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(6),k.\u0275\u0275property("ngForOf",k.\u0275\u0275pipeBind3(7,1,n.records,0,n.maxDisplayed))}}function _c(e,t){if(1&e&&k.\u0275\u0275element(0,"ndc-dynamic",1),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("ndcDynamicComponent",n.getType)("ndcDynamicInputs",k.\u0275\u0275pureFunction1(2,xc,n.module))}}function Fc(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"div",4),k.\u0275\u0275listener("click",function(){k.\u0275\u0275restoreView(n);var e=k.\u0275\u0275nextContext(3);return e.onClick&&e.onClick()}),k.\u0275\u0275elementStart(1,"a",5),k.\u0275\u0275text(2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit,r=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("routerLink",r.buildRoute(i)),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",i.attributes.parent_name," ")}}function Lc(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Fc,3,2,"div",3),k.\u0275\u0275pipe(2,"slice"),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",k.\u0275\u0275pipeBind3(2,1,n.records,0,n.maxDisplayed))}}function Oc(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"h4",1),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().toggleCollapse()}),k.\u0275\u0275element(2,"scrm-label",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(3,Lc,3,5,"ng-container",0),k.\u0275\u0275elementContainerEnd()}if(2&e){var i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(3),k.\u0275\u0275property("ngIf",!i.collapsed)}}function Dc(e,t){if(1&e&&k.\u0275\u0275element(0,"ndc-dynamic",1),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("ndcDynamicComponent",n.getType)("ndcDynamicInputs",k.\u0275\u0275pureFunction3(2,Uu,n.module,n.onClick,n.collapsible))}}function Ac(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",2),k.\u0275\u0275element(2,"scrm-label",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd())}function Nc(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-record-thread",4),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.recordThreadConfig)}}function Rc(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"span",4),k.\u0275\u0275element(1,"scrm-action-group-menu",5),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("buttonClass",n.config.buttonClass)("config",n.config.actions)}}function Tc(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275elementStart(1,"scrm-field-grid",2),k.\u0275\u0275template(2,Rc,2,2,"span",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275classMapInterpolate1("record-grid ",n.config&&n.config.klass||"",""),k.\u0275\u0275advance(1),k.\u0275\u0275property("actions",!!n.config.actions)("appendActions",n.config&&n.config.appendActions||!1)("colClass",n.config&&n.config.colClass)("fieldMode",n.mode)("fields",n.fields)("inputClass",n.config&&n.config.inputClass)("labelClass",n.config&&n.config.labelClass)("labelDisplay",n.config&&n.config.labelDisplay||"top")("maxColumns",n.maxColumns)("rowClass",n.config&&n.config.rowClass)("sizeMap",n.sizeMap),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.config.actions)}}function Pc(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Tc,3,15,"div",1),k.\u0275\u0275pipe(2,"async"),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(2,1,n.vm$))}}var Bc=["list"];function $c(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",4),k.\u0275\u0275element(1,"scrm-label",5),k.\u0275\u0275elementEnd())}function Vc(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",6),k.\u0275\u0275element(1,"scrm-loading-spinner",7),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("overlay",!0))}function Uc(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",13),k.\u0275\u0275element(1,"scrm-button",14),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.getLoadMoreButton())}}function Kc(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",null,15),k.\u0275\u0275element(2,"scrm-record-thread-item",14),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275reference(1),r=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(2),k.\u0275\u0275property("config",r.buildItem(n,i))}}function zc(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",16),k.\u0275\u0275element(1,"scrm-button",14),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.getLoadMoreButton())}}function Gc(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-action-group-menu",17),k.\u0275\u0275elementContainerEnd()),2&e){var n,i,r=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("buttonClass",null!==(n=r.config.listActionsButtonClass)&&void 0!==n?n:"")("buttonGroupClass",null!==(i=r.config.listActionsButtonGroupClass)&&void 0!==i?i:"")("config",r.listActionAdapter)}}function Zc(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",8,9),k.\u0275\u0275template(2,Uc,2,1,"div",10),k.\u0275\u0275template(3,Kc,3,1,"div",11),k.\u0275\u0275elementStart(4,"div"),k.\u0275\u0275template(5,zc,2,1,"div",12),k.\u0275\u0275template(6,Gc,2,3,"ng-container",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n,i=k.\u0275\u0275nextContext();k.\u0275\u0275property("ngStyle",i.getMaxHeight()),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf","top"===i.loadMorePosition&&!i.allLoaded()),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",i.records),k.\u0275\u0275advance(1),k.\u0275\u0275classMap(null!==(n=i.config.listActionsClass)&&void 0!==n?n:""),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","bottom"===i.loadMorePosition&&!i.allLoaded()),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.config.listActions)}}function Hc(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275elementStart(1,"h6",18),k.\u0275\u0275element(2,"scrm-label",19),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("labelKey",n.config.noDataLabel||"LBL_NO_DATA")}}function qc(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",21),k.\u0275\u0275elementStart(1,"div",22),k.\u0275\u0275element(2,"scrm-record-thread-item",14),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(3,"div",23),k.\u0275\u0275element(4,"scrm-button",14),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(2),k.\u0275\u0275property("config",n.buildCreateItem()),k.\u0275\u0275advance(2),k.\u0275\u0275property("config",n.getCreateButton())}}function Wc(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,qc,5,2,"div",20),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!n.loading)}}var Qc=["body"];function Yc(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-record-flexbox",6),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.buildConfig(n.config.metadata.headerLayout))}}function Xc(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-record-flexbox",6),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.buildConfig(n.config.metadata.bodyLayout))}}function Jc(e,t){1&e&&k.\u0275\u0275element(0,"div",7)}function ed(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",8),k.\u0275\u0275element(1,"scrm-button",6),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.getCollapseButton())}}function td(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275template(2,Yc,2,1,"ng-container",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(3,"div",null,3),k.\u0275\u0275template(5,Xc,2,1,"ng-container",2),k.\u0275\u0275template(6,Jc,1,0,"div",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(7,ed,2,1,"div",5),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275classMapInterpolate2("d-flex flex-column record-thread-item ",n.config&&n.config.klass||""," ",n.dynamicClass,""),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",n.config.metadata&&n.config.metadata.headerLayout),k.\u0275\u0275advance(1),k.\u0275\u0275classMapInterpolate1("record-thread-item-body flex-grow-1 ",n.getBodyClass(),""),k.\u0275\u0275classProp("collapsed",n.collapsible&&n.collapsed)("expanded",n.collapsible&&!n.collapsed),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",n.config.metadata&&n.config.metadata.bodyLayout),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.collapsible&&n.collapsed),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.collapsible)}}function nd(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"label",3),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(3).ngIf,i=k.\u0275\u0275nextContext(4).$implicit,r=k.\u0275\u0275nextContext(4);k.\u0275\u0275property("ngClass",r.getLabelClass(i)),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",n.label," ")}}function id(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-label",9),2&e){var n=k.\u0275\u0275nextContext(3).ngIf,i=k.\u0275\u0275nextContext(4).$implicit,r=k.\u0275\u0275nextContext(4);k.\u0275\u0275property("labelKey",n.labelKey)("ngClass",r.getLabelClass(i))}}function rd(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-dynamic-label",10),2&e){var n=k.\u0275\u0275nextContext(3).ngIf,i=k.\u0275\u0275nextContext(8);k.\u0275\u0275property("labelKey",n.dynamicLabelKey)("fields",i.record.fields)}}function od(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div"),k.\u0275\u0275template(2,nd,2,2,"label",6),k.\u0275\u0275template(3,id,1,2,"scrm-label",7),k.\u0275\u0275template(4,rd,1,2,"scrm-dynamic-label",8),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2).ngIf,i=k.\u0275\u0275nextContext(4).$implicit,r=k.\u0275\u0275nextContext(4);k.\u0275\u0275advance(1),k.\u0275\u0275classProp("pr-3","inline"===r.getLabelDisplay(i,r.mode)&&"none"!==r.getDisplay(i)),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.label),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!n.label&&n.labelKey),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.dynamicLabelKey)}}function ad(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div"),k.\u0275\u0275element(2,"scrm-field",11),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2).ngIf,i=k.\u0275\u0275nextContext(4).$implicit,r=k.\u0275\u0275nextContext(4);k.\u0275\u0275advance(1),k.\u0275\u0275classProp("flex-grow-1","inline"===r.getLabelDisplay(i,r.mode)),k.\u0275\u0275advance(1),k.\u0275\u0275property("field",n)("klass",r.getFieldClass(i))("mode",r.mode)("record",r.record)("type",n.type)}}function sd(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,od,5,5,"ng-container",1),k.\u0275\u0275template(2,ad,3,7,"ng-container",1),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(5).$implicit,i=k.\u0275\u0275nextContext(4);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","none"!==i.getLabelDisplay(n,i.mode)),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","none"!==i.getDisplay(n))}}function ld(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,sd,3,2,"ng-container",1),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.ngIf,i=k.\u0275\u0275nextContext(4).$implicit,r=k.\u0275\u0275nextContext(4);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",r.shouldDisplay(i,n,r.mode))}}function ud(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,ld,2,1,"ng-container",1),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(3).$implicit,i=k.\u0275\u0275nextContext(4);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.getField(i.record,n.field))}}function cd(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-action-group-menu",12),k.\u0275\u0275elementContainerEnd()),2&e){var n,i,r=k.\u0275\u0275nextContext(7);k.\u0275\u0275advance(1),k.\u0275\u0275property("buttonClass",null!==(n=r.config.buttonClass)&&void 0!==n?n:"")("buttonGroupClass",null!==(i=r.config.buttonGroupClass)&&void 0!==i?i:"")("config",r.config.actions)}}function dd(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",5),k.\u0275\u0275template(2,ud,2,1,"ng-container",1),k.\u0275\u0275template(3,cd,2,3,"ng-container",1),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2).$implicit,i=k.\u0275\u0275nextContext(4);k.\u0275\u0275advance(1),k.\u0275\u0275classProp("align-items-center","inline"===i.getLabelDisplay(n,i.mode))("flex-column","top"===i.getLabelDisplay(n,i.mode))("flex-row","inline"===i.getLabelDisplay(n,i.mode))("justify-content-end",!n.field),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.record),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.actionSlot&&i.config.actions)}}function fd(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",3),k.\u0275\u0275template(1,dd,4,10,"ng-container",1),k.\u0275\u0275elementEnd()),2&e){var n,i=k.\u0275\u0275nextContext().$implicit,r=k.\u0275\u0275nextContext(4);k.\u0275\u0275classMapInterpolate1("record-flexbox-col ",r.getClass(i),""),k.\u0275\u0275property("ngClass",null!==(n=r.config.colClass)&&void 0!==n?n:null),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","hidden"!==i.display&&r.shouldColDisplayInMode(i,r.mode))}}function pd(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,fd,2,5,"div",4),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(4);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","hidden"!==n.display&&i.shouldColDisplayInMode(n,i.mode))}}function md(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",3),k.\u0275\u0275template(2,pd,2,1,"ng-container",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n,i=t.$implicit,r=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275classMapInterpolate3("d-flex record-flexbox-row ",r.getJustify(i.justify)," ",r.getAlign(i.align)," ",r.getLayoutRowClass(i),""),k.\u0275\u0275property("ngClass",null!==(n=r.config.rowClass)&&void 0!==n?n:null),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",i.cols)}}function hd(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,md,3,7,"ng-container",2),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.layout.rows)}}function vd(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275template(1,hd,2,1,"ng-container",1),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275classMapInterpolate2("d-flex ",(n.config&&n.config.flexDirection?n.config.flexDirection:"flex-column")||""," ",n.config&&n.config.klass||"",""),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.layout&&n.layout.rows)}}var gd=["searchInput"],yd=function(e){return{"dropdown-active":e}};function bd(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"ul",8),k.\u0275\u0275elementStart(1,"li",9),k.\u0275\u0275elementStart(2,"a",10),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).search()}),k.\u0275\u0275element(3,"scrm-image",11),k.\u0275\u0275elementStart(4,"span",12),k.\u0275\u0275text(5,'"'),k.\u0275\u0275elementStart(6,"strong"),k.\u0275\u0275text(7),k.\u0275\u0275elementEnd(),k.\u0275\u0275text(8),k.\u0275\u0275pipe(9,"lowercase"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275nextContext().ngIf,r=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngClass",k.\u0275\u0275pureFunction1(5,yd,r.searchWord)),k.\u0275\u0275advance(6),k.\u0275\u0275textInterpolate(r.searchWord),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1('" ',k.\u0275\u0275pipeBind1(9,3,i.appStrings.LBL_IN_EVERYWHERE),"")}}function Sd(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"button",13),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).search()}),k.\u0275\u0275element(1,"scrm-image",11),k.\u0275\u0275elementEnd()}}function Cd(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"button",13),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).clearSearchTerm()}),k.\u0275\u0275element(1,"scrm-image",14),k.\u0275\u0275elementEnd()}}var kd=function(e){return{"search-focused":e}};function wd(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"form",1),k.\u0275\u0275elementStart(2,"div",2),k.\u0275\u0275elementStart(3,"input",3,4),k.\u0275\u0275listener("focus",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().onFocus()})("blur",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().onBlur()})("keydown.enter",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().search()}),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(5,bd,10,7,"ul",5),k.\u0275\u0275elementStart(6,"div",6),k.\u0275\u0275template(7,Sd,2,0,"button",7),k.\u0275\u0275template(8,Cd,2,0,"button",7),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()}if(2&e){var i=t.ngIf,r=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("formGroup",r.searchForm),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngClass",k.\u0275\u0275pureFunction1(6,kd,r.isFocused)),k.\u0275\u0275advance(1),k.\u0275\u0275propertyInterpolate1("placeholder","",i.appStrings.LBL_SEARCH||"","..."),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",r.searchWord.length&&r.hasSearchTyped),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",!r.hasSearchTyped),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",r.hasSearchTyped)}}function Id(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",5),k.\u0275\u0275elementStart(1,"div",6),k.\u0275\u0275elementStart(2,"strong"),k.\u0275\u0275text(3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(4,"div",7),k.\u0275\u0275text(5),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(3),k.\u0275\u0275textInterpolate(n.getColumnLabel("LBL_CHECKSYS_TITLE")),k.\u0275\u0275advance(2),k.\u0275\u0275textInterpolate1(" ",n.getColumnLabel("ERR_CHECKSYS")," ")}}function xd(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"span",14),k.\u0275\u0275elementStart(1,"strong"),k.\u0275\u0275text(2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275textInterpolate1(" ",i.getColumnLabel(n.value.info)," ")}}function jd(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",i.getColumnLabel(n.value.error)," ")}}function Ed(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"li"),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",n," ")}}function Md(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",15),k.\u0275\u0275elementStart(1,"ul"),k.\u0275\u0275template(2,Ed,2,1,"li",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit;k.\u0275\u0275advance(2),k.\u0275\u0275property("ngForOf",n.value.data)}}function _d(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"li"),k.\u0275\u0275elementStart(1,"div",8),k.\u0275\u0275elementStart(2,"div"),k.\u0275\u0275elementStart(3,"span"),k.\u0275\u0275element(4,"scrm-image",9),k.\u0275\u0275elementStart(5,"strong",10),k.\u0275\u0275text(6),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(7,xd,3,1,"span",11),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(8,jd,2,1,"div",12),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(9,Md,3,1,"div",13),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275classMapInterpolate1("alert ",i.getAlertType(n.value),""),k.\u0275\u0275advance(3),k.\u0275\u0275property("image",i.getAlertIcon(n.value)),k.\u0275\u0275advance(2),k.\u0275\u0275textInterpolate1(" ",i.getColumnLabel(n.value.label)," "),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",""!==n.value.info),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",""!==n.value.error),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",0!==n.value.data.length)}}function Fd(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-button-group",3),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("config$",n.config$)}}function Ld(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275elementStart(2,"div"),k.\u0275\u0275template(3,Fd,1,1,"scrm-button-group",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275classMap(n.klass),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.config$)}}function Od(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275text(1),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit,i=k.\u0275\u0275nextContext(2).ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate(i[n.labelKey]||"")}}function Dd(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275text(1),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate(n.text)}}function Ad(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"div",5),k.\u0275\u0275listener("click",function(){var e=k.\u0275\u0275restoreView(n).$implicit;return k.\u0275\u0275nextContext(3).close(e)}),k.\u0275\u0275template(1,Od,2,1,"ng-container",6),k.\u0275\u0275template(2,Dd,2,1,"ng-container",6),k.\u0275\u0275elementStart(3,"a",7),k.\u0275\u0275listener("click",function(){var e=k.\u0275\u0275restoreView(n).$implicit;return k.\u0275\u0275nextContext(3).close(e)}),k.\u0275\u0275elementStart(4,"span",8),k.\u0275\u0275text(5,"\xd7"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit;k.\u0275\u0275classMapInterpolate1("message ",i.type," alert-dismissible fade show shadow"),k.\u0275\u0275property("@fade",void 0),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.labelKey),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.text)}}function Nd(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",3),k.\u0275\u0275template(1,Ad,6,6,"div",4),k.\u0275\u0275elementEnd()),2&e){var n=t.ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n)}}function Rd(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275template(1,Nd,2,1,"div",2),k.\u0275\u0275pipe(2,"async"),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(2,1,n.messages$))}}function Td(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"button",7),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).first()}),k.\u0275\u0275element(1,"scrm-image",8),k.\u0275\u0275elementEnd()}}function Pd(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"button",9),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).previous()}),k.\u0275\u0275element(1,"scrm-image",10),k.\u0275\u0275elementEnd()}}function Bd(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"button",11),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).next()}),k.\u0275\u0275element(1,"scrm-image",12),k.\u0275\u0275elementEnd()}}function $d(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"button",13),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).last()}),k.\u0275\u0275element(1,"scrm-image",14),k.\u0275\u0275elementEnd()}}var Vd=function(e,t){return{"hide-pagination-count":e,"centre-pagination":t}};function Ud(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275template(1,Td,2,0,"button",2),k.\u0275\u0275template(2,Pd,2,0,"button",3),k.\u0275\u0275elementStart(3,"span",4),k.\u0275\u0275text(4),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(5,Bd,2,0,"button",5),k.\u0275\u0275template(6,$d,2,0,"button",6),k.\u0275\u0275elementEnd()),2&e){var n=t.ngIf,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.allowPagination),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.allowPagination),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngClass",k.\u0275\u0275pureFunction2(9,Vd,i.displayResponsiveTable,!i.allowPagination)),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate4(" (",n.pageCount.pageFirst," - ",n.pageCount.pageLast," ",n.appStrings.LBL_LIST_OF||""," ",n.pageCount.total,") "),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.allowPagination),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.allowPagination)}}function Kd(e,t){1&e&&k.\u0275\u0275projection(0)}function zd(e,t){1&e&&k.\u0275\u0275projection(0,1)}var Gd=[[["","popup-content",""]],[["","popup-title",""]]],Zd=["[popup-content]","[popup-title]"];function Hd(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",4),k.\u0275\u0275elementStart(1,"div",5),k.\u0275\u0275element(2,"scrm-label",6),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(3,"div",7),k.\u0275\u0275element(4,"scrm-field",8),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(2),k.\u0275\u0275property("labelKey",n.label)("module",i.record.module),k.\u0275\u0275advance(2),k.\u0275\u0275property("mode","list")("field",i.getField(n,i.record))("type",n.type)("record",i.record)}}function qd(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",2),k.\u0275\u0275template(1,Hd,5,6,"div",3),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.columns)}}function Wd(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",5),k.\u0275\u0275elementStart(1,"div",6),k.\u0275\u0275elementStart(2,"scrm-panel",7),k.\u0275\u0275elementStart(3,"div",8),k.\u0275\u0275element(4,"scrm-field-layout",9),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(2),k.\u0275\u0275property("title",n.label),k.\u0275\u0275advance(1),k.\u0275\u0275classMapInterpolate1("panel-",n.key,""),k.\u0275\u0275advance(1),k.\u0275\u0275property("dataSource",i.getLayoutDataSource(n))}}function Qd(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",3),k.\u0275\u0275template(1,Wd,5,5,"div",4),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.panels)}}function Yd(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275element(1,"scrm-field-layout",9),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(3).$implicit,i=k.\u0275\u0275nextContext(3);k.\u0275\u0275classMapInterpolate1("tab-",n.key,""),k.\u0275\u0275advance(1),k.\u0275\u0275property("dataSource",i.getLayoutDataSource(n))}}function Xd(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"li",16),k.\u0275\u0275elementStart(1,"a",17),k.\u0275\u0275text(2),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(3,Yd,2,4,"ng-template",18),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2),i=n.$implicit;k.\u0275\u0275property("ngbNavItem",n.index+1),k.\u0275\u0275advance(2),k.\u0275\u0275textInterpolate(i.label)}}function Jd(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Xd,4,2,"li",15),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!!n)}}function ef(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Jd,2,1,"ng-container",0),k.\u0275\u0275pipe(2,"async"),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(2,1,n.display$))}}function tf(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",6),k.\u0275\u0275elementStart(1,"scrm-panel",7),k.\u0275\u0275elementStart(2,"div",8),k.\u0275\u0275element(3,"scrm-field-layout",9),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(3).$implicit,i=k.\u0275\u0275nextContext(5);k.\u0275\u0275advance(1),k.\u0275\u0275property("title",n.label),k.\u0275\u0275advance(1),k.\u0275\u0275classMapInterpolate1("panel-",n.key,""),k.\u0275\u0275advance(1),k.\u0275\u0275property("dataSource",i.getLayoutDataSource(n))}}function nf(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",20),k.\u0275\u0275template(1,tf,4,5,"div",21),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(3).index,i=k.\u0275\u0275nextContext(4);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n==i.active-1)}}function rf(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,nf,2,1,"div",19),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!!n)}}function of(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275template(1,rf,2,1,"ng-container",0),k.\u0275\u0275pipe(2,"async"),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(2,1,n.display$))}}function af(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,of,3,3,"div",13),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.subPanels)}}function sf(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,af,2,1,"ng-container",13),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.panels)}}function lf(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"div",10),k.\u0275\u0275elementStart(1,"ul",11,12),k.\u0275\u0275listener("activeIdChange",function(e){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).active=e}),k.\u0275\u0275template(3,ef,3,3,"ng-container",13),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(4,"div",14),k.\u0275\u0275template(5,sf,2,1,"ng-container",0),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275reference(2),r=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("activeId",r.active),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngForOf",r.panels),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngbNavOutlet",i),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",r.panelsInPrevTab&&r.panelsInPrevTab.length)}}function uf(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Qd,2,1,"div",1),k.\u0275\u0275template(2,lf,6,4,"div",2),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.config&&"panels"===n.config.layout),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.config&&"tabs"===n.config.layout)}}function cf(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"a",1),k.\u0275\u0275listener("click",function(){var e=k.\u0275\u0275restoreView(n).ngIf;return k.\u0275\u0275nextContext().changeSorting(e)}),k.\u0275\u0275element(2,"scrm-image",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()}if(2&e){var i=t.ngIf,r=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("image",r.getStatusIcon(i))}}function df(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",3),k.\u0275\u0275elementStart(2,"div",4),k.\u0275\u0275element(3,"div",5),k.\u0275\u0275elementStart(4,"div",6),k.\u0275\u0275elementStart(5,"div",7),k.\u0275\u0275elementStart(6,"div"),k.\u0275\u0275text(7,"Record Status Bar Component"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd())}function ff(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",8),k.\u0275\u0275elementStart(1,"div",9),k.\u0275\u0275elementStart(2,"div"),k.\u0275\u0275text(3,"Record Status Bar Component"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd())}function pf(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275element(1,"scrm-button-group",2),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("config$",n.config$)}}function mf(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-button-group",3),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("config$",n.config$)}}function hf(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275template(1,mf,1,1,"scrm-button-group",2),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.config$)}}function vf(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-table-header",3),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("bulkActions",n.config.bulkActions)("paginationType",n.getPaginationType())("pagination",n.config.pagination)("selection",n.config.selection)}}function gf(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-table-footer",4),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("bulkActions",n.config.bulkActions)("paginationType",n.getPaginationType())("pagination",n.config.pagination)("selection",n.config.selection)("config",n.config)}}function yf(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-bulk-action-menu",5),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("selectionSource",n.selection)("actionSource",n.bulkActions)}}function bf(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-pagination",6),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("allowPagination",n.isPaginationEnabled())("state",n.pagination)}}function Sf(e,t){1&e&&k.\u0275\u0275element(0,"th",13)}function Cf(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"td",14),k.\u0275\u0275elementStart(1,"label",15),k.\u0275\u0275elementStart(2,"input",16),k.\u0275\u0275listener("change",function(){var e=k.\u0275\u0275restoreView(n).$implicit;return k.\u0275\u0275nextContext(3).toggleSelection(e.id)}),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(3,"span",17),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit,r=k.\u0275\u0275nextContext(2).ngIf,o=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("checked",i.id&&r.selected[i.id]||o.allSelected(r.selectionStatus))("disabled",o.allSelected(r.selectionStatus))}}function kf(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0,12),k.\u0275\u0275template(1,Sf,1,0,"th",7),k.\u0275\u0275template(2,Cf,4,2,"td",8),k.\u0275\u0275elementContainerEnd())}function wf(e,t){1&e&&k.\u0275\u0275element(0,"th",21)}function If(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-record-details-popup-button",24),2&e){var n=k.\u0275\u0275nextContext().$implicit,i=k.\u0275\u0275nextContext(3);k.\u0275\u0275property("record",n)("columns",i.popoverColumns)}}function xf(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"td",22),k.\u0275\u0275template(1,If,1,2,"scrm-record-details-popup-button",23),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.popoverColumns.length)}}function jf(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0,18),k.\u0275\u0275template(1,wf,1,0,"th",19),k.\u0275\u0275template(2,xf,2,1,"td",20),k.\u0275\u0275elementContainerEnd())}function Ef(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-sort-button",31),2&e){var n=k.\u0275\u0275nextContext(2).$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("state",i.getFieldSort(n))}}function Mf(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"th",28),k.\u0275\u0275element(1,"scrm-label",29),k.\u0275\u0275template(2,Ef,1,1,"scrm-sort-button",30),k.\u0275\u0275elementEnd()),2&e){var n,i=k.\u0275\u0275nextContext().$implicit,r=k.\u0275\u0275nextContext(2);k.\u0275\u0275classMap(null!==(n="primary-table-header column-"+(null==i?null:i.name))&&void 0!==n?n:""),k.\u0275\u0275advance(1),k.\u0275\u0275property("labelKey",i.label)("module",r.config.module||""),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",r.config.sort$&&i.sortable)}}function _f(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"td",14),k.\u0275\u0275element(1,"scrm-field",32),k.\u0275\u0275elementEnd()),2&e){var n,i=t.$implicit,r=k.\u0275\u0275nextContext().$implicit,o=k.\u0275\u0275nextContext(2);k.\u0275\u0275classMap(null!==(n="column-"+(null==r?null:r.name))&&void 0!==n?n:""),k.\u0275\u0275advance(1),k.\u0275\u0275property("mode","list")("type",r.type)("field",o.getField(r,i))("record",i)}}function Ff(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0,25),k.\u0275\u0275template(1,Mf,3,5,"th",26),k.\u0275\u0275template(2,_f,2,6,"td",27),k.\u0275\u0275elementContainerEnd()),2&e&&k.\u0275\u0275property("cdkColumnDef",t.$implicit.name)}function Lf(e,t){1&e&&k.\u0275\u0275element(0,"th",13)}function Of(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-line-action-menu",34),2&e){var n=k.\u0275\u0275nextContext().$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("config",i.config.lineActions)("record",n)}}function Df(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"td",14),k.\u0275\u0275template(1,Of,1,2,"scrm-line-action-menu",33),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n&&i.config.lineActions)}}function Af(e,t){1&e&&k.\u0275\u0275element(0,"tr",35)}function Nf(e,t){1&e&&k.\u0275\u0275element(0,"tr",36)}function Rf(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275elementStart(1,"p",37),k.\u0275\u0275element(2,"scrm-label",38),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd())}function Tf(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275element(1,"scrm-loading-spinner",39),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().ngIf;k.\u0275\u0275classProp("m-5",!n.records||0===n.records.length),k.\u0275\u0275advance(1),k.\u0275\u0275property("overlay",!0)}}function Pf(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275elementStart(2,"table",2),k.\u0275\u0275template(3,kf,3,0,"ng-container",3),k.\u0275\u0275template(4,jf,3,0,"ng-container",4),k.\u0275\u0275template(5,Ff,3,1,"ng-container",5),k.\u0275\u0275elementContainerStart(6,6),k.\u0275\u0275template(7,Lf,1,0,"th",7),k.\u0275\u0275template(8,Df,2,1,"td",8),k.\u0275\u0275elementContainerEnd(),k.\u0275\u0275template(9,Af,1,0,"tr",9),k.\u0275\u0275template(10,Nf,1,0,"tr",10),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(11,Rf,3,0,"div",0),k.\u0275\u0275template(12,Tf,2,3,"div",11),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.ngIf,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("dataSource",i.config.dataSource)("trackBy",i.trackRecord),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.selection),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.popoverColumns&&i.popoverColumns.length),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.columns),k.\u0275\u0275advance(4),k.\u0275\u0275property("cdkHeaderRowDef",n.displayedColumns),k.\u0275\u0275advance(1),k.\u0275\u0275property("cdkRowDefColumns",n.displayedColumns),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!n.loading&&0===n.records.length),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.loading)}}function Bf(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-bulk-action-menu",6),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("selectionSource",n.selection)("actionSource",n.bulkActions)}}function $f(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",7),k.\u0275\u0275element(1,"scrm-load-more",8),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("loadMoreButton",n.getLoadMoreButton())}}function Vf(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-pagination",9),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("allowPagination",n.isPaginationEnabled())("state",n.pagination)}}function Uf(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-button",1),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.addButton)}}function Kf(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-button",1),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.removeButton)}}function zf(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",6),k.\u0275\u0275element(1,"scrm-dropdown-button",7),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.store.myFilterButton)}}function Gf(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",13),k.\u0275\u0275element(1,"input",14),k.\u0275\u0275elementStart(2,"label",15),k.\u0275\u0275element(3,"scrm-label",16),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("value",n.value),k.\u0275\u0275advance(2),k.\u0275\u0275property("labelKey",n.labelKey)}}function Zf(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",11),k.\u0275\u0275template(1,Gf,4,2,"div",12),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.store.special)}}function Hf(e,t){1&e&&k.\u0275\u0275element(0,"scrm-button",7),2&e&&k.\u0275\u0275property("config",t.$implicit)}function qf(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",17),k.\u0275\u0275template(1,Hf,1,1,"scrm-button",18),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.store.gridButtons)}}function Wf(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"scrm-field-grid",8),k.\u0275\u0275template(1,Zf,2,1,"div",9),k.\u0275\u0275template(2,qf,2,1,"div",10),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().ngIf,i=k.\u0275\u0275nextContext();k.\u0275\u0275property("actions",!0)("appendActions",!1)("fieldMode",i.store.mode)("fields",i.store.displayFields)("record",n)("special",i.store.special.length>0),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.store.special.length>0),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.store.gridButtons)}}function Qf(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-record-grid",7),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.getGridConfig())}}function Yf(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"scrm-panel",1),k.\u0275\u0275template(1,zf,2,1,"div",2),k.\u0275\u0275elementStart(2,"div",3),k.\u0275\u0275template(3,Wf,3,8,"scrm-field-grid",4),k.\u0275\u0275template(4,Qf,2,1,"ng-container",5),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275propertyInterpolate1("klass","filter-panel m-0 ",n.config&&n.config.klass||"",""),k.\u0275\u0275property("showHeader",n.config.displayHeader)("close",n.store.closeButton)("isCollapsed$",n.store.isCollapsed$)("mode",n.store.panelMode)("titleKey","LBL_BASIC_FILTER"),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.store.myFilterButton),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",n.store.displayFields&&n.store.displayFields.length),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.config&&n.config.savedFilterEdit)}}function Xf(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-record-grid",4),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.getGridConfig())}}function Jf(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"scrm-panel",1),k.\u0275\u0275elementStart(1,"div",2),k.\u0275\u0275template(2,Xf,2,1,"ng-container",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275propertyInterpolate1("klass","record-panel ",n.config&&n.config.klass||"",""),k.\u0275\u0275property("close",n.closeButton)("isCollapsed$",n.isCollapsed$)("mode",n.panelMode)("titleKey",n.config.title||""),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",n.config)}}function ep(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"option",18),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(3);k.\u0275\u0275property("value",i.getKey(n)),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",i.language.getFieldLabel(n.labelKey)," ")}}function tp(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"div",13),k.\u0275\u0275elementStart(1,"div",14),k.\u0275\u0275elementStart(2,"form",15),k.\u0275\u0275elementStart(3,"select",16),k.\u0275\u0275listener("ngModelChange",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).onChartSelect()})("ngModelChange",function(e){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).selectedChart=e}),k.\u0275\u0275template(4,ep,2,2,"option",17),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(3),k.\u0275\u0275property("ngModel",i.selectedChart),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",i.configuredCharts)}}function np(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-chart",20),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275property("dataSource",n.dataSource)("type",n.chartType)}}function ip(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,np,1,2,"scrm-chart",19),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.dataSource&&n.chartType)}}function rp(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",21),k.\u0275\u0275element(1,"scrm-loading-spinner",22),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275classProp("m-5",!n.dataSource),k.\u0275\u0275advance(1),k.\u0275\u0275property("overlay",!0)}}function op(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"p",23),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",n.language.getFieldLabel(n.messageLabelKey)," ")}}function ap(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"scrm-widget-panel",1),k.\u0275\u0275elementStart(1,"div",2),k.\u0275\u0275elementStart(2,"div",3),k.\u0275\u0275elementStart(3,"div",4),k.\u0275\u0275elementStart(4,"div",5),k.\u0275\u0275template(5,tp,5,2,"div",6),k.\u0275\u0275elementStart(6,"div",7),k.\u0275\u0275elementStart(7,"div",8),k.\u0275\u0275elementStart(8,"div",9),k.\u0275\u0275template(9,ip,2,1,"ng-container",10),k.\u0275\u0275template(10,rp,2,3,"div",11),k.\u0275\u0275template(11,op,2,1,"p",12),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("title",n.title),k.\u0275\u0275advance(5),k.\u0275\u0275property("ngIf",n.isConfigured&&n.chartOptions.toggle),k.\u0275\u0275advance(4),k.\u0275\u0275property("ngIf",n.selectedChart&&!n.loading),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.loading),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!(n.loading||n.isConfigured()&&n.dataSource))}}function sp(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",8),k.\u0275\u0275element(1,"scrm-loading-spinner",9),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("overlay",!0))}function lp(e,t){1&e&&k.\u0275\u0275element(0,"scrm-chart-message-area",10)}function up(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"a",30),k.\u0275\u0275element(1,"scrm-field",27),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2).$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("routerLink",i.redirectLink(n.record.module,n.record.id)),k.\u0275\u0275advance(1),k.\u0275\u0275property("type",n.title.type)("field",n.title)("record",n.record)}}function cp(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"a"),k.\u0275\u0275element(1,"scrm-field",27),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2).$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("type",n.title.type)("field",n.title)("record",n.record)}}function dp(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",31),k.\u0275\u0275elementStart(1,"small",26),k.\u0275\u0275element(2,"scrm-field",32),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2).$implicit;k.\u0275\u0275advance(2),k.\u0275\u0275property("type",n.description.type)("field",n.description)("record",n.record)}}function fp(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275elementStart(1,"div",12),k.\u0275\u0275elementStart(2,"div",13),k.\u0275\u0275elementStart(3,"div",14),k.\u0275\u0275element(4,"scrm-image",15),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(5,"div",12),k.\u0275\u0275elementStart(6,"div",16),k.\u0275\u0275element(7,"div",17),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(8,"div",18),k.\u0275\u0275elementStart(9,"div",19),k.\u0275\u0275elementStart(10,"div",20),k.\u0275\u0275elementStart(11,"p",21),k.\u0275\u0275template(12,up,2,4,"a",22),k.\u0275\u0275template(13,cp,2,3,"a",23),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(14,dp,3,3,"div",24),k.\u0275\u0275elementStart(15,"div",25),k.\u0275\u0275elementStart(16,"small",26),k.\u0275\u0275element(17,"scrm-field",27),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(18,"div",28),k.\u0275\u0275elementStart(19,"small",29),k.\u0275\u0275element(20,"scrm-field",27),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit;k.\u0275\u0275classMapInterpolate1("d-flex flex-row m-2 history-timeline-entry entry-",n.color,""),k.\u0275\u0275advance(4),k.\u0275\u0275property("image",n.icon),k.\u0275\u0275advance(8),k.\u0275\u0275property("ngIf","audit"!==n.record.module),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","audit"===n.record.module),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.description),k.\u0275\u0275advance(3),k.\u0275\u0275property("type",n.user.type)("field",n.user)("record",n.record),k.\u0275\u0275advance(3),k.\u0275\u0275property("type",n.date.type)("field",n.date)("record",n.record)}}function pp(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275template(1,fp,21,13,"div",11),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.length>0)}}function mp(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"div",2),k.\u0275\u0275elementStart(1,"div",3),k.\u0275\u0275template(2,sp,2,1,"div",4),k.\u0275\u0275elementStart(3,"cdk-virtual-scroll-viewport",5),k.\u0275\u0275listener("scroll",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext().onScroll()}),k.\u0275\u0275template(4,lp,1,0,"scrm-chart-message-area",6),k.\u0275\u0275template(5,pp,2,1,"div",7),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()}if(2&e){var i=t.ngIf,r=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",null==r.adapter?null:r.adapter.loading),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngClass",k.\u0275\u0275pureFunction1(4,pa,i.length<=0?"history-timeline-viewport-no-data":"history-timeline-viewport")),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!(null!=r.adapter&&r.adapter.loading)&&i.length<=0),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",i)}}function hp(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",3),k.\u0275\u0275element(2,"scrm-label",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd())}function vp(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-record-thread",5),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.recordThreadConfig)}}function gp(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",2),k.\u0275\u0275elementStart(1,"div",3),k.\u0275\u0275element(2,"scrm-label",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("labelKey",n.getErrorMessage())}}var yp=function(e,t,n){return{config:e,context:t,context$:n}};function bp(e,t){if(1&e&&k.\u0275\u0275element(0,"ndc-dynamic",5),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("ndcDynamicComponent",n.componentType)("ndcDynamicInputs",k.\u0275\u0275pureFunction3(2,yp,n.config,n.context,n.context$))}}function Sp(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-list-filter",7),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("config",n.filterConfig)}}function Cp(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"a",8),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).toggleSubPanels()}),k.\u0275\u0275elementStart(1,"div",9),k.\u0275\u0275element(2,"scrm-label",10),k.\u0275\u0275element(3,"scrm-image",11),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(3),k.\u0275\u0275property("image",i.toggleIcon),k.\u0275\u0275attribute("aria-expanded",!i.isCollapsed)}}var kp=function(e){return{"sub-panel-banner-button-active":e}};function wp(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"div",15),k.\u0275\u0275listener("click",function(){var e=k.\u0275\u0275restoreView(n).$implicit;return k.\u0275\u0275nextContext(3).showSubpanel(e.key,e.value)}),k.\u0275\u0275element(1,"scrm-grid-widget",16),k.\u0275\u0275elementEnd()}if(2&e){var i=t.$implicit,r=k.\u0275\u0275nextContext(3);k.\u0275\u0275property("ngClass",k.\u0275\u0275pureFunction1(2,kp,!0===i.value.show)),k.\u0275\u0275advance(1),k.\u0275\u0275property("config",r.getGridConfig(i.value))}}function Ip(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",12),k.\u0275\u0275elementStart(1,"div",13),k.\u0275\u0275template(2,wp,2,4,"div",14),k.\u0275\u0275pipe(3,"keyvalue"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().ngIf,i=k.\u0275\u0275nextContext();k.\u0275\u0275property("ngbCollapse",i.isCollapsed),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngForOf",k.\u0275\u0275pipeBind1(3,2,n.subpanels))}}function xp(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-subpanel",18),2&e){var n=k.\u0275\u0275nextContext().ngIf,i=k.\u0275\u0275nextContext().$implicit,r=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("maxColumns$",r.maxColumns$)("store",n)("filterConfig",r.filterConfig)("onClose",r.getCloseCallBack(i,n))}}function jp(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,xp,1,4,"scrm-subpanel",17),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.show)}}function Ep(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,jp,2,1,"ng-container",0),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext().ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",i.subpanels[n])}}function Mp(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"ngb-accordion",1,2),k.\u0275\u0275elementStart(3,"ngb-panel",3),k.\u0275\u0275template(4,Cp,4,2,"ng-template",4),k.\u0275\u0275template(5,Ip,4,4,"ng-template",5),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(6,"div",6),k.\u0275\u0275template(7,Ep,2,1,"ng-container",7),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(7),k.\u0275\u0275property("ngForOf",n.openSubpanels)}}function _p(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",4),k.\u0275\u0275text(1),k.\u0275\u0275pipe(2,"uppercase"),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().ngIf,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",k.\u0275\u0275pipeBind1(2,1,n.appStrings[i.messageLabelKey]||"")," ")}}function Fp(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275text(1),k.\u0275\u0275pipe(2,"uppercase"),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(3).$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",k.\u0275\u0275pipeBind1(2,1,i.getLabel(n.value.labelKey)),": ")}}function Lp(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275text(1),k.\u0275\u0275pipe(2,"uppercase"),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(3).$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",k.\u0275\u0275pipeBind1(2,1,i.getLabel(n.value.labelKey))," ")}}function Op(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",9),k.\u0275\u0275template(1,Fp,3,3,"ng-container",6),k.\u0275\u0275template(2,Lp,3,3,"ng-container",6),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2).$implicit,i=k.\u0275\u0275nextContext().ngIf,r=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!r.isValueEmpty(i.statistics[n.key])),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",r.isValueEmpty(i.statistics[n.key]))}}function Dp(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Op,3,2,"div",8),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.value.labelKey&&i.getLabel(n.value.labelKey))}}function Ap(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-field",12),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(3).$implicit,i=k.\u0275\u0275nextContext().ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275property("type",i.statistics[n.key].field.type)("field",i.statistics[n.key].field)}}function Np(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",11),k.\u0275\u0275template(1,Ap,2,2,"ng-container",6),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2).$implicit,i=k.\u0275\u0275nextContext().ngIf,r=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!r.isValueEmpty(i.statistics[n.key])||!0!==n.value.hideValueIfEmpty)}}function Rp(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Np,2,1,"div",10),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit,i=k.\u0275\u0275nextContext().ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!i.statistics[n.key].loading&&i.statistics[n.key].field)}}function Tp(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275text(1," - "),k.\u0275\u0275elementContainerEnd())}function Pp(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",13),k.\u0275\u0275element(1,"scrm-inline-loading-spinner"),k.\u0275\u0275template(2,Tp,2,0,"ng-container",6),k.\u0275\u0275elementEnd()),2&e){var n=t.ngIf,i=k.\u0275\u0275nextContext().$implicit,r=k.\u0275\u0275nextContext().ngIf;k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",!(n||i.key&&r.statistics[i.key]))}}function Bp(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",15),k.\u0275\u0275text(1),k.\u0275\u0275pipe(2,"uppercase"),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2).$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",k.\u0275\u0275pipeBind1(2,1,i.getLabel(n.value.endLabelKey))," ")}}function $p(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Bp,3,3,"div",14),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext().$implicit,i=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.value.endLabelKey&&i.getLabel(n.value.endLabelKey))}}function Vp(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",5),k.\u0275\u0275template(2,Dp,2,1,"ng-container",6),k.\u0275\u0275template(3,Rp,2,1,"ng-container",6),k.\u0275\u0275template(4,Pp,3,1,"div",7),k.\u0275\u0275pipe(5,"async"),k.\u0275\u0275template(6,$p,2,1,"ng-container",6),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext().ngIf,r=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",!r.shouldHide(i.statistics[n.key],n.value)),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.key&&i.statistics[n.key]&&!r.shouldHide(i.statistics[n.key],n.value)),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(5,4,n.value.store.loading$)),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",!r.shouldHide(i.statistics[n.key],n.value))}}function Up(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275template(1,_p,3,3,"div",2),k.\u0275\u0275template(2,Vp,7,6,"ng-container",3),k.\u0275\u0275pipe(3,"keyvalue"),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.messageLabelKey),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",k.\u0275\u0275pipeBind1(3,2,n.statistics))}}var Kp=function(e,t){return{config:e,context:t}};function zp(e,t){if(1&e&&k.\u0275\u0275element(0,"ndc-dynamic",1),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("ndcDynamicComponent",n.componentType)("ndcDynamicInputs",k.\u0275\u0275pureFunction2(2,Kp,n.config,n.context))}}function Gp(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",9),k.\u0275\u0275elementStart(1,"a",10),k.\u0275\u0275elementStart(2,"div",11),k.\u0275\u0275element(3,"scrm-image",12),k.\u0275\u0275element(4,"scrm-label",13),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=t.first,r=k.\u0275\u0275nextContext(3);k.\u0275\u0275classProp("border-top",i),k.\u0275\u0275advance(1),k.\u0275\u0275property("queryParams",null==n?null:n.params)("routerLink",n.link)("title",r.language.getFieldLabel(n.descriptionKey,"administration")),k.\u0275\u0275advance(2),k.\u0275\u0275property("image",n.icon),k.\u0275\u0275advance(1),k.\u0275\u0275property("labelKey",n.titleKey)}}function Zp(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Gp,5,7,"div",8),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.content.linkGroup)}}function Hp(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",2),k.\u0275\u0275elementStart(1,"div",3),k.\u0275\u0275elementStart(2,"h5",4),k.\u0275\u0275element(3,"scrm-label",5),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(4,"div",6),k.\u0275\u0275template(5,Zp,2,1,"ng-container",7),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("title",n.language.getFieldLabel(n.content.descriptionLabelKey,"administration")),k.\u0275\u0275advance(1),k.\u0275\u0275property("labelKey",n.content.titleLabelKey),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",n.content.linkGroup)}}function qp(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",3),k.\u0275\u0275element(1,"scrm-admin-card",4),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;k.\u0275\u0275advance(1),k.\u0275\u0275property("content",n)}}function Wp(e,t){1&e&&k.\u0275\u0275element(0,"scrm-status-bar")}function Qp(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275elementStart(1,"div",2),k.\u0275\u0275element(2,"scrm-record-header"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(3,"div",3),k.\u0275\u0275element(4,"hr",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(5,Wp,1,0,"scrm-status-bar",5),k.\u0275\u0275element(6,"scrm-record-container"),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(5),k.\u0275\u0275property("ngIf",n.showStatusBar)}}function Yp(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",7),k.\u0275\u0275elementStart(1,"div",12),k.\u0275\u0275elementStart(2,"div",13),k.\u0275\u0275element(3,"div",14),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd())}function Xp(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",7),k.\u0275\u0275elementStart(1,"div",12),k.\u0275\u0275element(2,"scrm-top-widget",15),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2).ngIf,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("config",n.topWidgetConfig.widget)("context",i.getViewContext())("type",n.topWidgetConfig.widget.type)}}function Jp(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Xp,3,3,"div",5),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext().ngIf,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.topWidgetConfig.show&&i.hasTopWidgetMetadata(n.topWidgetConfig.widget))}}function em(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-record-content-skeleton"),k.\u0275\u0275elementContainerEnd())}function tm(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275element(1,"scrm-record-content",16),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("dataSource",n.getContentAdapter())}}function nm(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",19),k.\u0275\u0275element(1,"scrm-sidebar-widget",20),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n)("context$",i.getViewContext$())("context",i.getViewContext())("type",n.type)}}function im(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",17),k.\u0275\u0275elementStart(1,"div",8),k.\u0275\u0275template(2,nm,2,4,"div",18),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().ngIf;k.\u0275\u0275advance(2),k.\u0275\u0275property("ngForOf",n.bottomWidgetConfig.widgets)}}function rm(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",21),k.\u0275\u0275elementStart(1,"div",8),k.\u0275\u0275element(2,"scrm-subpanel-container",22),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(2),k.\u0275\u0275property("config",n.getSubpanelsConfig())}}function om(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",19),k.\u0275\u0275element(1,"scrm-sidebar-widget",24),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("type",n.type)("context",i.getViewContext())("context$",i.getViewContext$())("config",n)}}function am(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",23),k.\u0275\u0275template(1,om,2,4,"div",18),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext().ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.sidebarWidgetConfig.widgets)}}var sm=function(e){return{"col-lg-12":e}};function lm(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275elementStart(1,"div",2),k.\u0275\u0275elementStart(2,"div",3),k.\u0275\u0275elementStart(3,"div",4),k.\u0275\u0275template(4,Yp,4,0,"div",5),k.\u0275\u0275template(5,Jp,2,1,"ng-container",6),k.\u0275\u0275elementStart(6,"div",7),k.\u0275\u0275elementStart(7,"div",8),k.\u0275\u0275template(8,em,2,0,"ng-container",6),k.\u0275\u0275template(9,tm,2,1,"ng-container",6),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(10,im,3,1,"div",9),k.\u0275\u0275template(11,rm,3,1,"div",10),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(12,am,2,1,"div",11),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=t.ngIf,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("ngClass",k.\u0275\u0275pureFunction1(8,sm,!n.sidebarWidgetConfig.show)),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",i.loading),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!i.loading),k.\u0275\u0275advance(3),k.\u0275\u0275property("ngIf",i.loading),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!i.loading),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.bottomWidgetConfig.show&&n.bottomWidgetConfig.widgets),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.showSubpanels),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.sidebarWidgetConfig.show&&n.sidebarWidgetConfig.widgets)}}function um(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-dynamic-label",13),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275property("fields",n.record.fields)("labelKey",n.getSummaryTemplate())}}function cm(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",14),k.\u0275\u0275element(1,"scrm-favorite-toggle",15),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("record",n.record)}}function dm(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",16),k.\u0275\u0275element(1,"scrm-action-group-menu",17),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.actionsAdapter)}}function fm(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",3),k.\u0275\u0275elementStart(2,"div",4),k.\u0275\u0275elementStart(3,"div",5),k.\u0275\u0275element(4,"div",6),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(5,"div",7),k.\u0275\u0275elementStart(6,"div",5),k.\u0275\u0275elementStart(7,"div",8),k.\u0275\u0275elementStart(8,"div",9),k.\u0275\u0275template(9,um,1,2,"scrm-dynamic-label",10),k.\u0275\u0275template(10,cm,2,1,"div",11),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(11,"div",7),k.\u0275\u0275elementStart(12,"div",5),k.\u0275\u0275template(13,dm,2,1,"div",12),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(9),k.\u0275\u0275property("ngIf",n.record&&n.record.fields),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.record&&n.record.fields&&"create"!==n.mode),k.\u0275\u0275advance(3),k.\u0275\u0275property("ngIf",n.record)}}function pm(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",19),k.\u0275\u0275elementStart(1,"div",20),k.\u0275\u0275element(2,"scrm-module-title",21),k.\u0275\u0275element(3,"div",22),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(2),k.\u0275\u0275property("title",n.moduleTitle)}}function mm(e,t){if(1&e&&k.\u0275\u0275element(0,"scrm-dynamic-label",28),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275property("fields",n.record.fields)("labelKey",n.getSummaryTemplate())}}function hm(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",14),k.\u0275\u0275element(1,"scrm-favorite-toggle",29),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("record",n.record)}}function vm(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",7),k.\u0275\u0275element(1,"scrm-action-group-menu",30),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n.actionsAdapter)("actionContext",n.getActionContext(n.record))("klass",n.isScrolled?"record-view-actions-scrolled float-right":"record-view-actions float-right")}}function gm(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",19),k.\u0275\u0275elementStart(1,"div",23),k.\u0275\u0275elementStart(2,"div",23),k.\u0275\u0275template(3,mm,1,2,"scrm-dynamic-label",24),k.\u0275\u0275template(4,hm,2,1,"div",11),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(5,"div",25),k.\u0275\u0275elementStart(6,"div",26),k.\u0275\u0275template(7,vm,2,3,"div",27),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(1),k.\u0275\u0275property("ngClass","col-md-4 d-flex align-items-center"),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngClass",n.isScrolled?"record-view-name-scrolled d-flex align-items-center":"record-view-name d-flex align-items-center"),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.record&&n.record.fields),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.record&&n.record.fields&&"create"!==n.mode),k.\u0275\u0275advance(3),k.\u0275\u0275property("ngIf",n.record)}}function ym(e,t){if(1&e&&(k.\u0275\u0275template(0,pm,4,1,"div",18),k.\u0275\u0275template(1,gm,8,5,"div",18)),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275property("ngIf",n.loading),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!n.loading)}}function bm(e,t){1&e&&k.\u0275\u0275element(0,"scrm-status-bar")}function Sm(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275elementStart(1,"div",2),k.\u0275\u0275element(2,"scrm-record-header"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(3,"div",3),k.\u0275\u0275element(4,"hr",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(5,bm,1,0,"scrm-status-bar",5),k.\u0275\u0275element(6,"scrm-record-container"),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(5),k.\u0275\u0275property("ngIf",n.showStatusBar)}}function Cm(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275elementStart(2,"div",2),k.\u0275\u0275elementStart(3,"div",3),k.\u0275\u0275elementStart(4,"div",4),k.\u0275\u0275element(5,"scrm-label",5),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(6,"div",6),k.\u0275\u0275element(7,"scrm-label",7),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(8,"div",8),k.\u0275\u0275elementStart(9,"div",9),k.\u0275\u0275elementStart(10,"div",10),k.\u0275\u0275elementStart(11,"div",11),k.\u0275\u0275elementStart(12,"div",12),k.\u0275\u0275elementStart(13,"label",13),k.\u0275\u0275element(14,"scrm-label",14),k.\u0275\u0275elementEnd(),k.\u0275\u0275text(15,": "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(16,"div",15),k.\u0275\u0275elementStart(17,"div",16),k.\u0275\u0275element(18,"scrm-field",17),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(19,"div"),k.\u0275\u0275element(20,"scrm-action-group-menu",18),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=t.ngIf,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(14),k.\u0275\u0275property("labelKey",i.store.getIgnoreSystemChecksField().definition.vname),k.\u0275\u0275advance(4),k.\u0275\u0275property("field",i.store.getIgnoreSystemChecksField())("mode","edit")("record",n.record)("type",i.store.getIgnoreSystemChecksField().type),k.\u0275\u0275advance(2),k.\u0275\u0275property("actionContext",i.getActionContext(n.record))("config",i.actionsAdapter)}}function km(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275element(1,"scrm-install-header"),k.\u0275\u0275elementStart(2,"div",2),k.\u0275\u0275element(3,"hr",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(4,"scrm-install-container"),k.\u0275\u0275elementEnd())}function wm(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",8),k.\u0275\u0275element(1,"scrm-sidebar-widget",9),k.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,i=k.\u0275\u0275nextContext(3);k.\u0275\u0275advance(1),k.\u0275\u0275property("config",n)("context",i.getViewContext())("context$",i.store.context$)("type",n.type)}}function Im(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",6),k.\u0275\u0275template(2,wm,2,4,"div",7),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext().ngIf,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(1),k.\u0275\u0275styleProp("display",i.getDisplay(!(!n.sidebarWidgetConfig.show||!n.sidebarWidgetConfig.widgets))),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",n.sidebarWidgetConfig.widgets)}}function xm(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275elementStart(1,"div",2),k.\u0275\u0275elementStart(2,"div",3),k.\u0275\u0275element(3,"scrm-table",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(4,Im,3,3,"ng-container",5),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=t.ngIf,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("ngClass",k.\u0275\u0275pureFunction1(3,sm,!i.getDisplayWidgets())),k.\u0275\u0275advance(1),k.\u0275\u0275property("config",i.tableConfig),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",n.sidebarWidgetConfig.widgetsEnabled)}}function jm(e,t){if(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",3),k.\u0275\u0275elementStart(2,"div",4),k.\u0275\u0275elementStart(3,"div",5),k.\u0275\u0275elementStart(4,"div",6),k.\u0275\u0275element(5,"scrm-action-menu"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(6,"div",7),k.\u0275\u0275elementStart(7,"div",5),k.\u0275\u0275elementStart(8,"div",8),k.\u0275\u0275element(9,"scrm-module-title",9),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(10,"div",7),k.\u0275\u0275elementStart(11,"div",5),k.\u0275\u0275elementStart(12,"div",10),k.\u0275\u0275element(13,"scrm-settings-menu"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(9),k.\u0275\u0275property("title",n.moduleTitle)}}function Em(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",18),k.\u0275\u0275elementStart(1,"div",4),k.\u0275\u0275elementStart(2,"div",5),k.\u0275\u0275element(3,"scrm-list-filter",19),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(3),k.\u0275\u0275property("config",n.filterAdapter.getConfig())}}function Mm(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",18),k.\u0275\u0275elementStart(1,"div",4),k.\u0275\u0275elementStart(2,"div",5),k.\u0275\u0275element(3,"scrm-record-panel",19),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2);k.\u0275\u0275advance(3),k.\u0275\u0275property("config",n.recordPanelConfig)}}function _m(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",11),k.\u0275\u0275elementStart(1,"div",12),k.\u0275\u0275element(2,"scrm-module-title",9),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(3,"div",13),k.\u0275\u0275elementStart(4,"div",14),k.\u0275\u0275elementStart(5,"div",7),k.\u0275\u0275element(6,"scrm-action-menu"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(7,"div",7),k.\u0275\u0275element(8,"scrm-settings-menu"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(9,"div",15),k.\u0275\u0275element(10,"hr",16),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(11,Em,4,1,"div",17),k.\u0275\u0275template(12,Mm,4,1,"div",17)),2&e){var n=k.\u0275\u0275nextContext();k.\u0275\u0275advance(2),k.\u0275\u0275property("title",n.moduleTitle),k.\u0275\u0275advance(9),k.\u0275\u0275property("ngIf","filters"===n.actionPanel),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","recordPanel"===n.actionPanel&&n.recordPanelConfig)}}function Fm(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275element(1,"scrm-list-header"),k.\u0275\u0275element(2,"scrm-list-container"),k.\u0275\u0275elementEnd())}function Lm(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"option",17),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e){var n,i=t.$implicit,r=k.\u0275\u0275nextContext(3);k.\u0275\u0275property("selected",(null!==(n=r.language)&&void 0!==n?n:"en_us")===i)("value",i),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",r.getEnabledLanguages()[i]," ")}}function Om(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"div",10),k.\u0275\u0275elementStart(1,"div",5),k.\u0275\u0275elementStart(2,"label",11),k.\u0275\u0275text(3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(4,"div",12),k.\u0275\u0275elementStart(5,"div",5),k.\u0275\u0275elementStart(6,"div",13),k.\u0275\u0275elementStart(7,"select",14,15),k.\u0275\u0275listener("change",function(){k.\u0275\u0275restoreView(n);var e=k.\u0275\u0275reference(8);return k.\u0275\u0275nextContext(2).onLanguageSelect(e.value)}),k.\u0275\u0275template(9,Lm,2,3,"option",16),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275nextContext().ngIf,r=k.\u0275\u0275nextContext();k.\u0275\u0275advance(3),k.\u0275\u0275textInterpolate(i.appStrings.LBL_LANGUAGE),k.\u0275\u0275advance(6),k.\u0275\u0275property("ngForOf",r.getEnabledLanguagesKeys())}}function Dm(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",28),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2).ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",n.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function Am(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",28),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2).ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",n.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function Nm(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"div",29),k.\u0275\u0275elementStart(1,"a",30),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(3).flipCard()}),k.\u0275\u0275text(2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275nextContext(2).ngIf;k.\u0275\u0275advance(2),k.\u0275\u0275textInterpolate1(" ",i.appStrings.LBL_LOGIN_FORGOT_PASSWORD," ")}}function Rm(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"div",18),k.\u0275\u0275elementStart(1,"div",13),k.\u0275\u0275element(2,"scrm-image",19),k.\u0275\u0275elementStart(3,"input",20,21),k.\u0275\u0275listener("ngModelChange",function(e){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).uname=e}),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(5,Dm,2,1,"div",22),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(6,"div",13),k.\u0275\u0275element(7,"scrm-image",23),k.\u0275\u0275elementStart(8,"input",24,25),k.\u0275\u0275listener("ngModelChange",function(e){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).passw=e}),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(10,Am,2,1,"div",22),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(11,"button",26),k.\u0275\u0275listener("click",function(){k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext();var e=k.\u0275\u0275reference(2),t=k.\u0275\u0275nextContext();return e.control.markAllAsTouched(),e.valid&&t.doLogin()}),k.\u0275\u0275text(12),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(13,Nm,3,1,"div",27),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275reference(4),r=k.\u0275\u0275reference(9),o=k.\u0275\u0275nextContext().ngIf,a=k.\u0275\u0275nextContext();k.\u0275\u0275property("@fade",void 0),k.\u0275\u0275advance(3),k.\u0275\u0275classProp("is-invalid",i.invalid&&i.touched),k.\u0275\u0275propertyInterpolate("placeholder",o.appStrings.LBL_USER_NAME),k.\u0275\u0275property("ngModel",a.uname),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",i.invalid&&i.touched),k.\u0275\u0275advance(3),k.\u0275\u0275classProp("is-invalid",r.invalid&&r.touched),k.\u0275\u0275propertyInterpolate("placeholder",o.appStrings.LBL_PASSWORD),k.\u0275\u0275property("ngModel",a.passw),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",r.invalid&&r.touched),k.\u0275\u0275advance(1),k.\u0275\u0275property("scrm-button-loading",a.loading),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",o.appStrings.LBL_LOGIN_BUTTON_LABEL," "),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",o.showForgotPassword)}}function Tm(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",28),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2).ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",n.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function Pm(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",28),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275nextContext(2).ngIf;k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",n.appStrings.ERR_MISSING_REQUIRED_FIELDS," ")}}function Bm(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"div",31),k.\u0275\u0275elementStart(1,"div",13),k.\u0275\u0275element(2,"scrm-image",19),k.\u0275\u0275elementStart(3,"input",20,21),k.\u0275\u0275listener("ngModelChange",function(e){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).uname=e}),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(5,Tm,2,1,"div",22),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(6,"div",13),k.\u0275\u0275element(7,"scrm-image",32),k.\u0275\u0275elementStart(8,"input",33,34),k.\u0275\u0275listener("ngModelChange",function(e){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).email=e}),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(10,Pm,2,1,"div",22),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(11,"button",35),k.\u0275\u0275listener("click",function(){k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext();var e=k.\u0275\u0275reference(2),t=k.\u0275\u0275nextContext();return e.control.markAllAsTouched(),e.valid&&t.recoverPassword()}),k.\u0275\u0275text(12),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(13,"div"),k.\u0275\u0275elementStart(14,"a",36),k.\u0275\u0275listener("click",function(){return k.\u0275\u0275restoreView(n),k.\u0275\u0275nextContext(2).flipCard()}),k.\u0275\u0275text(15),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()}if(2&e){var i=k.\u0275\u0275reference(4),r=k.\u0275\u0275reference(9),o=k.\u0275\u0275nextContext().ngIf,a=k.\u0275\u0275nextContext();k.\u0275\u0275property("@fade",void 0),k.\u0275\u0275advance(3),k.\u0275\u0275classProp("is-invalid",i.invalid&&i.touched),k.\u0275\u0275propertyInterpolate("placeholder",o.appStrings.LBL_USER_NAME),k.\u0275\u0275property("ngModel",a.uname),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",i.invalid&&i.touched),k.\u0275\u0275advance(3),k.\u0275\u0275classProp("is-invalid",r.invalid&&r.touched),k.\u0275\u0275propertyInterpolate("placeholder",o.appStrings.LBL_EMAIL),k.\u0275\u0275property("ngModel",a.email),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",r.invalid&&r.touched),k.\u0275\u0275advance(2),k.\u0275\u0275textInterpolate1(" ",o.appStrings.LBL_GENERATE_PASSWORD_BUTTON_TITLE," "),k.\u0275\u0275advance(3),k.\u0275\u0275textInterpolate1(" ",o.appStrings.LBL_BACK," ")}}function $m(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",1),k.\u0275\u0275elementStart(1,"form",2,3),k.\u0275\u0275elementStart(3,"div",4),k.\u0275\u0275elementStart(4,"div",5),k.\u0275\u0275element(5,"scrm-logo-ui"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(6,Om,10,2,"div",6),k.\u0275\u0275elementStart(7,"div",7),k.\u0275\u0275template(8,Rm,14,14,"div",8),k.\u0275\u0275template(9,Bm,16,13,"div",9),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=t.ngIf,i=k.\u0275\u0275nextContext();k.\u0275\u0275advance(6),k.\u0275\u0275property("ngIf",n.showLanguages),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf","front"===i.cardState),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","back"===i.cardState)}}var Vm=function(){var t=function(){function t(e){I(this,t),this.apollo=e}return j(t,[{key:"fetchAll",value:function(t,n){var i=n.fields,r={query:L()(e||(e=u(["\n                query ","{\n                    "," {\n                        edges {\n                            node {\n                                ","\n                            }\n                        }\n                    }\n                }\n            "])),t,t,i.join("\n"))};return this.apollo.query(r)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(k.\u0275\u0275inject(_.Apollo))},t.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new t(k.\u0275\u0275inject(_.Apollo))},token:t,providedIn:"root"}),t}(),Um={configs:{},loading:!1},Km=(0,w.deepClone)(Um),zm=null,Gm=function(){var e=function(){function e(t){I(this,e),this.collectionGQL=t,this.store=new x.BehaviorSubject(Km),this.state$=this.store.asObservable(),this.resourceName="systemConfigs",this.fieldsMetadata={fields:["id","_id","value","items"]},this.configs$=this.state$.pipe((0,M.map)(function(e){return e.configs}),(0,M.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,M.map)(function(e){return e.loading}))}return j(e,[{key:"getConfigValue",value:function(e){return Km.configs&&Km.configs[e]?null!==Km.configs[e].value?Km.configs[e].value:Km.configs[e].items:null}},{key:"getUi",value:function(e){var t,n;return null!==(n=(null!==(t=this.getConfigValue("ui"))&&void 0!==t?t:{})[e])&&void 0!==n?n:null}},{key:"getHomePage",value:function(){var e="home",t=this.getConfigValue("default_module");return t&&(e=t),e}},{key:"clear",value:function(){zm=null,this.updateState((0,w.deepClone)(Um))}},{key:"clearAuthBased",value:function(){this.clear()}},{key:"load",value:function(){var e=this;return this.updateState(Object.assign(Object.assign({},Km),{loading:!0})),this.getSystemConfigs().pipe((0,M.tap)(function(t){e.updateState(Object.assign(Object.assign({},Km),{configs:t,loading:!1}))}))}},{key:"isCached",value:function(){return null!==zm}},{key:"set",value:function(e){zm=(0,x.of)(e).pipe((0,M.shareReplay)(1)),this.updateState(Object.assign(Object.assign({},Km),{configs:e,loading:!1}))}},{key:"updateState",value:function(e){this.store.next(Km=e)}},{key:"getSystemConfigs",value:function(){return null==zm&&(zm=this.fetch().pipe((0,M.shareReplay)(1))),zm}},{key:"fetch",value:function(){return this.collectionGQL.fetchAll(this.resourceName,this.fieldsMetadata).pipe((0,M.map)(function(e){var t=e.data,n={};return t.systemConfigs&&t.systemConfigs.edges&&t.systemConfigs.edges.forEach(function(e){n[e.node._id]=e.node}),n}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Vm))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Vm))},token:e,providedIn:"root"}),e}(),Zm=function(){return(e=Zm||(Zm={})).XSmall="XSmall",e.Small="Small",e.Medium="Medium",e.Large="Large",e.XLarge="XLarge",Zm;var e}(),Hm=function(){var e=function(){function e(t){I(this,e),this.breakpointObserver=t,this.screenSize=new x.BehaviorSubject(Zm.Medium),this.screenSize$=this.screenSize.asObservable(),this.initScreenSizeObservable()}return j(e,[{key:"initScreenSizeObservable",value:function(){var e=this;(0,x.merge)(this.breakpointObserver.observe(["(max-width: 599.98px)"]).pipe((0,M.map)(function(e){if(e.matches)return Zm.XSmall})),this.breakpointObserver.observe(["(min-width: 600px) and (max-width: 959.98px)"]).pipe((0,M.map)(function(e){if(e.matches)return Zm.Small})),this.breakpointObserver.observe(["(min-width: 960px) and (max-width: 1279.98px)"]).pipe((0,M.map)(function(e){if(e.matches)return Zm.Medium})),this.breakpointObserver.observe(["(min-width: 1280px) and (max-width: 1919.98px)"]).pipe((0,M.map)(function(e){if(e.matches)return Zm.Large})),this.breakpointObserver.observe(["(min-width: 1920px)"]).pipe((0,M.map)(function(e){if(e.matches)return Zm.XLarge}))).subscribe(function(t){t&&e.screenSize.next(t)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(T))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(T))},token:e,providedIn:"root"}),e}(),qm=function(){var e=function(){function e(t){I(this,e),this.apollo=t}return j(e,[{key:"fetch",value:function(e,n,i){var r=i.fields,o={query:L()(t||(t=u(["\n              query ","($id: ID!) {\n                ","(id: $id) {\n                  ","\n                }\n              }\n            "])),e,e,r.join("\n")),variables:{id:n}};return this.apollo.query(o)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(_.Apollo))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(_.Apollo))},token:e,providedIn:"root"}),e}(),Wm=function(){var e=function(){function e(t){var n,i,r,o=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading_display_delay";I(this,e),this.config=t,this.delayConfigKey=a,this.loadingStore=new x.BehaviorSubject(!1),this.loadingBufferStore=new x.BehaviorSubject(!1),this.subs=[],this.buffered=!1,this.loading$=this.loadingStore.asObservable();var s=null!==(n=t.getConfigValue("ui"))&&void 0!==n?n:{},l=null!==(r=parseInt(null!==(i=s[a])&&void 0!==i?i:""))&&void 0!==r?r:1500;this.loadingBufferStore$=this.loadingBufferStore.asObservable().pipe((0,M.debounceTime)(l)),this.subs.push(this.loadingBufferStore$.subscribe(function(e){!o.buffered||o.loadingStore.next(e)}))}return j(e,[{key:"updateLoading",value:function(e){if(!0===e)return this.buffered=!0,void this.loadingBufferStore.next(e);this.buffered=!1,this.loadingStore.next(e),this.loadingBufferStore.next(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(String))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Qm=function(){var e=function(){function e(t){I(this,e),this.config=t}return j(e,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"loading_display_delay";return new Wm(this.config,e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gm))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Gm))},token:e,providedIn:"root"}),e}(),Ym=function(){var e=function(){function e(t){I(this,e),this.config=t,this.messages=[],this.timeout=3,this.messagesStage=new x.BehaviorSubject([]),this.messages$=this.messagesStage.asObservable(),this.initTimeOut()}return j(e,[{key:"updateState",value:function(e){this.messagesStage.next(this.messages=e)}},{key:"removeMessages",value:function(){this.updateState([])}},{key:"contains",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1,i=0;i<this.messages.length;i++)if(e.text===this.messages[i].text){if(n=!0,t){var r=S(this.messages);r.splice(i,1),this.updateState(r)}break}return n}},{key:"addMessage",value:function(e){var t=this,n=-1;if(!this.contains(e)){var i=S(this.messages);n=i.push(e),(e.type===w.MessageTypes.success||e.type===w.MessageTypes.warning)&&setTimeout(function(){t.contains(e,!0)},1e3*this.timeout),this.updateState(i)}return n}},{key:"addPrimaryMessage",value:function(e){return this.addMessage({type:w.MessageTypes.primary,text:e})}},{key:"addSecondaryMessage",value:function(e){return this.addMessage({type:w.MessageTypes.secondary,text:e})}},{key:"addSuccessMessage",value:function(e){return this.addMessage({type:w.MessageTypes.success,text:e})}},{key:"addSuccessMessageByKey",value:function(e){return this.addMessage({type:w.MessageTypes.success,labelKey:e})}},{key:"addDangerMessage",value:function(e){return this.addMessage({type:w.MessageTypes.danger,text:e})}},{key:"addDangerMessageByKey",value:function(e){return this.addMessage({type:w.MessageTypes.danger,labelKey:e})}},{key:"addWarningMessage",value:function(e){return this.addMessage({type:w.MessageTypes.warning,text:e})}},{key:"addWarningMessageByKey",value:function(e){return this.addMessage({type:w.MessageTypes.warning,labelKey:e})}},{key:"addInfoMessage",value:function(e){return this.addMessage({type:w.MessageTypes.info,text:e})}},{key:"addDarkMessage",value:function(e){return this.addMessage({type:w.MessageTypes.dark,text:e})}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log.apply(console,t)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error.apply(console,t)}},{key:"initTimeOut",value:function(){var e=this.config.getConfigValue("ui");if(e&&e.alert_timeout){var t=parseInt(e.alert_timeout,10);isNaN(t)||(this.timeout=t)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gm))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Gm))},token:e,providedIn:"root"}),e}(),Xm=function(){var e=function(){function e(t){I(this,e),this.apollo=t,this.fieldsMetadata={fields:["id","_id","meta","records"]}}return j(e,[{key:"fetch",value:function(e,t,i,r,o,a){var s=a.fields,l={query:L()(n||(n=u(["\n              query getRecordList($module: String!, $limit: Int, $offset: Int, $criteria: Iterable, $sort: Iterable) {\n                getRecordList(module: $module, limit: $limit, offset: $offset, criteria: $criteria, sort: $sort) {\n                  ","\n                }\n              }\n            "])),s.join("\n")),variables:{module:e,limit:t,offset:i,criteria:r,sort:o}};return this.apollo.query(l)}},{key:"get",value:function(e,t,n,i){var r=this,o=this.mapSort(n);return this.fetch(e,i.pageSize,i.current,t,o,this.fieldsMetadata).pipe((0,M.map)(function(e){var t=e.data,n={records:[],pagination:Object.assign({},i)};if(!t||!t.getRecordList)return n;var o=t.getRecordList;if(o.records&&o.records.forEach(function(e){n.records.push(r.mapRecord(e))}),!o.meta)return n;if(o.meta.offsets){var a={current:"current",next:"next",prev:"previous",total:"total",end:"last"};Object.keys(a).forEach(function(e){e in o.meta.offsets&&(n.pagination[a[e]]=o.meta.offsets[e])})}return n.meta=o.meta,n}))}},{key:"mapSort",value:function(e){return{sortOrder:{NONE:"",ASC:"ASC",DESC:"DESC"}[e.sortOrder],orderBy:e.orderBy}}},{key:"mapRecord",value:function(e){return e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(_.Apollo))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(_.Apollo))},token:e,providedIn:"root"}),e}(),Jm=function(){var e=function(){function e(t){I(this,e),this.apollo=t}return j(e,[{key:"create",value:function(e,t,n,r){var o=r.fields,a={mutation:L()(i||(i=u(["\n                mutation create","($input: create","Input!) {\n                  create","(input: $input) {\n                    "," {\n                      ","\n                    }\n                    clientMutationId\n                  }\n                }\n            "])),t,t,t,e,o.join("\n")),variables:{input:n}};return this.apollo.mutate(a)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(_.Apollo))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(_.Apollo))},token:e,providedIn:"root"}),e}(),eh={id:null,_id:null,status:null,async:null,type:null,options:null,messages:[]},th=function(){var e=function(){function e(t){I(this,e),this.recordMutationGQL=t,this.graphqlName="process",this.coreName="Process",this.createFieldsMetadata={fields:["_id","status","async","type","messages","data"]}}return j(e,[{key:"submit",value:function(e,t){return this.create(e,t)}},{key:"create",value:function(e,t){return this.recordMutationGQL.create(this.graphqlName,this.coreName,{type:e,options:t},this.createFieldsMetadata).pipe((0,M.map)(function(e){var t=e.data,n=Object.assign({},eh);return t.createProcess&&t.createProcess.process?t.createProcess.process:n}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Jm))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Jm))},token:e,providedIn:"root"}),e}(),nh=function(){var e=function(){function e(){I(this,e),this.storageKey="scrm-session-storage",this.stickyStorageKey="scrm-sticky-session-storage"}return j(e,[{key:"clear",value:function(){this.getLocalStorage().removeItem(this.storageKey);var e=this.getLocalStorage().getItem(this.stickyStorageKey);e&&this.getLocalStorage().setItem(this.storageKey,e)}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.store(this.storageKey,e,t),n&&this.store(this.stickyStorageKey,e,t)}},{key:"store",value:function(e,t,n){var i=this.getLocalStorage().getItem(e),r={};i&&(r=JSON.parse(i)),r[t]=n,this.getLocalStorage().setItem(e,JSON.stringify(r))}},{key:"get",value:function(e){var t=this.getLocalStorage().getItem(this.storageKey),n={};return t&&(n=JSON.parse(t)),n[e]}},{key:"getLocalStorage",value:function(){return localStorage}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),ih={userPreferences:{},loading:!1},rh=(0,w.deepClone)(ih),oh=null,ah=function(){var e=function(){function e(t,n,i,r){var o,a,s=this;I(this,e),this.collectionGQL=t,this.config=n,this.processService=i,this.localStorage=r,this.store=new x.BehaviorSubject(rh),this.state$=this.store.asObservable(),this.saveBufferStore=new x.BehaviorSubject(!1),this.subs=[],this.resourceName="userPreferences",this.fieldsMetadata={fields:["id","_id","value","items"]},this.userPreferences$=this.state$.pipe((0,M.map)(function(e){return e.userPreferences}),(0,M.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,M.map)(function(e){return e.loading}));var l=null!==(a=(null!==(o=n.getConfigValue("ui"))&&void 0!==o?o:{}).user_preferences_save_delay)&&void 0!==a?a:5e3;this.saveBuffer$=this.saveBufferStore.asObservable().pipe((0,M.debounceTime)(null!=l?l:5e3)),this.subs.push(this.saveBuffer$.subscribe(function(e){!e||s.saveUiPreferences()}))}return j(e,[{key:"clear",value:function(){oh=null,this.updateState((0,w.deepClone)(ih)),this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"clearAuthBased",value:function(){this.clear()}},{key:"getUserPreference",value:function(e){return rh.userPreferences&&rh.userPreferences[e]?rh.userPreferences[e]:null}},{key:"getUi",value:function(e,t){var n,i,r,o=e+"-"+t,a=this.storageLoad(e,o);return null!=a?a:null!==(r=(null!==(i=null===(n=null==rh?void 0:rh.userPreferences)||void 0===n?void 0:n.ui)&&void 0!==i?i:{})[o])&&void 0!==r?r:null}},{key:"setUi",value:function(e,t,n){var i,r,o=e+"-"+t;this.storageSave(e,o,n);var a=null!==(r=null===(i=null==rh?void 0:rh.userPreferences)||void 0===i?void 0:i.ui)&&void 0!==r?r:{};a[o]=n,rh.userPreferences.ui=a,this.saveBufferStore.next(!0)}},{key:"saveUiPreferences",value:function(){this.processService.submit("save-ui-user-preferences",{preferences:rh.userPreferences.ui}).pipe((0,M.take)(1)).subscribe()}},{key:"storageSave",value:function(e,t,n){var i=this.localStorage.get(t);i||(i={}),i[e]=n,this.localStorage.set(t,i)}},{key:"storageLoad",value:function(e,t){var n=this.localStorage.get(t);return n&&n[e]?n[e]:null}},{key:"load",value:function(){var e=this;return this.updateState(Object.assign(Object.assign({},rh),{loading:!0})),this.getUserPreferences().pipe((0,M.tap)(function(t){e.updateState(Object.assign(Object.assign({},rh),{userPreferences:t,loading:!1}))}))}},{key:"isCached",value:function(){return null!==oh}},{key:"set",value:function(e){oh=(0,x.of)(e).pipe((0,M.shareReplay)(1)),this.updateState(Object.assign(Object.assign({},rh),{userPreferences:e,loading:!1}))}},{key:"updateState",value:function(e){this.store.next(rh=e)}},{key:"getUserPreferences",value:function(){return null==oh&&(oh=this.fetch().pipe((0,M.shareReplay)(1))),oh}},{key:"fetch",value:function(){return this.collectionGQL.fetchAll(this.resourceName,this.fieldsMetadata).pipe((0,M.map)(function(e){var t=e.data,n={};return t.userPreferences&&t.userPreferences.edges&&t.userPreferences.edges.forEach(function(e){!e.node.items||Object.keys(e.node.items).forEach(function(t){n[t]=e.node.items[t]})}),n}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Vm),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(th),k.\u0275\u0275inject(nh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Vm),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(th),k.\u0275\u0275inject(nh))},token:e,providedIn:"root"}),e}(),sh={key:"default",module:"saved-search",attributes:{contents:""},criteria:{name:"default",filters:{}}},lh={default:(0,w.deepClone)(sh)},uh={filters:{}},ch={orderBy:"",sortOrder:w.SortDirection.DESC},dh={all:!1,status:w.SelectionStatus.NONE,selected:{},count:0},fh={module:"",records:[],criteria:(0,w.deepClone)(uh),activeFilters:(0,w.deepClone)(lh),sort:(0,w.deepClone)(ch),pagination:{pageSize:5,current:0,previous:0,next:5,last:0,total:0,pageFirst:0,pageLast:0},selection:(0,w.deepClone)(dh),openFilter:(0,w.deepClone)(sh),loading:!1,meta:{}},ph=function(){var e=function(){function e(t,n,i,r,o,a){I(this,e),this.listGQL=t,this.configStore=n,this.preferencesStore=i,this.appStateStore=r,this.languageStore=o,this.message=a,this.cache$=null,this.internalState=(0,w.deepClone)(fh),this.store=new x.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.records$=this.state$.pipe((0,M.map)(function(e){return e.records}),(0,M.distinctUntilChanged)()),this.criteria$=this.state$.pipe((0,M.map)(function(e){return e.criteria}),(0,M.distinctUntilChanged)()),this.sort$=this.state$.pipe((0,M.map)(function(e){return e.sort}),(0,M.distinctUntilChanged)()),this.pagination$=this.state$.pipe((0,M.map)(function(e){return e.pagination}),(0,M.distinctUntilChanged)()),this.selection$=this.state$.pipe((0,M.map)(function(e){return e.selection}),(0,M.distinctUntilChanged)()),this.selectedCount$=this.state$.pipe((0,M.map)(function(e){return e.selection.count}),(0,M.distinctUntilChanged)()),this.selectedStatus$=this.state$.pipe((0,M.map)(function(e){return e.selection.status}),(0,M.distinctUntilChanged)()),this.activeFilters$=this.state$.pipe((0,M.map)(function(e){return e.activeFilters}),(0,M.distinctUntilChanged)()),this.openFilter$=this.state$.pipe((0,M.map)(function(e){return e.openFilter}),(0,M.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,M.map)(function(e){return e.loading}))}return j(e,[{key:"connect",value:function(){return this.records$}},{key:"disconnect",value:function(){}},{key:"criteria",get:function(){return(0,w.deepClone)(this.internalState.criteria?this.internalState.criteria:uh)},set:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{criteria:e}))}},{key:"activeFilters",get:function(){return(0,w.deepClone)(this.internalState.activeFilters)}},{key:"sort",get:function(){return(0,w.deepClone)(this.internalState.sort?this.internalState.sort:ch)},set:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{sort:e}))}},{key:"selection",get:function(){return(0,w.deepClone)(this.internalState.selection?this.internalState.selection:dh)}},{key:"records",get:function(){return this.internalState.records?this.internalState.records:[]}},{key:"getModule",value:function(){return this.internalState.module}},{key:"getRecord",value:function(e){var t=null;return this.records.some(function(n){if(n.id===e)return t=n,!0}),t}},{key:"destroy",value:function(){this.clear()}},{key:"init",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"list_max_entries_per_page",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,w.deepClone)(sh),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return this.internalState.module=e,this.preferenceKey=r,n&&this.watchPageSize(n),this.setBaseFilter(i),this.loadCurrentFilter(e),!1===t?null:this.load()}},{key:"setBaseFilter",value:function(e){this.baseFilterMap={default:(0,w.deepClone)(e)},this.baseFilter=(0,w.deepClone)(e),this.updateState(Object.assign(Object.assign({},this.internalState),{activeFilters:(0,w.deepClone)(this.baseFilterMap),openFilter:(0,w.deepClone)(this.baseFilter)}))}},{key:"loadCurrentFilter",value:function(e){var t,n=null!==(t=this.loadPreference(e,"current-filters"))&&void 0!==t?t:this.baseFilterMap;if(n&&!(0,w.emptyObject)(n)){var i=this.loadPreference(e,"current-sort");!i&&(0,w.emptyObject)(i)&&(i=null),this.setFilters(n,!1,i)}}},{key:"setFilters",value:function(e){var t,n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=e[Object.keys(e).shift()];if(this.updateState(Object.assign(Object.assign({},this.internalState),{activeFilters:(0,w.deepClone)(e),openFilter:(0,w.deepClone)(o)})),o.criteria){var a=null!==(t=o.criteria.orderBy)&&void 0!==t?t:"",s=null!==(n=o.criteria.sortOrder)&&void 0!==n?n:"desc",l=this.mapSortOrder(s);null!==r&&(a=r.orderBy,l=r.sortOrder),this.updateSorting(a,l,!1),this.updateSortLocalStorage(),this.updateSearchCriteria(o.criteria,i)}this.updateFilterLocalStorage()}},{key:"updateFilterLocalStorage",value:function(){this.savePreference(this.internalState.module,"current-filters",this.internalState.activeFilters)}},{key:"updateSortLocalStorage",value:function(){this.savePreference(this.internalState.module,"current-sort",this.sort)}},{key:"load",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.updateState(Object.assign(Object.assign({},this.internalState),{loading:!0})),this.getRecords(this.internalState.module,this.internalState.criteria,this.internalState.sort,this.internalState.pagination,t).pipe((0,M.catchError)(function(){return e.message.addDangerMessageByKey("LBL_GET_RECORD_LIST_ERROR"),(0,x.of)({records:[],criteria:(0,w.deepClone)(uh),sort:(0,w.deepClone)(ch),pagination:{pageSize:5,current:0,previous:0,next:5,last:0,total:0,pageFirst:0,pageLast:0},openFilter:(0,w.deepClone)(e.baseFilter),activeFilters:(0,w.deepClone)(e.baseFilterMap),selection:(0,w.deepClone)(dh),meta:{}})}),(0,M.tap)(function(t){var n;e.calculatePageCount(t.records,t.pagination),e.updateState(Object.assign(Object.assign({},e.internalState),{records:t.records,pagination:t.pagination,loading:!1,meta:null!==(n=t.meta)&&void 0!==n?n:{}}))}))}},{key:"updateSearchCriteria",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateState(Object.assign(Object.assign({},this.internalState),{criteria:e})),t&&(this.updateSelection(w.SelectionStatus.NONE),this.resetPagination())}},{key:"resetSearchCriteria",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.updateSearchCriteria((0,w.deepClone)(uh),e)}},{key:"updateSorting",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t===w.SortDirection.NONE&&(e="",t=w.SortDirection.DESC);var i={orderBy:e,sortOrder:t};this.updateState(Object.assign(Object.assign({},this.internalState),{sort:i})),n&&this.load(!1).pipe((0,M.take)(1)).subscribe()}},{key:"mapSortOrder",value:function(e){var t=w.SortDirection.NONE,n=e.toLowerCase();return"asc"===n?t=w.SortDirection.ASC:"desc"===n&&(t=w.SortDirection.DESC),t}},{key:"updatePagination",value:function(e){var t=Object.assign(Object.assign({},this.internalState.pagination),{current:e});this.updateState(Object.assign(Object.assign({},this.internalState),{pagination:t})),this.load(!1).pipe((0,M.take)(1)).subscribe()}},{key:"setOpenFilter",value:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{openFilter:(0,w.deepClone)(e)}))}},{key:"resetFilters",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.updateState(Object.assign(Object.assign({},this.internalState),{activeFilters:(0,w.deepClone)(this.baseFilterMap),openFilter:(0,w.deepClone)(this.baseFilter)})),this.clearSort(),this.updateSortLocalStorage(),this.updateFilterLocalStorage(),this.updateSearchCriteria(this.baseFilter.criteria,e)}},{key:"savePreference",value:function(e,t,n){var i,r=null!==(i=this.preferenceKey)&&void 0!==i?i:null;if(!r)return null;this.preferencesStore.setUi(e,"".concat(r).concat(t),n)}},{key:"loadPreference",value:function(e,t){var n,i=null!==(n=this.preferenceKey)&&void 0!==n?n:null;return i?this.preferencesStore.getUi(e,"".concat(i).concat(t)):null}},{key:"resetPagination",value:function(){this.updatePagination(0)}},{key:"clear",value:function(){this.cache$=null,this.store.unsubscribe(),this.preferencesSub.unsubscribe()}},{key:"clearAuthBased",value:function(){this.clear()}},{key:"getSelectionStatus",value:function(){return this.selectedStatus$}},{key:"getSelectedCount",value:function(){return this.selectedCount$}},{key:"updateSelection",value:function(e){e!==w.SelectionStatus.NONE?e!==w.SelectionStatus.ALL?e!==w.SelectionStatus.PAGE||this.selectPage():this.selectAll():this.clearSelection()}},{key:"clearSelection",value:function(){this.updateState(Object.assign(Object.assign({},this.internalState),{selection:(0,w.deepClone)(dh)}))}},{key:"clearSort",value:function(){this.updateState(Object.assign(Object.assign({},this.internalState),{sort:(0,w.deepClone)(ch)}))}},{key:"selectAll",value:function(){var e=this.internalState.pagination.total;this.updateState(Object.assign(Object.assign({},this.internalState),{selection:{all:!0,status:w.SelectionStatus.ALL,selected:{},count:e}}))}},{key:"selectPage",value:function(){var e=Object.assign({},this.internalState.selection.selected);this.internalState.records&&this.internalState.records.length&&this.internalState.records.forEach(function(t){t&&t.id&&(e[t.id]=t.id)}),this.updateState(Object.assign(Object.assign({},this.internalState),{selection:{all:!1,status:w.SelectionStatus.SOME,selected:e,count:Object.keys(e).length}}))}},{key:"toggleSelection",value:function(e){var t=(0,w.deepClone)(this.internalState.selection);t.selected[e]?delete t.selected[e]:t.selected[e]=e,t.count=Object.keys(t.selected).length,t.status=0===t.count?w.SelectionStatus.NONE:w.SelectionStatus.SOME,this.updateState(Object.assign(Object.assign({},this.internalState),{selection:t}))}},{key:"getPaginationCount",value:function(){return this.pagination$.pipe((0,M.map)(function(e){return{pageFirst:e.pageFirst,pageLast:e.pageLast,total:e.total}}),(0,M.distinctUntilChanged)())}},{key:"getPagination",value:function(){return this.store.value.pagination}},{key:"getMeta",value:function(){return this.store.value.meta}},{key:"changePage",value:function(e){var t=0,n={};if(n[w.PageSelection.FIRST]=0,n[w.PageSelection.PREVIOUS]=this.internalState.pagination.previous,n[w.PageSelection.NEXT]=this.internalState.pagination.next,n[w.PageSelection.LAST]=this.internalState.pagination.last,e in n&&n[e]>=0){if(t=n[e],Number(t)>this.internalState.pagination.last||t<0)return;this.updatePagination(t)}}},{key:"setPageSize",value:function(e){var t=Object.assign(Object.assign({},this.internalState.pagination),{pageSize:e});this.updateState(Object.assign(Object.assign({},this.internalState),{pagination:t}))}},{key:"getPageSize",value:function(){var e,t,n;return null!==(n=null===(t=null===(e=null==this?void 0:this.internalState)||void 0===e?void 0:e.pagination)||void 0===t?void 0:t.pageSize)&&void 0!==n?n:10}},{key:"watchPageSize",value:function(e){var t=this,n=this.preferencesStore.getUserPreference(e),i=this.configStore.getConfigValue(e);this.determinePageSize(n,i),this.preferencesSub=(0,x.combineLatest)([this.configStore.configs$,this.preferencesStore.userPreferences$]).pipe((0,M.tap)(function(n){var i=v(n,2),r=i[0],o=i[1];t.determinePageSize(o&&o[e]||null,r&&r[e]&&r[e].value||null)})).subscribe()}},{key:"determinePageSize",value:function(e,t){var n=20;e?n=e:t&&(n=parseInt(t,10)),this.setPageSize(n)}},{key:"updateState",value:function(e){this.store.next(this.internalState=e)}},{key:"calculatePageCount",value:function(e,t){var n=e&&e.length||0,i=0,r=0;n>0&&(i=t.current+1,r=t.current+n),t.pageFirst=i,t.pageLast=r}},{key:"getRecords",value:function(e,t,n,i){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return(null==this.cache$||!1===r)&&(this.cache$=this.listGQL.get(e,t,n,i).pipe((0,M.shareReplay)(1))),this.cache$}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Xm),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(ah),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Ym))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),mh=function(){var e=function(){function e(t,n,i,r,o,a){I(this,e),this.listGQL=t,this.configStore=n,this.preferencesStore=i,this.appStateStore=r,this.languageStore=o,this.message=a}return j(e,[{key:"create",value:function(){return new ph(this.listGQL,this.configStore,this.preferencesStore,this.appStateStore,this.languageStore,this.message)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Xm),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(ah),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Ym))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Xm),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(ah),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Ym))},token:e,providedIn:"root"}),e}(),hh=function(){var e=function(){function e(t,n){var i=this;I(this,e),this.listStoreFactory=t,this.recordStoreFactory=n,this.subs=[],this.stores=[],this.storeSubject=new x.BehaviorSubject([]),this.state$=this.storeSubject.asObservable(),this.pageSize=10,this.recordList=t.create(),this.stores$=this.state$,this.storesMap$=this.stores$.pipe((0,M.map)(function(e){return i.getStoreMap(e)}))}return j(e,[{key:"clear",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"clearAuthBased",value:function(){}},{key:"getItemMetadata",value:function(){return null}},{key:"getRecordList",value:function(){return this.recordList}},{key:"init",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r="list_max_entries_per_record_thread";i&&isFinite(i)&&(r="",this.recordList.setPageSize(i));var o=this.recordList.init(e,n,r);this.pageSize=this.recordList.getPageSize(),this.subs.push(this.recordList.records$.subscribe(function(e){t.initStores(e)})),o&&(o.pipe((0,M.tap)(function(e){t.initStores(e.records)})).pipe((0,M.take)(1)).subscribe(),this.module=e)}},{key:"load",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.recordList.load(t).pipe((0,M.tap)(function(t){e.initStores(t.records)}))}},{key:"initStores",value:function(e){var t=this;if(e){var n={},i=[],r=this.getStoreMap(this.stores);e.forEach(function(e){if(e&&e.id){var o=e.id;if(r[o]){var a=r[o];return a.setRecord(e),n[o]=a,void i.push(a)}n[o]=t.recordStoreFactory.create(),t.getItemMetadata()&&n[o].setMetadata(t.getItemMetadata()),n[o].initRecord(e,"detail",!1),i.push(n[o])}}),Object.keys(r).forEach(function(e){n[e]||r[e].destroy()}),this.updateState(i)}}},{key:"updateState",value:function(e){this.storeSubject.next(this.stores=e)}},{key:"getStoreMap",value:function(e){var t={};return!e||!e.length||e.forEach(function(e){t[e.getBaseRecord().id]=e}),t}},{key:"getItemStores",value:function(){var e,t=null!==(e=this.stores)&&void 0!==e?e:[];return t&&t.length?t:[]}},{key:"getRecordIds",value:function(){var e=[];return!this.stores||!this.stores.length||this.stores.forEach(function(t){e.push(t.getRecordId())}),e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(mh),k.\u0275\u0275inject(void 0))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),vh={module:"",recordId:"",loading:{data:!1,metadata:!1},mode:"detail"},gh=function(){function e(t,n,i,r,o,a){I(this,e),this.appStateStore=t,this.meta=n,this.message=i,this.fieldManager=r,this.language=o,this.storeFactory=a,this.internalState=(0,w.deepClone)(vh),this.metadataState=(0,w.deepClone)({}),this.store=new x.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.metadataStore=new x.BehaviorSubject({}),this.metadataState$=this.metadataStore.asObservable(),this.subs=[],this.meta$=this.metadataState$,this.recordStore=a.create(this.getViewFields$()),this.record$=this.recordStore.state$.pipe((0,M.distinctUntilChanged)()),this.stagingRecord$=this.recordStore.staging$.pipe((0,M.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,M.map)(function(e){return e.loading.data||e.loading.metadata})),this.mode$=this.state$.pipe((0,M.map)(function(e){return e.mode})),this.vm$=this.state$}return j(e,[{key:"getModuleName",value:function(){return this.internalState.module}},{key:"getRecordId",value:function(){return this.internalState.recordId}},{key:"getViewContext",value:function(){return{module:this.getModuleName(),id:this.getRecordId()}}},{key:"init",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"detail";this.baseInit(e,t,n),this.setMetadataLoading(!0);var i={$meta:this.loadMetadata(),record:this.load()};return(0,x.forkJoin)(i).pipe((0,M.map)(function(e){return e.record}))}},{key:"initRecord",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"detail",i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.baseInit(e.module,e.id,n),i&&this.loadMetadata().pipe((0,M.take)(1),(0,M.tap)(function(){t.setRecord(e)})).subscribe()}},{key:"initStaging",value:function(e){var t=(0,w.deepClone)(this.recordStore.extractBaseRecord(e));this.recordStore.setStaging(t)}},{key:"setRecord",value:function(e){var t=(0,w.deepClone)(this.recordStore.extractBaseRecord(e));this.recordStore.setRecord(t)}},{key:"setMetadata",value:function(e){this.updateMetadataState(e),this.setMetadataLoading(!1)}},{key:"destroy",value:function(){this.clear()}},{key:"clear",value:function(){this.updateState((0,w.deepClone)(vh)),this.recordStore.destroy(),this.recordStore=null}},{key:"clearAuthBased",value:function(){this.clear()}},{key:"getBaseRecord",value:function(){return this.recordStore.getBaseRecord()}},{key:"getMode",value:function(){return this.internalState?this.internalState.mode:null}},{key:"setMode",value:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{mode:e}))}},{key:"setDataLoading",value:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{loading:Object.assign(Object.assign({},this.internalState.loading),{data:e})}))}},{key:"setMetadataLoading",value:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{loading:Object.assign(Object.assign({},this.internalState.loading),{metadata:e})}))}},{key:"save",value:function(){var e=this;return this.setDataLoading(!0),this.recordStore.save().pipe((0,M.catchError)(function(){return e.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,x.of)({})}),(0,M.finalize)(function(){e.setDataLoading(!1)}))}},{key:"validate",value:function(){return this.recordStore.validate()}},{key:"load",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.setDataLoading(!0),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordId,t).pipe((0,M.tap)(function(t){e.updateState(Object.assign(Object.assign({},e.internalState),{recordId:t.id,module:t.module}))}),(0,M.finalize)(function(){e.setDataLoading(!1)}))}},{key:"loadMetadata",value:function(){var e=this;return this.setMetadataLoading(!0),this.meta.getMetadata(this.internalState.module).pipe((0,M.map)(function(e){return e.recordView}),(0,M.tap)(function(t){e.updateMetadataState(t)}),(0,M.finalize)(function(){e.setMetadataLoading(!1)}))}},{key:"updateState",value:function(e){this.store.next(this.internalState=e)}},{key:"updateMetadataState",value:function(e){this.metadataStore.next(this.metadataState=e)}},{key:"getMetadata",value:function(){return(0,w.deepClone)(this.metadataState)}},{key:"baseInit",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"detail";this.updateState(Object.assign(Object.assign({},this.internalState),{module:e,recordId:t,mode:n}))}}]),e}(),yh=function(){var e,t=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.apply(this,arguments)}return j(n,[{key:"getViewFields$",value:function(){return this.meta$.pipe((0,M.map)(function(e){var t,n={},i=[],r=null!==(t=e.fields)&&void 0!==t?t:{};return Object.keys(r).forEach(function(e){r[e]&&(n[e]=r[e])}),e.headerLayout&&e.headerLayout.rows&&e.headerLayout.rows.forEach(function(e){e.cols.forEach(function(e){e.field&&(n[e.field.name]=e.field)})}),e.bodyLayout&&e.bodyLayout.rows&&e.bodyLayout.rows.forEach(function(e){e.cols.forEach(function(e){e.field&&(n[e.field.name]=e.field)})}),Object.keys(n).forEach(function(e){i.push(n[e])}),i}))}},{key:"initRecord",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"detail",i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];l(h(n.prototype),"initRecord",this).call(this,e,t,i),this.setRecord(e)}}]),n}(gh);return t.\u0275fac=function(n){return(e||(e=k.\u0275\u0275getInheritedFactory(t)))(n||t)},t.\u0275prov=k.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),bh={module:"",detailView:{},editView:{},listView:{},search:{},recordView:{},subPanel:{},massUpdate:{},recentlyViewed:[],favorites:[]},Sh={},Ch=(0,w.deepClone)(bh),kh=(0,w.deepClone)(Sh),wh={},Ih=(0,w.deepClone)(wh),xh=function(){var e=function(){function e(t,n){I(this,e),this.recordGQL=t,this.appState=n,this.typeKeys={listView:"listView",search:"search",recordView:"recordView",subPanel:"subPanel",massUpdate:"massUpdate",recentlyViewed:"recentlyViewed",favorites:"favorites"},this.store=new x.BehaviorSubject(Ch),this.state$=this.store.asObservable(),this.allModuleStore=new x.BehaviorSubject(kh),this.allModulesState$=this.allModuleStore.asObservable(),this.resourceName="moduleMetadata",this.fieldsMetadata={fields:["id","_id"]},this.types=["listView","search","recordView","subPanel","massUpdate","recentlyViewed","favorites"],this.baseTypes=["listView","search","recordView","favorites"],this.listViewColumns$=this.state$.pipe((0,M.map)(function(e){return e.listView.fields}),(0,M.distinctUntilChanged)()),this.listViewLineActions$=this.state$.pipe((0,M.map)(function(e){return e.listView.lineActions}),(0,M.distinctUntilChanged)()),this.listMetadata$=this.state$.pipe((0,M.map)(function(e){return e.listView}),(0,M.distinctUntilChanged)()),this.searchMetadata$=this.state$.pipe((0,M.map)(function(e){return e.search}),(0,M.distinctUntilChanged)()),this.recordViewMetadata$=this.state$.pipe((0,M.map)(function(e){return e.recordView}),(0,M.distinctUntilChanged)()),this.subPanelMetadata$=this.state$.pipe((0,M.map)(function(e){return e.subPanel}),(0,M.distinctUntilChanged)()),this.metadata$=this.state$,this.allModuleMetadata$=this.allModulesState$}return j(e,[{key:"clear",value:function(){Ih=(0,w.deepClone)(wh),kh=(0,w.deepClone)(Sh),this.updateState("",(0,w.deepClone)(bh))}},{key:"clearAuthBased",value:function(){this.clear()}},{key:"getMetadataTypes",value:function(){return this.types}},{key:"getModule",value:function(){return Ch.module}},{key:"get",value:function(){return Ch}},{key:"getModuleMeta",value:function(e){var t,n=null!==(t=kh[e])&&void 0!==t?t:{};return Object.assign({},n)}},{key:"setModuleMetadata",value:function(e,t){Ih[e]=(0,x.of)(t).pipe((0,M.shareReplay)(1)),this.updateAllModulesState(e,t)}},{key:"reloadModuleMetadata",value:function(e,t){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t||(t=this.getMetadataTypes()),this.getMetadata(e,t,i).pipe((0,M.tap)(function(t){n.updateAllModulesState(e,t)}))}},{key:"load",value:function(e,t){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t||(t=this.getMetadataTypes()),this.getMetadata(e,t,i).pipe((0,M.tap)(function(t){n.updateState(e,t)}))}},{key:"isCached",value:function(e){var t;return null!==(null!==(t=Ih[e])&&void 0!==t?t:null)}},{key:"getEmpty",value:function(){return(0,w.deepClone)(bh)}},{key:"set",value:function(e,t){Ih[e]=(0,x.of)(t).pipe((0,M.shareReplay)(1)),this.updateState(e,t)}},{key:"getMetadata",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(null==Ih[e]||!1===n)&&(Ih[e]=this.fetchMetadata(e,t).pipe((0,M.shareReplay)(1))),Ih[e]}},{key:"mapMetadata",value:function(e,t){var n,i=null!==(n=kh[e])&&void 0!==n?n:{},r=Object.assign({},i);return this.parseListViewMetadata(t,r),this.parseSearchMetadata(t,r),this.parseRecordViewMetadata(t,r),this.parseSubPanelMetadata(t,r),this.parseMassUpdateMetadata(t,r),this.parseRecentlyViewedMetadata(t,r),this.parseFavoritesMetadata(t,r),r}},{key:"updateState",value:function(e,t){this.updateAllModulesState(e,t),this.store.next(Ch=Object.assign(Object.assign({},t),{module:e}))}},{key:"updateAllModulesState",value:function(e,t){if(""!==e){var n=Object.assign({},kh);n[e]=Object.assign({},t),this.allModuleStore.next(kh=n)}}},{key:"fetchMetadata",value:function(e,t){var n=this,i={fields:[].concat(S(this.fieldsMetadata.fields),S(null!=t?t:this.baseTypes))};return this.recordGQL.fetch(this.resourceName,"/api/module-metadata/".concat(e),i).pipe((0,M.map)(function(t){var i=t.data;return n.mapMetadata(e,i.moduleMetadata)}))}},{key:"parseListViewMetadata",value:function(e,t){if(e&&e.listView){var n={fields:[],bulkActions:{},lineActions:[],chartTypes:{},filters:[]};e.listView.columns&&e.listView.columns.forEach(function(e){n.fields.push(e)}),this.addDefinedMeta(n,e.listView,{bulkActions:"bulkActions",lineActions:"lineActions",sidebarWidgets:"sidebarWidgets",availableFilters:"filters",paginationType:"paginationType"}),t.listView=n}}},{key:"parseSearchMetadata",value:function(e,t){e&&e.search&&(t.search=e.search)}},{key:"parseSubPanelMetadata",value:function(e,t){e&&e.subPanel&&(t.subPanel=e.subPanel)}},{key:"parseMassUpdateMetadata",value:function(e,t){e&&e.massUpdate&&(t.massUpdate=e.massUpdate)}},{key:"parseRecordViewMetadata",value:function(e,t){if(e&&e.recordView){var n={actions:[],templateMeta:{},panels:[]};this.addDefinedMeta(n,e.recordView,{templateMeta:"templateMeta",actions:"actions",panels:"panels",topWidget:"topWidget",sidebarWidgets:"sidebarWidgets",bottomWidgets:"bottomWidgets",summaryTemplates:"summaryTemplates",vardefs:"vardefs"}),t.recordView=n}}},{key:"parseRecentlyViewedMetadata",value:function(e,t){e&&e.recentlyViewed&&(t.recentlyViewed=e.recentlyViewed)}},{key:"parseFavoritesMetadata",value:function(e,t){e&&e.favorites&&(t.favorites=e.favorites)}},{key:"addDefinedMeta",value:function(e,t,n){Object.keys(n).forEach(function(i){t[i]&&(e[n[i]]=t[i])})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(qm),k.\u0275\u0275inject(jv))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(qm),k.\u0275\u0275inject(jv))},token:e,providedIn:"root"}),e}(),jh=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"getTrimmedInputValue",value:function(e){return"string"!=typeof e?e:e.trim()}},{key:"isEmptyInputValue",value:function(e){return null==e||void 0===e||""===e||0===e.length}},{key:"isEmptyTrimmedInputValue",value:function(e){return this.isEmptyInputValue(this.getTrimmedInputValue(e))}},{key:"isEmptyBooleanInputValue",value:function(e){return this.isEmptyInputValue(e)||"false"===e||!1===e||""===e}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Eh=function(e){return function(t){return e.isEmptyTrimmedInputValue(t.value)?{required:{required:!0,message:{labelKey:"LBL_VALIDATION_ERROR_REQUIRED",context:{value:t.value}}}}:null}},Mh=function(e){return function(t){return e.isEmptyBooleanInputValue(t.value)?{required:{required:!0,message:{labelKey:"LBL_VALIDATION_ERROR_REQUIRED",context:{value:t.value}}}}:null}},_h=function(){var e=function(){function e(t){I(this,e),this.utils=t}return j(e,[{key:"applies",value:function(e,t){return!(!t||!t.fieldDefinition)&&(0,w.isTrue)(t.fieldDefinition.required)}},{key:"getValidator",value:function(e){return"boolean"===e.type?[Mh(this.utils)]:[Eh(this.utils)]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(jh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(jh))},token:e,providedIn:"root"}),e}(),Fh=function(){var e=function(){function e(t,n,i){I(this,e),this.preferences=t,this.formUtils=n,this.locale=i}return j(e,[{key:"toUserFormat",value:function(e,t){var n,i;if((0,w.isVoid)(e)||""===e)return"";if((0,w.isFalse)(null===(i=null===(n=null==t?void 0:t.metadata)||void 0===n?void 0:n.format)||void 0===i||i))return e;var r=(0,B.formatNumber)(Number(e),this.locale);return this.replaceSeparators(r)}},{key:"toInternalFormat",value:function(e){if(!e)return e;var t=this.getDecimalsSymbol()||".",n=this.getGroupSymbol()||",",i=new RegExp(t,"g");"."===t&&(i=new RegExp("\\.","g"));var r=new RegExp(n,"g");return"."===n&&(r=new RegExp("\\.","g")),(e=(e=(e=e.replace(r,"group_separator")).replace(i,"decimal_separator")).replace(/decimal_separator/g,".")).replace(/group_separator/g,"")}},{key:"getFloatUserFormatPattern",value:function(){var e=this.getGroupSymbol(),t=this.getDecimalsSymbol(),n="^(";return n+="(\\d{1,3}(\\"+e+"\\d{3})*(\\"+t+"\\d+)?)|",n+="\\d*|",n+="(\\d+(\\"+t+"\\d+)?)|",n+="(\\d+(\\.\\d+)?)",n+=")$"}},{key:"getIntUserFormatPattern",value:function(){var e="^(";return e+="(\\d{1,3}(\\"+this.getGroupSymbol()+"\\d{3})*)|",e+="\\d*",e+=")$"}},{key:"getGroupSymbol",value:function(){return this.preferences.getUserPreference("num_grp_sep")||","}},{key:"getDecimalsSymbol",value:function(){return this.preferences.getUserPreference("dec_sep")||"."}},{key:"replaceSeparators",value:function(e){if(!e)return e;e=(e=e.replace(/,/g,"group_separator")).replace(/\./g,"decimal_separator");var t=this.getDecimalsSymbol()||".",n=this.getGroupSymbol()||",";return(e=e.replace(/decimal_separator/g,t)).replace(/group_separator/g,n)}},{key:"validateIntUserFormat",value:function(e){var t=this.formUtils.getTrimmedInputValue(e);if(this.formUtils.isEmptyInputValue(t)||new RegExp(this.getIntUserFormatPattern()).test(t))return!1}},{key:"validateFloatUserFormat",value:function(e){var t=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(t)&&!new RegExp(this.getFloatUserFormatPattern()).test(t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(ah),k.\u0275\u0275inject(jh),k.\u0275\u0275inject(k.LOCALE_ID))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(ah),k.\u0275\u0275inject(jh),k.\u0275\u0275inject(k.LOCALE_ID))},token:e,providedIn:"root"}),e}(),Lh=function(e){return function(t){return e.validateFloatUserFormat(t.value)?{currencyValidator:{valid:!1,format:e.getFloatUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_CURRENCY_FORMAT",context:{value:t.value,expected:e.toUserFormat("1000.50")}}}}:null}},Oh=function(){var e=function(){function e(t){I(this,e),this.formatter=t}return j(e,[{key:"applies",value:function(e,t){return!(!t||!t.fieldDefinition)&&"currency"===t.type}},{key:"getValidator",value:function(e){return e&&e.fieldDefinition?[Lh(this.formatter)]:[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Fh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Fh))},token:e,providedIn:"root"}),e}(),Dh=function(){var e=function(){function e(t,n,i){var r=this;I(this,e),this.preferences=t,this.formUtils=n,this.locale=i,this.format$=(0,x.combineLatest)([this.preferences.userPreferences$]).pipe((0,M.map)(function(){return{date:r.getDateFormat(),time:r.getTimeFormat()}}))}return j(e,[{key:"getDateFormat",value:function(){return this.preferences.getUserPreference("date_format")||this.getInternalTimeFormat()}},{key:"getTimeFormat",value:function(){var e=this.preferences.getUserPreference("time_format");if(e){var t=e;return t.includes("aaaaaa")&&(t=t.replace("aaaaaa","aaaaa'm'")),t}return this.getInternalTimeFormat()}},{key:"getDateTimeFormat",value:function(){return this.getDateFormat()+" "+this.getTimeFormat()}},{key:"getInternalDateFormat",value:function(){return"yyyy-MM-dd"}},{key:"getInternalTimeFormat",value:function(){return"HH:mm:ss"}},{key:"getInternalDateTimeFormat",value:function(){return this.getInternalDateFormat()+" "+this.getInternalTimeFormat()}},{key:"getInternalFormat",value:function(){return this.getInternalDateTimeFormat()}},{key:"getUserFormat",value:function(){return this.getDateTimeFormat()}},{key:"toUserFormat",value:function(e,t){var n=t&&t.fromFormat||this.getInternalFormat();if(e){var i=this.toDateTime(e,n,{zone:"GMT"});return i.isValid?(0,B.formatDate)(i.toJSDate(),this.getUserFormat(),this.locale,this.userTimeZone()):e}return""}},{key:"toInternalFormat",value:function(e,t){var n=t&&t.fromFormat||this.getUserFormat();if(e){var i=this.toDateTime(e,n,{zone:this.preferences.getUserPreference("timezone")});return(0,B.formatDate)(i.toJSDate(),this.getInternalFormat(),this.locale,"GMT")}return""}},{key:"formatDateTime",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.locale,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=this.toDateTime(e,n);return o.isValid?(0,B.formatDate)(o.toJSDate(),t,i,r):e}},{key:"toDateTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;if(!e)return $.DateTime.invalid("empty");if(t)return $.DateTime.fromFormat(e,t,n);var i=this.fromUserFormat(e,n);return i.isValid||(i=this.fromInternalFormat(e,n)),i}},{key:"userDateTimeFormatToStruct",value:function(e){if(!e)return null;var t=this.toDateTime(e,"",{zone:this.preferences.getUserPreference("timezone")});return t.isValid?{date:{day:t.day,month:t.month,year:t.year},time:{hour:t.hour,minute:t.minute,second:t.second}}:null}},{key:"internalDateTimeFormatToStruct",value:function(e){if(!e)return null;var t=this.toDateTime(e,this.getInternalDateTimeFormat(),{zone:"GMT"}),n=t.setZone(this.preferences.getUserPreference("timezone"));return t.isValid?{date:{day:n.day,month:n.month,year:n.year},time:{hour:n.hour,minute:n.minute,second:n.second}}:null}},{key:"userDateFormatToStruct",value:function(e){if(!e)return null;var t=this.toDateTime(e,"",{zone:this.preferences.getUserPreference("timezone")});return t.isValid?{day:t.day,month:t.month,year:t.year}:null}},{key:"dateFormatToStruct",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)return null;var n=this.toDateTime(e,t);return n.isValid?{day:n.day,month:n.month,year:n.year}:null}},{key:"userTimeFormatToStruct",value:function(e){if(!e)return null;var t=this.toDateTime(e,"",{zone:this.preferences.getUserPreference("timezone")});return t.isValid?{hour:t.hour,minute:t.minute,second:t.second}:null}},{key:"fromUserFormat",value:function(e,t,n){e=(e=(e=(e=(e=this.toUserFormat(e,n)).toString()).replace("a","A")).replace("p","P")).replace("m","M");var i=this.getUserFormat();return i=i.replace("aaaaa'm'","a"),$.DateTime.fromFormat(e,i,t)}},{key:"fromInternalFormat",value:function(e,t){var n=this.getInternalFormat();return $.DateTime.fromFormat(e.toString(),n,t)}},{key:"validateUserFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(n)&&!this.fromUserFormat(n,{},{fromFormat:t}).isValid}},{key:"userTimeZone",value:function(){var e,t=null!==(e=this.preferences.getUserPreference("timezone"))&&void 0!==e?e:"GMT";t||(t="GMT");var n=$.DateTime.now().setZone(t).toMillis();return $.IANAZone.create(t).formatOffset(n,"techie")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(ah),k.\u0275\u0275inject(jh),k.\u0275\u0275inject(k.LOCALE_ID))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(ah),k.\u0275\u0275inject(jh),k.\u0275\u0275inject(k.LOCALE_ID))},token:e,providedIn:"root"}),e}(),Ah=function(){var e,t=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.apply(this,arguments)}return j(n,[{key:"getInternalFormat",value:function(){return this.getInternalDateFormat()}},{key:"getUserFormat",value:function(){return this.getDateFormat()}},{key:"toInternalFormat",value:function(e,t){var n=t&&t.fromFormat||this.getUserFormat();if(e){var i=this.toDateTime(e,n);return(!i||!i.isValid)&&(i=this.toDateTime(e)),(0,B.formatDate)(i.toJSDate(),this.getInternalFormat(),this.locale)}return""}},{key:"toUserFormat",value:function(e,t){var n=t&&t.fromFormat||this.getInternalFormat(),i=t&&t.toFormat||this.getUserFormat();if(e){var r=this.toDateTime(e,n);return r.isValid?(0,B.formatDate)(r.toJSDate(),i,this.locale):e}return""}}]),n}(Dh);return t.\u0275fac=function(n){return(e||(e=k.\u0275\u0275getInheritedFactory(t)))(n||t)},t.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new t(k.\u0275\u0275inject(ah),k.\u0275\u0275inject(jh),k.\u0275\u0275inject(k.LOCALE_ID))},token:t,providedIn:"root"}),t}(),Nh=function(e,t){return function(n){return e.validateUserFormat(n.value,t)?{invalidDate:{value:n.value,message:{labelKey:"LBL_VALIDATION_ERROR_DATE_FORMAT",context:{value:n.value,expected:e.toUserFormat("2020-01-23")}}}}:null}},Rh=function(){var e=function(){function e(t,n){I(this,e),this.formatter=t,this.utils=n}return j(e,[{key:"applies",value:function(e,t){return!(!t||!t.fieldDefinition)&&"date"===t.type}},{key:"getValidator",value:function(e){var t;if(!e||!e.fieldDefinition)return[];var n=(null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.date_time_format)||"";return[Nh(this.formatter,n)]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ah),k.\u0275\u0275inject(jh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ah),k.\u0275\u0275inject(jh))},token:e,providedIn:"root"}),e}(),Th=function(e){return function(t){return e.validateUserFormat(t.value)?{dateTimeValidator:{value:t.value,message:{labelKey:"LBL_VALIDATION_ERROR_DATETIME_FORMAT",context:{value:t.value,expected:e.toUserFormat("2020-01-23 12:30:40")}}}}:null}},Ph=function(){var e=function(){function e(t){I(this,e),this.formatter=t}return j(e,[{key:"applies",value:function(e,t){return!(!t||!t.fieldDefinition)&&"datetime"===t.type}},{key:"getValidator",value:function(e){return e&&e.fieldDefinition?[Th(this.formatter)]:[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Dh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Dh))},token:e,providedIn:"root"}),e}(),Bh=function(e){return function(t){return e.validateFloatUserFormat(t.value)?{floatValidator:{valid:!1,format:e.getFloatUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_FLOAT_FORMAT",context:{value:t.value,expected:e.toUserFormat("1000.50")}}}}:null}},$h=function(){var e=function(){function e(t){I(this,e),this.formatter=t}return j(e,[{key:"applies",value:function(e,t){return!(!t||!t.fieldDefinition)&&"float"===t.type}},{key:"getValidator",value:function(e){return e&&e.fieldDefinition?[Bh(this.formatter)]:[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Fh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Fh))},token:e,providedIn:"root"}),e}(),Vh=function(e){return function(t){return e.validateIntUserFormat(t.value)?{intValidator:{valid:!1,format:e.getIntUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_INT_FORMAT",context:{value:t.value,expected:e.toUserFormat("1000")}}}}:null}},Uh=function(){var e=function(){function e(t){I(this,e),this.formatter=t}return j(e,[{key:"applies",value:function(e,t){return!(!t||!t.fieldDefinition)&&"int"===t.type}},{key:"getValidator",value:function(e){return e&&e.fieldDefinition?[Vh(this.formatter)]:[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Fh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Fh))},token:e,providedIn:"root"}),e}(),Kh=function(){var e=function(){function e(t){I(this,e),this.formUtils=t}return j(e,[{key:"toUserFormat",value:function(e){return e}},{key:"toInternalFormat",value:function(e){return e}},{key:"getUserFormatPattern",value:function(){return/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/}},{key:"validateUserFormat",value:function(e){var t=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(t)&&!new RegExp(this.getUserFormatPattern()).test(t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(jh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(jh))},token:e,providedIn:"root"}),e}(),zh=function(e){return function(t){return e.validateUserFormat(t.value)?{emailValidator:{valid:!1,format:e.getUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_EMAIL_FORMAT",context:{value:t.value,expected:"example@example.org"}}}}:null}},Gh=function(){var e=function(){function e(t){I(this,e),this.formatter=t}return j(e,[{key:"applies",value:function(e,t){return!(!t||!t.fieldDefinition)&&"email"===t.type}},{key:"getValidator",value:function(e){return e&&e.fieldDefinition?[zh(this.formatter)]:[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Kh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Kh))},token:e,providedIn:"root"}),e}(),Zh=function(){var e=function(){function e(t){I(this,e),this.formUtils=t}return j(e,[{key:"toUserFormat",value:function(e){return e}},{key:"toInternalFormat",value:function(e){return e}},{key:"getUserFormatPattern",value:function(){return"^([\\+]?|00)((([(]{0,1}\\s*[0-9]{1,4}\\s*[)]{0,1})\\s*)*|([\\-\\s\\./0-9])*)+$"}},{key:"validateUserFormat",value:function(e){var t=this.formUtils.getTrimmedInputValue(e);return!this.formUtils.isEmptyInputValue(t)&&!new RegExp(this.getUserFormatPattern()).test(t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(jh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(jh))},token:e,providedIn:"root"}),e}(),Hh=function(e){return function(t){return e.validateUserFormat(t.value)?{phoneValidator:{valid:!1,format:e.getUserFormatPattern(),message:{labelKey:"LBL_VALIDATION_ERROR_PHONE_FORMAT",context:{value:t.value}}}}:null}},qh=function(){var e=function(){function e(t){I(this,e),this.formatter=t}return j(e,[{key:"applies",value:function(e,t){return!(!t||!t.fieldDefinition)&&"phone"===t.type}},{key:"getValidator",value:function(e){return e&&e.fieldDefinition?[Hh(this.formatter)]:[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Zh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Zh))},token:e,providedIn:"root"}),e}(),Wh=function(e){return function(t){var n=V.Validators.min(e)(t);return null===n?null:{emailValidator:Object.assign(Object.assign({},n),{message:{labelKey:"LBL_VALIDATION_ERROR_MIN",context:{value:t.value,min:""+e}}})}}},Qh=function(e){return function(t){var n=V.Validators.max(e)(t);return null===n?null:{emailValidator:Object.assign(Object.assign({},n),{message:{labelKey:"LBL_VALIDATION_ERROR_MAX",context:{value:t.value,max:""+e}}})}}},Yh=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"applies",value:function(e,t){return!(!t||!t.fieldDefinition)&&null!==this.getRangeValidation(t.fieldDefinition)}},{key:"getValidator",value:function(e){if(!e||!e.fieldDefinition)return[];var t=this.getRangeValidation(e.fieldDefinition);if(!t)return[];var n=t.min&&parseInt(""+t.min,10),i=t.max&&parseInt(""+t.max,10),r=[];return isFinite(n)&&r.push(Wh(n)),isFinite(i)&&r.push(Qh(i)),r}},{key:"getRangeValidation",value:function(e){var t=this;if(this.isRangeValidation(e.validation))return e.validation;if(!e.validations||!e.validations.length)return null;var n=null;return e.validations.some(function(e){return n=e,t.isRangeValidation(e)}),n}},{key:"isRangeValidation",value:function(e){return e&&"range"===e.type}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Xh=function(e,t){return function(n){var i=e.name||"";if(!i||!t||!t.fields)return null;var r=t.fields[i]||{},o=r.items;if(!r||!o||!o.length)return null;var a=0,s=o.filter(function(e){return!(e&&e.attributes&&e.attributes.deleted)});return s&&s.length<1||(s.some(function(e){var t=e.fields&&e.fields["email-fields"]||{},n=t.attributes&&t.attributes.primary_address||null;return!!n&&((0,w.isTrue)(n.value)&&a++,a>1)}),1==a)?null:0==a?{primaryEmailValidation:{valid:!1,message:{labelKey:"LBL_NO_PRIMARY_EMAIL_VALIDATION_ERROR",context:{}}}}:{primaryEmailValidation:{valid:!1,message:{labelKey:"LBL_MULTIPLE_PRIMARY_EMAIL_VALIDATION_ERROR",context:{}}}}}},Jh=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"applies",value:function(e,t){return!(!t||!t.fieldDefinition)&&"line-items"===(t.type||t.fieldDefinition.type||"")&&"email_addresses"===(t.name||t.fieldDefinition.name||"")}},{key:"getValidator",value:function(e,t){return e&&e.fieldDefinition&&t?[Xh(e,t)]:[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),ev=function(e,t){return function(n){var i=e.name||"";if(!i||!t||!t.fields)return null;var r=t.fields[i]||{},o=r.items;if(!r||!o||!o.length)return null;var a={},s=0,l=o.filter(function(e){return!(e&&e.attributes&&e.attributes.deleted)});return l&&l.length<1||(l.some(function(e){var t=e.fields&&e.fields["email-fields"]||{},n=t.attributes&&t.attributes.email_address||null;if(!n.value)return!1;var i=(""+n.value).toUpperCase();return a[i]?(s++,!0):(a[i]=!0,s>1)}),0==s)?null:{duplicateEmailValidation:{valid:!1,message:{labelKey:"LBL_DUPLICATE_EMAIL_VALIDATION_ERROR",context:{}}}}}},tv=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"applies",value:function(e,t){return!(!t||!t.fieldDefinition)&&"line-items"===(t.type||t.fieldDefinition.type||"")&&"email_addresses"===(t.name||t.fieldDefinition.name||"")}},{key:"getValidator",value:function(e,t){return e&&e.fieldDefinition&&t?[ev(e,t)]:[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),nv=function(){var e=function(){function e(t,n,i,r,o,a,s,l,u,c,d){I(this,e),this.requiredValidator=t,this.rangeValidator=n,this.currencyValidator=i,this.dateValidator=r,this.datetimeValidator=o,this.emailValidator=a,this.floatValidator=s,this.intValidator=l,this.phoneValidator=u,this.primaryEmailValidator=c,this.duplicateEmailValidator=d,this.filterFieldExclusion={default:{}},this.saveFieldExclusions={default:{}},this.saveValidators=new w.OverridableMap,this.asyncSaveValidators=new w.OverridableMap,this.filterValidators=new w.OverridableMap,this.saveValidators.addEntry("default",this.getKey("required","all"),t),this.saveValidators.addEntry("default",this.getKey("range","all"),n),this.saveValidators.addEntry("default",this.getKey("currency","all"),i),this.saveValidators.addEntry("default",this.getKey("date","all"),r),this.saveValidators.addEntry("default",this.getKey("datetime","all"),o),this.saveValidators.addEntry("default",this.getKey("email","all"),a),this.saveValidators.addEntry("default",this.getKey("float","all"),s),this.saveValidators.addEntry("default",this.getKey("int","all"),l),this.saveValidators.addEntry("default",this.getKey("phone","all"),u),this.saveValidators.addEntry("default",this.getKey("primary-email","all"),c),this.saveValidators.addEntry("default",this.getKey("duplicate-email","all"),d),this.filterValidators.addEntry("default",this.getKey("date","all"),r),this.filterValidators.addEntry("default",this.getKey("datetime","all"),o),this.filterValidators.addEntry("default",this.getKey("float","all"),s),this.filterValidators.addEntry("default",this.getKey("currency","all"),i),this.filterValidators.addEntry("default",this.getKey("int","all"),l),this.filterValidators.addEntry("default",this.getKey("phone","all"),u)}return j(e,[{key:"registerFieldSaveValidator",value:function(e,t,n,i){this.saveValidators.addEntry(e,this.getKey(t,n),i)}},{key:"registerSaveValidator",value:function(e,t,n){this.saveValidators.addEntry(e,this.getKey(t,"all"),n)}},{key:"registerFieldFilterValidator",value:function(e,t,n,i){this.filterValidators.addEntry(e,this.getKey(t,n),i)}},{key:"registerFilterValidator",value:function(e,t,n){this.filterValidators.addEntry(e,this.getKey(t,"all"),n)}},{key:"excludeFieldSaveValidator",value:function(e,t,n){var i=this.saveFieldExclusions[e]||{},r=this.getKey(t,n);i[r]=r,this.saveFieldExclusions[e]=i}},{key:"excludeSaveValidator",value:function(e,t){this.saveValidators.excludeEntry(e,this.getKey(t,"all"))}},{key:"excludeFieldFilterValidator",value:function(e,t,n){var i=this.filterFieldExclusion[e]||{},r=this.getKey(t,n);i[r]=r,this.filterFieldExclusion[e]=i}},{key:"excludeFilterValidator",value:function(e,t){this.filterValidators.excludeEntry(e,this.getKey(t,"all"))}},{key:"registerAsyncSaveValidator",value:function(e,t,n){this.asyncSaveValidators.addEntry(e,this.getKey(t,"all"),n)}},{key:"excludeAsyncSaveValidator",value:function(e,t){this.saveValidators.excludeEntry(e,this.getKey(t,"all"))}},{key:"getSaveValidations",value:function(e,t,n){var i=this.saveValidators.getGroupEntries(e),r=this.getExclusions(e,this.saveFieldExclusions);return this.filterValidations(i,r,n,t)}},{key:"getFilterValidations",value:function(e,t,n){var i=this.filterValidators.getGroupEntries(e),r=this.getExclusions(e,this.filterFieldExclusion);return this.filterValidations(i,r,n,t)}},{key:"getAsyncSaveValidations",value:function(e,t,n){var i=[],r=this.asyncSaveValidators.getGroupEntries(e);return Object.keys(r).forEach(function(e){var o=r[e];o.applies(n,t)&&i.push(o.getValidator(t,n))}),i}},{key:"getKey",value:function(e,t){return"".concat(e,".").concat(t)}},{key:"parseType",value:function(e){return(e.split(".")||[])[0]||""}},{key:"getExclusions",value:function(e,t){var n=t[e]||{};return Object.assign(Object.assign({},t.default||{}),n)}},{key:"filterValidations",value:function(e,t,n,i){var r=this,o=[];return Object.keys(e).forEach(function(a){var s=r.getKey(r.parseType(a),i.name);if(!t[a]&&!t[s]){var l=e[a];l.applies(n,i)&&(o=o.concat(l.getValidator(i,n)))}}),o}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(_h),k.\u0275\u0275inject(Yh),k.\u0275\u0275inject(Oh),k.\u0275\u0275inject(Rh),k.\u0275\u0275inject(Ph),k.\u0275\u0275inject(Gh),k.\u0275\u0275inject($h),k.\u0275\u0275inject(Uh),k.\u0275\u0275inject(qh),k.\u0275\u0275inject(Jh),k.\u0275\u0275inject(tv))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(_h),k.\u0275\u0275inject(Yh),k.\u0275\u0275inject(Oh),k.\u0275\u0275inject(Rh),k.\u0275\u0275inject(Ph),k.\u0275\u0275inject(Gh),k.\u0275\u0275inject($h),k.\u0275\u0275inject(Uh),k.\u0275\u0275inject(qh),k.\u0275\u0275inject(Jh),k.\u0275\u0275inject(tv))},token:e,providedIn:"root"}),e}(),iv=function(){var e=function(){function e(t,n,i){I(this,e),this.preferences=t,this.numberFormatter=n,this.locale=i}return j(e,[{key:"toUserFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((0,w.isVoid)(e)||""===e)return"";var n=t&&t.symbol||this.getSymbol(),i=t&&t.code||this.getCode(),r=null;t&&null!==t.digits&&isFinite(t.digits)&&(r=t.digits);var o,a=this.getDigitsInfo(r);return t&&"edit"===t.mode?(o=(0,B.formatNumber)(Number(e),this.locale,a),this.replaceSeparators(o)):(o=(0,B.formatCurrency)(Number(e),this.locale,n,i,a),this.replaceSeparators(o))}},{key:"toInternalFormat",value:function(e){if(!e)return"";var t=e.replace(this.getSymbol(),"");return this.numberFormatter.toInternalFormat(t)}},{key:"getCurrencyFormat",value:function(){return this.preferences.getUserPreference("currency")||this.getDefaultFormat()}},{key:"getDefaultFormat",value:function(){return{iso4217:"USD",name:"US Dollars",symbol:"$"}}},{key:"getCode",value:function(){return this.getCurrencyFormat().iso4217}},{key:"getSymbol",value:function(){return this.getCurrencyFormat().symbol}},{key:"getDigits",value:function(){return this.preferences.getUserPreference("default_currency_significant_digits")||2}},{key:"getDigitsInfo",value:function(e){var t="1.2-2",n=this.getDigits();return null!==e&&isFinite(e)&&(n=e),null!==n&&isFinite(n)&&(t=n<1?"1.0-0":"1.".concat(n,"-").concat(n)),t}},{key:"replaceSeparators",value:function(e){return this.numberFormatter.replaceSeparators(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(ah),k.\u0275\u0275inject(Fh),k.\u0275\u0275inject(k.LOCALE_ID))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(ah),k.\u0275\u0275inject(Fh),k.\u0275\u0275inject(k.LOCALE_ID))},token:e,providedIn:"root"}),e}(),rv=function(){var e=function(){function e(t,n,i,r,o){I(this,e),this.currencyFormatter=t,this.numberFormatter=n,this.dateFormatter=i,this.datetimeFormatter=r,this.phoneFormatter=o,this.map={},this.map.int=n,this.map.float=n,this.map.date=i,this.map.datetime=r,this.map.currency=t,this.map.phone=o}return j(e,[{key:"toUserFormat",value:function(e,t,n){if(!e)return t;var i=this.map[e];return i?i.toUserFormat(t,n):t}},{key:"toInternalFormat",value:function(e,t){if(!e)return t;var n=this.map[e];return n?n.toInternalFormat(t):t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(iv),k.\u0275\u0275inject(Fh),k.\u0275\u0275inject(Ah),k.\u0275\u0275inject(Dh),k.\u0275\u0275inject(Zh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(iv),k.\u0275\u0275inject(Fh),k.\u0275\u0275inject(Ah),k.\u0275\u0275inject(Dh),k.\u0275\u0275inject(Zh))},token:e,providedIn:"root"}),e}(),ov=function(){var e=function(){function e(t,n){I(this,e),this.validationManager=t,this.typeFormatter=n}return j(e,[{key:"buildField",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t&&t.fieldDefinition||{},r=this.parseValue(t,i,e),o=r.value,a=r.valueList,s=r.valueObject,l=this.getSaveValidators(e,t),u=l.validators,c=l.asyncValidators;return this.setupField(e.module,t,o,a,s,e,i,u,c,n)}},{key:"getFieldLabel",value:function(e,t,n){var i=n.getLanguageStrings();return n.getFieldLabel(e,t,i)}},{key:"parseValue",value:function(e,t,n){var i=e&&e.type||"",r=t&&t.rname||"name",o=e.name||"",a=null,s=null;if(o&&n.attributes[o]){if("relate"===i&&"non-db"===(t&&t.source||"")&&""!==r)return{value:a=n.attributes[o][r],valueList:s,valueObject:n.attributes[o]};a=n.attributes[o]}else a="";return"line-items"===i?{value:null,valueList:s}:(Array.isArray(a)&&(s=a,a=null),!a&&t.default?a=t.default:null===a&&(a=""),{value:a,valueList:s})}},{key:"setupField",value:function(e,t,n,i,r,o,a,s,l,u){var c,d,f=(0,K.merge)(null!==(c=null==a?void 0:a.metadata)&&void 0!==c?c:{},null!==(d=null==t?void 0:t.metadata)&&void 0!==d?d:{}),p=this.typeFormatter.toUserFormat(t.type,n,{mode:"edit",metadata:f});t.link&&(f.link=t.link);var m=new w.BaseField;m.type=t.type||a.type,m.name=t.name||a.name||"",m.readonly=(0,w.isTrue)(t.readonly)||(0,w.isTrue)(a.readonly)||!1,m.display=t.display||a.display||"default",m.defaultDisplay=m.display,"default"===m.defaultDisplay&&(m.defaultDisplay="show"),m.value=n,m.metadata=f,m.definition=a,(null==t?void 0:t.lineItems)&&(m.definition.lineItems=t.lineItems),m.labelKey=t.label||a.vname||"",m.dynamicLabelKey=t.dynamicLabelKey||a.dynamicLabelKey||"",m.validators=s,m.asyncValidators=l,"line-items"===m.type?(m.valueObjectArray=o.attributes[m.name],m.itemFormArray=new V.FormArray([]),m.formControl=new V.FormControl(p)):m.formControl=new V.FormControl(p),m.attributes={},m.source="field",m.logic=t.logic||a.logic||null,m.displayLogic=t.displayLogic||a.displayLogic||null;var h={},v={};return this.addFieldDependencies(m.logic,h,v,"logic"),this.addFieldDependencies(m.displayLogic,h,v,"displayLogic"),m.attributeDependencies=Object.keys(v).map(function(e){return v[e]}),m.fieldDependencies=h,i&&(m.valueList=i),r&&(m.valueObject=r),u&&(m.label=this.getFieldLabel(t.label,e,u)),!m.labelKey&&t.label&&(m.labelKey=t.label),m}},{key:"addFieldDependencies",value:function(e,t,n,i){e&&Object.keys(e).length&&Object.keys(e).forEach(function(r){var o=e[r]||{};!o.params||(o.params&&o.params.attributeDependencies&&o.params.attributeDependencies.forEach(function(e){n[e.field+"."+e.attribute]=e}),o.params&&o.params.fieldDependencies&&o.params.fieldDependencies.forEach(function(e){var n,r,o=null!==(r=(null!==(n=t[e])&&void 0!==n?n:{}).types)&&void 0!==r?r:[];o.push(i),t[e]={field:e,type:o}}))})}},{key:"getSaveValidators",value:function(e,t){return{validators:this.validationManager.getSaveValidations(e.module,t,e),asyncValidators:this.validationManager.getAsyncSaveValidations(e.module,t,e)}}},{key:"getParentValue",value:function(e,t,n,i){var r,o=null!==(r=i.valueParent)&&void 0!==r?r:"field";return i.valuePath?(0,U.Z)("record"===o?e:t,i.valuePath,""):(0,U.Z)("record"===o?e.attributes:t.valueObject,n,"")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(nv),k.\u0275\u0275inject(rv))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(nv),k.\u0275\u0275inject(rv))},token:e,providedIn:"root"}),e}(),av=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this,e,i)).validationManager=e,r.typeFormatter=i,r}return j(n,[{key:"addGroupFields",value:function(e,t,n,i,r,o){var a=(t&&t.fieldDefinition||{}).groupFields||{};Object.keys(a).forEach(function(t){var s=a[t];if(!i(e,t)){s&&"relate"===s.type&&"parent_type"===s.type_name&&(s.module=e.attributes.parent_type);var l=r(e,{name:s.name,label:s.vname,type:s.type,fieldDefinition:s},n);o(e,s.name,l)}})}}]),n}(ov);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(nv),k.\u0275\u0275inject(rv))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(nv),k.\u0275\u0275inject(rv))},token:e,providedIn:"root"}),e}(),sv=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this,e,i)).validationManager=e,r.typeFormatter=i,r}return j(n,[{key:"addAttributes",value:function(e,t,n,i,r,o){var a=this,s=Object.keys(t)||[];s.length<1||s.forEach(function(n){a.addFieldAttributes(e,t[n],i,r,o)})}},{key:"addFieldAttributes",value:function(e,t,n,i,r){var o=(t&&t.definition||{}).attributeFields||{};Object.keys(o).forEach(function(a){var s=o[a];if(!t.attributes[a]){var l=i(e,t,{name:s.name,label:s.vname,type:s.type,fieldDefinition:s},n);r(e,t,s.name,l)}})}},{key:"buildAttribute",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=n&&n.fieldDefinition||{},o=this.parseAttributeValue(n,r,e,t),a=o.value,s=o.valueList,l=o.valueObject,u=this.getSaveValidators(e,n),c=u.validators,d=u.asyncValidators,f=this.setupField(e.module,n,a,s,l,e,r,c,d,i);return f.valuePath=r.valuePath,f.valueParent=r.valueParent,f.source="attribute",f.parentKey=t.name,f}},{key:"addAttributeToRecord",value:function(e,t,n,i){!e||!n||!t||!i||(t.attributes=t.attributes||{},t.attributes[n]=i,e.formGroup&&i.formControl&&e.formGroup.addControl(n,i.formControl))}},{key:"parseAttributeValue",value:function(e,t,n,i){var r,o=t&&t.rname||"name",a=e.name||"";return"relate"===(e&&e.type||"")&&"non-db"===(t&&t.source||"")&&""!==o?{value:r=this.getParentValue(n,i,a,t)[o],valueList:null,valueObject:this.getParentValue(n,i,a,t)}:(r=a?this.getParentValue(n,i,a,t):"",r=this.getParentValue(n,i,a,t),Array.isArray(r)?{value:null,valueList:r,valueObject:null}:(0,z.Z)(r)?{value:null,valueList:null,valueObject:r}:{value:r,valueList:null,valueObject:null})}}]),n}(ov);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(nv),k.\u0275\u0275inject(rv))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(nv),k.\u0275\u0275inject(rv))},token:e,providedIn:"root"}),e}(),lv=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this,e,i)).validationManager=e,r.typeFormatter=i,r}return j(n,[{key:"buildFilterField",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t&&t.fieldDefinition||{},r=this.getFilterValidators(e,t),o=r.validators,a=r.asyncValidators,s=this.setupField(e.searchModule,t,null,null,null,e,i,o,a,n);return s.criteria=this.initFieldFilter(e.criteria,t,s),s}},{key:"getFilterValidators",value:function(e,t){return{validators:this.validationManager.getFilterValidations(e.searchModule,t,e),asyncValidators:[]}}},{key:"initFieldFilter",value:function(e,t,n){var i=t.name,r=t.type;return"composite"===r&&(r=n.definition.type),e.filters[i]&&e.filters[i].fieldType?(0,w.deepClone)(e.filters[i]):{field:i,fieldType:r,operator:"",values:[]}}},{key:"isCriteriaFieldInitialized",value:function(e,t){return!!e.criteriaFields[t]}},{key:"addToSavedFilter",value:function(e,t,n){!e||!t||!n||(e.criteriaFields||(e.criteriaFields={}),e.criteriaFields[t]=n,e.criteria.filters||(e.criteria.filters={}),e.criteria.filters[t]=n.criteria,e.criteriaFormGroup&&n.formControl&&e.criteriaFormGroup.addControl(t,n.formControl))}}]),n}(ov);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(nv),k.\u0275\u0275inject(rv))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(nv),k.\u0275\u0275inject(rv))},token:e,providedIn:"root"}),e}(),uv=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this,e,i)).validationManager=e,r.typeFormatter=i,r}return j(n,[{key:"buildFilterAttribute",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=n&&n.fieldDefinition||{};r.valuePath||(r.valuePath="criteria."+(n.name||r.name));var o=this.parseFilterAttributeValue(n,r,e,t),a=o.value,s=o.valueList,l=o.valueObject,u=this.getFilterValidators(e,n),c=u.validators,d=u.asyncValidators,f=this.setupField(e.searchModule,n,a,s,l,e,r,c,d,i);return f.valuePath=r.valuePath,f.source="attribute",f.parentKey=t.definition.name,f}},{key:"addAttributeToSavedFilter",value:function(e,t,n,i){!e||!n||!t||!i||(t.attributes=t.attributes||{},t.attributes[n]=i,e.criteriaFormGroup&&i.formControl&&e.criteriaFormGroup.addControl(n,i.formControl))}},{key:"parseFilterAttributeValue",value:function(e,t,n,i){var r,o=e.name||"";return r=o?this.getParentValue(n,i,o,t):"",Array.isArray(r)?{value:null,valueList:r,valueObject:null}:(0,z.Z)(r)?{value:null,valueList:null,valueObject:r}:{value:r,valueList:null,valueObject:null}}}]),n}(lv);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(nv),k.\u0275\u0275inject(rv))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(nv),k.\u0275\u0275inject(rv))},token:e,providedIn:"root"}),e}(),cv=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this,e,i)).validationManager=e,r.typeFormatter=i,r}return j(n,[{key:"addLineItems",value:function(e,t,n,i,r){var o=this,a=Object.keys(t)||[];a.length<1||a.forEach(function(n){o.addFieldLineItems(e,t[n],i,r)})}},{key:"addFieldLineItems",value:function(e,t,n,i){var r,o=this,a=t.valueObjectArray&&t.valueObjectArray||[];if("line-items"===(t&&t.type||"")&&a.length){var s=(null===(r=(t&&t.definition||{}).lineItems)||void 0===r?void 0:r.definition)||{};t.items=[],a.forEach(function(r){o.addLineItem(s,r,i,n,e,t)})}}},{key:"addLineItem",value:function(e,t,n,i,r,o){var a={name:e.name,label:e.vname,type:e.type,fieldDefinition:(0,w.deepClone)(e)},s={id:t.id||"",type:t.type||"",module:t.module||"",attributes:t.attributes||{},fields:{},formGroup:new V.FormGroup({})};n(s,a,i),o.itemFormArray.push(s.formGroup),o.items.push(s)}}]),n}(sv);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(nv),k.\u0275\u0275inject(rv))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(nv),k.\u0275\u0275inject(rv))},token:e,providedIn:"root"}),e}(),dv=function(){var e=function(){function e(t,n,i,r,o,a,s){I(this,e),this.fieldBuilder=t,this.groupFieldBuilder=n,this.attributeBuilder=i,this.filterFieldBuilder=r,this.filterAttributeBuilder=o,this.lineItemBuilder=a,this.languageStore=s}return j(e,[{key:"buildShallowField",value:function(e,t){return{type:e,value:t,definition:{type:e}}}},{key:"addField",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.fieldBuilder.buildField(e,t,n);return this.addToRecord(e,t.name,i),this.groupFieldBuilder.addGroupFields(e,t,n,this.isFieldInitialized.bind(this),this.fieldBuilder.buildField.bind(this.fieldBuilder),this.addToRecord.bind(this)),this.attributeBuilder.addAttributes(e,e.fields,t,n,this.attributeBuilder.buildAttribute.bind(this.attributeBuilder),this.attributeBuilder.addAttributeToRecord.bind(this.attributeBuilder)),this.lineItemBuilder.addLineItems(e,e.fields,t,n,this.addField.bind(this)),i}},{key:"addFilterField",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.filterFieldBuilder.buildFilterField(e,t,n);return this.filterFieldBuilder.addToSavedFilter(e,t.name,i),this.groupFieldBuilder.addGroupFields(e,t,n,this.filterFieldBuilder.isCriteriaFieldInitialized.bind(this.filterFieldBuilder),this.filterFieldBuilder.buildFilterField.bind(this.filterFieldBuilder),this.filterFieldBuilder.addToSavedFilter.bind(this.filterFieldBuilder)),this.attributeBuilder.addAttributes(e,e.criteriaFields,t,n,this.filterAttributeBuilder.buildFilterAttribute.bind(this.filterAttributeBuilder),this.filterAttributeBuilder.addAttributeToSavedFilter.bind(this.filterAttributeBuilder)),i}},{key:"addLineItem",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;i||(i={id:"",module:n.definition.module||"",attributes:{},fields:{},formGroup:new V.FormGroup({})}),this.lineItemBuilder.addLineItem(e,i,this.addField.bind(this),this.languageStore,t,n),n.itemFormArray.updateValueAndValidity()}},{key:"removeLineItem",value:function(e,t){var n=e.items[t];!n||(n.id?n.attributes.deleted=1:e.items=t>-1?[].concat(S(e.items.slice(0,t)),S(e.items.slice(t+1))):e.items,e.itemFormArray.clear(),e.items.forEach(function(t){!t||t&&t.attributes&&t.attributes.deleted||e.itemFormArray.push(t.formGroup)}),e.itemFormArray.updateValueAndValidity())}},{key:"addToRecord",value:function(e,t,n){!e||!t||!n||(e.fields||(e.fields={}),e.fields[t]=n,e.formGroup&&n.itemFormArray&&e.formGroup.addControl(t+"-items",n.itemFormArray),e.formGroup&&n.formControl&&e.formGroup.addControl(t,n.formControl))}},{key:"isFieldInitialized",value:function(e,t){return!!e.fields[t]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(ov),k.\u0275\u0275inject(av),k.\u0275\u0275inject(sv),k.\u0275\u0275inject(lv),k.\u0275\u0275inject(uv),k.\u0275\u0275inject(cv),k.\u0275\u0275inject(Ov))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(ov),k.\u0275\u0275inject(av),k.\u0275\u0275inject(sv),k.\u0275\u0275inject(lv),k.\u0275\u0275inject(uv),k.\u0275\u0275inject(cv),k.\u0275\u0275inject(Ov))},token:e,providedIn:"root"}),e}(),fv={id:"",type:"",module:"",attributes:{},acls:[]},pv=function(){function e(t,n,i,r,o,a){var s=this;I(this,e),this.definitions$=t,this.recordSaveGQL=n,this.recordFetchGQL=i,this.message=r,this.recordManager=o,this.recordMappers=a,this.cache$=null,this.internalState=(0,w.deepClone)(fv),this.stagingState=(0,w.deepClone)(fv),this.store=new x.BehaviorSubject(this.internalState),this.staging=new x.BehaviorSubject(this.stagingState),this.definitions=[],this.subs=[],this.fieldsMetadata={fields:["_id","id","attributes","module","type","acls","favorite"]},this.state$=this.store.asObservable().pipe((0,M.distinctUntilChanged)()),this.staging$=this.staging.asObservable(),this.subs.push(this.state$.subscribe(function(e){s.updateStaging(e)})),this.subs.push(t.subscribe(function(e){s.definitions=e,s.init(s.internalState)}))}return j(e,[{key:"init",value:function(e){var t=Object.assign({},e);this.initRecord(t),this.updateState(t)}},{key:"getStaging",value:function(){return this.stagingState?this.stagingState:null}},{key:"setStaging",value:function(e){this.initRecord(e),this.staging.next(this.stagingState=e)}},{key:"setRecord",value:function(e){this.initRecord(e),this.updateState(e)}},{key:"save",value:function(){var e=this;return this.mapStagingFields(),this.recordSaveGQL.save(this.stagingState).pipe((0,M.tap)(function(t){e.initRecord(t),e.updateState(t)}))}},{key:"validate",value:function(){return this.stagingState.formGroup.markAllAsTouched(),this.stagingState.formGroup.statusChanges.pipe((0,M.startWith)(this.stagingState.formGroup.status),(0,M.filter)(function(e){return"PENDING"!==e}),(0,M.take)(1),(0,M.map)(function(e){return"VALID"===e}))}},{key:"resetStaging",value:function(){this.updateStaging(this.internalState)}},{key:"destroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"getBaseRecord",value:function(){return this.internalState?(0,w.deepClone)({id:this.internalState.id,type:this.internalState.type,module:this.internalState.module,attributes:this.internalState.attributes,acls:this.internalState.acls}):null}},{key:"getBaseStaging",value:function(){return this.stagingState?(this.mapStagingFields(),(0,w.deepClone)({id:this.stagingState.id,type:this.stagingState.type,module:this.stagingState.module,attributes:this.stagingState.attributes,acls:this.stagingState.acls})):null}},{key:"extractBaseRecord",value:function(e){var t=(0,G._T)(e,["fields","formGroup"]);return Object.assign({},t)}},{key:"isDirty",value:function(){return!(!this.stagingState||!this.stagingState.formGroup)&&this.stagingState.formGroup.dirty}},{key:"retrieveRecord",value:function(e,t){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(null==this.cache$||!1===i)&&(this.cache$=this.fetch(e,t).pipe((0,M.tap)(function(e){return n.init(e)}),(0,M.shareReplay)(1))),this.cache$}},{key:"updateState",value:function(e){this.store.next(this.internalState=e)}},{key:"updateStaging",value:function(e){var t=(0,w.deepClone)(this.extractBaseRecord(e));this.initRecord(t),this.staging.next(this.stagingState=t)}},{key:"mapStagingFields",value:function(){var e=this,t=this.recordMappers.get(this.stagingState.module);Object.keys(t).forEach(function(n){t[n].map(e.stagingState)})}},{key:"initRecord",value:function(e){e.module&&this.definitions&&this.definitions.length>0&&(e.fields=this.recordManager.initFields(e,this.definitions))}},{key:"fetch",value:function(e,t){var n=this;return this.recordFetchGQL.fetch(e,t,this.fieldsMetadata).pipe((0,M.map)(function(t){var i,r,o=t.data,a={type:"",module:"",attributes:{},acls:[]};if(!o)return a;var s=o.getRecord.attributes.id;return s?(a.id=s,a.module=e,a.type=o.getRecord.attributes&&o.getRecord.attributes.object_name,a.attributes=o.getRecord.attributes,a.acls=o.getRecord.acls,a.favorite=null!==(r=null===(i=null==o?void 0:o.getRecord)||void 0===i?void 0:i.favorite)&&void 0!==r&&r,a):(n.message.addDangerMessageByKey("LBL_RECORD_DOES_NOT_EXIST"),a)}),(0,M.catchError)(function(e){return(0,x.throwError)(e)}))}}]),e}(),mv=function(){var e=function(){function e(t){I(this,e),this.apollo=t}return j(e,[{key:"fetch",value:function(e,t,n){var i=n.fields,o={query:L()(r||(r=u(["\n            query getRecord($module: String!, $record: String!) {\n                getRecord(module: $module, record: $record) {\n                    ","\n                }\n            }\n        "])),i.join("\n")),variables:{module:e,record:t}};return this.apollo.query(o)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(_.Apollo))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(_.Apollo))},token:e,providedIn:"root"}),e}(),hv=function(){var e=function(){function e(t){I(this,e),this.apollo=t}return j(e,[{key:"save",value:function(e){var t=this,n={module:e.module,attributes:(0,w.deepClone)(e.attributes)};e.id&&(n._id=e.id);var i={mutation:L()(o||(o=u(["\n                mutation saveRecord($input: saveRecordInput!) {\n                    saveRecord(input: $input) {\n                        record {\n                            attributes\n                            favorite\n                            id\n                            _id\n                            module\n                            acls\n                        }\n                    }\n                }\n            "]))),variables:{input:n}};return this.apollo.mutate(i).pipe((0,M.map)(function(e){return t.mapToRecord(e)}))}},{key:"mapToRecord",value:function(e){var t,n,i,r,o,a,s,l,u,c,d,f,p,m,h,v,g,y,b;return e.data&&e.data.saveRecord&&e.data.saveRecord.record?{id:e.data.saveRecord.record._id,type:null!==(r=null===(i=null===(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.saveRecord)||void 0===n?void 0:n.record)||void 0===i?void 0:i.type)&&void 0!==r?r:"",module:null!==(l=null===(s=null===(a=null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.saveRecord)||void 0===a?void 0:a.record)||void 0===s?void 0:s.module)&&void 0!==l?l:"",attributes:null!==(f=null===(d=null===(c=null===(u=null==e?void 0:e.data)||void 0===u?void 0:u.saveRecord)||void 0===c?void 0:c.record)||void 0===d?void 0:d.attributes)&&void 0!==f?f:[],acls:null!==(v=null===(h=null===(m=null===(p=null==e?void 0:e.data)||void 0===p?void 0:p.saveRecord)||void 0===m?void 0:m.record)||void 0===h?void 0:h.acls)&&void 0!==v?v:[],favorite:null!==(b=null===(y=null===(g=null==e?void 0:e.data.saveRecord)||void 0===g?void 0:g.record)||void 0===y?void 0:y.favorite)&&void 0!==b&&b}:null}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(_.Apollo))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(_.Apollo))},token:e,providedIn:"root"}),e}(),vv=function(){var e=function(){function e(t,n){I(this,e),this.fieldManager=t,this.language=n}return j(e,[{key:"buildEmptyRecord",value:function(e){return{id:"",module:e,attributes:{id:""},fields:{},formGroup:new V.FormGroup({})}}},{key:"initFields",value:function(e,t){var n=this;return e.fields||(e.fields={}),e.formGroup||(e.formGroup=new V.FormGroup({})),t.forEach(function(t){!t||!t.name||n.fieldManager.addField(e,t,n.language)}),e.fields}},{key:"injectParamFields",value:function(e,t,n){var i=this;Object.keys(e).forEach(function(r){var o,a=n[r];if((0,w.isVoid)(a))i.handleLinkTypeRelationship(r,e,n,t);else{var s=a.type||"",l=a.id_name||"",u=a.name||"",c=a.rname||"";if("relate"===s&&l===u)return void(t.attributes[r]=e[r]);if("parent"===s){var d={},f="name",p="parent_id",m=(null!==(o=n[r+"-group"])&&void 0!==o?o:{}).groupFields[r];return m&&m.rname&&(f=m.rname),f&&(d[f]=e[r]),e[p]&&(d.id=e[p]),void(t.attributes[r]=d)}if("relate"===s){var h={};return c&&(h[c]=e[r]),l&&e[l]&&(h.id=e[l]),void(t.attributes[r]=h)}t.attributes[r]=e[r]}})}},{key:"handleLinkTypeRelationship",value:function(e,t,n,i){if("return_relationship"===e){var r=t.return_relationship;if(!r)return;Object.keys(n).forEach(function(e){var o,a,s,l,u=n[e];if("link"===(u.type||"")){var c=u.relationship||"";if(c&&c===r){var d=null!==(a=null!==(o=u.module)&&void 0!==o?o:t.return_module)&&void 0!==a?a:"";if(!d)return;var f=t.parent_name;if(!f)return;var p=null===(s=null==u?void 0:u.relationshipMetadata)||void 0===s?void 0:s.related_id,m=null!==(l=t[p])&&void 0!==l?l:"";if(!m)return;i.attributes[u.name]=[{id:m,module:d,attributes:{id:m,name:f}}]}}})}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(dv),k.\u0275\u0275inject(Ov))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(dv),k.\u0275\u0275inject(Ov))},token:e,providedIn:"root"}),e}(),gv=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"getKey",value:function(){return"base"}},{key:"map",value:function(e){!e.fields||!Object.keys(e.fields).length||Object.keys(e.fields).forEach(function(t){var n=e.fields[t],i=n.type||"",r=n.definition.source||"",o=n.definition.rname||"name",a=n.definition.id_name||"";if("relate"!==i||"non-db"!==r||a!==t){if("relate"===i&&"non-db"===r&&""!==o&&n.valueObject){var s=e.attributes[t]||{};return s[o]=n.valueObject[o],s.id=n.valueObject.id,e.attributes[t]=s,void(e.attributes[a]=n.valueObject.id)}if(!n.valueObject)return n.items?(e.attributes[t]=[],void n.items.forEach(function(n){e.attributes[t].push({id:n.id,module:n.module,attributes:(0,w.deepClone)(n.attributes)})})):void(e.attributes[t]=n.valueObjectArray?n.valueObjectArray:n.valueList?n.valueList:n.value);e.attributes[t]=n.valueObject}else e.attributes[t]=n.value})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),yv=function(){var e=function(){function e(t,n,i,r,o,a){I(this,e),this.recordFetchGQL=t,this.recordSaveGQL=n,this.message=i,this.recordManager=r,this.recordMappers=o,this.baseMapper=a,o.register("default",a.getKey(),a)}return j(e,[{key:"create",value:function(e){return new pv(e,this.recordSaveGQL,this.recordFetchGQL,this.message,this.recordManager,this.recordMappers)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(mv),k.\u0275\u0275inject(hv),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vv),k.\u0275\u0275inject(w.RecordMapperRegistry),k.\u0275\u0275inject(gv))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(mv),k.\u0275\u0275inject(hv),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vv),k.\u0275\u0275inject(w.RecordMapperRegistry),k.\u0275\u0275inject(gv))},token:e,providedIn:"root"}),e}(),bv=function(){var e=function(){function e(t,n,i,r,o,a){I(this,e),this.appStateStore=t,this.meta=n,this.message=i,this.fieldManager=r,this.language=o,this.storeFactory=a}return j(e,[{key:"create",value:function(){return new yh(this.appStateStore,this.meta,this.message,this.fieldManager,this.language,this.storeFactory)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(jv),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(dv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(yv))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(jv),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(dv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(yv))},token:e,providedIn:"root"}),e}(),Sv=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this,e,i)).listStoreFactory=e,r.recordStoreFactory=i,r.autoRefreshEnabled=!0,r.$loading=r.recordList.loading$,r}return j(n,[{key:"init",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l(h(n.prototype),"init",this).call(this,e,t,i),this.autoRefreshEnabled=!0}},{key:"setFilters",value:function(e){var t=this.recordList.criteria;if(t=Object.assign(Object.assign({},t),e),e&&e.orderBy){var n=w.SortDirection.DESC;e.sortOrder&&"ASC"===String(e.sortOrder).toUpperCase()&&(n=w.SortDirection.ASC),this.recordList.updateSorting(e.orderBy,n,!1)}return this.recordList.updateSearchCriteria(t,!1),this.load(!1).pipe((0,M.map)(function(e){return e.records}))}},{key:"getItemMetadata",value:function(){return this.itemMetadata}},{key:"getListMetadata",value:function(){return this.listMetadata}},{key:"setItemMetadata",value:function(e){return this.itemMetadata=e}},{key:"setListMetadata",value:function(e){return this.listMetadata=e}},{key:"allLoaded",value:function(){var e=this.recordList.getPagination();return!!e&&e.pageSize>=e.total}},{key:"loadMore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=this.pageSize);var t=(this.recordList.getPagination().pageSize||0)+e;this.recordList.setPageSize(t),this.recordList.updatePagination(0)}},{key:"reload",value:function(){this.recordList.updatePagination(0)}},{key:"getViewContext",value:function(){return{module:this.module,ids:this.getRecordIds()}}},{key:"initAutoRefresh",value:function(e,t,n,i){var r=this,o=new Date,a=new Date(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes()+1),s=this.getAutoRefreshTime(e,t,n);return(0,x.timer)(a,s).pipe((0,M.takeWhile)(function(){return r.autoRefreshEnabled}),(0,M.tap)(function(){r.load(!1).subscribe(function(){i&&i()})}))}},{key:"disableAutoRefresh",value:function(){this.autoRefreshEnabled=!1}},{key:"getAutoRefreshTime",value:function(e,t,n){var i=6e4*e;return 0===t&&0===n?i:i+this.getRandomDeviation(t,n)}},{key:"getRandomDeviation",value:function(e,t){return e=Math.ceil(e),t=Math.floor(t),1e3*Math.floor(Math.random()*(t-e+1)+e)}}]),n}(hh);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(mh),k.\u0275\u0275inject(bv))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Cv=function(){var e=function(){function e(t,n){I(this,e),this.recordListFactory=t,this.recordStoreFactory=n}return j(e,[{key:"create",value:function(){return new Sv(this.recordListFactory,this.recordStoreFactory)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(mh),k.\u0275\u0275inject(bv))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(mh),k.\u0275\u0275inject(bv))},token:e,providedIn:"root"}),e}(),kv=function(){var e=function(){function e(t,n,i,r){var o=this;I(this,e),this.typeFormatter=t,this.language=n,this.configs=i,this.preferences=r,this.valuePipes={},this.fieldPipes={},this.valuePipes.int=function(e){return o.valueTypeFormat("int",e)},this.valuePipes.float=function(e){return o.valueTypeFormat("float",e)},this.valuePipes.date=function(e){return o.valueTypeFormat("date",e)},this.valuePipes.datetime=function(e){return o.valueTypeFormat("datetime",e)},this.valuePipes.currency=function(e){return o.valueTypeFormat("currency",e)},this.valuePipes.enum=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o.enumFormat(e,t)},this.fieldPipes.int=function(e){return o.fieldTypeFormat("int",e)},this.fieldPipes.float=function(e){return o.fieldTypeFormat("float",e)},this.fieldPipes.date=function(e){return o.fieldTypeFormat("date",e)},this.fieldPipes.datetime=function(e){return o.fieldTypeFormat("datetime",e)},this.fieldPipes.currency=function(e){return o.fieldTypeFormat("currency",e)},this.fieldPipes.phone=function(e){return o.fieldTypeFormat("phone",e)},this.fieldPipes.enum=function(e){return o.enumFieldFormat(e)},this.fieldPipes.dynamicenum=function(e){return o.enumFieldFormat(e)},this.fieldPipes.multienum=function(e){return o.multiEnumFormat(e)}}return j(e,[{key:"addValuePipe",value:function(e,t){this.valuePipes[e]=t}},{key:"addFieldPipe",value:function(e,t){this.fieldPipes[e]=t}},{key:"parse",value:function(e,t,n){var i=this;if(!e)return e;var r=e.match(/({{[\s\S]+?}})/g);if(!r||r.length<1)return e;var o=e,a=t&&t.module||"";return r.forEach(function(e){if(o.includes(e)){var r="",l=[],u="",c="context",d=[],f=""+e,p=f=(f=(f=f.replace("{{","")).replace("}}","")).trim();if(f.includes("|")){var m=s(f.split("|")),h=m[0],v=m[1];m.slice(2);if(r=v.trim(),v.trim().includes(":")){var g=s(v.trim().split(":")),y=g[0],b=g.slice(1);r=y.trim(),l=b}f=h.trim(),p=h.trim()}f.includes(".")&&(c=(d=f.split("."))[0],f=d[1]);var S=t;if("fields"===c&&(S=n),"fields"===c){if(!S||!(f in S))return void(o=o.replace(e,u));var C=n[f];return C?d[2]&&"value"===d[2]&&C.type in i.fieldPipes?(u=i.fieldPipes[C.type](C),void(o=o.replace(e,u))):d[2]&&"label"===d[2]?(u=i.getFieldLabel(C.labelKey,a),void(o=o.replace(e,u))):(u=(0,U.Z)({fields:n},p,""),void(o=o.replace(e,u))):void(o=o.replace(e,""))}"config"!==c?"preferences"!==c?S&&f in S?(u=(0,U.Z)({context:t},p,""),r in i.valuePipes&&(u=i.valuePipes[r](u)),o=o.replace(e,u)):o=o.replace(e,u):o=i.parseObjectContext(f,o,e,r,l,function(e){return i.preferences.getUserPreference(e)}):o=i.parseObjectContext(f,o,e,r,l,function(e){return i.configs.getConfigValue(e)})}}),o}},{key:"valueTypeFormat",value:function(e,t){return this.typeFormatter.toUserFormat(e,t)}},{key:"enumFormat",value:function(e,t){var n,i=null!==(n=t[0])&&void 0!==n?n:"";return i&&e?this.language.getListLabel(i,e):""}},{key:"fieldTypeFormat",value:function(e,t){return this.typeFormatter.toUserFormat(e,t.value)}},{key:"enumFieldFormat",value:function(e){return(0,w.isVoid)(e.definition.options)||(0,w.isVoid)(e.value)?"":this.language.getListLabel(e.definition.options,e.value)}},{key:"multiEnumFormat",value:function(e){var t=this;if((0,w.isVoid)(e.definition.options)||(0,w.isVoid)(e.valueList)||e.valueList.length<1)return"";var n=[];return e.valueList.forEach(function(i){(0,w.isVoid)(i)||n.push(t.language.getListLabel(e.definition.options,i))}),n.join(", ")}},{key:"getFieldLabel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,w.isVoid)(e)?"":this.language.getFieldLabel(e,t)}},{key:"parseObjectContext",value:function(e,t,n,i,r,o){var a=e;if(e.includes(".")){var l=s(e.split(".")),u=l[0];l.slice(1);a=u}var c=o(a);return e.includes(".")&&"object"==typeof c&&(c=(0,U.Z)({value:c},e,"")),c&&"object"!=typeof c?(i in this.valuePipes&&(c=this.valuePipes[i](c,r)),t.replace(n,c)):t.replace(n,"")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(rv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(ah))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(rv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(ah))},token:e,providedIn:"root"}),e}(),wv=function(){var e=function(){function e(t,n,i,r,o,a){I(this,e),this.systemConfig=t,this.storeFactory=n,this.processService=i,this.messages=r,this.language=o,this.dynamicLabels=a}return j(e,[{key:"getOptions",value:function(){var e,t=this.systemConfig.getConfigValue("ui");return null!==(e=null==t?void 0:t.notifications)&&void 0!==e?e:null}},{key:"initStore",value:function(){var e,t,n,i,r,o=this.getOptions(),a={};this.setupListActions(a,o),this.setupItemConfig(a,o);var s=this.storeFactory.create();s.setItemMetadata(a.itemConfig.metadata),s.setListMetadata({actions:a.listActions});var l={orderBy:null!==(t=null===(e=null==o?void 0:o.filters)||void 0===e?void 0:e.orderBy)&&void 0!==t?t:"date_entered",sortOrder:null!==(i=null===(n=null==o?void 0:o.filters)||void 0===n?void 0:n.sortOrder)&&void 0!==i?i:"asc",preset:{type:"alerts"}};return s.init(o.module,!1,null!==(r=null==o?void 0:o.pageSize)&&void 0!==r?r:null),s.setFilters(l).pipe((0,M.take)(1)).subscribe(),s}},{key:"setupListActions",value:function(e,t){var n,i;e.listActions=null!==(n=null==t?void 0:t.listActions)&&void 0!==n?n:[],null!==(null!==(i=null==t?void 0:t.collapseListActions)&&void 0!==i?i:null)&&(e.collapseListActions=t.collapseListActions)}},{key:"setupItemConfig",value:function(e,t){var n,i,r,o,a,s,l,u,c,d,f,p,m,h,v,g;e.itemConfig={collapsible:null!==(i=null===(n=null==t?void 0:t.item)||void 0===n?void 0:n.collapsible)&&void 0!==i&&i,collapseLimit:null!==(o=null===(r=null==t?void 0:t.item)||void 0===r?void 0:r.collapseLimit)&&void 0!==o?o:null,klass:null!==(s=null===(a=null==t?void 0:t.item)||void 0===a?void 0:a.itemClass)&&void 0!==s?s:"",buttonClass:null!==(u=null===(l=null==t?void 0:t.item)||void 0===l?void 0:l.buttonClass)&&void 0!==u?u:"",buttonGroupClass:null!==(d=null===(c=null==t?void 0:t.item)||void 0===c?void 0:c.buttonGroupClass)&&void 0!==d?d:"",dynamicClass:null!==(p=null===(f=null==t?void 0:t.item)||void 0===f?void 0:f.dynamicClass)&&void 0!==p?p:[],containerClass:null!==(h=null===(m=null==t?void 0:t.item)||void 0===m?void 0:m.containerClass)&&void 0!==h?h:"",flexDirection:null!==(g=null===(v=null==t?void 0:t.item)||void 0===v?void 0:v.flexDirection)&&void 0!==g?g:"",metadata:{}},this.setupItemMetadata(e.itemConfig.metadata,t.item.layout,t)}},{key:"setupItemMetadata",value:function(e,t,n){var i,r,o,a;t&&t.header&&(e.headerLayout=(0,w.deepClone)(t.header)),t&&t.body&&(e.bodyLayout=(0,w.deepClone)(t.body)),t&&t.actions&&(e.actions=(0,w.deepClone)(t.actions)),(null==n?void 0:n.item)&&(null===(i=null==n?void 0:n.item)||void 0===i?void 0:i.fields)&&(e.fields=(0,w.deepClone)(n.item.fields)),null!==(null!==(o=null===(r=null==n?void 0:n.item)||void 0===r?void 0:r.collapseActions)&&void 0!==o?o:null)&&(e.collapseActions=null===(a=null==n?void 0:n.item)||void 0===a?void 0:a.collapseActions)}},{key:"markNotificationsAsRead",value:function(e){var t,n=this,i={action:"record-thread-list-mark-as-read",module:null!==(t=e.module)&&void 0!==t?t:"alerts",ids:e.getRecordIds()};return this.processService.submit("record-thread-list-mark-as-read",i).pipe((0,M.tap)(function(t){var i="addSuccessMessageByKey";"error"===t.status&&(i="addDangerMessageByKey"),t.messages&&t.messages.forEach(function(e){n.messages[i](e)}),e.getItemStores().forEach(function(e){var t,n,i,r=null!==(n=null===(t=null==e?void 0:e.recordStore)||void 0===t?void 0:t.getStaging())&&void 0!==n?n:{},o=null!==(i=null==r?void 0:r.fields.is_read)&&void 0!==i?i:null;null!=o&&(o.value="true")})}),(0,M.catchError)(function(e){throw n.messages.addDangerMessageByKey("ERR_NOTIFICATIONS_MARK_AS_READ"),e}))}},{key:"onLoadMore",value:function(e){(0,x.timer)(1500).pipe((0,M.take)(1)).subscribe(function(){e.markNotificationsAsRead()})}},{key:"onRefresh",value:function(e,t){var n=e.getRecordList().getMeta().unreadCount,i=t.getNotificationsUnreadTotal();if(n>i){var r=(n-i).toString(),o=this.language.getFieldLabel("LBL_NEW_NOTIFICATION"),a=this.dynamicLabels.parse(o,{unread:r},{});this.messages.addSuccessMessage(a)}t.setNotificationsUnreadTotal(n)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(Cv),k.\u0275\u0275inject(th),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(kv))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(Cv),k.\u0275\u0275inject(th),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(kv))},token:e,providedIn:"root"}),e}(),Iv={loading:!1,initialAppLoading:!0,module:null,view:null,loaded:!1,routeUrl:null,preLoginUrl:null,currentUser:null,activeRequests:0,notificationsEnabled:!1,notificationsTotal:0,notificationsUnreadTotal:0},xv=(0,w.deepClone)(Iv),jv=function(){var e=function(){function e(t,n,i,r){I(this,e),this.loadingBufferFactory=t,this.messageService=n,this.notificationService=i,this.configs=r,this.store=new x.BehaviorSubject(xv),this.state$=this.store.asObservable(),this.loadingQueue={},this.subs=[],this.notificationPageSize=0,this.loading$=this.state$.pipe((0,M.map)(function(e){return e.loading}),(0,M.distinctUntilChanged)()),this.module$=this.state$.pipe((0,M.map)(function(e){return e.module}),(0,M.distinctUntilChanged)()),this.view$=this.state$.pipe((0,M.map)(function(e){return e.view}),(0,M.distinctUntilChanged)()),this.initialAppLoading$=this.state$.pipe((0,M.map)(function(e){return e.initialAppLoading}),(0,M.distinctUntilChanged)()),this.activeRequests$=this.state$.pipe((0,M.map)(function(e){return e.activeRequests}),(0,M.distinctUntilChanged)()),this.notificationsUnreadTotal$=this.state$.pipe((0,M.map)(function(e){return e.notificationsUnreadTotal}),(0,M.distinctUntilChanged)()),this.notificationsTotal$=this.state$.pipe((0,M.map)(function(e){return e.notificationsTotal}),(0,M.distinctUntilChanged)()),this.notificationsEnabled$=this.state$.pipe((0,M.map)(function(e){return e.notificationsEnabled}),(0,M.distinctUntilChanged)()),this.vm$=(0,x.combineLatest)([this.loading$,this.module$,this.view$,this.initialAppLoading$]).pipe((0,M.map)(function(e){var t=v(e,4),n=t[0],i=t[1],r=t[2],o=t[3];return{loading:n,module:i,view:r,loaded:xv.loaded,initialAppLoading:o}}))}return j(e,[{key:"clear",value:function(){this.loadingQueue={},this.updateState((0,w.deepClone)(Iv)),this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"clearAuthBased",value:function(){this.notificationStore.clear(),this.notificationStore=null}},{key:"init",value:function(){this.initLoadingBuffer(),this.isLoggedIn()&&this.initNotifications()}},{key:"isLoggedIn",value:function(){var e;return!(null===(e=xv.currentUser)||void 0===e||!e)}},{key:"getCurrentUser",value:function(){return xv.currentUser}},{key:"setCurrentUser",value:function(e){(0,w.isVoid)(e)?this.onLogout():this.onLogin(),this.updateState(Object.assign(Object.assign({},xv),{currentUser:e}))}},{key:"initNotifications",value:function(){this.notificationStore||(this.notificationStore=this.notificationService.initStore())}},{key:"enableNotifications",value:function(){this.initNotifications(),this.updateState(Object.assign(Object.assign({},xv),{notificationsEnabled:!0}))}},{key:"disableNotifications",value:function(){this.disableNotificationAutoRefresh(),this.updateState(Object.assign(Object.assign({},xv),{notificationsEnabled:!1,notificationsTotal:0,notificationsUnreadTotal:0}))}},{key:"areNotificationsEnabled",value:function(){return xv.notificationsEnabled}},{key:"refreshNotifications",value:function(){var e=this;!this.areNotificationsEnabled()||this.notificationStore.load(!1).pipe((0,M.take)(1)).subscribe(function(){e.notificationService.onRefresh(e.notificationStore,e)})}},{key:"markNotificationsAsRead",value:function(){var e=this;if(this.areNotificationsEnabled()){this.notificationStore.getRecordList().pagination$.pipe((0,M.take)(1),(0,M.tap)(function(t){return e.notificationPageSize=t.pageSize}),(0,M.tap)(function(t){return e.setNotificationsTotal(t.total)})).subscribe();var t=this.notificationStore.getRecordList().records.filter(function(e){return!1===e.attributes.is_read}).length,n=this.getNotificationsTotal()-this.getNotificationsUnreadTotal();(0,x.timer)(500).pipe((0,M.take)(1)).subscribe(function(){e.getNotificationsUnreadTotal()>0&&(e.notificationPageSize>n||t>0)&&e.notificationService.markNotificationsAsRead(e.notificationStore).subscribe(function(t){var n,i,r=null!==(i=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.unreadCount)&&void 0!==i?i:0;e.setNotificationsUnreadTotal(r),e.setRecordAsReadTrue()})})}}},{key:"conditionalNotificationRefresh",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.areNotificationsEnabled()){var n=null!==(e=this.configs.getUi("notifications_reload_actions"))&&void 0!==e?e:null,i=this.getModule();if(t||(t=this.getView()),n&&i){var r=n[i];r&&r.length&&r.some(function(e){return"any"===e||e===t})&&this.refreshNotifications()}}}},{key:"disableNotificationAutoRefresh",value:function(){this.notificationStore.disableAutoRefresh()}},{key:"setRecordAsReadTrue",value:function(){this.notificationStore.getRecordList().records.forEach(function(e){e.attributes.is_read||(e.attributes.is_read=!0)})}},{key:"setNotificationsUnreadTotal",value:function(e){this.updateState(Object.assign(Object.assign({},xv),{notificationsUnreadTotal:e}))}},{key:"onLogin",value:function(){}},{key:"setNotificationsTotal",value:function(e){this.updateState(Object.assign(Object.assign({},xv),{notificationsTotal:e}))}},{key:"getNotificationsTotal",value:function(){return xv.notificationsTotal}},{key:"getNotificationsUnreadTotal",value:function(){return xv.notificationsUnreadTotal}},{key:"onLogout",value:function(){this.disableNotifications(),this.clearAuthBased(),this.updateState(Object.assign(Object.assign({},xv),{preLoginUrl:null}))}},{key:"getNotificationStore",value:function(){return this.notificationStore}},{key:"getActiveRequests",value:function(){return xv.activeRequests}},{key:"addActiveRequest",value:function(){var e=xv.activeRequests;(0,w.isVoid)(e)&&(e=0),e++,this.updateState(Object.assign(Object.assign({},xv),{activeRequests:e}))}},{key:"removeActiveRequest",value:function(){var e=xv.activeRequests;(0,w.isVoid)(e)?e=0:e--,e<0&&(e=0),this.updateState(Object.assign(Object.assign({},xv),{activeRequests:e}))}},{key:"updateLoading",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.initLoadingBuffer(),!0===t)return this.addToLoadingQueue(e),this.loadingBuffer.updateLoading(t),void(n||this.updateState(Object.assign(Object.assign({},xv),{loading:t})));this.removeFromLoadingQueue(e),this.hasActiveLoading()&&(this.loadingBuffer.updateLoading(t),this.updateState(Object.assign(Object.assign({},xv),{loading:t})))}},{key:"updateInitialAppLoading",value:function(e){this.updateState(Object.assign(Object.assign({},xv),{initialAppLoading:e}))}},{key:"isLoaded",value:function(){return xv.loaded}},{key:"setLoaded",value:function(e){this.updateState(Object.assign(Object.assign({},xv),{loaded:e}))}},{key:"setModule",value:function(e){this.updateState(Object.assign(Object.assign({},xv),{module:e}))}},{key:"getModule",value:function(){var e;return null!==(e=null==xv?void 0:xv.module)&&void 0!==e?e:""}},{key:"setView",value:function(e){this.updateState(Object.assign(Object.assign({},xv),{view:e}))}},{key:"getView",value:function(){return xv.view}},{key:"setRouteUrl",value:function(e){this.updateState(Object.assign(Object.assign({},xv),{routeUrl:e}))}},{key:"getRouteUrl",value:function(){return xv.routeUrl}},{key:"setPreLoginUrl",value:function(e){this.updateState(Object.assign(Object.assign({},xv),{preLoginUrl:e}))}},{key:"getPreLoginUrl",value:function(){var e;return null!==(e=xv.preLoginUrl)&&void 0!==e?e:""}},{key:"initLoadingBuffer",value:function(){var e=this;this.loadingBuffer||(this.loadingBuffer=this.loadingBufferFactory.create(),this.subs.push(this.loadingBuffer.loading$.subscribe(function(t){e.updateState(Object.assign(Object.assign({},xv),{loading:t}))})))}},{key:"hasActiveLoading",value:function(){return Object.keys(this.loadingQueue).length<1}},{key:"removeFromLoadingQueue",value:function(e){this.loadingQueue[e]&&delete this.loadingQueue[e]}},{key:"addToLoadingQueue",value:function(e){this.loadingQueue[e]=!0}},{key:"updateState",value:function(e){this.store.next(xv=e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Qm),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(wv),k.\u0275\u0275inject(Gm))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Qm),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(wv),k.\u0275\u0275inject(Gm))},token:e,providedIn:"root"}),e}(),Ev={appStrings:{},appListStrings:{},modStrings:{},languageKey:"en_us",loaded:{},hasChanged:!1},Mv=(0,w.deepClone)(Ev),_v={appStrings:{},appListStrings:{},modStrings:{}},Fv={},Lv=(0,w.deepClone)(_v),Ov=function(){var e=function(){function e(t,n,i,r,o){I(this,e),this.recordGQL=t,this.appStateStore=n,this.localStorage=i,this.processService=r,this.configs=o,this.store=new x.BehaviorSubject(Mv),this.state$=this.store.asObservable(),this.config={appStrings:{fetch:"fetchAppStrings",resourceName:"appStrings",metadata:{fields:["id","_id","items"]}},appListStrings:{fetch:"fetchAppListStrings",resourceName:"appListStrings",metadata:{fields:["id","_id","items"]}},modStrings:{fetch:"fetchModStrings",resourceName:"modStrings",metadata:{fields:["id","_id","items"]}}},this.appStrings$=this.state$.pipe((0,M.map)(function(e){return e.appStrings}),(0,M.distinctUntilChanged)()),this.appListStrings$=this.state$.pipe((0,M.map)(function(e){return e.appListStrings}),(0,M.distinctUntilChanged)()),this.modStrings$=this.state$.pipe((0,M.map)(function(e){return e.modStrings}),(0,M.distinctUntilChanged)()),this.languageKey$=this.state$.pipe((0,M.map)(function(e){return e.languageKey}),(0,M.distinctUntilChanged)()),this.vm$=(0,x.combineLatest)([this.appStrings$,this.appListStrings$,this.modStrings$,this.languageKey$]).pipe((0,M.map)(function(e){var t=v(e,4);return{appStrings:t[0],appListStrings:t[1],modStrings:t[2],languageKey:t[3]}}))}return j(e,[{key:"clear",value:function(){Fv={},Lv=(0,w.deepClone)(_v),this.updateState((0,w.deepClone)(Ev))}},{key:"clearAuthBased",value:function(){["modStrings","appListStrings"].forEach(function(e){Fv&&Fv[e]&&delete Fv[e]}),Lv.modStrings={},Lv.appListStrings={}}},{key:"changeLanguage",value:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[];Object.keys(Fv).forEach(function(e){return Fv[e]&&r.push(e)}),Mv.hasChanged=!0;var o=!1;(null===(t=null==this?void 0:this.appStateStore)||void 0===t?void 0:t.updateLoading)&&(this.appStateStore.updateLoading("change-language",!0),o=!0),this.load(e,r,i).pipe((0,M.tap)(function(){n.localStorage.set("selected_language",e,!0),o&&n.appStateStore.updateLoading("change-language",!1)})).subscribe()}},{key:"getLanguageStrings",value:function(){return Mv?{appStrings:Mv.appStrings,appListStrings:Mv.appListStrings,modStrings:Mv.modStrings,languageKey:Mv.languageKey}:null}},{key:"getAppString",value:function(e){return Mv.appStrings&&Mv.appStrings[e]?Mv.appStrings[e]:null}},{key:"getAppListString",value:function(e){return Mv.appListStrings&&Mv.appListStrings[e]?Mv.appListStrings[e]:null}},{key:"getModString",value:function(e){return Mv.modStrings&&Mv.modStrings[e]?Mv.modStrings[e]:null}},{key:"getFieldLabel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=n;if(n||(i=this.getLanguageStrings()),!i||!i.modStrings||!e)return"";var r="";return t&&(r=i.modStrings[t]&&i.modStrings[t][e]),r||(r=i.appStrings&&i.appStrings[e]),r||""}},{key:"getListLabel",value:function(e,t){if(!e||!t)return"";var n=this.getAppListString(e);return n&&n[t]||""}},{key:"getAvailableStringsTypes",value:function(){return Object.keys(this.config)}},{key:"hasLanguageChanged",value:function(){return Mv.hasChanged}},{key:"getCurrentLanguage",value:function(){var e;return this.localStorage.get("selected_language")||(null!==(e=Mv.languageKey)&&void 0!==e?e:"en_us")}},{key:"getActiveLanguage",value:function(){var e;return null!==(e=Mv.languageKey)&&void 0!==e?e:""}},{key:"getSelectedLanguage",value:function(){var e;return null!==(e=this.localStorage.get("selected_language"))&&void 0!==e?e:""}},{key:"isLanguageEnabled",value:function(e){var t;if(!e)return!1;var n=null!==(t=this.configs.getConfigValue("languages"))&&void 0!==t?t:{},i=this.getDisabledLanguages(),r=Object.keys(n);return!!r.length&&r.includes(e)&&!i.includes(e)}},{key:"getDisabledLanguages",value:function(){var e,t=null!==(e=this.configs.getConfigValue("disabled_languages"))&&void 0!==e?e:"";return(0,K.isString)(t)&&""!==t?t.replace(" ","").split(","):[]}},{key:"getEnabledLanguages",value:function(){var e,t=null!==(e=this.configs.getConfigValue("languages"))&&void 0!==e?e:{},n=this.getDisabledLanguages(),i={};return Object.keys(t).filter(function(e){return!n.includes(e)}).forEach(function(e){i[e]=t[e]}),i}},{key:"getFirstLanguage",value:function(){var e,t,n=null!==(e=this.configs.getConfigValue("languages"))&&void 0!==e?e:{};return null!==(t=Object.keys(n).sort()[0])&&void 0!==t?t:""}},{key:"load",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={};return t.forEach(function(t){return r[t]=n.getStrings(e,t,i)}),(0,x.forkJoin)(r).pipe((0,M.first)(),(0,M.tap)(function(i){var r=Object.assign(Object.assign({},Mv),{languageKey:e});t.forEach(function(e){r[e]=i[e],Fv[e]=!0}),n.updateState(r)}))}},{key:"areAllCached",value:function(){var e,t,n,i=!0;return i=(i=(i=i&&!(0,w.emptyObject)(null!==(e=null==Lv?void 0:Lv.appStrings)&&void 0!==e?e:{}))&&!(0,w.emptyObject)(null!==(t=null==Lv?void 0:Lv.appListStrings)&&void 0!==t?t:{}))&&!(0,w.emptyObject)(null!==(n=null==Lv?void 0:Lv.modStrings)&&void 0!==n?n:{})}},{key:"set",value:function(e,t){var n=Object.assign(Object.assign({},Mv),{languageKey:e});t.appStrings&&!(0,w.emptyObject)(t.appStrings)&&(Lv.appStrings[e]=(0,x.of)(t.appStrings).pipe((0,M.shareReplay)(1)),n.appStrings=t.appStrings,Fv.appStrings=!0),t.appListStrings&&!(0,w.emptyObject)(t.appListStrings)&&(Lv.appListStrings[e]=(0,x.of)(t.appListStrings).pipe((0,M.shareReplay)(1)),n.appListStrings=t.appListStrings,Fv.appListStrings=!0),t.modStrings&&!(0,w.emptyObject)(t.modStrings)&&(Lv.modStrings[e]=(0,x.of)(t.modStrings).pipe((0,M.shareReplay)(1)),n.modStrings=t.modStrings,Fv.modStrings=!0),this.updateState(n)}},{key:"setSessionLanguage",value:function(){return this.processService.submit("set-session-language",{language:Mv.languageKey}).pipe((0,M.take)(1))}},{key:"updateState",value:function(e){this.store.next(Mv=e)}},{key:"getStrings",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Lv[t];return i[e]&&!1===n||(i[e]=this[this.config[t].fetch](e).pipe((0,M.shareReplay)(1))),i[e]}},{key:"fetchAppStrings",value:function(e){return this.recordGQL.fetch(this.config.appStrings.resourceName,"/api/app-strings/".concat(e),this.config.appStrings.metadata).pipe((0,M.map)(function(e){var t=e.data,n={};return t.appStrings&&(n=t.appStrings.items),n}))}},{key:"fetchAppListStrings",value:function(e){return this.recordGQL.fetch(this.config.appListStrings.resourceName,"/api/app-list-strings/".concat(e),this.config.appListStrings.metadata).pipe((0,M.map)(function(e){var t=e.data,n={};return t.appListStrings&&(n=t.appListStrings.items),n}))}},{key:"fetchModStrings",value:function(e){return this.recordGQL.fetch(this.config.modStrings.resourceName,"/api/mod-strings/".concat(e),this.config.modStrings.metadata).pipe((0,M.map)(function(e){var t=e.data,n={};return t.modStrings&&(n=t.modStrings.items),n}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(qm),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(nh),k.\u0275\u0275inject(th),k.\u0275\u0275inject(Gm))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(qm),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(nh),k.\u0275\u0275inject(th),k.\u0275\u0275inject(Gm))},token:e,providedIn:"root"}),e}(),Dv=function(){var e=function(){function e(t,n,i){I(this,e),this.languages=t,this.screenSize=n,this.systemConfigStore=i,this.klass="",this.buttonClass="btn btn-sm",this.buttonGroupClass="",this.actionLimitConfig="recordview_actions_limits",this.configState=new x.BehaviorSubject({buttons:[]}),this.config$=this.configState.asObservable(),this.inlineConfirmationEnabled=!1,this.confirmationLabel="",this.confirmationDynamicLabel="",this.inlineCancelButton=null,this.inlineConfirmButton=null,this.loading=!1,this.buttonGroupDropdownClass="dropdown-button-secondary",this.screen=Zm.Medium,this.defaultBreakpoint=3}return j(e,[{key:"ngOnInit",value:function(){var e=this;this.vm$=(0,x.combineLatest)([this.config.getActions(),this.screenSize.screenSize$,this.languages.vm$]).pipe((0,M.map)(function(t){var n=v(t,3),i=n[0],r=n[1],o=n[2];return r&&(e.screen=r),e.configState.next(e.getButtonGroupConfig(i)),{actions:i,screenSize:r,languages:o}}))}},{key:"isXSmallScreen",value:function(){return this.screen===Zm.XSmall}},{key:"getButtonGroupConfig",value:function(e){var t,n=this,i=[],r=[];e.forEach(function(e){var t=n.buildButton(e);e.params&&e.params.expanded?i.push(t):r.push(t)});var o=null===(t=this.config.collapseButtons)||void 0===t||t,a=e.length;!0===o&&(a=this.getBreakpoint(),i.length<a&&(a=i.length));var s=i.concat(r);return{buttonKlass:[this.buttonClass],dropdownLabel:this.languages.getAppString("LBL_ACTIONS")||"",breakpoint:a,dropdownOptions:{placement:["bottom-right"],wrapperKlass:[this.buttonGroupDropdownClass]},buttons:s}}},{key:"getBreakpoint",value:function(){var e=this.systemConfigStore.getConfigValue(this.actionLimitConfig);return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}},{key:"buildButton",value:function(e){var t,n,i,r,o,a=this,s={label:e.label||"",labelModule:null!==(n=null===(t=null==this?void 0:this.actionContext)||void 0===t?void 0:t.module)&&void 0!==n?n:"",labelKey:e.labelKey||"",klass:this.buttonClass,titleKey:e.titleKey||"",onClick:function(){var t,n;null!==(n=null===(t=null==e?void 0:e.params)||void 0===t?void 0:t.inlineConfirmation)&&void 0!==n&&n?(a.triggerTemporaryLoading(),a.initInlineConfirmation(e,function(){a.config.runAction(e,a.actionContext)})):a.config.runAction(e,a.actionContext)}};s.label||(s.labelKey=null!==(i=e.labelKey)&&void 0!==i?i:"");var l=null!==(o=null===(r=null==e?void 0:e.params)||void 0===r?void 0:r.debounceClick)&&void 0!==o?o:null;return s.debounceClick=!0,(0,w.isFalse)(l)&&(s.debounceClick=!1),e.icon&&(s.icon=e.icon),e.status&&w.Button.appendClasses(s,[e.status]),e.klass&&w.Button.appendClasses(s,e.klass),s}},{key:"triggerTemporaryLoading",value:function(){var e,t=this;this.loading=!0;var n=null!==(e=parseInt(this.systemConfigStore.getUi("inline_confirmation_loading_delay")))&&void 0!==e?e:200;setTimeout(function(){t.loading=!1},n)}},{key:"initInlineConfirmation",value:function(e,t){var n,i,r,o,a,s,l,u,c,d,f=null!==(r=null===(i=null===(n=null==e?void 0:e.params)||void 0===n?void 0:n.inlineConfirmationButtons)||void 0===i?void 0:i.cancel)&&void 0!==r?r:{},p=null!==(s=null===(a=null===(o=null==e?void 0:e.params)||void 0===o?void 0:o.inlineConfirmationButtons)||void 0===a?void 0:a.confirm)&&void 0!==s?s:{};this.confirmationLabel=null!==(u=null===(l=null==e?void 0:e.params)||void 0===l?void 0:l.confirmationLabel)&&void 0!==u?u:"",this.confirmationDynamicLabel=null!==(d=null===(c=null==e?void 0:e.params)||void 0===c?void 0:c.confirmationDynamicLabel)&&void 0!==d?d:"",this.inlineCancelButton=this.buildInlineCancelButton(f),this.inlineConfirmButton=this.buildInlineConfirmButton(p,t),this.inlineConfirmationEnabled=!0}},{key:"buildInlineCancelButton",value:function(e){var t=this,n=Object.assign(Object.assign({},{labelKey:"LBL_NO",klass:"btn btn-sm p-0 m-0 btn-link border-0 line-height-initial",debounceClick:!0}),null!=e?e:{});return n.onClick=function(){t.triggerTemporaryLoading(),t.resetInlineConfirmation()},n}},{key:"buildInlineConfirmButton",value:function(e,t){var n=this,i=Object.assign(Object.assign({},{labelKey:"LBL_YES",klass:"btn btn-sm p-0 m-0 btn-link border-0 line-height-initial",debounceClick:!0}),null!=e?e:{});return i.onClick=function(){n.triggerTemporaryLoading(),t(),n.resetInlineConfirmation()},i}},{key:"resetInlineConfirmation",value:function(){this.inlineConfirmationEnabled=!1,this.confirmationDynamicLabel="",this.confirmationLabel="",this.inlineConfirmButton=null,this.inlineCancelButton=null}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(Hm),k.\u0275\u0275directiveInject(Gm))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-action-group-menu"]],inputs:{klass:"klass",buttonClass:"buttonClass",buttonGroupClass:"buttonGroupClass",actionLimitConfig:"actionLimitConfig",actionContext:"actionContext",config:"config"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"config$","klass",4,"ngIf"],[3,"config$","klass"],[1,"d-flex","align-items-start","justify-content-end","inline-confirmation"],["class","pl-1 inline-confirmation-label",4,"ngIf"],["class","pl-1 inline-confirmation-button",4,"ngIf"],[1,"pl-1","inline-confirmation-label"],[3,"labelKey"],[3,"labelKey","module","fields"],[1,"pl-1","inline-confirmation-button"],[3,"config"],["klass","inline-spinner-md"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,So,5,6,"ng-container",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:function(){return[B.NgIf,Wv,zv,Yv,Hv,Jv]},pipes:function(){return[B.AsyncPipe]},encapsulation:2}),e}(),Av=function(){var e=function(){function e(t){I(this,e),this.language=t,this.disabled=!1,this.autoClose=!0}return j(e,[{key:"isDropdown",value:function(e){return!!e&&"items"in e}},{key:"click",value:function(e,t){e(),t.close()}},{key:"close",value:function(e){e.close()}},{key:"ngOnInit",value:function(){this.config&&!this.config.placement&&(this.config.placement=["bottom-left","bottom-right","top-left","top-right"])}},{key:"getPlacement",value:function(){return this.config&&!this.config.placement?["bottom-left","bottom-right","top-left","top-right"]:this.config.placement}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-dropdown-button"]],inputs:{disabled:"disabled",autoClose:"autoClose",config:"config"},ngContentSelectors:Lo,decls:9,vars:10,consts:[["ngbDropdown","",1,"d-inline-block","dropdown-button",3,"autoClose","placement","ngClass"],["dropDown","ngbDropdown"],["ngbDropdownToggle","",3,"disabled","ngClass","title"],[3,"image","klass",4,"ngIf"],[4,"ngIf"],["ngbDropdownMenu",""],[4,"ngFor","ngForOf"],[3,"image","klass"],[3,"labelKey"],["ngbDropdownItem","",3,"ngClass","click"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],[3,"labelKey","module",4,"ngIf"],[3,"labelKey","module"],[3,"item","item-clicked"]],template:function(e,t){1&e&&(k.\u0275\u0275projectionDef(),k.\u0275\u0275elementStart(0,"div",0,1),k.\u0275\u0275elementStart(2,"button",2),k.\u0275\u0275template(3,Co,1,2,"scrm-image",3),k.\u0275\u0275template(4,ko,2,1,"ng-container",4),k.\u0275\u0275template(5,wo,2,1,"ng-container",4),k.\u0275\u0275projection(6),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(7,"div",5),k.\u0275\u0275template(8,Fo,3,2,"ng-container",6),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275property("autoClose",t.autoClose)("placement",t.getPlacement())("ngClass",t.config.wrapperKlass),k.\u0275\u0275advance(2),k.\u0275\u0275property("disabled",t.disabled)("ngClass",t.config.klass)("title",t.language.getFieldLabel(t.config.titleKey)||""),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.config.icon),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.config.label),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!t.config.label&&t.config.labelKey),k.\u0275\u0275advance(3),k.\u0275\u0275property("ngForOf",t.config.items))},directives:function(){return[Z.NgbDropdown,B.NgClass,Z.NgbDropdownToggle,B.NgIf,Z.NgbDropdownMenu,B.NgForOf,Vv,zv,Z.NgbDropdownItem,Nv]},encapsulation:2}),e}(),Nv=function(){var e=function(){function e(){I(this,e),this.itemClicked=new k.EventEmitter,this.isCollapsed=!0}return j(e,[{key:"ngOnInit",value:function(){}},{key:"click",value:function(e){e&&e.onClick&&e.onClick(),this.itemClicked.emit(!0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-dropdown-submenu"]],inputs:{item:"item"},outputs:{itemClicked:"item-clicked"},ngContentSelectors:Lo,decls:8,vars:3,consts:[[1,"dropdown-submenu-items-container"],[1,"dropdown-submenu-parent-button","dropdown-item","dropdown-toggle",3,"click"],[3,"image",4,"ngIf"],[3,"ngbCollapse",4,"ngIf"],[1,"dropdown-submenu-extra"],[3,"image"],[3,"ngbCollapse"],[1,"dropdown-submenu","pl-2","mb-1"],["class","dropdown-submenu-item dropdown-item",4,"ngFor","ngForOf"],[1,"dropdown-submenu-item","dropdown-item"],[1,"action-link","dropdown-submenu-item-link",3,"ngClass","click"]],template:function(e,t){1&e&&(k.\u0275\u0275projectionDef(),k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275elementStart(1,"div",0),k.\u0275\u0275elementStart(2,"a",1),k.\u0275\u0275listener("click",function(){return t.isCollapsed=!t.isCollapsed}),k.\u0275\u0275template(3,Oo,1,1,"scrm-image",2),k.\u0275\u0275text(4),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(5,No,3,2,"div",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(6,"div",4),k.\u0275\u0275projection(7),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(3),k.\u0275\u0275property("ngIf",t.item&&t.item.icon),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",t.item&&t.item.label," "),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.item&&t.item.items.length))},directives:function(){return[B.NgIf,Vv,Z.NgbCollapse,B.NgForOf,B.NgClass]},encapsulation:2}),e}(),Rv={theme:null,images:{}},Tv=(0,w.deepClone)(Rv),Pv=null,Bv=null,$v=function(){var e=function(){function e(t,n,i){I(this,e),this.recordGQL=t,this.appStateStore=n,this.iconRegistry=i,this.store=new x.BehaviorSubject(Tv),this.state$=this.store.asObservable(),this.resourceName="themeImages",this.frontendName="theme-images",this.fieldsMetadata={fields:["id","_id","items"]},this.images$=this.state$.pipe((0,M.map)(function(e){return e.images}),(0,M.distinctUntilChanged)())}return j(e,[{key:"clear",value:function(){Pv=null,Bv=null,this.updateState((0,w.deepClone)(Rv))}},{key:"clearAuthBased",value:function(){}},{key:"changeTheme",value:function(e){var t=this;this.appStateStore.updateLoading("change-theme",!0),this.load(e).pipe((0,M.tap)(function(){return t.appStateStore.updateLoading("change-theme",!1)})).subscribe()}},{key:"getTheme",value:function(){return Tv.theme}},{key:"load",value:function(e){var t=this;return this.getThemeImages(e).pipe((0,M.tap)(function(n){t.updateState(Object.assign(Object.assign({},Tv),{images:n,theme:e}))}))}},{key:"isCached",value:function(){return null!==Bv}},{key:"set",value:function(e,t){Pv=e,this.registerSvgs(t),Bv=(0,x.of)(t).pipe((0,M.shareReplay)(1)),this.updateState(Object.assign(Object.assign({},Tv),{images:t}))}},{key:"updateState",value:function(e){this.store.next(Tv=e)}},{key:"getThemeImages",value:function(e){return(Pv!==e||null===Bv)&&(Pv=e,Bv=this.fetch(e).pipe((0,M.shareReplay)(1))),Bv}},{key:"registerSvgs",value:function(e){var t=this;Object.keys(e).forEach(function(n){var i,r,o=e[n],a=null!==(i=o.content)&&void 0!==i?i:"",s=null!==(r=o.name)&&void 0!==r?r:"";""===a||""===s||t.iconRegistry.addSvg(s,a)})}},{key:"fetch",value:function(e){var t=this;return this.recordGQL.fetch(this.resourceName,"/api/".concat(this.frontendName,"/").concat(e),this.fieldsMetadata).pipe((0,M.map)(function(e){var n=e.data,i={};if(n&&n.themeImages&&(i=n.themeImages.items),!(0,w.emptyObject)(i)){var r={};return t.registerSvgs(i),Object.keys(i).forEach(function(e){var t,n=null!==(t=i[e])&&void 0!==t?t:{},o=(0,G._T)(n,["content"]);r[e]=o}),r}return i}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(qm),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(H.SvgIconRegistryService))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(qm),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(H.SvgIconRegistryService))},token:e,providedIn:"root"}),e}(),Vv=function(){var e=function(){function e(t){I(this,e),this.themeImagesStore=t,this.klass="",this.title="",this.wrapperClass="sicon",this.images$=this.themeImagesStore.images$,this.vm$=(0,x.combineLatest)([this.images$]).pipe((0,M.map)(function(e){return{images:v(e,1)[0]}}))}return j(e,[{key:"getImage",value:function(e,t){if(!e||!e.images||Object.keys(e.images).length<1)return null;var n=e.images[t];return n||console.warn("Image with name '".concat(t,"' not found")),n}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject($v))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-image"]],inputs:{klass:"klass",title:"title",wrapperClass:"wrapperClass",image:"image"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"svgClass","title","class","name",4,"ngIf"],["alt","",3,"src","class","title",4,"ngIf"],[3,"svgClass","title","name"],["alt","",3,"src","title"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Bo,2,1,"ng-container",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,H.SvgIconComponent],pipes:[B.AsyncPipe],encapsulation:2}),e}(),Uv=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,H.AngularSvgIconModule]]}),e}(),Kv=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Uv,Z.NgbModule]]}),e}(),zv=function(){var e=function e(t){I(this,e),this.language=t,this.labelKey="",this.module=null,this.listKey=null,this.languages$=this.language.vm$};return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-label"]],inputs:{labelKey:"labelKey",module:"module",listKey:"listKey"},decls:2,vars:3,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Uo,3,2,"ng-container",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.languages$))},directives:[B.NgIf],pipes:[B.AsyncPipe],encapsulation:2}),e}(),Gv=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),Zv=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Z.NgbDropdownModule,Uv,Kv,Gv,Z.NgbTooltipModule]]}),e}(),Hv=function(){var e=function(){function e(t){I(this,e),this.language=t,this.clickBuffer=new x.Subject,this.clickBuffer$=this.clickBuffer.asObservable(),this.subs=[]}return j(e,[{key:"ngOnInit",value:function(){var e,t,n,i,r=this,o=null!==(t=null===(e=this.config)||void 0===e?void 0:e.debounceClick)&&void 0!==t?t:null;this.clickCallBack=null!==(i=null===(n=this.config)||void 0===n?void 0:n.onClick)&&void 0!==i?i:null;var a=this.getDebounceTime();o&&this.clickCallBack&&this.subs.push(this.clickBuffer$.pipe((0,M.debounceTime)(a)).subscribe(function(e){r.clickCallBack(null!=e?e:null)}))}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"runClick",value:function(e){var t,n,i=null!==(n=null===(t=this.config)||void 0===t?void 0:t.debounceClick)&&void 0!==n?n:null;if(this.clickCallBack){if(i&&this.clickCallBack)return void this.clickBuffer.next(null!=e?e:null);this.clickCallBack(null!=e?e:null)}}},{key:"getDebounceTime",value:function(){var e,t,n=null!==(t=null===(e=this.config)||void 0===e?void 0:e.clickDebounceTime)&&void 0!==t?t:625;return isFinite(n)||(n=625),n}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-button"]],inputs:{config:"config"},ngContentSelectors:Lo,decls:5,vars:5,consts:[["type","button",3,"ngClass","title","click"],[3,"image","klass","title",4,"ngIf"],[4,"ngIf"],[3,"labelKey","module",4,"ngIf"],[3,"image","klass","title"],[3,"labelKey","module"]],template:function(e,t){1&e&&(k.\u0275\u0275projectionDef(),k.\u0275\u0275elementStart(0,"button",0),k.\u0275\u0275listener("click",function(){return t.runClick()}),k.\u0275\u0275template(1,Ko,1,3,"scrm-image",1),k.\u0275\u0275template(2,zo,2,1,"ng-container",2),k.\u0275\u0275template(3,Go,1,2,"scrm-label",3),k.\u0275\u0275projection(4),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275property("ngClass",t.config.klass)("title",t.language.getFieldLabel(t.config.titleKey)||""),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.config.icon),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!t.config.labelKey),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.config.labelKey))},directives:[B.NgClass,B.NgIf,Vv,zv],encapsulation:2}),e}(),qv=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Uv,Gv,Z.NgbTooltipModule]]}),e}(),Wv=function(){var e=function(){function e(){I(this,e),this.klass="",this.buttons={expanded:[],collapsed:[]}}return j(e,[{key:"ngOnInit",value:function(){var e=this;this.sub=this.config$.subscribe(function(t){e.internalConfig=Object.assign({},t),e.splitButtons()})}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe()}},{key:"isDropdown",value:function(e){return!!e&&"items"in e}},{key:"buildDropdownConfig",value:function(){var e,t,n=["button-group-button"];this.internalConfig.buttonKlass&&this.internalConfig.buttonKlass.length>0&&(n=n.concat(this.internalConfig.buttonKlass)),(null===(t=null===(e=null==this?void 0:this.internalConfig)||void 0===e?void 0:e.dropdownOptions)||void 0===t?void 0:t.klass)&&(n=n.concat(this.internalConfig.dropdownOptions.klass));var i=["button-group-dropdown"],r=this.internalConfig.dropdownOptions,o=r&&r.wrapperKlass;o&&o.length>0&&(i=i.concat(o)),this.dropdownConfig={label:this.internalConfig.dropdownLabel,klass:S(n),wrapperKlass:i,items:this.buttons.collapsed},this.internalConfig.dropdownOptions&&this.internalConfig.dropdownOptions.placement&&(this.dropdownConfig.placement=this.internalConfig.dropdownOptions.placement),this.internalConfig.dropdownOptions&&this.internalConfig.dropdownOptions.icon&&(this.dropdownConfig.icon=this.internalConfig.dropdownOptions.icon)}},{key:"getBreakpoint",value:function(){return this.internalConfig.breakpoint||0===this.internalConfig.breakpoint?this.internalConfig.breakpoint:4}},{key:"splitButtons",value:function(){var e=this;if(this.buttons.expanded=[],this.buttons.collapsed=[],this.internalConfig.buttons&&!(this.internalConfig.buttons.length<1)){var t=0;this.internalConfig.buttons.forEach(function(n){if(n){if(t<e.getBreakpoint()){var i=["button-group-button"];e.internalConfig.buttonKlass&&e.internalConfig.buttonKlass.length>0&&(i=i.concat(e.internalConfig.buttonKlass));var r=Object.assign({},n);w.Button.appendClasses(r,S(i)),e.buttons.expanded.push(r)}else e.buttons.collapsed.push(Object.assign({},n));t++}}),this.buildDropdownConfig()}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-button-group"]],inputs:{klass:"klass",config$:"config$"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[4,"ngFor","ngForOf"],["autoClose","outside",3,"config",4,"ngIf"],[3,"config",4,"ngIf"],[3,"config"],["autoClose","outside",3,"config"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,Qo,3,4,"div",0),2&e&&k.\u0275\u0275property("ngIf",t.config$)},directives:[B.NgIf,B.NgForOf,Hv,Av],encapsulation:2}),e}(),Qv=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,qv,Zv]]}),e}(),Yv=function(){var e=function(){function e(t,n){I(this,e),this.dynamicLabels=t,this.language=n,this.template="",this.labelKey="",this.context={},this.fields={},this.module=null,this.parsedLabel=""}return j(e,[{key:"ngOnInit",value:function(){var e=this;this.vm$=this.language.vm$.pipe((0,M.tap)(function(){e.labelKey&&(e.template=e.language.getFieldLabel(e.labelKey,e.module)),e.parseLabel()}))}},{key:"ngOnChanges",value:function(e){(e.template||e.context||e.labelKey||e.fields)&&this.parseLabel()}},{key:"parseLabel",value:function(){this.parsedLabel=this.dynamicLabels.parse(this.template,this.context,this.fields)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(kv),k.\u0275\u0275directiveInject(Ov))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-dynamic-label"]],inputs:{template:"template",labelKey:"labelKey",context:"context",fields:"fields",module:"module"},features:[k.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[[4,"ngIf"],[1,"dynamic-label"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Yo,3,1,"ng-container",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf],pipes:[B.AsyncPipe],encapsulation:2}),e}(),Xv=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),Jv=function(){var e=function(){function e(){I(this,e),this.klass=""}return j(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-inline-loading-spinner"]],inputs:{klass:"klass"},decls:4,vars:3,consts:[[1,"bounce1"],[1,"bounce2"],[1,"bounce3"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275element(1,"div",0),k.\u0275\u0275element(2,"div",1),k.\u0275\u0275element(3,"div",2),k.\u0275\u0275elementEnd()),2&e&&k.\u0275\u0275classMapInterpolate1("inline-spinner ",t.klass,"")},styles:[".inline-spinner[_ngcontent-%COMP%]{text-align:center}.inline-spinner[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:100%;display:inline-block;-webkit-animation:sk-bouncedelay 1.4s infinite ease-in-out both;animation:sk-bouncedelay 1.4s infinite ease-in-out both}.inline-spinner[_ngcontent-%COMP%]   .bounce1[_ngcontent-%COMP%]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.inline-spinner[_ngcontent-%COMP%]   .bounce2[_ngcontent-%COMP%]{-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes sk-bouncedelay{0%,80%,to{-webkit-transform:scale(0)}40%{-webkit-transform:scale(1)}}@keyframes sk-bouncedelay{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}"]}),e}(),eg=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),tg=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Uv,qv,Qv,Gv,Xv,eg]]}),e}(),ng=function(){var e=function(){function e(t){I(this,e),this.languageStore=t,this.subs=[],this.status=w.SelectionStatus.NONE,this.count=0,this.SelectionStatus=w.SelectionStatus}return j(e,[{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()}),this.subs=[],this.count=0,this.status=w.SelectionStatus.NONE}},{key:"ngOnInit",value:function(){var e=this;this.subs=[],this.subs.push(this.selectionSource.getSelectionStatus().subscribe(function(t){return e.status=t})),this.subs.push(this.selectionSource.getSelectedCount().subscribe(function(t){return e.count=t})),this.subs.push(this.actionSource.getBulkActions().subscribe(function(t){var n={labelKey:"LBL_BULK_ACTION_BUTTON_LABEL",klass:["bulk-action-button","btn","btn-sm"],wrapperKlass:["bulk-action-group","float-left"],items:[]};Object.keys(t).forEach(function(i){var r,o=t[i];n.items.push({labelKey:null!==(r=o.labelKey)&&void 0!==r?r:"",klass:["".concat(i,"-bulk-action")],onClick:function(){e.actionSource.executeBulkAction(o.key)}})}),e.dropdownConfig=n}))}},{key:"selectPage",value:function(){this.selectionSource.updateSelection(w.SelectionStatus.PAGE)}},{key:"selectAll",value:function(){this.selectionSource.updateSelection(w.SelectionStatus.ALL)}},{key:"deselectAll",value:function(){this.selectionSource.updateSelection(w.SelectionStatus.NONE)}},{key:"toggleSelection",value:function(e){this.selectionSource.updateSelection(e!==w.SelectionStatus.ALL?w.SelectionStatus.ALL:w.SelectionStatus.NONE)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-bulk-action-menu"]],inputs:{selectionSource:"selectionSource",actionSource:"actionSource"},decls:17,vars:6,consts:[[1,"bulk-action","float-left"],["ngbDropdown","",1,"dropdown","select-action-group","float-left"],["type","button","ngbDropdownToggle","","aria-haspopup","true","aria-expanded","false","aria-hidden","true","aria-label","Select Action Menu",1,"bulk-action-button","dropdown-toggle","btn","btn-sm"],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","indeterminate","change"],[1,"checkmark"],[1,"bulk-action-selected-number"],[4,"ngIf"],["ngbDropdownMenu","","aria-hidden","true",1,"dropdown-menu"],[1,"dropdown-item","select-all",3,"click"],["labelKey","LBL_LISTVIEW_OPTION_ENTIRE"],[1,"dropdown-item","select-page",3,"click"],["labelKey","LBL_LISTVIEW_OPTION_CURRENT"],[1,"dropdown-item","deselect-all",3,"click"],["labelKey","LBL_LISTVIEW_NONE"],[3,"disabled","config"],["labelKey","LBL_LISTVIEW_SELECTED_OBJECTS"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275elementStart(2,"button",2),k.\u0275\u0275elementStart(3,"label",3),k.\u0275\u0275elementStart(4,"input",4),k.\u0275\u0275listener("change",function(){return t.toggleSelection(t.status)}),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(5,"span",5),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(6,"span",6),k.\u0275\u0275template(7,Xo,2,0,"ng-container",7),k.\u0275\u0275text(8),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(9,"div",8),k.\u0275\u0275elementStart(10,"a",9),k.\u0275\u0275listener("click",function(){return t.selectAll()}),k.\u0275\u0275element(11,"scrm-label",10),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(12,"a",11),k.\u0275\u0275listener("click",function(){return t.selectPage()}),k.\u0275\u0275element(13,"scrm-label",12),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(14,"a",13),k.\u0275\u0275listener("click",function(){return t.deselectAll()}),k.\u0275\u0275element(15,"scrm-label",14),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(16,"scrm-dropdown-button",15),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(4),k.\u0275\u0275property("checked","ALL"===t.status)("indeterminate","SOME"===t.status||"PAGE"===t.status),k.\u0275\u0275advance(3),k.\u0275\u0275property("ngIf",t.count>0),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",t.count>0?t.count:""," "),k.\u0275\u0275advance(8),k.\u0275\u0275property("disabled",t.count<1)("config",t.dropdownConfig))},directives:[Z.NgbDropdown,Z.NgbDropdownToggle,B.NgIf,Z.NgbDropdownMenu,zv,Av],encapsulation:2}),e}(),ig=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Z.NgbModule,Zv,Gv]]}),e}(),rg=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"addOnClickPartial",value:function(e,t){var n=this,i=Object.assign({},e);if(e&&"items"in i){var r=i.items;return i.items=[],r.forEach(function(e){i.items.push(n.addOnClickPartial(e,t))}),i}return i.onClick=i.onClick&&(0,q.Z)(i.onClick,t),i}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),og=function(){var e=function(){function e(t){I(this,e),this.elementRef=t,this.height=300,this.view=[300,this.height]}return j(e,[{key:"onResize",value:function(){this.calculateView()}},{key:"calculateView",value:function(){var e,t=this.elementRef&&this.elementRef.nativeElement||{},n=t.parentElement&&t.parentElement.parentElement||{},i=n&&n.offsetWidth||0;i>0?e=i:(e=.7*window.innerWidth,window.innerWidth>990&&(e=.23*window.innerWidth)),this.view=[e,this.height]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(k.ElementRef))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],inputs:{dataSource:"dataSource"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),ag=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),sg=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this,i)).language=e,r.elementRef=i,r.height=700,r.view=[300,r.height],r.subs=[],r}return j(n,[{key:"ngOnInit",value:function(){var e=this;this.dataSource.options.height&&(this.height=this.dataSource.options.height),this.calculateView(),this.subs.push(this.dataSource.getResults().subscribe(function(t){e.parseResults(t),e.calculateHeightBasedOnResults(),e.calculateView()}))}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"scheme",get:function(){return this.dataSource.options.scheme||"picnic"}},{key:"label",get:function(){return this.dataSource.options.label||""}},{key:"onResize",value:function(){this.calculateHeightBasedOnResults(),this.calculateView()}},{key:"calculateHeightBasedOnResults",value:function(){if(this.results&&this.results.length){var e=Math.floor(this.view[0]/170);this.height=200*Math.floor(this.results.length/e)}else this.height=50}},{key:"parseResults",value:function(e){var t=this;this.results=[],e.singleSeries&&e.singleSeries.length&&e.singleSeries.forEach(function(e){var n=parseFloat(""+e.value);t.results.push(n?{name:e.name,value:n}:e)})}}]),n}(og);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(k.ElementRef))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-pie-grid-chart"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],[3,"animations","view","scheme","label","results","resize",4,"ngIf"],["labelKey","LBL_NO_DATA"],[3,"animations","view","scheme","label","results","resize"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Jo,1,0,"scrm-chart-message-area",0),k.\u0275\u0275template(1,ea,1,5,"ngx-charts-pie-grid",1)),2&e&&(k.\u0275\u0275property("ngIf",!t.results||!t.results.length||t.results.length<1),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.results&&t.results.length>0))},directives:function(){return[B.NgIf,ug,W.PieGridComponent]},encapsulation:2}),e}(),lg=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this,e)).elementRef=e,i.subs=[],i}return j(n,[{key:"ngOnInit",value:function(){var e=this;this.dataSource.options.height&&(this.height=this.dataSource.options.height),this.calculateView(),this.subs.push(this.dataSource.getResults().subscribe(function(t){e.results=t.singleSeries}))}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"scheme",get:function(){return this.dataSource.options.scheme||"picnic"}},{key:"gradient",get:function(){return this.dataSource.options.gradient||!1}},{key:"xAxis",get:function(){return this.dataSource.options.xAxis||!1}},{key:"yAxis",get:function(){return!(0,w.isFalse)(this.dataSource.options.yAxis)}},{key:"legend",get:function(){return!(0,w.isFalse)(this.dataSource.options.legend)}},{key:"showXAxisLabel",get:function(){return this.dataSource.options.showXAxisLabel||!1}},{key:"showYAxisLabel",get:function(){return this.dataSource.options.showYAxisLabel||!1}},{key:"xAxisLabel",get:function(){return this.dataSource.options.xAxisLabel||""}},{key:"yAxisLabel",get:function(){return this.dataSource.options.yAxisLabel||""}},{key:"yAxisTickFormatting",get:function(){return this.dataSource.options.yAxisTickFormatting?this.dataSource.tickFormatting:null}},{key:"formatTooltipValue",value:function(e){return this.dataSource&&this.dataSource.tooltipFormatting?this.dataSource.tooltipFormatting(e):e}}]),n}(og);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(k.ElementRef))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-vertical-bar-chart"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],["class","vertical-bar-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","legendPosition","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","resize",4,"ngIf"],["labelKey","LBL_NO_DATA"],[1,"vertical-bar-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","legendPosition","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","yAxisTickFormatting","resize"],["tooltipTemplate",""]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,ta,1,0,"scrm-chart-message-area",0),k.\u0275\u0275template(1,ia,3,14,"ngx-charts-bar-vertical",1)),2&e&&(k.\u0275\u0275property("ngIf",!t.results||!t.results.length||t.results.length<1),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.results&&t.results.length>0))},directives:function(){return[B.NgIf,ug,W.BarVerticalComponent]},encapsulation:2}),e}(),ug=function(){var e=function e(t){I(this,e),this.language=t,this.labelKey=""};return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-chart-message-area"]],inputs:{labelKey:"labelKey"},decls:2,vars:1,consts:[[1,"d-flex","mb-4","mt-4","justify-content-center"],["class","lead",4,"ngIf"],[1,"lead"],[3,"labelKey"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275template(1,ra,2,1,"div",1),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.labelKey))},directives:[B.NgIf,zv],encapsulation:2}),e}(),cg=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Gv]]}),e}(),dg=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,W.NgxChartsModule,cg]]}),e}(),fg=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,W.NgxChartsModule,cg]]}),e}(),pg=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this,e)).elementRef=e,i.subs=[],i}return j(n,[{key:"ngOnInit",value:function(){var e=this;this.dataSource.options.height&&(this.height=this.dataSource.options.height),this.calculateView(),this.subs.push(this.dataSource.getResults().subscribe(function(t){e.results=t.multiSeries})),this.scheme=this.getScheme(),this.gradient=this.getGradient(),this.xAxis=this.getXAxis(),this.yAxis=this.getYAxis(),this.legend=this.getLegend(),this.xScaleMin=this.getXScaleMin(),this.xScaleMax=this.getXScaleMax(),this.xAxisTicks=this.getXAxisTicks(),this.showXAxisLabel=this.getShowXAxisLabel(),this.showYAxisLabel=this.getShowYAxisLabel(),this.xAxisLabel=this.getXAxisLabel(),this.yAxisLabel=this.getYAxisLabel(),this.yAxisTickFormatting=this.getYAxisTickFormatting(),this.xAxisTickFormatting=this.getXAxisTickFormatting(),this.tooltipDisabled=this.getTooltipDisabled()}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"getScheme",value:function(){return this.dataSource.options.scheme||"picnic"}},{key:"getGradient",value:function(){return this.dataSource.options.gradient||!1}},{key:"getXAxis",value:function(){return!(0,w.isFalse)(this.dataSource.options.xAxis)}},{key:"getYAxis",value:function(){return!(0,w.isFalse)(this.dataSource.options.yAxis)}},{key:"getLegend",value:function(){return!(0,w.isFalse)(this.dataSource.options.legend)}},{key:"getXScaleMin",value:function(){return this.dataSource.options.xScaleMin||null}},{key:"getXScaleMax",value:function(){return this.dataSource.options.xScaleMax||null}},{key:"getXAxisTicks",value:function(){return this.dataSource.options.xAxisTicks||null}},{key:"getShowXAxisLabel",value:function(){return!(0,w.isFalse)(this.dataSource.options.showXAxisLabel)}},{key:"getShowYAxisLabel",value:function(){return this.dataSource.options.showYAxisLabel||!1}},{key:"getXAxisLabel",value:function(){return this.dataSource.options.xAxisLabel||""}},{key:"getYAxisLabel",value:function(){return this.dataSource.options.yAxisLabel||""}},{key:"getYAxisTickFormatting",value:function(){return this.dataSource.options.yAxisTickFormatting&&this.dataSource.tickFormatting||null}},{key:"getXAxisTickFormatting",value:function(){return this.dataSource.options.xAxisTickFormatting&&this.dataSource.tickFormatting||null}},{key:"getTooltipDisabled",value:function(){return this.dataSource.options.tooltipDisabled||!1}}]),n}(og);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(k.ElementRef))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-line-chart"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["labelKey","LBL_NO_DATA",4,"ngIf"],["class","line-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","xScaleMin","xScaleMax","xAxisTicks","showXAxisLabel","showYAxisLabel","xAxisLabel","legendPosition","autoScale","yAxisTickFormatting","xAxisTickFormatting","tooltipDisabled","yAxisLabel","resize",4,"ngIf"],["labelKey","LBL_NO_DATA"],[1,"line-chart",3,"animations","results","view","scheme","gradient","xAxis","yAxis","legend","xScaleMin","xScaleMax","xAxisTicks","showXAxisLabel","showYAxisLabel","xAxisLabel","legendPosition","autoScale","yAxisTickFormatting","xAxisTickFormatting","tooltipDisabled","yAxisLabel","resize"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,oa,1,0,"scrm-chart-message-area",0),k.\u0275\u0275template(1,aa,1,20,"ngx-charts-line-chart",1)),2&e&&(k.\u0275\u0275property("ngIf",!t.results||!t.results.length||t.results.length<1),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.results&&t.results.length>0))},directives:[B.NgIf,ug,W.LineChartComponent],encapsulation:2}),e}(),mg=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,W.NgxChartsModule,cg]]}),e}(),hg=[mg,fg,dg],vg={"line-chart":pg,"pie-grid":sg,"vertical-bar":lg},gg=function(){var e=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.call(this)}return j(n,[{key:"initDefault",value:function(){var e=this;Object.keys(vg).forEach(function(t){e.register("default",t,vg[t])})}}]),n}(w.BaseComponentRegistry);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),yg=function(){var e=function(){function e(t){I(this,e),this.registry=t,this.dataSource=null}return j(e,[{key:"chartType",get:function(){return this.registry.get("default",this.type)}},{key:"ngOnInit",value:function(){}},{key:"isConfigured",value:function(){return!!(this.type&&this.dataSource&&this.chartType)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(gg))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-chart"]],inputs:{dataSource:"dataSource",type:"type"},decls:2,vars:2,consts:[["labelKey","LBL_BAD_CONFIG",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],["labelKey","LBL_BAD_CONFIG"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,sa,1,0,"scrm-chart-message-area",0),k.\u0275\u0275template(1,ua,1,4,"ndc-dynamic",1)),2&e&&(k.\u0275\u0275property("ngIf",!t.isConfigured()),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.isConfigured()))},directives:[B.NgIf,ug,re,ne],encapsulation:2}),e}(),bg=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule].concat(hg,[oe,cg])]}),e}(),Sg=function(){var e=function(){function e(){I(this,e),this.buttonClasses=["close-button"]}return j(e,[{key:"getConfig",value:function(){var e=w.Button.fromButton(this.config);return e.addClasses(this.buttonClasses),e}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-close-button"]],inputs:{config:"config"},decls:1,vars:1,consts:[[3,"config",4,"ngIf"],[3,"config"],["aria-hidden","true"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,ca,3,1,"scrm-button",0),2&e&&k.\u0275\u0275property("ngIf",t.config)},directives:[B.NgIf,Hv],encapsulation:2}),e}(),Cg=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,qv]]}),e}(),kg=function(){var e=function(){function e(t,n,i){I(this,e),this.appState=t,this.languageStore=n,this.modal=i,this.titleKey="LBL_COLUMN_SELECTOR_MODAL_TITLE"}return j(e,[{key:"drop",value:function(e){e.previousContainer===e.container?Ne(e.container.data,e.previousIndex,e.currentIndex):function(e,t,n,i){var r=Re(n,e.length-1),o=Re(i,t.length);e.length&&t.splice(o,0,e.splice(r,1)[0])}(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex)}},{key:"getHeaderLabel",value:function(){return this.languageStore.getFieldLabel("LBL_COLUMN_SELECTOR_MODAL_TITLE")}},{key:"getColumnLabel",value:function(e){return this.languageStore.getFieldLabel(e,this.appState.getModule())}},{key:"ngOnInit",value:function(){var e=this;this.closeButtonIcon={klass:["btn","btn-outline-light","btn-sm"],onClick:function(){e.modal.close({type:"close-button"})}},this.closeButton={klass:["btn","modal-button-cancel"],labelKey:"LBL_COLUMN_SELECTOR_CLOSE_BUTTON",onClick:function(){e.modal.close({type:"close-button"})}},this.saveButton={klass:["btn","modal-button-save"],labelKey:"LBL_COLUMN_SELECTOR_SAVE_BUTTON",onClick:function(){e.modal.close({type:"close-button",displayed:e.displayed,hidden:e.hidden})}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(jv),k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(Z.NgbActiveModal))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-columnchooser"]],inputs:{displayed:"displayed",hidden:"hidden"},decls:19,vars:16,consts:[["klass","column-chooser-modal",3,"closable","close","title","titleKey"],["modal-body",""],[1,"d-flex","bd-highlight"],[1,"p-2","flex-fill","bd-highlight","column-chooser-container"],[1,"column-chooser-title"],["labelKey","LBL_COLUMN_SELECTOR_DISPLAYED_COLS"],["cdkDropList","",1,"column-chooser-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["displayedList","cdkDropList"],["class","column-chooser-item column-displayed","cdkDrag","",4,"ngFor","ngForOf"],["labelKey","LBL_COLUMN_SELECTOR_HIDDEN_COLS"],["hiddenList","cdkDropList"],["class","column-chooser-item column-hidden","cdkDrag","",4,"ngFor","ngForOf"],["modal-footer",""],[1,"modal-buttons"],["data-dismiss","modal",3,"config"],[3,"config"],["cdkDrag","",1,"column-chooser-item","column-displayed"],["cdkDrag","",1,"column-chooser-item","column-hidden"]],template:function(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"scrm-modal",0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275elementStart(2,"div",2),k.\u0275\u0275elementStart(3,"div",3),k.\u0275\u0275elementStart(4,"h2",4),k.\u0275\u0275element(5,"scrm-label",5),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(6,"div",6,7),k.\u0275\u0275listener("cdkDropListDropped",function(e){return t.drop(e)}),k.\u0275\u0275template(8,da,2,1,"div",8),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(9,"div",3),k.\u0275\u0275elementStart(10,"h2",4),k.\u0275\u0275element(11,"scrm-label",9),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(12,"div",6,10),k.\u0275\u0275listener("cdkDropListDropped",function(e){return t.drop(e)}),k.\u0275\u0275template(14,fa,2,1,"div",11),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(15,"div",12),k.\u0275\u0275elementStart(16,"div",13),k.\u0275\u0275element(17,"scrm-button",14),k.\u0275\u0275element(18,"scrm-button",15),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275reference(7),i=k.\u0275\u0275reference(13);k.\u0275\u0275property("closable",!0)("close",t.closeButtonIcon)("title",t.getHeaderLabel())("titleKey",t.titleKey),k.\u0275\u0275advance(6),k.\u0275\u0275property("cdkDropListData",t.displayed)("cdkDropListConnectedTo",k.\u0275\u0275pureFunction1(12,pa,i)),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngForOf",t.displayed),k.\u0275\u0275advance(4),k.\u0275\u0275property("cdkDropListData",t.hidden)("cdkDropListConnectedTo",k.\u0275\u0275pureFunction1(14,pa,n)),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngForOf",t.hidden),k.\u0275\u0275advance(3),k.\u0275\u0275property("config",t.closeButton),k.\u0275\u0275advance(1),k.\u0275\u0275property("config",t.saveButton)}},directives:function(){return[wg,zv,Xe,B.NgForOf,Hv,nt]},encapsulation:2}),e}(),wg=function(){var e=function e(){I(this,e),this.klass="",this.headerKlass="",this.bodyKlass="",this.footerKlass="",this.titleKey="",this.closable=!1,this.close={klass:["btn","btn-outline-light","btn-sm"]}};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-modal"]],inputs:{klass:"klass",headerKlass:"headerKlass",bodyKlass:"bodyKlass",footerKlass:"footerKlass",titleKey:"titleKey",closable:"closable",close:"close"},ngContentSelectors:ga,decls:9,vars:13,consts:[[1,"modal-title"],[3,"labelKey",4,"ngIf"],[3,"config",4,"ngIf"],[3,"labelKey"],[3,"config"]],template:function(e,t){1&e&&(k.\u0275\u0275projectionDef(va),k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275elementStart(1,"div"),k.\u0275\u0275elementStart(2,"div",0),k.\u0275\u0275template(3,ma,1,1,"scrm-label",1),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(4,ha,1,1,"scrm-close-button",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(5,"div"),k.\u0275\u0275projection(6),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(7,"div"),k.\u0275\u0275projection(8,1),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275classMap(t.klass),k.\u0275\u0275advance(1),k.\u0275\u0275classMapInterpolate1("modal-header ",t.headerKlass," d-flex align-items-center"),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",t.titleKey),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.closable),k.\u0275\u0275advance(1),k.\u0275\u0275classMapInterpolate1("modal-body ",t.bodyKlass,""),k.\u0275\u0275advance(2),k.\u0275\u0275classMapInterpolate1("modal-footer ",t.footerKlass,""))},directives:[B.NgIf,zv,Sg],encapsulation:2}),e}(),Ig=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,H.AngularSvgIconModule,Cg,Gv]]}),e}(),xg=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,rt,Cg,Ig,Gv,qv]]}),e}(),jg=function(){var e=function(){function e(t){I(this,e),this.breakpointObserver=t,this.special=!1,this.actions=!1,this.appendActions=!1,this.labelDisplay="top",this.labelClass={},this.inputClass={},this.rowClass={},this.colClass={},this.sizeMap={handset:1,tablet:2,web:3,wide:4},this.baseColClass={col:!0,"form-group":!0,"m-1":!0},this.baseRowClass={"form-row":!0,"align-items-center":!0},this.baseLabelClass={"col-form-label-sm":!0,"mb-0":!0},this.baseInputClass={"form-control":!0,"form-control-sm":!0},this.currentSize="web",this.subscriptions=[]}return j(e,[{key:"ngOnInit",value:function(){this.initScreenSizeObserver(this.breakpointObserver),this.buildGrid(),this.colClass=Object.assign(Object.assign({},this.colClass),this.baseColClass),this.rowClass=Object.assign(Object.assign({},this.rowClass),this.baseRowClass),this.labelClass=Object.assign(Object.assign({},this.labelClass),this.baseLabelClass),this.inputClass=Object.assign(Object.assign({},this.inputClass),this.baseInputClass)}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}},{key:"colNumber",get:function(){var e=this.sizeMap[this.currentSize];return this.maxColumns&&e>this.maxColumns?this.maxColumns:e}},{key:"addSpecialSlots",value:function(e){var t=this;if(e&&0!==e.length){var n=this.getNeededExtraSlots();if(0!==n.length)if(1===this.colNumber)n.reverse().forEach(function(n){var i={cols:[]};t.fillRow(i),e.push(i),i.cols[0][n]=!0});else if(!0===this.appendActions){var i=e[e.length-1],r=this.colNumber-1;n.forEach(function(e){i.cols[r][e]=!0})}else{var o=e[e.length-1];o.cols[this.colNumber-n.length].field&&(o={cols:[]},this.fillRow(o),e.push(o));var a=this.colNumber-1;n.forEach(function(e){o.cols[a][e]=!0,a--})}}}},{key:"getNeededExtraSlots",value:function(){var e=[];return this.actions&&e.push("actionSlot"),this.special&&e.push("specialSlot"),e}},{key:"fillRow",value:function(e){for(var t=e.cols.length;t<this.colNumber;t++)e.cols.push({field:{type:"",display:"none"}})}},{key:"initScreenSizeObserver",value:function(e){var t=this;this.subscriptions.push(e.observe(["(max-width: 599.98px) and (orientation: portrait)"]).subscribe(function(e){e.matches&&(t.currentSize="handset",t.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)"]).subscribe(function(e){e.matches&&(t.currentSize="tablet",t.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)","(min-width: 840px) and (orientation: portrait)","(min-width: 1280px) and (orientation: landscape)"]).subscribe(function(e){e.matches&&(t.currentSize="web",t.buildGrid())})),this.subscriptions.push(e.observe(["(min-width: 1920px)"]).subscribe(function(e){e.matches&&(t.currentSize="wide",t.buildGrid())}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(T))},e.\u0275dir=k.\u0275\u0275defineDirective({type:e,inputs:{special:"special",actions:"actions",appendActions:"appendActions",labelDisplay:"labelDisplay",labelClass:"labelClass",inputClass:"inputClass",rowClass:"rowClass",colClass:"colClass",sizeMap:"sizeMap",maxColumns:"maxColumns"}}),e}(),Eg=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this,e)).breakpointObserver=e,i.fieldMode="detail",i}return j(n,[{key:"ngOnChanges",value:function(){this.buildGrid()}},{key:"buildGrid",value:function(){var e=this,t=[];if(this.fields&&0!==this.fields.length){var n=0,i={cols:[]};t.push(i),this.fields.forEach(function(r){n>=e.colNumber&&(n=0,i={cols:[]},t.push(i)),i.cols.push({field:r}),n++}),n<this.colNumber&&this.fillRow(t[t.length-1]),this.addSpecialSlots(t),this.fieldGrid=t}else this.fieldGrid=[]}}]),n}(jg);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(T))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-field-grid"]],inputs:{fieldMode:"fieldMode",fields:"fields",record:"record"},features:[k.\u0275\u0275InheritDefinitionFeature,k.\u0275\u0275NgOnChangesFeature],ngContentSelectors:Ea,decls:2,vars:1,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"d-flex"],[3,"pr-3",4,"ngIf"],[3,"flex-grow-1",4,"ngIf"],[4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"labelKey","ngClass",4,"ngIf"],[3,"labelKey","ngClass"],[3,"field","klass","mode","record","type"]],template:function(e,t){1&e&&(k.\u0275\u0275projectionDef(ja),k.\u0275\u0275elementStart(0,"form"),k.\u0275\u0275template(1,xa,2,2,"div",0),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",t.fieldGrid))},directives:function(){return[B.NgForOf,B.NgClass,B.NgIf,zv,ES]},encapsulation:2}),e}(),Mg=function(){var e=function(){function e(){I(this,e),this.actions={edit:{},create:{},list:{},detail:{},massupdate:{},filter:{}}}return j(e,[{key:"run",value:function(e,t,n){!this.actions||!this.actions[t]||!this.actions[t][e.key]||this.actions[t][e.key].run(n,e)}},{key:"getHandler",value:function(e,t){var n=e.key;return e&&e.asyncProcess&&(n="async-process"),this.actions&&this.actions[t]&&this.actions[t][n]?this.actions[t][n]:null}},{key:"addHandler",value:function(e,t,n){this.actions[t]||(this.actions[t]={}),this.actions[t][e.key]=n}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),_g=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.apply(this,arguments)}return j(n,[{key:"shouldDisplay",value:function(e){return!0}},{key:"getTriggeringStatus",value:function(){return["onValueChange"]}}]),n}(w.ActionHandler),Fg=function e(){I(this,e)},Lg=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="greater-than",e}return j(n,[{key:"run",value:function(e,t,n){var i=n.field?e.fields[n.field].value:n.value;return Number(t.value)>Number(i)}}]),n}(Fg);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Og=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="less-than",e}return j(n,[{key:"run",value:function(e,t,n){var i=n.field?e.fields[n.field].value:n.value;return Number(t.value)<Number(i)}}]),n}(Fg);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Dg=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="not-empty",e}return j(n,[{key:"run",value:function(e,t,n){return!(0,w.isEmptyString)(t.value)}}]),n}(Fg);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Ag=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="is-empty",e}return j(n,[{key:"run",value:function(e,t,n){return!!(0,w.isEmptyString)(t.value)}}]),n}(Fg);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Ng=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="is-equal",e}return j(n,[{key:"run",value:function(e,t,n){var i=n.field?[e.fields[n.field].value]:(Array.isArray(n.values)?n.values:[n.value]).map(function(e){return e.toString()});return!!i&&i.includes(t.value.toString())}}]),n}(Fg);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Rg=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="not-equal",e}return j(n,[{key:"run",value:function(e,t,n){var i=n.field?[e.fields[n.field].value]:(Array.isArray(n.values)?n.values:[n.value]).map(function(e){return e.toString()});return!!i&&!i.includes(t.value.toString())}}]),n}(Fg);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Tg=function(){var e=function(){function e(t,n,i,r,o,a){I(this,e),this.greaterThanAction=t,this.lessThanAction=n,this.notEmptyAction=i,this.isEmptyAction=r,this.isEqualAction=o,this.notEqualAction=a}return j(e,[{key:"get",value:function(e){return{"greater-than":this.greaterThanAction,"less-than":this.lessThanAction,"not-empty":this.notEmptyAction,"is-empty":this.isEmptyAction,"is-equal":this.isEqualAction,"not-equal":this.notEqualAction}[e]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Lg),k.\u0275\u0275inject(Og),k.\u0275\u0275inject(Dg),k.\u0275\u0275inject(Ag),k.\u0275\u0275inject(Ng),k.\u0275\u0275inject(Rg))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Lg),k.\u0275\u0275inject(Og),k.\u0275\u0275inject(Dg),k.\u0275\u0275inject(Ag),k.\u0275\u0275inject(Ng),k.\u0275\u0275inject(Rg))},token:e,providedIn:"root"}),e}(),Pg=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this)).operatorManager=e,i.key="displayType",i.modes=["edit","detail","list","create","massupdate","filter"],i}return j(n,[{key:"run",value:function(e,t){var n=e.record;if(n&&e.field){var i=t.params&&t.params.activeOnFields||{},r=Object.keys(i),o=t.params&&t.params.activeOnAttributes||{},a=Object.keys(o);if(r.length||a.length){var s=t.params&&t.params.targetDisplayType;if(s){var l=this.isActive(r,n,i,a,o),u=e.field.defaultDisplay;l&&(u=s),e.field.display=u,(t.params&&t.params.resetOn||"none")===u&&(e.field.valueList&&e.field.valueList.length&&(e.field.valueList=[]),e.field.value&&(e.field.value=""))}}}}},{key:"isActive",value:function(e,t,n,i,r){var o=this.areFieldsActive(e,t,n);return o||(o=this.areAttributesActive(i,t,r)),o}},{key:"areAttributesActive",value:function(e,t,n){var i=this;return e.some(function(e){var r=t.fields&&t.fields[e]||null,o=n[e]&&Object.keys(n[e]);if(r&&o&&o.length)return o.some(function(o){var a=n[e][o],s=r.attributes&&r.attributes[o];if(a&&a.length&&s)return i.isValueActive(t,s,a)})})}},{key:"areFieldsActive",value:function(e,t,n){var i=this;return e.every(function(e){var r=t.fields&&t.fields[e]||null,o=n[e];if(r&&o&&o.length)return i.isValueActive(t,r,o)})}},{key:"isValueActive",value:function(e,t,n){var i=this,r=!1;if(t.valueList&&t.valueList.length)return t.valueList.some(function(e){return n.some(function(t){if(t===e)return r=!0,!0})}),r;var o=Object.keys(e.fields),a=[];return n.some(t.value?function(n){if((!n.field||o.includes(n.field))&&(n===t.value&&!n.operator&&(r=!0),n.operator)){var s=i.operatorManager.get(n.operator);a.push(s.run(e,t,n)),r=a.every(function(e){return e})}}:function(n){if(n.operator){if(n.field&&!o.includes(n.field))return;var s=i.operatorManager.get(n.operator);a.push(s.run(e,t,n)),r=a.every(function(e){return e})}}),r}},{key:"getTriggeringStatus",value:function(){return["onValueChange","onFieldInitialize"]}}]),n}(_g);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Tg))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Tg))},token:e,providedIn:"root"}),e}(),Bg=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="emailPrimarySelect",e.modes=["edit","create","massupdate"],e}return j(n,[{key:"run",value:function(e,t){var n=e.field;if(e.record&&n){var i=n.items;if(n&&i&&i.length){var r=i.filter(function(e){return!(e&&e.attributes&&e.attributes.deleted)});if(!r||1===r.length){var o=r[0],a=o.fields&&o.fields["email-fields"]||{},s=a.attributes&&a.attributes.primary_address||null;s&&!(0,w.isTrue)(s.value)&&(s.value="true",s.formControl.setValue("true"),a.formControl.updateValueAndValidity({onlySelf:!0,emitEvent:!0}))}}}}}]),n}(_g);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),$g=function(){var e=function(){function e(t){I(this,e),this.operatorManager=t}return j(e,[{key:"isActive",value:function(e,t,n,i,r){var o=!0;return(0,K.isEmpty)(n)||(o=this.areFieldsActive(e,t,n)),(0,K.isEmpty)(r)||(o=o&&this.areAttributesActive(i,t,r)),o}},{key:"areAttributesActive",value:function(e,t,n){var i=this;return e.every(function(e){var r=t.fields&&t.fields[e]||null,o=n[e]&&Object.keys(n[e]);if(r&&o&&o.length)return o.some(function(o){var a=n[e][o],s=r.attributes&&r.attributes[o];if(a&&a.length&&s)return i.isValueActive(t,s,a)})})}},{key:"areFieldsActive",value:function(e,t,n){var i=this;return e.every(function(e){var r=t.fields&&t.fields[e]||null,o=n[e];return!(r&&o&&o.length)||i.isValueActive(t,r,o)})}},{key:"isValueActive",value:function(e,t,n){var i=this,r=!1;if(t.valueList&&t.valueList.length)return t.valueList.some(function(e){return n.some(function(t){if(t===e)return r=!0,!0})}),r;var o=Object.keys(e.fields),a=[];return n.some(t.value?function(n){if((!n.field||o.includes(n.field))&&(n===t.value&&!n.operator&&(r=!0),n.operator)){var s=i.operatorManager.get(n.operator);a.push(s.run(e,t,n)),r=a.every(function(e){return e})}}:function(n){if(n.operator){if(n.field&&!o.includes(n.field))return;var s=i.operatorManager.get(n.operator);a.push(s.run(e,t,n)),r=a.every(function(e){return e})}}),r}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Tg))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Tg))},token:e,providedIn:"root"}),e}(),Vg=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this)).requiredValidator=e,r.activeFieldsChecker=i,r.key="required",r.modes=["edit","create","massupdate","filter"],r}return j(n,[{key:"run",value:function(e,t){var n=e.record,i=e.field;if(n&&i){var r=t.params&&t.params.activeOnFields||{},o=Object.keys(r),a=t.params&&t.params.activeOnAttributes||{},s=Object.keys(a);if(o.length||s.length){var l=this.activeFieldsChecker.isActive(o,n,r,s,a),u=!1,c=S(e.field.validators||[]);l&&(u=!0,c=c.concat(this.requiredValidator.getValidator(i))),e.field.formControl.updateValueAndValidity({onlySelf:!0,emitEvent:!0}),n.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0}),e.field.definition.required=u,e.field.formControl.setValidators(c),e.field.formControl.updateValueAndValidity({onlySelf:!0,emitEvent:!0}),n.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}}}},{key:"getTriggeringStatus",value:function(){return["onValueChange","onFieldInitialize"]}}]),n}(_g);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(_h),k.\u0275\u0275inject($g))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(_h),k.\u0275\u0275inject($g))},token:e,providedIn:"root"}),e}(),Ug=function(){var e=function(){function e(t,n){I(this,e),this.config=t,this.preferences=n}return j(e,[{key:"getFieldCurrencyValue",value:function(e,t){var n=this.isBase(e),i=this.getCurrencyId(t);if(!n&&null!==i)return e.value;var r=parseFloat(e.value);if(!isFinite(r))return e.value;var o=this.getUserCurrency();return this.baseToCurrency(o.id,r).toString()}},{key:"baseToCurrency",value:function(e,t){var n=this.getConversionRate(e);return isFinite(n)?this.round(_r(t,n)):t}},{key:"currencyToBase",value:function(e,t){var n=this.getConversionRate(e);return isFinite(n)?this.round(Dr(t,n)):t}},{key:"round",value:function(e){var t=this.getPrecision();return xr(e,t)}},{key:"getCurrencyId",value:function(e){var t,n,i;return null!==(i=null===(n=null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.currency_id)||void 0===n?void 0:n.value)&&void 0!==i?i:null}},{key:"isBase",value:function(e){var t,n;return null!==(n=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.isBaseCurrency)&&void 0!==n&&n}},{key:"getCurrency",value:function(e){var t;return null!==(t=this.config.getConfigValue("currencies")[e])&&void 0!==t?t:[]}},{key:"getBaseCurrency",value:function(){return this.config.getConfigValue("currency")}},{key:"getUserCurrency",value:function(){return this.preferences.getUserPreference("currency")}},{key:"getPrecision",value:function(){var e=parseInt(this.preferences.getUserPreference("default_currency_significant_digits"));if(isFinite(e))return e;var t=parseInt(this.config.getConfigValue("default_currency_significant_digits"));return isFinite(t)?t:0}},{key:"getConversionRate",value:function(e){var t=this.getCurrency(e);return parseFloat(t.conversion_rate)}},{key:"getCode",value:function(e){return this.getCurrency(e).iso4217}},{key:"getSymbol",value:function(e){return this.getCurrency(e).symbol}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(ah))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(ah))},token:e,providedIn:"root"}),e}(),Kg=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this)).currencyService=e,i.key="update-base-currency",i.modes=["edit","create","massupdate","filter"],i}return j(n,[{key:"run",value:function(e,t){var n,i,r,o,a,s,l=e.record,u=e.field;if(l&&u){var c=null!==(n=t.params.currencyIdField)&&void 0!==n?n:"currency_id",d=null!==(i=t.params.currencyField)&&void 0!==i?i:"amount",f=null!==(o=null===(r=null==l?void 0:l.fields[c])||void 0===r?void 0:r.value)&&void 0!==o?o:null,p=parseFloat(null!==(s=null===(a=null==l?void 0:l.fields[d])||void 0===a?void 0:a.value)&&void 0!==s?s:null);if(isFinite(p)){null===f&&this.updateValue(u,p,l);var m=this.currencyService.currencyToBase(f,p);!isFinite(m)||this.updateValue(u,m,l)}}}},{key:"updateValue",value:function(e,t,n){e.value=t.toString(),e.formControl.setValue(t.toString()),n.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}}]),n}(_g);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ug))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ug))},token:e,providedIn:"root"}),e}(),zg=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this)).currencyService=e,i.key="update-currency",i.modes=["edit","create","massupdate","filter"],i}return j(n,[{key:"run",value:function(e,t){var n,i,r,o,a,s,l,u,c,d,f=e.record,p=e.field,m=null!==(r=null===(i=null===(n=null==p?void 0:p.definition)||void 0===n?void 0:n.metadata)||void 0===i?void 0:i.isBaseCurrency)&&void 0!==r&&r;if(f&&p&&!m){var h=null!==(o=t.params.currencyIdField)&&void 0!==o?o:"currency_id",v=null!==(a=t.params.baseCurrencyField)&&void 0!==a?a:"amount_usdollar",g=null!==(l=null===(s=null==f?void 0:f.fields[h])||void 0===s?void 0:s.value)&&void 0!==l?l:null,y=parseFloat(null!==(u=null==p?void 0:p.value)&&void 0!==u?u:null),b=parseFloat(null!==(d=null===(c=null==f?void 0:f.fields[v])||void 0===c?void 0:c.value)&&void 0!==d?d:null);if(isFinite(y)&&isFinite(b)&&null!==g){var S=this.currencyService.baseToCurrency(g,b);!isFinite(S)||this.updateValue(p,S,f)}}}},{key:"updateValue",value:function(e,t,n){e.value=t.toString(),e.formControl.setValue(t.toString()),n.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}}]),n}(_g);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ug))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ug))},token:e,providedIn:"root"}),e}(),Gg=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="update-flex-relate-module",e.modes=["edit","create","massupdate","filter"],e}return j(n,[{key:"run",value:function(e,t){var n,i,r,o,a,s,l,u=e.record,c=e.field;if(u&&c){var d=null!==(n=c.definition.type_name)&&void 0!==n?n:"";""!==d&&(null!==(r=null===(i=null==u?void 0:u.fields[d])||void 0===i?void 0:i.value)&&void 0!==r?r:"")!==(null!==(a=null===(o=null==c?void 0:c.definition)||void 0===o?void 0:o.module)&&void 0!==a?a:"")&&(c.definition.module=null!==(l=null===(s=null==u?void 0:u.fields[d])||void 0===s?void 0:s.value)&&void 0!==l?l:"",this.updateValue(c,{},"",u))}}},{key:"updateValue",value:function(e,t,n,i){e.value=n,e.valueObject=t,e.formControl.setValue(n),i.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}}]),n}(_g);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Zg=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this)).activeFieldsChecker=e,i.key="updateValue",i.modes=["edit","detail","list","create","massupdate","filter"],i}return j(n,[{key:"run",value:function(e,t){var n,i=e.record,r=e.field;if(i&&r){var o=t.params&&t.params.activeOnFields||{},a=Object.keys(o),s=t.params&&t.params.activeOnAttributes||{},l=Object.keys(s);if(a.length||l.length){var u=t.params&&t.params.targetValue;if(u){var c=this.activeFieldsChecker.isActive(a,i,o,l,s),d=null===(n=e.field)||void 0===n?void 0:n.value;c&&(d=u),this.updateValue(r,d.toString(),i)}}}}},{key:"updateValue",value:function(e,t,n){e.value=t.toString(),e.formControl.setValue(t),n.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}}]),n}(_g);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject($g))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject($g))},token:e,providedIn:"root"}),e}(),Hg=function e(){I(this,e)},qg=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this)).router=e,r.message=i,r.key="redirect",r}return j(n,[{key:"run",value:function(e){if(e&&e.route){var t={queryParams:{}};e.queryParams&&(t.queryParams=e.queryParams),this.router.navigate([e.route],t).then()}else this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE")}}]),n}(Hg);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(Ym))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(Ym))},token:e,providedIn:"root"}),e}(),Wg=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this)).message=e,i.key="export",i}return j(n,[{key:"run",value:function(e){e&&e.url&&e.formData?this.download(e.url,e.formData):this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE")}},{key:"download",value:function(e,t){var n=document.createElement("form");n.setAttribute("id","export-download"),n.setAttribute("method","post"),n.setAttribute("action",e),n.setAttribute("target","_self"),n.setAttribute("style","display: none;"),Object.keys(t).forEach(function(e){var i=document.createElement("input");i.setAttribute("name",e),i.setAttribute("value",t[e]),n.appendChild(i)}),document.body.appendChild(n),n.submit(),document.body.removeChild(n)}}]),n}(Hg);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ym))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ym))},token:e,providedIn:"root"}),e}(),Qg=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="noop",e}return j(n,[{key:"run",value:function(e){}}]),n}(Hg);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Yg=function(){function e(){I(this,e)}return j(e,[{key:"init",value:function(e){this.iframe=e,this.initialSizeAdjustment(),this.addBodyResizeListener()}},{key:"destroy",value:function(){this.observer&&this.observer.disconnect(),this.iframe=null,this.observer=null}},{key:"initialSizeAdjustment",value:function(){setTimeout(this.onResize.bind(this),200)}},{key:"addBodyResizeListener",value:function(){var e=this,t={document:this.iframe.contentWindow.document,element:this.iframe.contentWindow.document.body,height:this.iframe.contentWindow.document.body.scrollHeight,watched:[{getHeight:function(){var e=t.document.getElementsByClassName("modal in"),n=e&&e[0],i=n&&n.firstElementChild;return i&&i.scrollHeight+200||-1}},{getHeight:function(){var e=t.document.getElementById("bootstrap-container"),n=e&&e.scrollHeight+150||-1;return n>0?n:t.element.scrollHeight+50}}]};this.observer=(new se.MutationObserverFactory).create(function(){var n=[];t.watched.forEach(function(e){var t=e.getHeight();t>0&&n.push(t)}),n.sort(function(e,t){return e-t});var i=n.pop(),r=e.calculateResizing(t.height,i);r.resized&&(t.height=r.height)}),this.observer.observe(this.iframe.contentWindow.document.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}},{key:"calculateResizing",value:function(e,t){var n=window.innerHeight-50;return t<n&&(t=n),e===t?{resized:!1}:e<t-20||this.iframe.scrollHeight>t?(this.resizeIFrame(t),{resized:!0,height:t}):{resized:!1}}},{key:"onResize",value:function(){this.calculateResizing(this.iframe.offsetHeight,this.iframe.contentWindow.document.body.scrollHeight+120)}},{key:"resizeIFrame",value:function(e){this.iframe.style.height=e+1+"px"}}]),e}(),Xg=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;I(this,e),this.changeCallback=null,this.loadCallback=null,this.unLoadCallback=null,this.unloadListener=null,this.loadListener=null,this.iframe=t,this.changeCallback=n,this.loadCallback=i,this.unLoadCallback=r}return j(e,[{key:"init",value:function(){this.loadListener=this.loadHandler.bind(this),this.unloadListener=this.unloadHandler.bind(this),this.iframe.contentWindow.addEventListener("load",this.loadListener),this.iframe.contentWindow.removeEventListener("unload",this.unloadListener)}},{key:"destroy",value:function(){var e=this.iframe&&this.iframe.contentWindow;e&&(e.removeEventListener("unload",this.unloadListener),e.removeEventListener("load",this.loadListener)),this.iframe=null,this.lastDispatched=null,this.changeCallback=null,this.loadCallback=null,this.unLoadCallback=null,this.loadListener=null,this.unloadListener=null}},{key:"loadHandler",value:function(){this.loadCallback(),this.bindUnload()}},{key:"bindUnload",value:function(){this.iframe.contentWindow.removeEventListener("unload",this.unloadListener),this.unloadListener=this.unloadHandler.bind(this),this.iframe.contentWindow.addEventListener("unload",this.unloadListener)}},{key:"unloadHandler",value:function(){this.unLoadCallback(),setTimeout(this.triggerPageChange.bind(this),0)}},{key:"triggerPageChange",value:function(){var e=this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.location.href;e&&e!==this.lastDispatched&&(this.lastDispatched=e,this.changeCallback(e))}}]),e}(),Jg=function(){var e=function(){function e(t,n){I(this,e),this.languageStore=t,this.activeModal=n,this.url="",this.titleKey="",this.asyncActionCallback=null,this.iframe=null}return j(e,[{key:"ngOnInit",value:function(){var e=this;this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:function(){e.activeModal.close({type:"close-button"})}}}},{key:"ngAfterViewInit",value:function(){this.initIframe()}},{key:"ngOnDestroy",value:function(){this.cleanObservers(),this.iframe=null;var e=this.wrapper;this.wrapper.firstChild&&e.removeChild(e.firstChild),e.innerHTML="<iframe></iframe>",this.wrapper=null}},{key:"cleanObservers",value:function(){this.iframeResizeHandler&&(this.iframeResizeHandler.destroy(),this.iframeResizeHandler=null),this.iframePageChangeHandler&&(this.iframePageChangeHandler.destroy(),this.iframePageChangeHandler=null)}},{key:"initIframe",value:function(){this.wrapper=this.dataContainer.nativeElement,this.wrapper.firstChild&&this.wrapper.removeChild(this.wrapper.firstChild);var e=document.createElement("iframe");e.src=this.url,this.wrapper.appendChild(e),this.iframe=e,this.iframe.style.display="block",this.initObservers()}},{key:"initObservers",value:function(){this.iframePageChangeHandler=this.buildIframePageChangeObserver(),this.iframeResizeHandler=this.buildIframeResizeHandlerHandler(),this.iframePageChangeHandler&&this.iframePageChangeHandler.init()}},{key:"onIFrameLoad",value:function(){this.iframe.contentWindow.document.body.style.overflow="hidden",null!==this.asyncActionCallback&&this.asyncActionCallback(this.iframe),this.iframeResizeHandler.init(this.iframe)}},{key:"onIFrameUnload",value:function(){this.iframe.style.display="none",this.iframeResizeHandler.destroy()}},{key:"buildIframePageChangeObserver",value:function(){return new Xg(this.iframe,null,this.onIFrameLoad.bind(this),this.onIFrameUnload.bind(this))}},{key:"buildIframeResizeHandlerHandler",value:function(){return new Yg}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(Z.NgbActiveModal))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-classic-modal"]],viewQuery:function(e,t){var n;(1&e&&k.\u0275\u0275viewQuery(Ma,7),2&e)&&(k.\u0275\u0275queryRefresh(n=k.\u0275\u0275loadQuery())&&(t.dataContainer=n.first))},inputs:{url:"url",titleKey:"titleKey",asyncActionCallback:"asyncActionCallback"},decls:5,vars:3,consts:[["bodyKlass","m-0 small-font","footerKlass","border-0","klass","classic-view-modal",3,"closable","close","titleKey"],["modal-body",""],[1,"classic-view-container"],["dataContainer",""]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"scrm-modal",0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275elementStart(2,"div",2,3),k.\u0275\u0275element(4,"iframe"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&k.\u0275\u0275property("closable",!0)("close",t.closeButton)("titleKey",t.titleKey)},directives:[wg],encapsulation:2,data:{animation:[(0,Nr.trigger)("modalFade",[(0,Nr.transition)("void <=> *",[(0,Nr.animate)("800ms")])])]}}),e}(),ey=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this)).router=e,o.modalService=i,o.message=r,o.key="audit",o}return j(n,[{key:"run",value:function(e){e&&e.url?this.showClassicViewModal(e.url):this.message.addDangerMessageByKey("LBL_MISSING_HANDLER_DATA_ROUTE")}},{key:"changeLogLegacyContentFormatter",value:function(e){if(e){var t=e.contentDocument.getElementsByClassName("moduleTitle")[0];!t||(t.innerText="")}}},{key:"showClassicViewModal",value:function(e){var t=this.modalService.open(Jg,{size:"xl",centered:!0,scrollable:!0});t.componentInstance.titleKey="LBL_CHANGE_LOG",t.componentInstance.url=e,t.componentInstance.asyncActionCallback=this.changeLogLegacyContentFormatter.bind(this)}}]),n}(Hg);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(Z.NgbModal),k.\u0275\u0275inject(Ym))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(Z.NgbModal),k.\u0275\u0275inject(Ym))},token:e,providedIn:"root"}),e}(),ty=function(){var e=function(){function e(t,n,i,r,o,a,s){I(this,e),this.processService=t,this.appStateStore=n,this.message=i,this.redirectAction=r,this.exportAction=o,this.noopAction=a,this.changelogAction=s,this.actions={},this.registerHandler(r),this.registerHandler(o),this.registerHandler(a),this.registerHandler(s)}return j(e,[{key:"registerHandler",value:function(e){this.actions[e.key]=e}},{key:"run",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=Object.assign({},t);return this.appStateStore.updateLoading(e,!0),this.processService.submit(e,r).pipe((0,M.take)(1),(0,M.tap)(function(t){n.appStateStore.updateLoading(e,!1);var r="addSuccessMessageByKey";if("error"===t.status&&(r="addDangerMessageByKey"),t.messages&&t.messages.forEach(function(e){e&&n.message[r](e)}),"error"!==t.status){var o=i||t.data&&t.data.handler||null;if(o){var a=n.actions[o];a?a.run(t.data.params):n.message.addDangerMessageByKey("LBL_MISSING_HANDLER")}}}),(0,M.catchError)(function(t){var i;throw"Access Denied."===(null!==(i=null==t?void 0:t.message)&&void 0!==i?i:"")?(n.appStateStore.updateLoading(e,!1),t):(n.message.addDangerMessageByKey("LBL_ACTION_ERROR"),n.appStateStore.updateLoading(e,!1),t)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(th),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(qg),k.\u0275\u0275inject(Wg),k.\u0275\u0275inject(Qg),k.\u0275\u0275inject(ey))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(th),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(qg),k.\u0275\u0275inject(Wg),k.\u0275\u0275inject(Qg),k.\u0275\u0275inject(ey))},token:e,providedIn:"root"}),e}(),ny=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s){var l;return I(this,n),(l=t.call(this)).asyncActionService=e,l.processService=i,l.messages=r,l.recordMappers=o,l.baseMapper=a,l.activeFieldsChecker=s,l.key="updateValueBackend",l.modes=["edit","detail","list","create","massupdate","filter"],o.register("default",a.getKey(),a),l}return j(n,[{key:"run",value:function(e,t){var n,i=this,r=e.record,o=e.field;if(r&&o){var a=t.params&&t.params.activeOnFields||{},s=Object.keys(a),l=t.params&&t.params.activeOnAttributes||{},u=Object.keys(l);if(s.length||u.length){var c=t.params&&t.params.process;if(c&&this.activeFieldsChecker.isActive(s,r,a,u,l)){var d=c,f=this.getBaseRecord(r),p={action:d,module:null!==(n=r.module)&&void 0!==n?n:"",record:f};o.loading=!0,this.processService.submit(d,p).pipe((0,M.take)(1)).subscribe(function(e){var t,n,a=null!==(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.value)&&void 0!==n?n:null;o.loading=!1,null!==a?i.updateValue(o,a.toString(),r):i.messages.addDangerMessageByKey("ERR_FIELD_LOGIC_BACKEND_CALCULATION")},function(e){o.loading=!1,i.messages.addDangerMessageByKey("ERR_FIELD_LOGIC_BACKEND_CALCULATION")})}}}}},{key:"getBaseRecord",value:function(e){return e?(this.mapRecordFields(e),(0,w.deepClone)({id:e.id,type:e.type,module:e.module,attributes:e.attributes,acls:e.acls})):null}},{key:"mapRecordFields",value:function(e){var t=this.recordMappers.get(e.module);Object.keys(t).forEach(function(n){t[n].map(e)})}},{key:"updateValue",value:function(e,t,n){e.value=t.toString(),e.formControl.setValue(t),n.formGroup.updateValueAndValidity({onlySelf:!0,emitEvent:!0})}}]),n}(_g);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(ty),k.\u0275\u0275inject(th),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(w.RecordMapperRegistry),k.\u0275\u0275inject(gv),k.\u0275\u0275inject($g))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(ty),k.\u0275\u0275inject(th),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(w.RecordMapperRegistry),k.\u0275\u0275inject(gv),k.\u0275\u0275inject($g))},token:e,providedIn:"root"}),e}(),iy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s){var l;return I(this,n),(l=t.call(this)).asyncActionService=e,l.processService=i,l.messages=r,l.recordMappers=o,l.baseMapper=a,l.activeFieldsChecker=s,l.key="displayTypeBackend",l.modes=["edit","detail","list","create","massupdate","filter"],o.register("default",a.getKey(),a),l}return j(n,[{key:"run",value:function(e,t){var n,i=this,r=e.record,o=e.field;if(r&&o){var a=t.params&&t.params.activeOnFields||{},s=Object.keys(a),l=t.params&&t.params.activeOnAttributes||{},u=Object.keys(l);if(s.length||u.length){var c=t.params&&t.params.process;if(c){var d=this.activeFieldsChecker.isActive(s,r,a,u,l),f=e.field.defaultDisplay;if(d){var p=c,m=this.getBaseRecord(r),h={action:p,module:null!==(n=r.module)&&void 0!==n?n:"",record:m};o.loading=!0,this.processService.submit(p,h).subscribe(function(t){var n,r,a=null!==(r=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.value)&&void 0!==r?r:null;o.loading=!1,null!==a?(f=a,e.field.display=f):i.messages.addDangerMessageByKey("ERR_FIELD_LOGIC_BACKEND_CALCULATION")},function(e){o.loading=!1,i.messages.addDangerMessageByKey("ERR_FIELD_LOGIC_BACKEND_CALCULATION")})}(t.params&&t.params.resetOn||"none")===f&&(e.field.valueList&&e.field.valueList.length&&(e.field.valueList=[]),e.field.value&&(e.field.value=""))}}}}},{key:"getBaseRecord",value:function(e){return e?(this.mapRecordFields(e),(0,w.deepClone)({id:e.id,type:e.type,module:e.module,attributes:e.attributes,acls:e.acls})):null}},{key:"mapRecordFields",value:function(e){var t=this.recordMappers.get(e.module);Object.keys(t).forEach(function(n){t[n].map(e)})}},{key:"getTriggeringStatus",value:function(){return["onValueChange","onFieldInitialize"]}}]),n}(_g);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(ty),k.\u0275\u0275inject(th),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(w.RecordMapperRegistry),k.\u0275\u0275inject(gv),k.\u0275\u0275inject($g))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(ty),k.\u0275\u0275inject(th),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(w.RecordMapperRegistry),k.\u0275\u0275inject(gv),k.\u0275\u0275inject($g))},token:e,providedIn:"root"}),e}(),ry=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u,c){var d;return I(this,n),(d=t.call(this)).actions={edit:{},create:{},list:{},detail:{},massupdate:{},filter:{}},e.modes.forEach(function(t){return d.actions[t][e.key]=e}),i.modes.forEach(function(e){return d.actions[e][i.key]=i}),r.modes.forEach(function(e){return d.actions[e][r.key]=r}),o.modes.forEach(function(e){return d.actions[e][o.key]=o}),a.modes.forEach(function(e){return d.actions[e][a.key]=a}),l.modes.forEach(function(e){return d.actions[e][l.key]=l}),s.modes.forEach(function(e){return d.actions[e][s.key]=s}),u.modes.forEach(function(e){return d.actions[e][u.key]=u}),c.modes.forEach(function(e){return d.actions[e][c.key]=c}),d}return j(n,[{key:"runLogic",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(e.logic){var o=Object.keys(e.logic).map(function(t){return e.logic[t]}),a=this.parseModeActions(o,t,r),s={record:n,field:e,module:n.module};a.forEach(function(e){i.runAction(e,t,s)})}}},{key:"runAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.runFrontEndAction(e,t,n)}},{key:"runFrontEndAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.buildActionData(e,n);this.run(e,t,i)}},{key:"getModuleName",value:function(e){return e.module}},{key:"buildActionData",value:function(e,t){return{field:t.field,record:t&&t.record||null}}},{key:"parseModeActions",value:function(e,t,n){var i=this;if(!e)return[];var r={list:[],detail:[],edit:[],create:[],massupdate:[],filter:[]};e&&e.length&&e.forEach(function(e){!e.modes||!e.modes.length||e.modes.forEach(function(t){!r[t]&&!e.asyncProcess||r[t].push(e)})});var o=[],a=["onValueChange"];return r[t].forEach(function(e){var r,s,l,u,c=null!==(s=null===(r=null==i?void 0:i.actions[t][e.key])||void 0===r?void 0:r.getTriggeringStatus())&&void 0!==s?s:null,d=null!==(u=null!==(l=null==e?void 0:e.triggeringStatus)&&void 0!==l?l:c)&&void 0!==u?u:a;n&&!d.includes(n)||o.push(e)}),o}}]),n}(Mg);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Pg),k.\u0275\u0275inject(Bg),k.\u0275\u0275inject(Vg),k.\u0275\u0275inject(Kg),k.\u0275\u0275inject(zg),k.\u0275\u0275inject(Zg),k.\u0275\u0275inject(Gg),k.\u0275\u0275inject(ny),k.\u0275\u0275inject(iy))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Pg),k.\u0275\u0275inject(Bg),k.\u0275\u0275inject(Vg),k.\u0275\u0275inject(Kg),k.\u0275\u0275inject(zg),k.\u0275\u0275inject(Zg),k.\u0275\u0275inject(Gg),k.\u0275\u0275inject(ny),k.\u0275\u0275inject(iy))},token:e,providedIn:"root"}),e}(),oy=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.apply(this,arguments)}return j(n,[{key:"shouldDisplay",value:function(e){return!0}}]),n}(w.ActionHandler),ay=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this)).activeFieldsChecker=e,i.key="displayType",i.modes=["edit","detail","list","create","massupdate","filter"],i}return j(n,[{key:"run",value:function(e,t){var n=e.record;if(!n||!e.field)return!0;var i=t.params&&t.params.activeOnFields||{},r=Object.keys(i),o=t.params&&t.params.activeOnAttributes||{},a=Object.keys(o);return!r.length&&!a.length||this.activeFieldsChecker.isActive(r,n,i,a,o)}}]),n}(oy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject($g))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject($g))},token:e,providedIn:"root"}),e}(),sy=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),i=t.call(this),e.modes.forEach(function(t){return i.actions[t][e.key]=e}),i}return j(n,[{key:"runAll",value:function(e,t,n){var i,r=this,o="show";if(e.displayLogic){var a=Object.values(e.displayLogic).filter(function(e){var t,i=null!==(t=e.modes)&&void 0!==t?t:[];return!(!i.length||!i.includes(n))});if(a&&a.length){var s=null!==(i=e.defaultDisplay)&&void 0!==i?i:"show",l="none";"none"===s&&(l="show");var u={record:t,field:e,module:t.module};a.some(function(e){var t=r.buildActionData(e,u);return r.actions[n][e.key].run(t,e)})&&(s=l),o=s,"show"===s&&(o="show"),e.display=o}}}},{key:"buildActionData",value:function(e,t){return{field:t.field,record:t&&t.record||null}}}]),n}(Mg);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(ay))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(ay))},token:e,providedIn:"root"}),e}(),ly=function(){var e=function(){function e(t,n,i){I(this,e),this.typeFormatter=t,this.logic=n,this.logicDisplay=i,this.klass=null,this.dependentFields={},this.dependentAttributes=[],this.subs=[]}return j(e,[{key:"ngOnInit",value:function(){this.baseInit()}},{key:"ngOnDestroy",value:function(){this.unsubscribeAll()}},{key:"baseInit",value:function(){this.initDependencyHandlers()}},{key:"initDependencyHandlers",value:function(){var e=this;if(this.record){var t=this.record.fields&&Object.keys(this.record.fields)||[];t.length>1&&(this.calculateDependentFields(t),this.field.previousValue=this.field.value,(this.dependentFields&&Object.keys(this.dependentFields).length||this.dependentAttributes.length)&&Object.keys(this.dependentFields).forEach(function(t){var n,i=e.record.fields[t]||null;if(i){var r=null!==(n=e.dependentFields[t].type)&&void 0!==n?n:[];r.includes("logic")&&e.logic.runLogic(i,e.mode,e.record,"onFieldInitialize"),r.includes("displayLogic")&&e.logicDisplay.runAll(i,e.record,e.mode)}}),this.field.valueChanges$&&(this.dependentFields&&Object.keys(this.dependentFields).length||this.dependentAttributes.length)&&this.subs.push(this.field.valueChanges$.pipe((0,M.debounceTime)(500)).subscribe(function(t){Object.keys(e.dependentFields).forEach(function(n){var i,r=e.record.fields[n]||null;if(r&&e.field.previousValue!=t.value){var o=null!==(i=e.dependentFields[n].type)&&void 0!==i?i:[];o.includes("logic")&&e.logic.runLogic(r,e.mode,e.record,"onValueChange"),o.includes("displayLogic")&&e.logicDisplay.runAll(r,e.record,e.mode)}}),e.field.previousValue=t.value,e.dependentAttributes.forEach(function(t){var n=e.record.fields[t.field]||{},i=n&&n.attributes&&n.attributes[t.attribute]||null;!i||e.logic.runLogic(i,e.mode,e.record,"onValueChange")})})))}}},{key:"calculateDependentFields",value:function(e){var t=this;e.forEach(function(e){"field"!==t.field.source?"attribute"!==t.field.source||t.addAttributeDependency(e,t.dependentFields,t.dependentAttributes):t.addFieldDependency(e,t.dependentFields,t.dependentAttributes)})}},{key:"addFieldDependency",value:function(e,t,n){var i=this,r=this.record.fields[e],o=this.field.name||this.field.definition.name||"";e!==o&&r&&(r.fieldDependencies&&this.isDependencyField(r.fieldDependencies)&&(t[e]=r.fieldDependencies[o]),(r.attributes&&Object.keys(r.attributes)||[]).forEach(function(a){var s,l=r.attributes[a];!l||!l.fieldDependencies||!l.fieldDependencies.length||i.isDependencyField(l.fieldDependencies)&&n.push({field:e,attribute:a,types:null!==(s=t[o].types)&&void 0!==s?s:[]})}))}},{key:"isDependencyField",value:function(e){var t;return!(null===(t=e[this.field.name||this.field.definition.name||""])||void 0===t||!t)}},{key:"addAttributeDependency",value:function(e,t,n){var i=this,r=this.record.fields[e],o=this.field.name||this.field.definition.name||"";e!==o&&r&&(r.attributeDependencies&&r.attributeDependencies.length&&this.isDependencyAttribute(r.attributeDependencies)&&(t[o]=r.fieldDependencies[o]),(r.attributes&&Object.keys(r.attributes)||[]).forEach(function(a){var s,l=r.attributes[a];!l||!l.attributeDependencies||!l.attributeDependencies.length||i.isDependencyAttribute(l.attributeDependencies)&&n.push({field:e,attribute:a,types:null!==(s=t[o].types)&&void 0!==s?s:[]})}))}},{key:"isDependencyAttribute",value:function(e){var t=this.field.parentKey||"",n=this.field.name||this.field.definition.name||"";return e.some(function(e){return t===e.field&&n===e.attribute})}},{key:"subscribeValueChanges",value:function(){var e=this;this.field&&this.field.formControl&&this.subs.push(this.field.formControl.valueChanges.subscribe(function(t){t=(0,w.isVoid)(t)?"":t.trim(),e.typeFormatter&&e.field.type&&(t=e.toInternalFormat(e.field.type,t)),e.setFieldValue(t)}))}},{key:"toInternalFormat",value:function(e,t){return this.typeFormatter.toInternalFormat(e,t)}},{key:"setFieldValue",value:function(e){this.field.value=e}},{key:"unsubscribeAll",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],inputs:{klass:"klass",mode:"mode",field:"field",record:"record",parent:"parent"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),uy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o}return j(n,[{key:"getTelLink",value:function(e){return e?"tel:"+this.getUnFormatted(e):null}},{key:"getUnFormatted",value:function(e){return e?e.replace(/\s+/g,""):""}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-phone-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[3,"href"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"a",0),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275property("href",t.getTelLink(t.field.value),k.\u0275\u0275sanitizeUrl),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate(t.field.value))},encapsulation:2}),e}(),cy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,i,r,o)).languages=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a.selectedValues=[],a.valueLabel="",a.options=[],a.subs=[],a.isDynamicEnum=!1,a}return j(n,[{key:"ngOnInit",value:function(){var e,t,i,r,o,a,s=this;l(h(n.prototype),"ngOnInit",this).call(this);var u=null!==(i=null===(t=null===(e=null==this?void 0:this.field)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.options$)&&void 0!==i?i:null;if(u)this.subs.push(this.field.metadata.options$.subscribe(function(e){s.buildProvidedOptions(e),s.initValue()}));else{var c=null!==(a=null===(o=null===(r=null==this?void 0:this.field)||void 0===r?void 0:r.definition)||void 0===o?void 0:o.options)&&void 0!==a?a:null;c&&this.subs.push(this.languages.vm$.subscribe(function(e){s.buildAppStringListOptions(e.appListStrings),s.initValue()})),!c&&!u&&this.initValue()}}},{key:"ngOnDestroy",value:function(){this.isDynamicEnum=!1,this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"getInvalidClass",value:function(){return this.field.formControl&&this.field.formControl.invalid&&this.field.formControl.touched?"is-invalid":""}},{key:"buildProvidedOptions",value:function(e){var t=this;this.options=e,this.optionsMap={},e.forEach(function(e){t.optionsMap[e.value]=e.label})}},{key:"buildAppStringListOptions",value:function(e){if(this.optionsMap={},this.addExtraOptions(),e&&this.field.definition.options&&e[this.field.definition.options]){var t=e[this.field.definition.options];this.options&&Object.keys(this.options)&&(this.optionsMap=Object.assign(Object.assign({},this.optionsMap),t))}this.buildOptionsArray(e)}},{key:"addExtraOptions",value:function(){var e=this;(this.field.metadata&&this.field.metadata.extraOptions||[]).forEach(function(t){if(!(0,w.isVoid)(t.value)){var n=t.label||"";t.labelKey&&(n=e.languages.getFieldLabel(t.labelKey)),e.optionsMap[t.value]=n}})}},{key:"buildOptionsArray",value:function(e){var t=this;this.options=[],Object.keys(this.optionsMap).forEach(function(e){t.options.push({value:e,label:t.optionsMap[e]})}),this.isDynamicEnum&&this.buildDynamicEnumOptions(e)}},{key:"initValue",value:function(){this.selectedValues=[],this.field.value?"string"==typeof this.field.value&&(!this.optionsMap||"string"==typeof this.optionsMap[this.field.value]&&this.field.value&&(this.valueLabel=this.optionsMap[this.field.value],this.selectedValues.push({value:this.field.value,label:this.valueLabel}))):this.initEnumDefault()}},{key:"initEnumDefault",value:function(){var e,t,n,i;if((0,w.isEmptyString)(null===(e=this.record)||void 0===e?void 0:e.id)){var r=null===(i=null===(n=this.field)||void 0===n?void 0:n.definition)||void 0===i?void 0:i.default;"string"==typeof r&&(r=r.trim()),r?(this.selectedValues.push({value:r,label:this.optionsMap[r]}),this.initEnumDefaultFieldValues(r)):this.field.formControl.setValue("")}else null===(t=this.field)||void 0===t||t.formControl.setValue("")}},{key:"initEnumDefaultFieldValues",value:function(e){if("multienum"===this.field.type){var t=this.selectedValues.map(function(e){return e.value});this.field.valueList=t,this.field.formControl.setValue(t)}else this.field.value=e,this.field.formControl.setValue(e);this.field.formControl.markAsDirty()}},{key:"checkAndInitAsDynamicEnum",value:function(){var e=this.field&&this.field.definition||{},t=e&&e.parentenum||"",n=this.record&&this.record.fields||null;if(e&&e.dynamic&&t&&n){this.isDynamicEnum=!0;var i=n[t];i&&this.subscribeToParentValueChanges(i)}}},{key:"buildDynamicEnumOptions",value:function(e){var t=this.record.fields[this.field.definition.parentenum];if(t){var n=e[t.definition.options];if(n&&0!==Object.keys(n).length){this.mappedOptions=this.createParentChildOptionsMap(n,this.options);var i=[];"multienum"===t.definition.type?i=t.valueList:i.push(t.value),this.options=this.filterMatchingOptions(i)}}}},{key:"filterMatchingOptions",value:function(e){var t=this,n=[];return e&&e.length?(e.forEach(function(e){!t.mappedOptions[e]||(n=n.concat(S(t.mappedOptions[e])))}),n):[]}},{key:"createParentChildOptionsMap",value:function(e,t){var n={};return Object.keys(e).forEach(function(e){n[e]=t.filter(function(t){return String(t.value).startsWith(e)})}),n}},{key:"subscribeToParentValueChanges",value:function(e){var t=this;e.formControl&&this.subs.push(e.formControl.valueChanges.subscribe(function(e){"string"==typeof e&&(e=[e]),t.field.value="",t.field.formControl.setValue(""),t.options=t.filterMatchingOptions(e),t.initValue()}))}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),dy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).languages=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a}return j(n,[{key:"initValue",value:function(){var e=this;this.selectedValues=[],!this.field.valueList||this.field.valueList.length<1?this.initEnumDefault():this.field.valueList.forEach(function(t){"string"==typeof e.optionsMap[t]&&e.selectedValues.push({value:t,label:e.optionsMap[t]})})}}]),n}(cy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),fy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).languages=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a}return j(n,[{key:"ngOnInit",value:function(){this.field.valueList=[],this.field.criteria.values&&this.field.criteria.values.length>0&&(this.field.valueList=this.field.criteria.values),l(h(n.prototype),"ngOnInit",this).call(this)}},{key:"onAdd",value:function(){var e=this.selectedValues.map(function(e){return e.value});this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty(),this.field.criteria.operator="=",this.field.criteria.values=e}},{key:"onRemove",value:function(){var e=this,t=this.selectedValues.map(function(e){return e.value});t||(t=[]),this.field.valueList=t,this.field.formControl.setValue(t),this.field.formControl.markAsDirty(),this.field.criteria.operator="=",this.field.criteria.values=t,setTimeout(function(){e.tag.focus(!0,!0),e.tag.dropdown.show()},200)}},{key:"getPlaceholderLabel",value:function(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}},{key:"selectFirstElement",value:function(){var e=this.tag.dropdown.items;0!==e.length&&(this.selectedValues.push(e[0]),this.onAdd(),this.tag.dropdown.hide())}}]),n}(dy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-multienum-filter"]],viewQuery:function(e,t){var n;(1&e&&k.\u0275\u0275viewQuery(_a,5),2&e)&&(k.\u0275\u0275queryRefresh(n=k.\u0275\u0275loadQuery())&&(t.tag=n.first))},features:[k.\u0275\u0275InheritDefinitionFeature],decls:3,vars:13,consts:[[3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove","keyup.enter"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"tag-input",0,1),k.\u0275\u0275listener("ngModelChange",function(e){return t.selectedValues=e})("onAdd",function(){return t.onAdd()})("onRemove",function(){return t.onRemove()})("keyup.enter",function(){return t.selectFirstElement()}),k.\u0275\u0275element(2,"tag-input-dropdown",2),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275property("ngModel",t.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",t.getPlaceholderLabel())("secondaryPlaceholder",t.getPlaceholderLabel())("inputClass",t.getInvalidClass()),k.\u0275\u0275advance(2),k.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",t.options))},directives:[Rr.TagInputComponent,V.NgControlStatus,V.NgModel,Rr.TagInputDropdown],encapsulation:2}),e}(),py=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).languages=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a}return n}(cy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-enum-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,t){1&e&&k.\u0275\u0275text(0),2&e&&k.\u0275\u0275textInterpolate1("\n",t.valueLabel,"\n")},encapsulation:2}),e}(),my=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule]]}),e}(),hy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o}return j(n,[{key:"getNameField",value:function(e,t){if(e.value&&t.attributes){var n=e.value.split(" "),i=[];return n.forEach(function(e){t.attributes[e]&&i.push(t.attributes[e])}),i.join(" ")}}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),vy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o}return j(n,[{key:"ngOnInit",value:function(){l(h(n.prototype),"ngOnInit",this).call(this),this.data=this.getNameField(this.field,this.record)}}]),n}(hy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-fullname-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,t){1&e&&k.\u0275\u0275text(0),2&e&&k.\u0275\u0275textInterpolate1("\n",t.data,"\n")},encapsulation:2}),e}(),gy=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),yy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o}return n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-varchar-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,t){1&e&&k.\u0275\u0275text(0),2&e&&k.\u0275\u0275textInterpolate1("\n",t.field.value,"\n")},encapsulation:2}),e}(),by=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o}return j(n,[{key:"target",get:function(){return this.field.metadata&&this.field.metadata.target?this.field.metadata.target:"_blank"}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-url-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[3,"target","href"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"a",0),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275propertyInterpolate("href",t.field.value,k.\u0275\u0275sanitizeUrl),k.\u0275\u0275property("target",t.target),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate(t.field.value))},encapsulation:2}),e}(),Sy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,i,r,o)).formatter=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a.vm$=a.formatter.format$,a}return j(n,[{key:"getDateFormat",value:function(){return this.field.metadata.date_time_format?this.field.metadata.date_time_format:this.formatter.getDateFormat()}},{key:"getDateTimeFormat",value:function(){return this.formatter.getDateTimeFormat()}},{key:"toInternalFormat",value:function(e,t){return this.formatter.toInternalFormat(t,{fromFormat:this.getDateTimeFormat()})}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Dh),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),Cy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).formatter=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a}return j(n,[{key:"toInternalFormat",value:function(e,t){return this.formatter.toInternalFormat(t,{fromFormat:this.getDateFormat()})}}]),n}(Sy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Dh),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),ky=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).formatter=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a}return n}(Cy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ah),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-date-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Fa,3,4,"ng-container",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf],pipes:[B.AsyncPipe,B.DatePipe],encapsulation:2}),e}(),wy=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),Iy=function(){var e=function(){function e(t){I(this,e),this.formatter=t}return j(e,[{key:"transform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.formatter.toUserFormat(e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(iv,16))},e.\u0275pipe=k.\u0275\u0275definePipe({name:"formatCurrency",type:e,pure:!0}),e}(),xy=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),jy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a){var s;return I(this,n),(s=t.call(this,r,o,a)).userPreferences=e,s.systemConfig=i,s.typeFormatter=r,s.logic=o,s.logicDisplay=a,s.preferences$=s.userPreferences.userPreferences$,s.configs$=s.systemConfig.configs$,s.vm$=(0,x.combineLatest)([s.configs$,s.preferences$]).pipe((0,M.map)(function(e){var t=v(e,2);return{configs:t[0],preferences:t[1]}})),s}return j(n,[{key:"format",get:function(){return!this.field.metadata||!1!==this.field.metadata.format}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(ah),k.\u0275\u0275directiveInject(Gm),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),Ey=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s){var l;return I(this,n),(l=t.call(this,e,i,r,o,s)).userPreferences=e,l.systemConfig=i,l.typeFormatter=r,l.logic=o,l.currencyService=a,l.logicDisplay=s,l}return j(n,[{key:"getOptions",value:function(){var e={};this.field&&this.field.metadata&&null!==this.field.metadata.digits&&isFinite(this.field.metadata.digits)&&(e={digits:this.field.metadata.digits});var t=this.currencyService.isBase(this.field),n=this.currencyService.getCurrencyId(this.record);return(t||null===n)&&(n=this.currencyService.getUserCurrency().id),e.symbol=this.currencyService.getSymbol(n),e.code=this.currencyService.getCode(n),e}},{key:"getCurrencyValue",value:function(){return this.currencyService.getFieldCurrencyValue(this.field,this.record)}}]),n}(jy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(ah),k.\u0275\u0275directiveInject(Gm),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(Ug),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-currency-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,La,3,4,"ng-container",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf],pipes:[B.AsyncPipe,Iy],encapsulation:2}),e}(),My=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,xy]]}),e}(),_y=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o}return j(n,[{key:"rows",get:function(){return this.field.metadata&&this.field.metadata.rows?this.field.metadata.rows:6}},{key:"cols",get:function(){return this.field.metadata&&this.field.metadata.cols?this.field.metadata.cols:20}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-text-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:4,consts:[["readonly","",3,"rows","cols","ngClass"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"textarea",0),k.\u0275\u0275text(1),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275property("rows",t.rows)("cols",t.cols)("ngClass",t.klass),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate(t.field.value))},directives:[B.NgClass],encapsulation:2}),e}(),Fy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o}return j(n,[{key:"ngOnInit",value:function(){l(h(n.prototype),"ngOnInit",this).call(this),this.subscribeValueChanges()}},{key:"ngOnDestroy",value:function(){this.unsubscribeAll()}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-varchar-edit"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","text",3,"formControl","value","ngClass"]],template:function(e,t){1&e&&k.\u0275\u0275element(0,"input",0),2&e&&(k.\u0275\u0275classProp("is-invalid",t.field.formControl.invalid&&t.field.formControl.touched),k.\u0275\u0275property("formControl",t.field.formControl)("value",t.field.value)("ngClass",t.klass))},directives:[V.DefaultValueAccessor,V.NgControlStatus,V.FormControlDirective,B.NgClass],encapsulation:2}),e}(),Ly=function(){function e(t){I(this,e),this.hourStep=1,this.minuteStep=15,this.secondStep=30,this.displaySeconds=!1,Object.assign(this,t)}return j(e,[{key:"toUserFormat",value:function(e){var t=[[this.date.year,this.date.month,this.date.day].join("-"),[this.time.hour,this.time.minute,this.time.second].join(":")].join(" "),n=e.toInternalFormat(t,{fromFormat:"yyyy-M-d H:m:s"});return e.toUserFormat(n,{fromFormat:"yyyy-M-d H:m:s"})}}],[{key:"toDateTimeStruct",value:function(t,n){if(!n)return null;var i=t.userDateTimeFormatToStruct(n);return i?new e({date:i.date,time:i.time}):null}},{key:"internalToDateTimeStruct",value:function(t,n){if(!n)return null;var i=t.internalDateTimeFormatToStruct(n);return i?new e({date:i.date,time:i.time}):null}}]),e}(),Oy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s){var l;return I(this,n),(l=t.call(this,e,i,a,s)).formatter=e,l.typeFormatter=i,l.calendar=r,l.config=o,l.logic=a,l.logicDisplay=s,l.dateTimeModel=new Ly,o.autoClose="outside",o.placement=l.getPlacement(),l}return j(n,[{key:"ngOnInit",value:function(){if((0,w.isVoid)(this.field.value)||(0,w.isEmptyString)(this.field.value))this.dateTimeModel.date=this.calendar.getToday(),this.dateTimeModel.time={hour:0,minute:0,second:0},this.field.formControl.setValue(null);else{if(this.dateTimeModel=Ly.internalToDateTimeStruct(this.formatter,this.field.value),null===this.dateTimeModel)return void this.field.formControl.setValue(null);this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}this.formatter.getTimeFormat().includes("ss")&&(this.dateTimeModel.displaySeconds=!0),this.subscribeValueChanges()}},{key:"ngOnDestroy",value:function(){this.unsubscribeAll()}},{key:"setFormValues",value:function(e){this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}},{key:"onDateChange",value:function(e){this.dateTimeModel.date=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}},{key:"onTimeChange",value:function(e){this.dateTimeModel.time=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}},{key:"onInputChange",value:function(e){var t=Ly.toDateTimeStruct(this.formatter,e.target.value);!t||(this.dateTimeModel=t)}},{key:"getOpenButton",value:function(){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"calendar"}}},{key:"getPlacement",value:function(){return["bottom-right","top-right","bottom-left","top-left"]}}]),n}(Sy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Dh),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(Z.NgbCalendar),k.\u0275\u0275directiveInject(Z.NgbPopoverConfig),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-datetime-edit"]],viewQuery:function(e,t){var n;(1&e&&k.\u0275\u0275viewQuery(Z.NgbPopover,7),2&e)&&(k.\u0275\u0275queryRefresh(n=k.\u0275\u0275loadQuery())&&(t.popover=n.first))},features:[k.\u0275\u0275InheritDefinitionFeature],decls:6,vars:7,consts:[[1,"input-group","mr-2"],[3,"ngClass","placeholder","formControl","change"],[1,"input-group-append"],[3,"config","ngbPopover"],["calendarContent",""],["name","datepicker",3,"ngModel","startDate","dateSelect"],[1,"d-flex","justify-content-center","mt-auto"],["name","timepicker",3,"ngModel","seconds","hourStep","minuteStep","secondStep","ngModelChange"]],template:function(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"input",1),k.\u0275\u0275listener("change",function(e){return t.onInputChange(e)}),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(2,"div",2),k.\u0275\u0275element(3,"scrm-button",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(4,Oa,5,7,"ng-template",null,4,k.\u0275\u0275templateRefExtractor)),2&e){var n=k.\u0275\u0275reference(5);k.\u0275\u0275advance(1),k.\u0275\u0275classProp("is-invalid",t.field.formControl.invalid&&t.field.formControl.touched),k.\u0275\u0275property("ngClass",t.klass)("placeholder",t.getDateTimeFormat().toLowerCase())("formControl",t.field.formControl),k.\u0275\u0275advance(2),k.\u0275\u0275property("config",t.getOpenButton())("ngbPopover",n)}},directives:[V.DefaultValueAccessor,B.NgClass,V.NgControlStatus,V.FormControlDirective,Hv,Z.NgbPopover,Z.NgbDatepicker,V.NgModel,Z.NgbTimepicker],encapsulation:2}),e}(),Dy=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule,Z.NgbDatepickerModule,Z.NgbTimepickerModule,Uv,qv,V.ReactiveFormsModule,Z.NgbModule]]}),e}(),Ay=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this)).formatter=e,i}return j(n,[{key:"getUserFormat",value:function(){return this.userFormat}},{key:"setUserFormat",value:function(e){this.userFormat=e}},{key:"parse",value:function(e){if(!e)return null;var t={fromFormat:"yyyy-M-d"};return this.userFormat&&(t.toFormat=this.userFormat),this.formatter.dateFormatToStruct(e,t.toFormat||this.formatter.getUserFormat())}},{key:"format",value:function(e){if(!e)return null;var t=[e.year,e.month,e.day].join("-"),n={fromFormat:"yyyy-M-d"};return this.userFormat&&(n.toFormat=this.userFormat),this.formatter.toUserFormat(t,n)}}]),n}(Z.NgbDateParserFormatter);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ah))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Ny=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this)).formatter=e,i}return j(n,[{key:"getUserFormat",value:function(){return this.userFormat}},{key:"setUserFormat",value:function(e){this.userFormat=e}},{key:"fromModel",value:function(e){return e?this.formatter.dateFormatToStruct(e,this.userFormat||""):null}},{key:"toModel",value:function(e){if(!e)return null;var t=[e.year,e.month,e.day].join("-"),n={fromFormat:"yyyy-M-d"};return this.userFormat&&(n.toFormat=this.userFormat),this.formatter.toUserFormat(t,n)}}]),n}(Z.NgbDateAdapter);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ah))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Ry=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).formatter=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a}return j(n,[{key:"ngOnInit",value:function(){l(h(n.prototype),"ngOnInit",this).call(this);var e=null;this.field.criteria.values&&this.field.criteria.values.length>0&&(e=this.field.criteria.values[0]);var t=null;!(0,w.isVoid)(e)&&!(0,w.isEmptyString)(e)&&(e=e.trim(),t=this.typeFormatter.toUserFormat(this.field.type,e,{mode:"edit"})),this.field.value=null!=e?e:"",this.field.formControl.setValue(t),this.field.formControl.markAsDirty(),(0,w.isVoid)(e)||this.setModel(e),this.subscribeValueChanges()}},{key:"ngOnDestroy",value:function(){this.unsubscribeAll()}},{key:"setModel",value:function(e){this.field.formControl.setValue(e),this.field.value=this.formatter.toInternalFormat(e),this.dateModel=this.formatter.dateFormatToStruct(e,this.formatter.getUserFormat())}},{key:"getOpenButton",value:function(e){var t=this;return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",onClick:function(){e.toggle(),e.navigateTo(t.dateModel)},icon:"calendar"}}},{key:"getPlacement",value:function(){return["bottom-left","bottom-right","top-left","top-right"]}},{key:"setFieldValue",value:function(e){this.field.value=e,this.field.criteria.operator="=",this.field.criteria.values=[e]}}]),n}(Cy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ah),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-date-filter"]],features:[k.\u0275\u0275ProvidersFeature([{provide:Z.NgbDateAdapter,useClass:Ny},{provide:Z.NgbDateParserFormatter,useClass:Ay}]),k.\u0275\u0275InheritDefinitionFeature],decls:5,vars:8,consts:[[1,"input-group"],["ngbDatepicker","",3,"ngClass","placement","placeholder","formControl","startDate","ngModelChange"],["datepicker","ngbDatepicker"],[1,"input-group-append","align-items-end"],[3,"config"]],template:function(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"input",1,2),k.\u0275\u0275listener("ngModelChange",function(e){return t.setModel(e)}),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(3,"span",3),k.\u0275\u0275element(4,"scrm-button",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275reference(2);k.\u0275\u0275advance(1),k.\u0275\u0275classProp("is-invalid",t.field.formControl.invalid&&t.field.formControl.touched),k.\u0275\u0275property("ngClass",t.klass)("placement",t.getPlacement())("placeholder",t.getDateFormat().toLowerCase())("formControl",t.field.formControl)("startDate",t.dateModel),k.\u0275\u0275advance(3),k.\u0275\u0275property("config",t.getOpenButton(n))}},directives:[Z.NgbInputDatepicker,V.DefaultValueAccessor,B.NgClass,V.NgControlStatus,V.FormControlDirective,Hv],encapsulation:2}),e}(),Ty=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).formatter=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a}return j(n,[{key:"getUserTimeZone",value:function(){return this.formatter.userTimeZone()}},{key:"toDateTime",value:function(e){return this.formatter.toDateTime(e,this.formatter.getInternalFormat(),{zone:"GMT"}).toJSDate()}}]),n}(Sy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Dh),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-datetime-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Aa,2,1,"ng-container",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf],pipes:[B.AsyncPipe,B.DatePipe],encapsulation:2}),e}(),Py=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),By=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s){var l;return I(this,n),(l=t.call(this,e,i,a,s)).formatter=e,l.typeFormatter=i,l.calendar=r,l.config=o,l.logic=a,l.logicDisplay=s,l.dateTimeModel=new Ly,o.autoClose="outside",o.placement=l.getPlacement(),l}return j(n,[{key:"ngOnInit",value:function(){l(h(n.prototype),"ngOnInit",this).call(this);var e="";if((this.field&&this.field.criteria&&this.field.criteria.values||[]).length>0&&(e=this.field.criteria.values[0]),(0,w.isEmptyString)(e))this.dateTimeModel.date=this.calendar.getToday(),this.dateTimeModel.time={hour:0,minute:0,second:0},this.field.formControl.setValue(null);else{if(this.dateTimeModel=Ly.internalToDateTimeStruct(this.formatter,e),null===this.dateTimeModel)return void this.field.formControl.setValue(null);this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}this.formatter.getTimeFormat().includes("ss")&&(this.dateTimeModel.displaySeconds=!0),this.subscribeValueChanges()}},{key:"ngOnDestroy",value:function(){this.unsubscribeAll()}},{key:"setFormValues",value:function(e){this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}},{key:"setFieldValue",value:function(e){this.field.value=e,this.field.criteria.operator="=",this.field.criteria.values=[e]}},{key:"onDateChange",value:function(e){this.dateTimeModel.date=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}},{key:"onTimeChange",value:function(e){this.dateTimeModel.time=e,this.setFormValues(this.dateTimeModel.toUserFormat(this.formatter))}},{key:"onInputChange",value:function(e){var t=Ly.toDateTimeStruct(this.formatter,e.target.value);!t||(this.dateTimeModel=t)}},{key:"getOpenButton",value:function(){return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"calendar"}}},{key:"getPlacement",value:function(){return["bottom-right","top-right","bottom-left","top-left"]}}]),n}(Sy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Dh),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(Z.NgbCalendar),k.\u0275\u0275directiveInject(Z.NgbPopoverConfig),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-datetime-filter"]],viewQuery:function(e,t){var n;(1&e&&k.\u0275\u0275viewQuery(Z.NgbPopover,7),2&e)&&(k.\u0275\u0275queryRefresh(n=k.\u0275\u0275loadQuery())&&(t.popover=n.first))},features:[k.\u0275\u0275InheritDefinitionFeature],decls:6,vars:7,consts:[[1,"input-group","mr-2"],[3,"ngClass","placeholder","formControl","change"],[1,"input-group-append"],[3,"config","ngbPopover"],["calendarContent",""],["name","datepicker",3,"ngModel","startDate","dateSelect"],[1,"d-flex","justify-content-center","mt-auto"],["name","timepicker",3,"ngModel","seconds","hourStep","minuteStep","secondStep","ngModelChange"]],template:function(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"input",1),k.\u0275\u0275listener("change",function(e){return t.onInputChange(e)}),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(2,"div",2),k.\u0275\u0275element(3,"scrm-button",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(4,Na,5,7,"ng-template",null,4,k.\u0275\u0275templateRefExtractor)),2&e){var n=k.\u0275\u0275reference(5);k.\u0275\u0275advance(1),k.\u0275\u0275classProp("is-invalid",t.field.formControl.invalid&&t.field.formControl.touched),k.\u0275\u0275property("ngClass",t.klass)("placeholder",t.getDateTimeFormat().toLowerCase())("formControl",t.field.formControl),k.\u0275\u0275advance(2),k.\u0275\u0275property("config",t.getOpenButton())("ngbPopover",n)}},directives:[V.DefaultValueAccessor,B.NgClass,V.NgControlStatus,V.FormControlDirective,Hv,Z.NgbPopover,Z.NgbDatepicker,V.NgModel,Z.NgbTimepicker],encapsulation:2}),e}(),$y=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule,Z.NgbDatepickerModule,Z.NgbTimepickerModule,Uv,qv,V.ReactiveFormsModule,Z.NgbModule]]}),e}(),Vy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).languages=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a}return n}(dy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-multienum-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"ul"),k.\u0275\u0275template(1,Ra,2,1,"li",0),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",t.selectedValues))},directives:[B.NgForOf],encapsulation:2}),e}(),Uy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).languages=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a}return j(n,[{key:"ngOnInit",value:function(){this.checkAndInitAsDynamicEnum(),l(h(n.prototype),"ngOnInit",this).call(this)}},{key:"onAdd",value:function(e){if(e&&e.value)return this.field.value=e.value,this.field.formControl.setValue(e.value),void this.field.formControl.markAsDirty();this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.selectedValues=[]}},{key:"onRemove",value:function(){var e=this;this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),setTimeout(function(){e.tag.focus(!0,!0),e.tag.dropdown.show()},200)}},{key:"getPlaceholderLabel",value:function(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}},{key:"selectFirstElement",value:function(){var e=this.tag.dropdown.items;if(0!==e.length){var t=e[0];this.selectedValues.push(t),this.onAdd(t),this.tag.dropdown.hide()}}}]),n}(cy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-enum-edit"]],viewQuery:function(e,t){var n;(1&e&&k.\u0275\u0275viewQuery(_a,5),2&e)&&(k.\u0275\u0275queryRefresh(n=k.\u0275\u0275loadQuery())&&(t.tag=n.first))},features:[k.\u0275\u0275InheritDefinitionFeature],decls:3,vars:15,consts:[["maxItems","1",3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove","keyup.enter"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"tag-input",0,1),k.\u0275\u0275listener("ngModelChange",function(e){return t.selectedValues=e})("onAdd",function(e){return t.onAdd(e)})("onRemove",function(){return t.onRemove()})("keyup.enter",function(){return t.selectFirstElement()}),k.\u0275\u0275element(2,"tag-input-dropdown",2),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275classMap(t.getInvalidClass()),k.\u0275\u0275property("ngModel",t.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",t.getPlaceholderLabel())("secondaryPlaceholder",t.getPlaceholderLabel())("inputClass",t.getInvalidClass()),k.\u0275\u0275advance(2),k.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",t.options))},directives:[Rr.TagInputComponent,V.NgControlStatus,V.NgModel,Rr.TagInputDropdown],encapsulation:2}),e}(),Ky=function(){var e,t=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.apply(this,arguments)}return j(n,[{key:"checked",get:function(){return(0,w.isTrue)(this.field.value)}},{key:"toggle",value:function(){var e="true";this.checked&&(e="false"),this.field.value=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}}]),n}(ly);return t.\u0275fac=function(n){return(e||(e=k.\u0275\u0275getInheritedFactory(t)))(n||t)},t.\u0275cmp=k.\u0275\u0275defineComponent({type:t,selectors:[["ng-component"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),t}(),zy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o}return n}(Ky);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-boolean-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:3,vars:1,consts:[[1,"checkbox-container"],["type","checkbox","disabled","","readonly","","aria-hidden","true",3,"checked"],[1,"checkmark"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"label",0),k.\u0275\u0275element(1,"input",1),k.\u0275\u0275element(2,"span",2),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("checked",t.checked))},encapsulation:2}),e}(),Gy=function(){var e=function(){function e(t){I(this,e),this.systemConfig=t}return j(e,[{key:"toFrontend",value:function(e){var t=this.getLegacyToFrontendMap();return t&&t[e]?t[e]:e}},{key:"toLegacy",value:function(e){var t=this.getFrontendToLegacyMap();return t[e]?t[e]:e}},{key:"isValid",value:function(e){var t=!1;return this.getFrontendToLegacyMap()[e]&&(t=!0),t}},{key:"getLegacyToFrontendMap",value:function(){return this.systemConfig.getConfigValue("module_name_map")}},{key:"getFrontendToLegacyMap",value:function(){var e=this.systemConfig.getConfigValue("module_name_map"),t={};return Object.keys(e).forEach(function(n){t[e[n]]=n}),t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gm))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Gm))},token:e,providedIn:"root"}),e}(),Zy=function(){var e=function(){function e(t){I(this,e),this.systemConfig=t}return j(e,[{key:"toFrontend",value:function(e){var t=this.getLegacyToFrontendMap();return t[e]?t[e]:e}},{key:"toLegacy",value:function(e){var t=this.getFrontendToLegacyMap();return t[e]?t[e]:e}},{key:"isValid",value:function(e){var t=!1;return this.getFrontendToLegacyMap()[e]&&(t=!0),t}},{key:"getLegacyToFrontendMap",value:function(){return this.systemConfig.getConfigValue("action_name_map")}},{key:"getFrontendToLegacyMap",value:function(){var e=this.systemConfig.getConfigValue("action_name_map"),t={};return Object.keys(e).forEach(function(n){t[e[n]]=n}),t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gm))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Gm))},token:e,providedIn:"root"}),e}(),Hy="./#",qy=function(){var e=function(){function e(t,n,i){I(this,e),this.router=t,this.moduleNameMapper=n,this.actionNameMapper=i}return j(e,[{key:"getModuleInfo",value:function(e,t){return t&&t.modules?t.modules[e]:null}},{key:"getModuleLabel",value:function(e,t){if(!t||!t.moduleList||!e)return"";var n=e&&e.labelKey||"";return t.moduleList[n]||n}},{key:"getModuleRoute",value:function(e){var t=e&&e.defaultRoute||"",n=null;return t.startsWith(Hy)&&(n=t.replace(Hy,""),t=null),{route:n,url:t,params:null}}},{key:"navigate",value:function(e){var t=this.getActionRoute(e);return this.router.navigate([t.route],{queryParams:t.params})}},{key:"getActionRoute",value:function(e){var t=e.url,n=null,i={},r=null==e?void 0:e.process;if(t.startsWith(Hy))if(n=t.replace(Hy,""),t=null,e.params)i=e.params;else{var o=n.split("?");n=o[0];var a=o[1],s={};a&&a.split("&").forEach(function(e){var t=e.split("=");s[t[0]]=t[1]}),i=s}return{route:n,url:t,params:i,process:r}}},{key:"getActionLabel",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!(n&&n.modStrings&&t&&e))return"";var r=i;r||(r=t.labelKey);var o=n.modStrings[e]&&n.modStrings[e][r];return o||(o=n.appStrings&&n.appStrings[r]),!o&&t.module&&(o=n.modStrings[t.module]&&n.modStrings[t.module][r]),o||(o=n.modStrings.administration&&n.modStrings.administration[r]),o||""}},{key:"getRecordRouterLink",value:function(e,t){return"/".concat(e,"/record/").concat(t)}},{key:"navigateBack",value:function(e,t,n){var i=this.getReturnModule(n),r=this.getReturnAction(n),o=this.getReturnId(n),a="";i&&(a+="/"+i),r&&(a+="/"+r),o&&(a+="/"+o),i===t&&"record"===r&&(a="/"+t+"/record/"+(o||e.id)),!a&&e&&e.id&&(a="/"+t+"/record/"+e.id),!a&&e&&e.id&&(a="/"+t),this.router.navigate([a]).then()}},{key:"getReturnId",value:function(e){return e.return_id||""}},{key:"getReturnAction",value:function(e){var t="";return e.return_action&&(t=this.actionNameMapper.toFrontend(e.return_action)),t}},{key:"getReturnModule",value:function(e){var t="";return e.return_module&&(t=this.moduleNameMapper.toFrontend(e.return_module)),t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(Zy))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(Zy))},token:e,providedIn:"root"}),e}(),Wy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u,c,d){var f;return I(this,n),(f=t.call(this,e,i,r)).typeFormatter=e,f.logic=i,f.logicDisplay=r,f.preferences=o,f.navigation=a,f.moduleNameMapper=s,f.actionNameMapper=l,f.appState=u,f.modalService=c,f.router=d,f}return j(n,[{key:"ngOnInit",value:function(){this.linkType=this.preferences.getUserPreference("email_link_type")||"mailto"}},{key:"openEmail",value:function(){var e,t=this.actionNameMapper.toLegacy(this.appState.getView()),n=this.moduleNameMapper.toLegacy(this.parent.module),i=this.parent.id;"ListView"!==t&&"index"!==t&&(e=i),this.router.navigate(["emails","compose"],{queryParams:{return_module:n,return_action:t,return_id:e,to_addrs_names:this.field.value,parent_type:n,parent_name:this.parent.attributes.name,parent_id:i}})}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy),k.\u0275\u0275directiveInject(ah),k.\u0275\u0275directiveInject(qy),k.\u0275\u0275directiveInject(Gy),k.\u0275\u0275directiveInject(Zy),k.\u0275\u0275directiveInject(jv),k.\u0275\u0275directiveInject(Z.NgbModal),k.\u0275\u0275directiveInject(Ar.Router))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-email-list"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"mailto-field"],[3,"href",4,"ngIf"],["class","clickable field-link",3,"click",4,"ngIf"],[3,"href"],[1,"clickable","field-link",3,"click"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275template(1,Ta,2,2,"a",1),k.\u0275\u0275template(2,Pa,2,1,"a",2),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","mailto"===t.linkType),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf","sugar"===t.linkType))},directives:[B.NgIf],encapsulation:2}),e}(),Qy=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),Yy=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o}return j(n,[{key:"ngOnInit",value:function(){l(h(n.prototype),"ngOnInit",this).call(this);var e="";this.field.criteria&&this.field.criteria.values&&this.field.criteria.values.length>0&&(e=this.field.criteria.values[0]),e=(0,w.isVoid)(e)?"":e.trim(),this.field.value=e;var t=this.typeFormatter.toUserFormat(this.field.type,e,{mode:"edit"});this.field.formControl.setValue(t),this.field.formControl.markAsDirty(),this.subscribeValueChanges()}},{key:"ngOnDestroy",value:function(){this.unsubscribeAll()}},{key:"setFieldValue",value:function(e){this.field.value=e,this.field.criteria.operator="=",this.field.criteria.values=[e]}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-varchar-filter"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","text",3,"formControl","value","ngClass"]],template:function(e,t){1&e&&k.\u0275\u0275element(0,"input",0),2&e&&(k.\u0275\u0275classProp("is-invalid",t.field.formControl.invalid&&t.field.formControl.touched),k.\u0275\u0275property("formControl",t.field.formControl)("value",t.field.value)("ngClass",t.klass))},directives:[V.DefaultValueAccessor,V.NgControlStatus,V.FormControlDirective,B.NgClass],encapsulation:2}),e}(),Xy=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Rr.TagInputModule,V.FormsModule]]}),e}(),Jy=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule]]}),e}(),eb=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"getDownloadEntrypointLink",value:function(e,t){return"./index.php"+this.buildQueryString({entryPoint:"download",id:e,type:t})}},{key:"buildQueryString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new Tr.HttpParams;return Object.keys(e).forEach(function(i){t.includes(i)||(n=n.set(i,e[i]))}),n.keys().length>0?"?"+n.toString():""}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),tb=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r)).typeFormatter=e,a.logic=i,a.logicDisplay=r,a.legacyEntrypointLinkBuilder=o,a.filenameLink="",a}return j(n,[{key:"ngOnInit",value:function(){this.filenameLink=this.legacyEntrypointLinkBuilder.getDownloadEntrypointLink(this.record.id,this.record.module)}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy),k.\u0275\u0275directiveInject(eb))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-file-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"clickable","field-link",3,"href"]],template:function(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"a",0),k.\u0275\u0275text(2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("href",t.filenameLink,k.\u0275\u0275sanitizeUrl),k.\u0275\u0275advance(1),k.\u0275\u0275textInterpolate1(" ",t.field.value," "))},encapsulation:2}),e}(),nb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Ar.RouterModule]]}),e}(),ib=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a){var s;return I(this,n),(s=t.call(this,e,i,r,o,a)).userPreferences=e,s.systemConfig=i,s.typeFormatter=r,s.logic=o,s.logicDisplay=a,s}return n}(jy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(ah),k.\u0275\u0275directiveInject(Gm),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-float-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Ba,3,3,"ng-container",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:function(){return[B.NgIf]},pipes:function(){return[B.AsyncPipe,rb]},encapsulation:2}),e}(),rb=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this,i)).formatter=e,r.locale=i,r}return j(n,[{key:"transform",value:function(e,t,n){return e?this.formatter.toUserFormat(""+e):null}}]),n}(B.DecimalPipe);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Fh,16),k.\u0275\u0275directiveInject(k.LOCALE_ID,16))},e.\u0275pipe=k.\u0275\u0275definePipe({name:"formatNumber",type:e,pure:!0}),e}(),ob=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),ab=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,ob]]}),e}(),sb=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s){var l;return I(this,n),(l=t.call(this,e,o,a,s)).formatter=e,l.dateAdapter=i,l.dateParserFormatter=r,l.typeFormatter=o,l.logic=a,l.logicDisplay=s,l}return j(n,[{key:"ngOnInit",value:function(){(0,w.isVoid)(this.field.value)||(0,w.isEmptyString)(this.field.value)?this.field.formControl.setValue(null):this.field.formControl.setValue(this.formatter.toUserFormat(this.field.value,{toFormat:this.getDateFormat()})),this.dateAdapter.setUserFormat(this.getDateFormat()),this.dateParserFormatter.setUserFormat(this.getDateFormat()),this.dateModel=this.formatter.dateFormatToStruct(this.field.value,this.formatter.getInternalFormat()),this.subscribeValueChanges()}},{key:"ngOnDestroy",value:function(){this.unsubscribeAll()}},{key:"setModel",value:function(e){this.field.value=this.formatter.toInternalFormat(e,{fromFormat:this.getDateFormat()}),this.dateModel=this.formatter.dateFormatToStruct(e,this.getDateFormat())}},{key:"getOpenButton",value:function(e){var t=this;return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",onClick:function(){e.toggle(),e.navigateTo(t.dateModel)},icon:"calendar"}}},{key:"getPlacement",value:function(){return["bottom-left","bottom-right","top-left","top-right"]}}]),n}(Cy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ah),k.\u0275\u0275directiveInject(Z.NgbDateAdapter),k.\u0275\u0275directiveInject(Z.NgbDateParserFormatter),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-date-edit"]],features:[k.\u0275\u0275ProvidersFeature([{provide:Z.NgbDateAdapter,useClass:Ny},{provide:Z.NgbDateParserFormatter,useClass:Ay}]),k.\u0275\u0275InheritDefinitionFeature],decls:5,vars:8,consts:[[1,"field-datetime-edit","input-group"],["ngbDatepicker","",3,"ngClass","placement","placeholder","formControl","startDate","ngModelChange"],["datepicker","ngbDatepicker"],[1,"input-group-append","align-items-end"],[3,"config"]],template:function(e,t){if(1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"input",1,2),k.\u0275\u0275listener("ngModelChange",function(e){return t.setModel(e)}),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(3,"span",3),k.\u0275\u0275element(4,"scrm-button",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e){var n=k.\u0275\u0275reference(2);k.\u0275\u0275advance(1),k.\u0275\u0275classProp("is-invalid",t.field.formControl.invalid&&t.field.formControl.touched),k.\u0275\u0275property("ngClass",t.klass)("placement",t.getPlacement())("placeholder",t.getDateFormat().toLowerCase())("formControl",t.field.formControl)("startDate",t.dateModel),k.\u0275\u0275advance(3),k.\u0275\u0275property("config",t.getOpenButton(n))}},directives:[Z.NgbInputDatepicker,V.DefaultValueAccessor,B.NgClass,V.NgControlStatus,V.FormControlDirective,Hv],encapsulation:2}),e}(),lb=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).languages=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a}return j(n,[{key:"ngOnInit",value:function(){this.field.value="",this.field.criteria.values&&this.field.criteria.values.length>0&&(this.field.value=this.field.criteria.values[0]),l(h(n.prototype),"ngOnInit",this).call(this)}},{key:"onAdd",value:function(e){if(e&&e.value)return this.field.value=e.value,this.field.formControl.setValue(e.value),this.field.formControl.markAsDirty(),this.field.criteria.operator="=",void(this.field.criteria.values=[e.value]);this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.selectedValues=[],this.field.criteria.operator="",this.field.criteria.values=[]}},{key:"onRemove",value:function(){var e=this;this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.field.criteria.operator="",this.field.criteria.values=[],setTimeout(function(){e.tag.focus(!0,!0),e.tag.dropdown.show()},200)}},{key:"getPlaceholderLabel",value:function(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}}]),n}(cy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-boolean-filter"]],viewQuery:function(e,t){var n;(1&e&&k.\u0275\u0275viewQuery(_a,5),2&e)&&(k.\u0275\u0275queryRefresh(n=k.\u0275\u0275loadQuery())&&(t.tag=n.first))},features:[k.\u0275\u0275InheritDefinitionFeature],decls:3,vars:15,consts:[["maxItems","1",3,"ngModel","clearOnBlur","displayBy","identifyBy","inputClass","onlyFromAutocomplete","placeholder","secondaryPlaceholder","onAdd","onRemove","ngModelChange"],["tag",""],[3,"autocompleteItems","displayBy","identifyBy","keepOpen","showDropdownIfEmpty"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"tag-input",0,1),k.\u0275\u0275listener("onAdd",function(e){return t.onAdd(e)})("onRemove",function(){return t.onRemove()})("ngModelChange",function(e){return t.selectedValues=e}),k.\u0275\u0275element(2,"tag-input-dropdown",2),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275classMap(t.getInvalidClass()),k.\u0275\u0275property("ngModel",t.selectedValues)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("inputClass",t.getInvalidClass())("onlyFromAutocomplete",!0)("placeholder",t.getPlaceholderLabel())("secondaryPlaceholder",t.getPlaceholderLabel()),k.\u0275\u0275advance(2),k.\u0275\u0275property("autocompleteItems",t.options)("displayBy","label")("identifyBy","value")("keepOpen",!1)("showDropdownIfEmpty",!0))},directives:[Rr.TagInputComponent,V.NgControlStatus,V.NgModel,Rr.TagInputDropdown],encapsulation:2}),e}(),ub=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule,V.ReactiveFormsModule]]}),e}(),cb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule,V.ReactiveFormsModule,Rr.TagInputModule]]}),e}(),db=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o}return n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-relate-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,t){1&e&&k.\u0275\u0275text(0),2&e&&k.\u0275\u0275textInterpolate1("\n",t.field.value,"\n")},encapsulation:2}),e}(),fb=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"getConfig",value:function(e){return{klass:"light-filter",panelMode:"collapsible",isCollapsed:!0,collapseOnSearch:!0,savedFilterEdit:!1,displayHeader:!0,module:e.recordList.getModule(),filter$:e.recordList.criteria$.pipe((0,M.map)(function(e){return{key:"default",criteria:e}})),savedFilters$:(0,x.of)([]),searchFields$:e.searchMetadata$.pipe((0,M.map)(function(e){if(!e)return{};var t="advanced";return e.layout.advanced||(t="basic"),e.layout[t]})),listFields:[],onClose:function(){},onSearch:function(){},updateFilter:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.recordList.updateSearchCriteria(t.criteria,n)},resetFilter:function(t){e.recordList.resetSearchCriteria(t)},addSavedFilter:function(e){},removeSavedFilter:function(e){},setOpenFilter:function(e){}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),pb=function(){function e(t,n){I(this,e),this.systemConfigs=t,this.preferences=n}return j(e,[{key:"getTable",value:function(e){var t,n,i=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o={showHeader:!0,showFooter:!0,klass:"light-table",module:e.recordList.getModule(),columns:e.columns$.pipe((0,M.map)(function(t){return i.mapColumns(e,t)})),sort$:e.recordList.sort$,maxColumns$:(0,x.of)(5),loading$:e.recordList.loading$,dataSource:e.recordList,pagination:e.recordList,toggleRecordSelection:function(t){e.recordList.toggleSelection(t)},updateSorting:function(t,n){e.recordList.updateSorting(t,n),e.saveCurrentSort()},maxListHeight:null!==(t=this.preferences.getUserPreference("record_modal_max_height"))&&void 0!==t?t:this.systemConfigs.getConfigValue("record_modal_max_height"),paginationType:null!==(n=this.preferences.getUserPreference("record_modal_pagination_type"))&&void 0!==n?n:this.systemConfigs.getConfigValue("record_modal_pagination_type"),loadMore:function(){var t,n=null!==(t=i.preferences.getUserPreference("list_max_entries_per_modal"))&&void 0!==t?t:i.systemConfigs.getConfigValue("list_max_entries_per_modal"),r=e.recordList.getPagination(),o=Number(r.pageSize||0)+Number(n);e.recordList.setPageSize(o),e.recordList.updatePagination(r.current)},allLoaded:function(){var t=e.recordList.getPagination();return!!t&&(Number(t.pageLast)>=Number(t.total)||Number(t.pageSize)>=Number(t.total))}};return r&&(o.selection$=e.recordList.selection$,o.selectedCount$=e.recordList.selectedCount$,o.selectedStatus$=e.recordList.selectedStatus$),o}},{key:"mapColumns",value:function(e,t){var n=this,i=[];return t.forEach(function(t){var r=Object.assign({},t);r.metadata=Object.assign({},t.metadata||{}),n.disableRelateFieldsLink(r),n.addLinkSelectHandler(e,r),i.push(r)}),i}},{key:"disableRelateFieldsLink",value:function(e){"relate"===e.type&&(e.link=!1,e.metadata.link=!1)}},{key:"addLinkSelectHandler",value:function(e,t){!t.link||(t.metadata.onClick=function(t,n){e.recordList.clearSelection(),e.recordList.toggleSelection(n.id),e.emitLinkClicked()})}}]),e}(),mb=function(){var e=function(){function e(t,n,i){I(this,e),this.listStoreFactory=t,this.meta=n,this.preferences=i,this.module="",this.parentModule="",this.recordList=t.create(),this.loading$=this.recordList.loading$,this.metadataLoadingState=new x.BehaviorSubject(!1),this.linkClickedState=new x.BehaviorSubject(!1),this.linkClicked$=this.linkClickedState.asObservable(),this.metadataLoading$=this.metadataLoadingState.asObservable(),this.selection$=this.recordList.selection$,this.selectedCount$=this.recordList.selectedCount$,this.selectedStatus$=this.recordList.selectedStatus$}return j(e,[{key:"clear",value:function(){this.recordList.clear(),this.recordList=null}},{key:"clearAuthBased",value:function(){this.recordList.clearAuthBased()}},{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.module=e,this.parentModule=n,this.loadCurrentSort(),this.metadataLoadingState.next(!0);var i=this.meta.getMetadata(e).pipe((0,M.tap)(function(){t.metadataLoadingState.next(!1),t.recordList.load().pipe((0,M.take)(1)).subscribe()}));this.listMetadata$=i.pipe((0,M.map)(function(e){return e.listView})),this.searchMetadata$=i.pipe((0,M.map)(function(e){return e.search})),this.recordList.init(e,!1,"list_max_entries_per_modal"),this.columns$=this.listMetadata$.pipe((0,M.map)(function(e){return e.fields}))}},{key:"load",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.recordList.load(e)}},{key:"loadCurrentSort",value:function(){if(this.parentModule){var e=this.loadPreference(this.parentModule,"current-sort");!e||(0,w.emptyObject)(e)||(this.recordList.sort=e)}}},{key:"saveCurrentSort",value:function(){!this.parentModule||this.savePreference(this.parentModule,"current-sort",this.recordList.sort)}},{key:"emitLinkClicked",value:function(){this.linkClickedState.next(!0)}},{key:"getPreferenceKey",value:function(e){return this.module+"-record-list-modal-"+e}},{key:"savePreference",value:function(e,t,n){this.preferences.setUi(e,this.getPreferenceKey(t),n)}},{key:"loadPreference",value:function(e,t){return this.preferences.getUi(e,this.getPreferenceKey(t))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(mh),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(ah))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),hb=function(){var e=function(){function e(t,n,i){I(this,e),this.listStoreFactory=t,this.metadataStore=n,this.preferences=i}return j(e,[{key:"create",value:function(){return new mb(this.listStoreFactory,this.metadataStore,this.preferences)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(mh),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(ah))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(mh),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(ah))},token:e,providedIn:"root"}),e}(),vb=function(){var e=function(){function e(t,n){I(this,e),this.screenSize=t,this.systemConfigStore=n,this.screen=Zm.Medium,this.maxColumns=5}return j(e,[{key:"getMaxColumns",value:function(e){var t=this;return(0,x.combineLatest)([e,this.screenSize.screenSize$]).pipe((0,M.map)(function(e){var n=v(e,2),i=n[0],r=n[1];return r&&(t.screen=r),t.calculateMaxColumns(i)}),(0,M.distinctUntilChanged)())}},{key:"calculateMaxColumns",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e=this.systemConfigStore.getConfigValue("listview_column_limits"),e=t?e.with_sidebar:e.without_sidebar,this.screen&&e){var n=e[this.screen];n&&(this.maxColumns=n)}return this.maxColumns}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Hm),k.\u0275\u0275inject(Gm))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),gb=function(){var e=function(){function e(t,n,i,r,o,a){I(this,e),this.activeModal=t,this.storeFactory=n,this.languages=i,this.maxColumnCalculator=r,this.preferences=o,this.systemConfigs=a,this.titleKey="",this.multiSelect=!1,this.multiSelectButtonLabel="LBL_SAVE",this.adapter=null,this.filterAdapter=null,this.subs=[],this.store=this.storeFactory.create()}return j(e,[{key:"ngOnInit",value:function(){var e=this;this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:function(){e.activeModal.close({type:"close-button"})}},this.init()}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"init",value:function(){!this.module||(this.initStore(),this.initTableAdapter(),this.initFilterAdapters())}},{key:"getMaxColumns",value:function(){return this.maxColumnCalculator.getMaxColumns((0,x.of)(!0))}},{key:"linkSelectedRecords",value:function(){this.activeModal.close({selection:this.store.recordList.selection,records:this.store.recordList.records})}},{key:"buildSelectButton",value:function(){var e=this;return{klass:["btn","btn-primary","btn-sm"],onClick:function(){e.linkSelectedRecords()},labelKey:this.multiSelectButtonLabel}}},{key:"initTableAdapter",value:function(){var e,t,n,i,r,o;if(null===this.adapter&&(this.adapter=new pb(this.systemConfigs,this.preferences)),this.tableConfig=this.adapter.getTable(this.store,this.multiSelect),(null===(t=null===(e=this.store)||void 0===e?void 0:e.listMetadata)||void 0===t?void 0:t.maxHeight)&&(this.tableConfig.maxListHeight=this.store.listMetadata.maxHeight),!(null===(n=this.tableConfig)||void 0===n?void 0:n.maxListHeight)){var a=null!==(i=this.systemConfigs.getConfigValue("ui"))&&void 0!==i?i:{},s=null!==(r=this.systemConfigs.getConfigValue("record_modal_max_height"))&&void 0!==r?r:"";this.tableConfig.maxListHeight=null!==(o=a.record_modal_max_height)&&void 0!==o?o:s}this.tableConfig.maxColumns$=this.getMaxColumns()}},{key:"initFilterAdapters",value:function(){null===this.filterAdapter&&(this.filterAdapter=new fb),this.filterConfig=this.filterAdapter.getConfig(this.store)}},{key:"initStore",value:function(){var e,t=this;this.store.init(this.module,null!==(e=this.parentModule)&&void 0!==e?e:""),this.loading$=this.store.metadataLoading$,this.subs.push(this.store.linkClicked$.pipe((0,M.distinctUntilChanged)(),(0,M.skip)(1)).subscribe(function(e){!e||t.linkSelectedRecords()}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Z.NgbActiveModal),k.\u0275\u0275directiveInject(hb),k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(vb),k.\u0275\u0275directiveInject(ah),k.\u0275\u0275directiveInject(Gm))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-list-modal"]],inputs:{titleKey:"titleKey",multiSelect:"multiSelect",multiSelectButtonLabel:"multiSelectButtonLabel",adapter:"adapter",filterAdapter:"filterAdapter",module:"module",parentModule:"parentModule"},features:[k.\u0275\u0275ProvidersFeature([vb])],decls:4,vars:5,consts:[["bodyKlass","m-0 small-font","footerKlass","border-0","headerKlass","border-0","klass","record-list-modal",3,"closable","close","title"],["modal-body",""],[4,"ngIf"],["labelKey","LBL_CONFIG_NO_CONFIG"],[1,"container-fluid"],[1,"row","pb-3"],[1,"col"],[3,"config",4,"ngIf"],[1,"row"],[3,"config"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"scrm-modal",0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275template(2,$a,2,0,"ng-container",2),k.\u0275\u0275template(3,Ga,12,6,"ng-container",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275property("closable",!0)("close",t.closeButton)("title",t.titleKey),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",!t.tableConfig),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.tableConfig))},directives:function(){return[wg,B.NgIf,zv,Hw,MI,Pk,Hv]},pipes:function(){return[B.AsyncPipe]},encapsulation:2,data:{animation:[(0,Nr.trigger)("modalFade",[(0,Nr.transition)("void <=> *",[(0,Nr.animate)("800ms")])])]}}),e}(),yb=function(){var e=function(){function e(t){I(this,e),this.recordList=t.create()}return j(e,[{key:"init",value:function(e){this.recordList.init(e,!1)}},{key:"search",value:function(e,t){var n=this.recordList.criteria;return n.filters[t]={field:t,operator:"=",values:[e]},this.recordList.updateSearchCriteria(n,!1),this.recordList.load(!1).pipe((0,M.map)(function(e){return e.records}),(0,M.take)(1),(0,M.shareReplay)(1))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(mh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),bb=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s){var l;return I(this,n),(l=t.call(this,i,a,s)).languages=e,l.typeFormatter=i,l.relateService=r,l.moduleNameMapper=o,l.logic=a,l.logicDisplay=s,l.selectedValues=[],l.status="",l.initModule="",l.search=function(e){return l.status="searching",l.relateService.search(e,l.getRelateFieldName()).pipe((0,M.tap)(function(){return l.status="found"}),(0,M.catchError)(function(){return l.status="error",(0,x.of)([])}),(0,M.map)(function(e){if(!e||e.length<1)return l.status="not-found",[];var t=[];return e.forEach(function(e){e&&e.attributes&&t.push(e.attributes)}),l.status="",t}))},l}return j(n,[{key:"module",get:function(){return this.record&&this.record.module?this.record.module:null}},{key:"ngOnInit",value:function(){var e=this;l(h(n.prototype),"ngOnInit",this).call(this),this.init(),this.subs.push(this.field.valueChanges$.subscribe(function(){e.onModuleChange()}))}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"onModuleChange",value:function(){var e,t,n,i=this.initModule,r=null!==(n=null===(t=null===(e=null==this?void 0:this.field)||void 0===e?void 0:e.definition)||void 0===t?void 0:t.module)&&void 0!==n?n:"";i!==r&&(this.initModule=r,""===i&&i!==r&&this.init(),this.status=""===r?"no-module":"")}},{key:"getRelateFieldName",value:function(){return this.field&&this.field.definition&&this.field.definition.rname||"name"}},{key:"getRelateIdField",value:function(){return this.field&&this.field.definition&&this.field.definition.id_name||""}},{key:"getRelatedModule",value:function(){var e=this.field&&this.field.definition&&this.field.definition.module||"";return e?this.moduleNameMapper.toFrontend(e):""}},{key:"getMessage",value:function(){var e={searching:"LBL_SEARCHING","not-found":"LBL_NOT_FOUND",error:"LBL_SEARCH_ERROR",found:"LBL_FOUND","no-module":"LBL_NO_MODULE_SELECTED"};return e[this.status]?e[this.status]:""}},{key:"getInvalidClass",value:function(){return this.field.formControl&&this.field.formControl.invalid&&this.field.formControl.touched||this.hasSearchError()?"is-invalid":""}},{key:"hasSearchError",value:function(){return"error"===this.status||"not-found"===this.status}},{key:"resetStatus",value:function(){this.status=""}},{key:"getPlaceholderLabel",value:function(){return this.languages.getAppString("LBL_TYPE_TO_SEARCH")||""}},{key:"init",value:function(){var e,t,n;this.initModule=null!==(n=null===(t=null===(e=null==this?void 0:this.field)||void 0===e?void 0:e.definition)||void 0===t?void 0:t.module)&&void 0!==n?n:"",this.relateService&&this.relateService.init(this.getRelatedModule())}},{key:"buildRelate",value:function(e,t){var n={id:e};return this.getRelateFieldName()&&(n[this.getRelateFieldName()]=t),n}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(yb),k.\u0275\u0275directiveInject(Gy),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),Sb=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l){var u;return I(this,n),(u=t.call(this,e,i,r,o,s,l)).languages=e,u.typeFormatter=i,u.relateService=r,u.moduleNameMapper=o,u.modalService=a,u.logic=s,u.logicDisplay=l,u.selectButton={klass:["btn","btn-sm","btn-outline-secondary","select-button","m-0"],onClick:function(){u.showSelectModal()},icon:"cursor"},u}return j(n,[{key:"ngOnInit",value:function(){l(h(n.prototype),"ngOnInit",this).call(this),this.init()}},{key:"init",value:function(){l(h(n.prototype),"init",this).call(this),this.initValue();var e=this.getRelateIdField();e&&this.record&&this.record.fields&&this.record.fields[e]&&(this.idField=this.record.fields[e])}},{key:"initValue",value:function(){return this.field.valueObject&&this.field.valueObject.id?(this.selectedValues=[],void this.selectedValues.push(this.field.valueObject)):(this.selectedValues=[],void this.field.formControl.setValue(""))}},{key:"onAdd",value:function(e){if(e){var t=this.getRelateFieldName();this.setValue(e.id,e[t])}else this.setValue("",""),this.selectedValues=[]}},{key:"onRemove",value:function(){var e=this;this.setValue("",""),this.selectedValues=[],setTimeout(function(){e.tag.focus(!0,!0)},200)}},{key:"setValue",value:function(e,t){var n=this.buildRelate(e,t);this.field.value=t,this.field.valueObject=n,this.field.formControl.setValue(t),this.field.formControl.markAsDirty(),this.idField&&(this.idField.value=e,this.idField.formControl.setValue(e),this.idField.formControl.markAsDirty())}},{key:"showSelectModal",value:function(){var e=this,t=this.modalService.open(gb,{size:"xl",scrollable:!0});t.componentInstance.module=this.getRelatedModule(),t.result.then(function(t){if(t&&t.selection&&t.selection.selected){var n=e.getSelectedRecord(t);e.setItem(n)}})}},{key:"getSelectedRecord",value:function(e){var t="";Object.keys(e.selection.selected).some(function(e){return t=e,!0});var n=null;return e.records.some(function(e){if(e&&e.id===t)return n=e,!0}),n}},{key:"setItem",value:function(e){this.tag.writeValue([e.attributes]),this.onAdd(e.attributes)}},{key:"selectFirstElement",value:function(){var e=this.tag.dropdown.items;if(0!==e.length){var t=e[0];this.selectedValues.push(t),this.onAdd(t),this.tag.dropdown.hide()}}}]),n}(bb);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(yb),k.\u0275\u0275directiveInject(Gy),k.\u0275\u0275directiveInject(Z.NgbModal),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-relate-edit"]],viewQuery:function(e,t){var n;(1&e&&k.\u0275\u0275viewQuery(_a,5),2&e)&&(k.\u0275\u0275queryRefresh(n=k.\u0275\u0275loadQuery())&&(t.tag=n.first))},features:[k.\u0275\u0275ProvidersFeature([yb]),k.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"d-flex"],[4,"ngIf"],["class","text-danger form-text text-muted",4,"ngIf"],[1,"flex-grow-1"],["maxItems","1",3,"ngModel","clearOnBlur","displayBy","inputClass","onTextChangeDebounce","onlyFromAutocomplete","placeholder","secondaryPlaceholder","keyup.enter","onAdd","onBlur","onRemove","ngModelChange"],["tag",""],[3,"autocompleteObservable","displayBy","keepOpen","showDropdownIfEmpty"],[1,"relate-btn"],[3,"config"],[1,"text-danger","form-text","text-muted"],[3,"labelKey","module"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275template(1,Za,7,15,"ng-container",1),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(2,Ha,2,2,"small",2)),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.initModule),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.getMessage()))},directives:[B.NgIf,Rr.TagInputComponent,V.NgControlStatus,V.NgModel,Rr.TagInputDropdown,Hv,zv],encapsulation:2}),e}(),Cb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Rr.TagInputModule,Gv,V.FormsModule,eg,qv]]}),e}(),kb=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l){var u;return I(this,n),(u=t.call(this,e,i,r,o,s,l)).languages=e,u.typeFormatter=i,u.relateService=r,u.moduleNameMapper=o,u.modalService=a,u.logic=s,u.logicDisplay=l,u.selectButton={klass:["btn","btn-sm","btn-outline-secondary","select-button","m-0"],onClick:function(){u.showSelectModal()},icon:"cursor"},u}return j(n,[{key:"ngOnInit",value:function(){var e=this.record;this.field.valueList=[],this.field.valueObjectArray=[];var t=this.field&&this.field.criteria&&this.field.criteria.values||[];t.length>0&&(this.field.valueList=t,this.selectedTags=t);var i=this.field&&this.field.criteria&&this.field.criteria.valueObjectArray||[];i.length>0&&(this.field.valueObjectArray=(0,w.deepClone)(i),this.selectedTags=(0,w.deepClone)(i)),l(h(n.prototype),"ngOnInit",this).call(this);var r=this.getRelateIdField();if(r&&e&&e.criteriaFields&&e.criteriaFields[r]){this.idField=e.criteriaFields[r],this.idField.valueList=[];var o=this.idField&&this.idField.criteria&&this.idField.criteria.values||[];o.length>0&&(this.idField.valueList=(0,w.deepClone)(o))}}},{key:"onAdd",value:function(e){e&&this.setValue(e)}},{key:"onAdding",value:function(e){if(!e||this.idField&&this.idField.valueList.includes(e.id))return x.EMPTY;var t=this.getRelateFieldName();return!this.idField&&this.field.valueList.includes(e[t])?x.EMPTY:(0,x.of)(e)}},{key:"onRemove",value:function(e){var t,n,i=this,r=null!==(t=e.id)&&void 0!==t?t:"",o=null!==(n=e.name)&&void 0!==n?n:"";this.field.valueList=this.field.valueList.filter(function(e){return e!==o}),this.field.valueObjectArray=this.field.valueObjectArray.filter(function(e){return e.id!==r}),this.updateSearchCriteria(this.field),this.field.criteria.valueObjectArray=(0,w.deepClone)(this.field.valueObjectArray),this.idField&&r&&(this.idField.valueList=this.idField.valueList.filter(function(e){return e!==r}),this.updateSearchCriteria(this.idField)),setTimeout(function(){i.tag.focus(!0,!0)},200)}},{key:"selectFirstElement",value:function(){var e=this.tag.dropdown.items;if(0!==e.length){var t=e[0];this.tag.appendTag(t),this.onAdd(t),this.tag.dropdown.hide()}}},{key:"setValue",value:function(e){var t=this.getRelateFieldName(),n=e.id,i=e[t];if(!(this.idField&&this.idField.valueList.includes(n)||!this.idField&&this.field.valueList.includes(i))){var r={};r.id=n,r[t]=i,this.field.valueObjectArray.push(r),this.field.valueList.push(i),this.idField&&(this.idField.valueList.push(n),this.updateSearchCriteria(this.idField)),this.updateSearchCriteria(this.field),this.field.criteria.valueObjectArray||(this.field.criteria.valueObjectArray=[]),this.field.criteria.valueObjectArray.push(r)}}},{key:"updateSearchCriteria",value:function(e){e.criteria.operator="=",e.criteria.values=e.valueList,e.formControl.setValue(e.valueList),e.formControl.markAsDirty()}},{key:"showSelectModal",value:function(){var e=this,t=this.modalService.open(gb,{size:"xl",scrollable:!0});t.componentInstance.module=this.getRelatedModule(),t.result.then(function(t){if(t&&t.selection&&t.selection.selected){var n=e.getSelectedRecord(t);e.field.valueObjectArray.find(function(e){return e.id===n.id})||e.setItem(n)}})}},{key:"getSelectedRecord",value:function(e){var t="";Object.keys(e.selection.selected).some(function(e){return t=e,!0});var n=null;return e.records.some(function(e){if(e&&e.id===t)return n=e,!0}),n}},{key:"setItem",value:function(e){this.tag.appendTag(e.attributes),this.onAdd(e.attributes)}}]),n}(bb);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(yb),k.\u0275\u0275directiveInject(Gy),k.\u0275\u0275directiveInject(Z.NgbModal),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-relate-filter"]],viewQuery:function(e,t){var n;(1&e&&k.\u0275\u0275viewQuery(_a,5),2&e)&&(k.\u0275\u0275queryRefresh(n=k.\u0275\u0275loadQuery())&&(t.tag=n.first))},features:[k.\u0275\u0275ProvidersFeature([yb]),k.\u0275\u0275InheritDefinitionFeature],decls:8,vars:18,consts:[[1,"d-flex"],[1,"flex-grow-1"],[3,"ngModel","clearOnBlur","identifyBy","displayBy","inputClass","onTextChangeDebounce","onlyFromAutocomplete","placeholder","secondaryPlaceholder","keyup.enter","onAdd","onBlur","onRemove","ngModelChange"],["tag",""],[3,"autocompleteObservable","identifyBy","displayBy","keepOpen","showDropdownIfEmpty"],[1,"relate-btn"],[3,"config"],["class","text-danger form-text text-muted",4,"ngIf"],[1,"text-danger","form-text","text-muted"],[3,"labelKey","module"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275elementStart(2,"tag-input",2,3),k.\u0275\u0275listener("keyup.enter",function(){return t.selectFirstElement()})("onAdd",function(e){return t.onAdd(e)})("onBlur",function(){return t.resetStatus()})("onRemove",function(e){return t.onRemove(e)})("ngModelChange",function(e){return t.selectedTags=e}),k.\u0275\u0275element(4,"tag-input-dropdown",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(5,"div",5),k.\u0275\u0275element(6,"scrm-button",6),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(7,qa,2,2,"small",7)),2&e&&(k.\u0275\u0275advance(2),k.\u0275\u0275classMap(t.getInvalidClass()),k.\u0275\u0275property("ngModel",t.selectedTags)("clearOnBlur",!0)("identifyBy","id")("displayBy",t.getRelateFieldName())("inputClass",t.getInvalidClass())("onTextChangeDebounce",500)("onlyFromAutocomplete",!0)("placeholder",t.getPlaceholderLabel())("secondaryPlaceholder",t.getPlaceholderLabel()),k.\u0275\u0275advance(2),k.\u0275\u0275property("autocompleteObservable",t.search)("identifyBy","id")("displayBy",t.getRelateFieldName())("keepOpen",!1)("showDropdownIfEmpty",!0),k.\u0275\u0275advance(2),k.\u0275\u0275property("config",t.selectButton),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.getMessage()))},directives:[Rr.TagInputComponent,V.NgControlStatus,V.NgModel,Rr.TagInputDropdown,Hv,B.NgIf,zv],encapsulation:2}),e}(),wb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule]]}),e}(),Ib=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),xb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule,Z.NgbDatepickerModule,qv,V.ReactiveFormsModule]]}),e}(),jb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule,V.ReactiveFormsModule,Rr.TagInputModule]]}),e}(),Eb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),Mb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Rr.TagInputModule,Gv,V.FormsModule,eg,qv,Rr.TagInputModule]]}),e}(),_b=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o}return n}(Ky);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-boolean-edit"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:4,vars:1,consts:[[1,"pb-4","checkbox-field"],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","change"],[1,"checkmark"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"label",1),k.\u0275\u0275elementStart(2,"input",2),k.\u0275\u0275listener("change",function(){return t.toggle()}),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(3,"span",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(2),k.\u0275\u0275property("checked",t.checked))},encapsulation:2}),e}(),Fb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),Lb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule,V.ReactiveFormsModule,Gv]]}),e}(),Ob=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),Db=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),Ab=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).languages=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a}return j(n,[{key:"ngOnInit",value:function(){this.checkAndInitAsDynamicEnum(),l(h(n.prototype),"ngOnInit",this).call(this)}},{key:"onAdd",value:function(){var e=this.selectedValues.map(function(e){return e.value});this.field.valueList=e,this.field.formControl.setValue(e),this.field.formControl.markAsDirty()}},{key:"onRemove",value:function(){var e=this,t=this.selectedValues.map(function(e){return e.value});this.field.valueList=t,this.field.formControl.setValue(t),this.field.formControl.markAsDirty(),setTimeout(function(){e.tag.focus(!0,!0),e.tag.dropdown.show()},200)}},{key:"getPlaceholderLabel",value:function(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}},{key:"selectFirstElement",value:function(){var e=this.tag.dropdown.items;0!==e.length&&(this.selectedValues.push(e[0]),this.onAdd(),this.tag.dropdown.hide())}}]),n}(dy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-multienum-edit"]],viewQuery:function(e,t){var n;(1&e&&k.\u0275\u0275viewQuery(_a,5),2&e)&&(k.\u0275\u0275queryRefresh(n=k.\u0275\u0275loadQuery())&&(t.tag=n.first))},features:[k.\u0275\u0275InheritDefinitionFeature],decls:3,vars:13,consts:[[3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove","keyup.enter"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"tag-input",0,1),k.\u0275\u0275listener("ngModelChange",function(e){return t.selectedValues=e})("onAdd",function(){return t.onAdd()})("onRemove",function(){return t.onRemove()})("keyup.enter",function(){return t.selectFirstElement()}),k.\u0275\u0275element(2,"tag-input-dropdown",2),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275property("ngModel",t.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",t.getPlaceholderLabel())("secondaryPlaceholder",t.getPlaceholderLabel())("inputClass",t.getInvalidClass()),k.\u0275\u0275advance(2),k.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",t.options))},directives:[Rr.TagInputComponent,V.NgControlStatus,V.NgModel,Rr.TagInputDropdown],encapsulation:2}),e}(),Nb=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a){var s;return I(this,n),(s=t.call(this,e,i,r,o,a)).userPreferences=e,s.systemConfig=i,s.typeFormatter=r,s.logic=o,s.logicDisplay=a,s}return n}(jy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(ah),k.\u0275\u0275directiveInject(Gm),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-int-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Wa,2,1,"ng-container",0),k.\u0275\u0275template(1,Qa,3,3,"ng-container",0),k.\u0275\u0275pipe(2,"async")),2&e&&(k.\u0275\u0275property("ngIf",!t.format),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.format&&k.\u0275\u0275pipeBind1(2,2,t.vm$)))},directives:[B.NgIf],pipes:[B.AsyncPipe,rb],encapsulation:2}),e}(),Rb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Rr.TagInputModule,V.FormsModule]]}),e}(),Tb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,ob]]}),e}(),Pb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),Bb=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o}return j(n,[{key:"ngOnInit",value:function(){l(h(n.prototype),"ngOnInit",this).call(this),this.subscribeValueChanges()}},{key:"ngOnDestroy",value:function(){this.unsubscribeAll()}},{key:"rows",get:function(){return this.field.metadata&&this.field.metadata.rows?this.field.metadata.rows:6}},{key:"cols",get:function(){return this.field.metadata&&this.field.metadata.cols?this.field.metadata.cols:20}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-text-edit"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:6,consts:[[3,"rows","cols","ngClass","formControl"]],template:function(e,t){1&e&&k.\u0275\u0275element(0,"textarea",0),2&e&&(k.\u0275\u0275classProp("is-invalid",t.field.formControl.invalid&&t.field.formControl.touched),k.\u0275\u0275property("rows",t.rows)("cols",t.cols)("ngClass",t.klass)("formControl",t.field.formControl))},directives:[V.DefaultValueAccessor,B.NgClass,V.NgControlStatus,V.FormControlDirective],encapsulation:2}),e}(),$b=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule,Z.NgbDatepickerModule,qv,V.ReactiveFormsModule]]}),e}(),Vb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule,V.ReactiveFormsModule]]}),e}(),Ub=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).languages=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a}return j(n,[{key:"ngOnInit",value:function(){l(h(n.prototype),"ngOnInit",this).call(this),this.subscribeValueChanges(),this.record&&this.record.formGroup?this.formGroup=this.record.formGroup:(this.formGroup=new V.FormGroup({}),this.formGroup.addControl(this.field.name,this.field.formControl))}},{key:"getId",value:function(e){return this.field.name+"-"+e.value}}]),n}(cy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-dropdownenum-edit"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"dropdownenum"],[1,"custom-select","custom-select-sm",3,"formControl"],[4,"ngIf"],[3,"class","ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"select",1),k.\u0275\u0275template(2,Xa,2,1,"ng-container",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("formControl",t.field.formControl),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.options&&t.options.length))},directives:[V.SelectControlValueAccessor,V.NgControlStatus,V.FormControlDirective,B.NgIf,B.NgForOf,V.NgSelectOption,V.\u0275NgSelectMultipleOption],encapsulation:2}),e}(),Kb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule,V.ReactiveFormsModule]]}),e}(),zb=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).languages=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a}return n}(cy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-dropdownenum-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,t){1&e&&k.\u0275\u0275text(0),2&e&&k.\u0275\u0275textInterpolate1("\n",t.valueLabel,"\n")},encapsulation:2}),e}(),Gb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule]]}),e}(),Zb=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).languages=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a}return n}(cy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-radioenum-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,t){1&e&&k.\u0275\u0275text(0),2&e&&k.\u0275\u0275textInterpolate1("\n",t.valueLabel,"\n")},encapsulation:2}),e}(),Hb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule]]}),e}(),qb=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).languages=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a}return j(n,[{key:"displayDirection",get:function(){return this.field&&this.field.definition&&this.field.definition.displayDirection?this.field.definition.displayDirection:""}},{key:"ngOnInit",value:function(){l(h(n.prototype),"ngOnInit",this).call(this),this.subscribeValueChanges(),this.record&&this.record.formGroup?this.formGroup=this.record.formGroup:(this.formGroup=new V.FormGroup({}),this.formGroup.addControl(this.field.name,this.field.formControl))}},{key:"getId",value:function(e){return this.field.name+"-"+e.value}}]),n}(cy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-radioenum-edit"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"radioenum"],[3,"form-check-inline","class",4,"ngFor","ngForOf"],["type","radio",1,"form-check-input",3,"checked","formControl","value","id"],[1,"form-check-label",3,"for"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275template(1,Ja,4,11,"div",1),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",t.options))},directives:[B.NgForOf,V.RadioControlValueAccessor,V.DefaultValueAccessor,V.NgControlStatus,V.FormControlDirective],encapsulation:2}),e}(),Wb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule,V.ReactiveFormsModule]]}),e}(),Qb=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o}return n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-html-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[1,"field-html","text-break",3,"innerHTML"]],template:function(e,t){1&e&&k.\u0275\u0275element(0,"div",0),2&e&&k.\u0275\u0275property("innerHTML",t.field.value,k.\u0275\u0275sanitizeHtml)},encapsulation:2}),e}(),Yb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule]]}),e}(),Xb=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o}return n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-password-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:0,template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"span"),k.\u0275\u0275text(1,"*****"),k.\u0275\u0275elementEnd())},encapsulation:2}),e}(),Jb=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),eS=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o}return j(n,[{key:"ngOnInit",value:function(){l(h(n.prototype),"ngOnInit",this).call(this),this.subscribeValueChanges()}},{key:"ngOnDestroy",value:function(){this.unsubscribeAll()}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-password-edit"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:5,consts:[["type","password",3,"formControl","ngClass","value"]],template:function(e,t){1&e&&k.\u0275\u0275element(0,"input",0),2&e&&(k.\u0275\u0275classProp("is-invalid",t.field.formControl.invalid&&t.field.formControl.touched),k.\u0275\u0275property("formControl",t.field.formControl)("ngClass",t.klass)("value",t.field.value))},directives:[V.DefaultValueAccessor,V.NgControlStatus,V.FormControlDirective,B.NgClass],encapsulation:2}),e}(),tS=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule,V.ReactiveFormsModule,Gv]]}),e}(),nS=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,o)).typeFormatter=e,a.logic=i,a.config=r,a.logicDisplay=o,a.settings={},a.initialValue="",a}return j(n,[{key:"ngOnInit",value:function(){l(h(n.prototype),"ngOnInit",this).call(this),this.initSettings(),this.initialValue=this.field.value}},{key:"initSettings",value:function(){var e,t,n,i,r,o,a=this.config.getConfigValue("ui"),s=null!==(t=null===(e=null==a?void 0:a.tinymce)||void 0===e?void 0:e.detail)&&void 0!==t?t:{},l=null!==(o=null===(r=null===(i=null===(n=this.field)||void 0===n?void 0:n.metadata)||void 0===i?void 0:i.tinymce)||void 0===r?void 0:r.detail)&&void 0!==o?o:{},u={};u=(0,K.merge)(u,{toolbar:!1,menubar:!1,readonly:!0,deprecation_warnings:!1},s,l),this.settings=u}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(Gm),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-tinymce-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:3,consts:[[1,"field-html","text-break",3,"initialValue","init","disabled"]],template:function(e,t){1&e&&k.\u0275\u0275element(0,"editor",0),2&e&&k.\u0275\u0275property("initialValue",t.initialValue)("init",t.settings)("disabled",!0)},directives:[eo],encapsulation:2,changeDetection:0}),e}(),iS=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({providers:[{provide:Xr,useValue:"tinymce/tinymce.min.js"}],imports:[[B.CommonModule,V.FormsModule,to,V.ReactiveFormsModule]]}),e}(),rS=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r)).typeFormatter=e,a.logic=i,a.logicDisplay=r,a.config=o,a.settings={},a.modelEvents="change",a.ignoreEvents="onKeyDown,onKeyPress,onKeyUp,onSelectionChange",a.value="",a}return j(n,[{key:"ngOnInit",value:function(){var e;l(h(n.prototype),"ngOnInit",this).call(this),this.initSettings(),this.subscribeValueChanges(),this.value=null!==(e=this.field.value)&&void 0!==e?e:""}},{key:"ngOnDestroy",value:function(){this.unsubscribeAll()}},{key:"initSettings",value:function(){var e,t,n,i,r,o,a,s,l=this.config.getConfigValue("ui"),u=null!==(t=null===(e=null==l?void 0:l.tinymce)||void 0===e?void 0:e.edit)&&void 0!==t?t:{},c=null!==(o=null===(r=null===(i=null===(n=null==this?void 0:this.field)||void 0===n?void 0:n.metadata)||void 0===i?void 0:i.tinymce)||void 0===r?void 0:r.edit)&&void 0!==o?o:{},d={};d=(0,K.merge)(d,{height:300,menubar:!1,deprecation_warnings:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify |  bullist numlist outdent indent | removeformat | help",toolbar_mode:"floating"},u,c),this.modelEvents=null!==(a=null==d?void 0:d.modelEvents)&&void 0!==a?a:"change",this.ignoreEvents=null!==(s=null==d?void 0:d.ignoreEvents)&&void 0!==s?s:"onKeyDown,onKeyPress,onKeyUp,onSelectionChange",this.settings=d}},{key:"setModel",value:function(){this.field.formControl.setValue(this.value)}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy),k.\u0275\u0275directiveInject(Gm))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-tinymce-edit"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:4,consts:[[1,"field-html",3,"init","modelEvents","ignoreEvents","formControl"]],template:function(e,t){1&e&&k.\u0275\u0275element(0,"editor",0),2&e&&k.\u0275\u0275property("init",t.settings)("modelEvents",t.modelEvents)("ignoreEvents",t.ignoreEvents)("formControl",t.field.formControl)},directives:[eo,V.NgControlStatus,V.FormControlDirective],encapsulation:2,changeDetection:0}),e}(),oS=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({providers:[{provide:Xr,useValue:"tinymce/tinymce.min.js"}],imports:[[B.CommonModule,V.FormsModule,to,V.ReactiveFormsModule]]}),e}(),aS=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o}return n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-icon-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"image"]],template:function(e,t){1&e&&k.\u0275\u0275element(0,"scrm-image",0),2&e&&k.\u0275\u0275property("image",t.field.value)},directives:[Vv],encapsulation:2}),e}(),sS=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Uv]]}),e}(),lS=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o.isTruncated=!1,o}return j(n,[{key:"truncateValue",value:function(e){var t=e.slice(0,50),n=t.split("\n"),i=n.slice(0,3);return this.isTruncated=t.length!==e.length||n.length>3,i}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-text-list"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"ngClass","title",4,"ngFor","ngForOf"],[3,"ngClass","title"],[4,"ngIf"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,ns,5,5,"div",0),2&e&&k.\u0275\u0275property("ngForOf",t.truncateValue(t.field.value))},directives:[B.NgForOf,B.NgClass,B.NgIf],encapsulation:2}),e}(),uS=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule]]}),e}(),cS=[Pb,Lb,ub,Jb,tS,Tb,sS,nb,ab,Ib,wy,xb,$b,Py,Dy,$y,Db,My,Qy,wb,Vb,uS,Eb,Cb,Mb,gy,my,Xy,Gb,Kb,Hb,Wb,Jy,Rb,jb,Ob,Fb,cb,Yb,iS,oS],dS=[yy,Fy,Yy,Xb,eS,Nb,tb,ib,uy,ky,sb,Ry,Ty,Oy,By,by,aS,Ey,Wy,_y,Bb,lS,db,Sb,kb,vy,py,Uy,zb,Ub,Zb,qb,Vy,Ab,fy,zy,_b,lb,Qb,nS,rS],fS={"varchar.list":yy,"varchar.detail":yy,"varchar.edit":Fy,"varchar.filter":Yy,"password.list":Xb,"password.detail":Xb,"password.edit":eS,"char.list":yy,"char.detail":yy,"int.list":Nb,"int.detail":Nb,"file.detail":tb,"float.list":ib,"float.detail":ib,"phone.list":uy,"phone.detail":uy,"date.list":ky,"date.detail":ky,"date.edit":sb,"date.filter":Ry,"datetime.list":Ty,"datetime.detail":Ty,"datetime.edit":Oy,"datetime.filter":Ry,"url.list":by,"url.detail":by,"icon.detail":aS,"icon.edit":aS,"icon.list":aS,"link.list":by,"link.detail":by,"currency.list":Ey,"currency.detail":Ey,"email.list":Wy,"email.detail":Wy,"text.detail":_y,"text.edit":Bb,"text.list":lS,"relate.list":db,"relate.edit":Sb,"relate.detail":db,"relate.filter":kb,"fullname.list":vy,"fullname.detail":vy,"enum-radio.list":Zb,"enum-radio.detail":Zb,"enum-radio.edit":qb,"enum-dropdown.list":zb,"enum-dropdown.detail":zb,"enum-dropdown.edit":Ub,"enum-chips.list":py,"enum-chips.detail":py,"enum-chips.edit":Uy,"enum.list":py,"enum.detail":py,"enum.edit":Uy,"enum.filter":fy,"multienum.list":Vy,"multienum.detail":Vy,"multienum.edit":Ab,"multienum.filter":fy,"dynamicenum.list":py,"dynamicenum.detail":py,"dynamicenum.edit":Uy,"dynamicenum.filter":Ab,"boolean.list":zy,"boolean.detail":zy,"boolean.edit":_b,"boolean.filter":lb,"bool.list":zy,"bool.detail":zy,"bool.edit":_b,"bool.filter":lb,"html.detail":nS,"html.edit":rS},pS=function(){function e(){I(this,e),this.init()}return j(e,[{key:"register",value:function(t,n,i,r){this.map.addEntry(t,e.getKey(n,i),r)}},{key:"registerField",value:function(t,n,i,r){this.fieldMap.addEntry(t,e.getKey(n,i),r)}},{key:"exclude",value:function(e,t){this.map.excludeEntry(e,t)}},{key:"getDisplayType",value:function(e,t,n,i,r){var o=this.getDisplayTypeKey(t,n);return this.hasFieldOverride(e,r,i)?this.getFieldOverride(e,t,i,r):n&&this.has(e,o,i)?this.get(e,o,i,r):this.get(e,t,i,r)}},{key:"get",value:function(t,n,i,r){var o=this.map.getGroupEntries(t),a=e.getKey(n,i);return o[a]||"massupdate"===i&&o[a=e.getKey(n,"edit")]?o[a]:o[e.getKey("varchar",i)]}},{key:"getFieldOverride",value:function(t,n,i,r){var o=this.fieldMap.getGroupEntries(t),a=e.getKey(r,i);return o[a]||"massupdate"===i&&o[a=e.getKey(r,"edit")]?o[a]:null}},{key:"has",value:function(t,n,i){return!!this.map.getGroupEntries(t)[e.getKey(n,i)]}},{key:"hasFieldOverride",value:function(t,n,i){return!!this.fieldMap.getGroupEntries(t)[e.getKey(n,i)]}},{key:"getDisplayTypeKey",value:function(e,t){return e&&t?e+"-"+t:""}},{key:"init",value:function(){var e=this;this.map=new w.OverridableMap,this.fieldMap=new w.OverridableMap,Object.keys(this.getDefaultMap()).forEach(function(t){var n=v(t.split(".",2),2),i=n[0],r=n[1];e.register("default",i,r,e.getDefaultMap()[t])})}},{key:"getDefaultMap",value:function(){return{}}}],[{key:"getKey",value:function(e,t){return e+"."+t}}]),e}(),mS=function(){var e=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.call(this)}return j(n,[{key:"getDefaultMap",value:function(){return fS}}]),n}(pS);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),hS=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,r,o)).typeFormatter=e,a.registry=i,a.logic=r,a.logicDisplay=o,a}return j(n,[{key:"getComponentType",value:function(e,t){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,t&&t.displayType||"",this.mode,this.field.name)}},{key:"getFields",value:function(){var e=this,t=[];return this.field.definition.layout.forEach(function(n){!e.record.fields[n]||"none"===e.record.fields[n].display||t.push(e.record.fields[n])}),t}},{key:"getModule",value:function(){return this.record?this.record.module:null}},{key:"getDirection",value:function(){var e="flex-column";return"inline"===this.field.definition.display&&(e="flex-row"),e}},{key:"isConfigured",value:function(){return this.hasDisplay()&&this.hasLayout()&&this.hasGroupFields()}},{key:"showLabel",value:function(e){var t=this.field.definition||null;if(!t||!t.showLabel)return!1;var n=t.showLabel[this.mode]||null;return!(!n||void 0===n)&&(n.includes("*")||n.includes(e))}},{key:"isModeEnabled",value:function(e,t){var n=t.definition.modes;return!n||n.length<1||n.includes(e)}},{key:"hasGroupFields",value:function(){return!(!this.field.definition.groupFields||!Object.keys(this.field.definition.groupFields).length)}},{key:"hasLayout",value:function(){return!(!this.field.definition.layout||!this.field.definition.layout.length)}},{key:"hasDisplay",value:function(){return!!this.field.definition.display}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(mS),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-group-field"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_BAD_GROUP_FIELD_CONFIG"],[4,"ngFor","ngForOf"],["class","field-group-item d-flex flex-column justify-content-end h-100 w-100",3,"flex-fill",4,"ngIf"],[1,"field-group-item","d-flex","flex-column","justify-content-end","h-100","w-100"],["class","field-group-label pt-2 pr-1",4,"ngIf"],["class","field-group-field pr-1",4,"ngIf"],[1,"field-group-label","pt-2","pr-1"],[3,"labelKey","module"],[1,"field-group-field","pr-1"],[3,"componentType","field","klass","mode","record","parent","type"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,is,2,0,"ng-container",0),k.\u0275\u0275template(1,ls,3,4,"ng-container",0)),2&e&&(k.\u0275\u0275property("ngIf",!t.isConfigured()),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.isConfigured()))},directives:function(){return[B.NgIf,zv,B.NgForOf,gS]},encapsulation:2}),e}(),vS=function(){var e=function(){function e(t){I(this,e),this.asyncActionService=t}return j(e,[{key:"run",value:function(e,t,n){var i,r,o,a,s,l,u,c,d={payload:{fieldName:null!==(i=t.name)&&void 0!==i?i:"",fieldValue:null!==(r=t.value)&&void 0!==r?r:""},record:{id:null!==(o=n.id)&&void 0!==o?o:"",type:null!==(a=n.type)&&void 0!==a?a:"",module:null!==(s=n.module)&&void 0!==s?s:"",favorite:null!==(l=n.favorite)&&void 0!==l?l:"",attributes:null!==(u=n.attributes)&&void 0!==u?u:{},acls:null!==(c=n.acls)&&void 0!==c?c:[]}};this.asyncActionService.run(e,d)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(ty))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(ty))},token:e,providedIn:"root"}),e}(),gS=function(){var e=function(){function e(t,n,i,r,o){I(this,e),this.navigation=t,this.moduleNameMapper=n,this.router=i,this.dynamicLabelService=r,this.linkRouteAsyncActionService=o,this.record=null,this.parent=null,this.klass=null,this.class="dynamic-field"}return j(e,[{key:"getRelateLink",get:function(){var e=this.field.definition.module;if("parent_type"===this.field.definition.type_name&&(e=this.record.attributes.parent_type),this.field.definition.id_name&&e){var t=this.moduleNameMapper.toFrontend(e);return this.navigation.getRecordRouterLink(t,this.record.attributes[this.field.definition.id_name])}return""}},{key:"ngOnInit",value:function(){this.setHostClass()}},{key:"isLink",value:function(){var e,t,n;return!(w.EDITABLE_VIEW_MODES.includes(this.mode)||!this.field||!this.record||"relate"!==this.type&&(!(null===(e=null==this?void 0:this.field)||void 0===e?void 0:e.metadata)||!(null===(n=null===(t=null==this?void 0:this.field)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.link)))}},{key:"hasOnClick",value:function(){var e,t,n,i,r=null!==(t=null===(e=null==this?void 0:this.field)||void 0===e?void 0:e.metadata)&&void 0!==t?t:{},o=null!==(n=null==r?void 0:r.linkAsyncAction)&&void 0!==n?n:null,a=null!==(i=null==r?void 0:r.onClick)&&void 0!==i?i:null;return!(!o&&!a)}},{key:"isEdit",value:function(){return"edit"===this.mode||"filter"===this.mode}},{key:"getLink",value:function(){var e,t,n;if("relate"===this.type)return this.getRelateLink;var i=null!==(t=null===(e=null==this?void 0:this.field)||void 0===e?void 0:e.metadata)&&void 0!==t?t:null,r=null!==(n=i.linkRoute)&&void 0!==n?n:null;return i&&r?this.dynamicLabelService.parse(r,{},this.record.fields):this.navigation.getRecordRouterLink(this.record.module,this.record.id)}},{key:"getMessageContext",value:function(e,t){var n=e&&e.message&&e.message.context||{};return n.module=t&&t.module||"",n}},{key:"getMessageLabelKey",value:function(e){return e&&e.message&&e.message.labelKey||""}},{key:"onClick",value:function(){var e,t,n,i=null!==(t=null===(e=null==this?void 0:this.field)||void 0===e?void 0:e.metadata)&&void 0!==t?t:null;if(i&&i.onClick)this.field.metadata.onClick(this.field,this.record);else{var r=null!==(n=i.linkAsyncAction)&&void 0!==n?n:null;if(!i||!r)return this.router.navigateByUrl(this.getLink()).then(),!1;this.linkRouteAsyncActionService.run(r,this.field,this.record)}}},{key:"setHostClass",value:function(){var e=[];e.push("dynamic-field"),this.mode&&e.push("dynamic-field-mode-"+this.mode),this.type&&e.push("dynamic-field-type-"+this.type),this.field&&this.field.name&&e.push("dynamic-field-name-"+this.field.name),this.class=e.join(" ")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(qy),k.\u0275\u0275directiveInject(Gy),k.\u0275\u0275directiveInject(Ar.Router),k.\u0275\u0275directiveInject(kv),k.\u0275\u0275directiveInject(vS))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-dynamic-field"]],hostVars:2,hostBindings:function(e,t){2&e&&k.\u0275\u0275classMap(t.class)},inputs:{record:"record",parent:"parent",klass:"klass",mode:"mode",type:"type",field:"field",componentType:"componentType"},decls:3,vars:3,consts:[[4,"ngIf"],[1,"clickable","field-link",3,"click"],[3,"ndcDynamicComponent","ndcDynamicInputs"],[1,"field-link",3,"routerLink"],[1,"dynamic-field"],[1,"flex-grow-1","text-break","rounded","box-loading","skeleton-field-content"],["class","invalid-feedback d-block",4,"ngFor","ngForOf"],[1,"invalid-feedback","d-block"],[3,"context","fields","labelKey"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,ps,4,3,"ng-container",0),k.\u0275\u0275template(1,ms,3,0,"ng-container",0),k.\u0275\u0275template(2,ys,2,1,"ng-container",0)),2&e&&(k.\u0275\u0275property("ngIf",!t.field.loading),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.field.loading),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.isEdit()&&t.field.formControl&&t.field.formControl.errors))},directives:[B.NgIf,re,ne,Ar.RouterLinkWithHref,B.NgForOf,Yv],pipes:[B.KeyValuePipe],encapsulation:2}),e}(),yS=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Ar.RouterModule,Xv,oe]]}),e}(),bS=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Gv,yS]]}),e}(),SS=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a){var s;return I(this,n),(s=t.call(this,e,o,a)).typeFormatter=e,s.registry=i,s.recordManager=r,s.logic=o,s.logicDisplay=a,s}return j(n,[{key:"ngOnInit",value:function(){l(h(n.prototype),"ngOnInit",this).call(this),this.initUpdateParentSubscription()}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"getComponentType",value:function(e,t){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,t&&t.displayType||"",this.getMode(),this.field.name)}},{key:"getAttributes",value:function(){var e=this,t=[];return this.field.definition.layout.forEach(function(n){!e.field.attributes[n]||"none"===e.field.attributes[n].display||t.push(e.field.attributes[n])}),t}},{key:"getModule",value:function(){return this.record?this.record.module:null}},{key:"getMode",value:function(){return"filter"===this.mode?"edit":this.mode}},{key:"getDirection",value:function(){var e="flex-column";return"inline"===this.field.definition.display&&(e="flex-row"),e}},{key:"isConfigured",value:function(){return this.hasDisplay()&&this.hasLayout()&&this.hasAttributes()}},{key:"showLabel",value:function(e){var t=e.definition||null,n=t.showLabel||null;return!(!t||!n||"hide"===(e.metadata&&e.metadata.labelDisplay||""))&&(n.includes("*")||n.includes(this.mode))}},{key:"hasAttributes",value:function(){return!(!this.field.definition.attributeFields||(0,w.emptyObject)(this.field.definition.attributeFields))}},{key:"hasLayout",value:function(){return!(!this.field.definition.layout||!this.field.definition.layout.length)}},{key:"hasDisplay",value:function(){return!!this.field.definition.display}},{key:"initUpdateParentSubscription",value:function(){var e=this;!this.field.attributes||Object.keys(this.field.attributes).forEach(function(t){var n=e.field.attributes[t];!n.valueChanges$||e.subs.push(n.valueChanges$.subscribe(function(t){e.setValueOnParent(n,t.valueObject||t.valueList||t.value)}))})}},{key:"setValueOnParent",value:function(e,t){var n,i=null!==(n=e.valueParent)&&void 0!==n?n:"field";e.valuePath?(0,no.Z)("record"===i?this.record:this.field,e.valuePath,t):(0,no.Z)("record"===i?this.record.attributes:this.field.valueObject,e.name,t)}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(mS),k.\u0275\u0275directiveInject(vv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),CS=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a){var s;return I(this,n),(s=t.call(this,e,i,r,o,a)).typeFormatter=e,s.registry=i,s.recordManager=r,s.logic=o,s.logicDisplay=a,s}return n}(SS);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(mS),k.\u0275\u0275directiveInject(vv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-composite-field"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_BAD_GROUP_FIELD_CONFIG"],["class","field-group-item d-flex flex-column justify-content-end h-100 w-100",3,"flex-fill","align-self-start",4,"ngFor","ngForOf"],[1,"field-group-item","d-flex","flex-column","justify-content-end","h-100","w-100"],[1,"field-group-label","pt-2","pr-1"],["class","field-group-field pr-1 pb-1 composite-field",4,"ngIf"],[3,"labelKey","module"],[1,"field-group-field","pr-1","pb-1","composite-field"],[3,"componentType","field","klass","mode","record","parent","type"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,bs,2,0,"ng-container",0),k.\u0275\u0275template(1,ws,3,4,"ng-container",0)),2&e&&(k.\u0275\u0275property("ngIf",!t.isConfigured()),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.isConfigured()))},directives:[B.NgIf,zv,B.NgForOf,gS],encapsulation:2}),e}(),kS=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Gv,yS]]}),e}(),wS=[].concat(cS,[bS,kS]),IS=[].concat(dS,[hS,CS]),xS=Object.assign(Object.assign({},fS),{"grouped-field.list":hS,"grouped-field.detail":hS,"grouped-field.edit":hS,"grouped-field.filter":hS,"composite.list":CS,"composite.detail":CS,"composite.edit":CS,"composite.filter":CS}),jS=function(){var e=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.call(this)}return j(n,[{key:"getDefaultMap",value:function(){return xS}}]),n}(pS);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),ES=function(){var e=function(){function e(t){I(this,e),this.registry=t,this.record=null,this.klass=null,this.class="field",this.map=xS}return j(e,[{key:"ngOnInit",value:function(){this.setHostClass()}},{key:"componentMode",get:function(){var e=this.mode;return"create"===e&&(e="edit"),"edit"===e&&this.field.readonly&&(e="detail"),e}},{key:"componentType",get:function(){return this.registry.getDisplayType(this.record&&this.record.module||"default",this.type,this.field.definition&&this.field.definition.displayType||"",this.componentMode,this.field.name)}},{key:"setHostClass",value:function(){var e=[];e.push("field"),this.mode&&e.push("field-mode-"+this.mode),this.type&&e.push("field-type-"+this.type),this.field&&this.field.name&&e.push("field-name-"+this.field.name),this.class=e.join(" ")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(jS))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-field"]],hostVars:2,hostBindings:function(e,t){2&e&&k.\u0275\u0275classMap(t.class)},inputs:{record:"record",klass:"klass",mode:"mode",type:"type",field:"field"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"componentType","field","klass","mode","record","parent","type",4,"ngIf"],[3,"field","klass","mode","record","parent",4,"ngIf"],[3,"componentType","field","klass","mode","record","parent","type"],[3,"field","klass","mode","record","parent"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,js,3,2,"ng-container",0),2&e&&k.\u0275\u0275property("ngIf",t.field&&"none"!==t.field.display)},directives:function(){return[B.NgIf,gS,_S]},encapsulation:2}),e}(),MS=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s){var l;return I(this,n),(l=t.call(this,e,o,s)).typeFormatter=e,l.registry=i,l.recordManager=r,l.logic=o,l.fieldManager=a,l.logicDisplay=s,l}return j(n,[{key:"ngOnInit",value:function(){l(h(n.prototype),"ngOnInit",this).call(this),this.initUpdateParentSubscription()}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"getComponentType",value:function(e,t){return this.registry.getDisplayType(this.record&&this.record.module||"default",e,t&&t.displayType||"",this.getMode(),this.field.name)}},{key:"getItems",value:function(){var e,t,n,i,r=this;this.field.items=this.field.items||[];var o=this.field.items,a=o&&o.filter(function(e){return!(e&&e.attributes&&e.attributes.deleted)}),s=!(null===(i=null===(n=null===(t=null===(e=this.field)||void 0===e?void 0:e.definition)||void 0===t?void 0:t.lineItems)||void 0===n?void 0:n.labelOnFirstLine)||void 0===i||!i);return a.forEach(function(e,t){r.setAttributeLabelDisplay(e,!s||t<=0)}),this.field.items}},{key:"getItemFields",value:function(e){var t=e.fields||{};return Object.keys(t).map(function(e){return t[e]})}},{key:"removeItem",value:function(e){this.fieldManager.removeLineItem(this.field,e),this.updateItems(this.field.items),this.triggerLineActionEvents(w.LineActionEvent.onLineItemRemove)}},{key:"addEmptyItem",value:function(){var e,t,n,i=(null===(n=null===(t=null===(e=this.field)||void 0===e?void 0:e.definition)||void 0===t?void 0:t.lineItems)||void 0===n?void 0:n.definition)||{};this.fieldManager.addLineItem(i,this.record,this.field),this.triggerLineActionEvents(w.LineActionEvent.onLineItemAdd)}},{key:"updateItems",value:function(e){this.field.items=e}},{key:"getModule",value:function(){return this.record?this.record.module:null}},{key:"getMode",value:function(){return"filter"===this.mode?"edit":this.mode}},{key:"getDirection",value:function(){var e="flex-column";return"inline"===this.field.definition.display&&(e="flex-row"),e}},{key:"isConfigured",value:function(){return this.hasItemConfig()}},{key:"isEditable",value:function(){return(0,w.isEditable)(this.mode)}},{key:"showLabel",value:function(e){var t=e.definition||null,n=t.showLabel||null;return!(!t||!n)&&(n.includes("*")||n.includes(this.mode))}},{key:"getMessageContext",value:function(e,t){var n=e&&e.message&&e.message.context||{};return n.module=t&&t.module||"",n}},{key:"getMessageLabelKey",value:function(e){return e&&e.message&&e.message.labelKey||""}},{key:"hasItemConfig",value:function(){var e,t,n,i;return!(null===(i=null===(n=null===(t=null===(e=this.field)||void 0===e?void 0:e.definition)||void 0===t?void 0:t.lineItems)||void 0===n?void 0:n.definition)||void 0===i||!i)}},{key:"initUpdateParentSubscription",value:function(){var e=this;!this.field.attributes||Object.keys(this.field.attributes).forEach(function(t){var n=e.field.attributes[t];!n.valueChanges$||e.subs.push(n.valueChanges$.subscribe(function(t){e.setValueOnParent(n,t.valueObject||t.valueList||t.value)}))})}},{key:"setValueOnParent",value:function(e,t){e.valuePath?(0,no.Z)(this.field,e.valuePath,t):(0,no.Z)(this.field.valueObject,e.name,t)}},{key:"setAttributeLabelDisplay",value:function(e,t){var n=e.fields||{};Object.keys(n).forEach(function(e){var i=n[e];if("composite"===i.type){var r=i.attributes||{};Object.keys(r).forEach(function(e){var n=r[e],i=n.metadata||{};i.labelDisplay=t?"default":"hide",n.metadata=i})}})}},{key:"triggerLineActionEvents",value:function(e){var t,n=this,i=(null===(t=this.field)||void 0===t?void 0:t.logic)||{};(0,w.emptyObject)(i)||Object.keys(i).forEach(function(t){var r,o,a=i[t]||null,s=null===(o=null===(r=null==a?void 0:a.params)||void 0===r?void 0:r.triggerOnEvents)||void 0===o?void 0:o[e];(0,w.isTrue)(s)&&n.logic.runLogic(n.field,n.mode,n.record)})}}]),n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(jS),k.\u0275\u0275directiveInject(vv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(dv),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),_S=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s){var l;return I(this,n),(l=t.call(this,e,i,r,o,a,s)).typeFormatter=e,l.registry=i,l.recordManager=r,l.logic=o,l.fieldManager=a,l.logicDisplay=s,l}return j(n,[{key:"getAddItemButton",value:function(){var e=this;return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"plus",onClick:function(){e.addEmptyItem()}}}},{key:"getRemoveItemButton",value:function(e,t){var n=this;return{klass:"btn btn-sm btn-outline-secondary m-0 border-0",icon:"minimise",onClick:function(){n.removeItem(t)}}}}]),n}(MS);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(jS),k.\u0275\u0275directiveInject(vv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(dv),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-line-items-field"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[[4,"ngIf"],["labelKey","LBL_LINE_ITEMS_FIELD_CONFIG"],[4,"ngFor","ngForOf"],[1,"line-item-buttons","d-flex","justify-content-end","mt-1"],[3,"config",4,"ngIf"],["class","d-flex flex-row line-item-entry w-100 align-items-end",4,"ngIf"],[1,"d-flex","flex-row","line-item-entry","w-100","align-items-end"],[1,"flex-grow-1","line-item-entry-composite"],[3,"class",4,"ngFor","ngForOf"],[1,"line-item-entry-buttons","mb-1"],[3,"componentType","field","klass","mode","record","parent","type"],[3,"config"],["class","invalid-feedback d-block",4,"ngFor","ngForOf"],[1,"invalid-feedback","d-block"],[3,"context","fields","labelKey"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Es,2,0,"ng-container",0),k.\u0275\u0275template(1,Rs,7,10,"ng-container",0)),2&e&&(k.\u0275\u0275property("ngIf",!t.isConfigured()),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.isConfigured()))},directives:[B.NgIf,zv,B.NgForOf,gS,Hv,Yv],pipes:[B.KeyValuePipe],encapsulation:2}),e}(),FS=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Gv,yS,qv,Xv]]}),e}(),LS=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[].concat(S(wS),[B.CommonModule,yS,FS])]}),e}(),OS=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,qv,LS,Gv]]}),e}(),DS=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this,e)).breakpointObserver=e,i.baseColClass={col:!0,"form-group":!0,"m-1":!1,"m-0":!0,"pl-3":!0,"pb-2":!0,"pr-3":!0,"d-flex":!0,"flex-column":!0,"justify-content-between":!0},i.baseRowClass={"form-row":!0,"align-items-stretch":!0},i}return j(n,[{key:"ngOnInit",value:function(){var e=this;this.subscriptions.push(this.dataSource.getConfig().subscribe(function(t){e.config=Object.assign({},t)})),this.subscriptions.push(this.dataSource.getLayout().subscribe(function(t){e.layout=Object.assign({},t)})),this.subscriptions.push(this.dataSource.getFields().subscribe(function(t){e.fields=Object.assign({},t)})),this.subscriptions.push(this.dataSource.getRecord().subscribe(function(t){e.record=Object.assign({},t)})),l(h(n.prototype),"ngOnInit",this).call(this)}},{key:"buildGrid",value:function(){var e=this,t=[];this.fields&&0!==Object.keys(this.fields).length?(this.layout.rows.forEach(function(n){var i={cols:[]};n.cols.forEach(function(r,o){var a=e.fields[r.name]||null;a?(i.cols.push({field:a}),1===e.colNumber&&o<n.cols.length-1&&(t.push(i),i={cols:[]})):i.cols.push({})}),i.cols.length<e.colNumber&&e.fillRow(i),t.push(i)}),this.addSpecialSlots(t),this.fieldGrid=t):this.fieldGrid=[]}},{key:"colNumber",get:function(){return 1===this.sizeMap[this.currentSize]?1:this.config.maxColumns}}]),n}(jg);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(T))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-field-layout"]],inputs:{dataSource:"dataSource"},features:[k.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Hs,decls:2,vars:4,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"field-column-bordered","ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],["class","field-separation mt-2",4,"ngIf"],[1,"label-container"],[1,"d-flex","flex-grow-1"],[1,"flex-grow-1","text-break"],[3,"type","mode","klass","field","record"],["type","button","class","record-action-button",3,"click",4,"ngIf"],[1,"required"],["type","button",1,"record-action-button",3,"click"],["image","pencil",1,"sicon"],[1,"field-separation","mt-2"]],template:function(e,t){1&e&&(k.\u0275\u0275projectionDef(Zs),k.\u0275\u0275elementStart(0,"form"),k.\u0275\u0275template(1,Gs,2,2,"div",0),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275classMapInterpolate1("field-layout ",t.config.mode,""),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",t.fieldGrid))},directives:[B.NgForOf,B.NgClass,B.NgIf,ES,Vv],pipes:[B.UpperCasePipe],encapsulation:2}),e}(),AS=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,LS,OS,Uv]]}),e}(),NS=function(){var e=function(){function e(t){I(this,e),this.modalService=t,this.filterModal=!0,this.modalTitle="Quick Filter",this.quickFilter=!0,this.advancedFilter=!1}return j(e,[{key:"toggleQuickFilter",value:function(){this.modalTitle="Quick Filter",this.advancedFilter=!this.advancedFilter,this.quickFilter=!this.quickFilter}},{key:"toggleAdvancedFilter",value:function(){this.modalTitle="Advanced Filter",this.advancedFilter=!this.advancedFilter,this.quickFilter=!this.quickFilter}},{key:"open",value:function(e){var t=this;this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg",windowClass:"filter-modal"}).result.then(function(e){t.closeResult="Closed with: ".concat(e)},function(e){t.closeResult="Dismissed ".concat(t.getDismissReason(e))})}},{key:"getDismissReason",value:function(e){return e===Z.ModalDismissReasons.ESC?"by pressing ESC":e===Z.ModalDismissReasons.BACKDROP_CLICK?"by clicking on a backdrop":"with: ".concat(e)}},{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Z.NgbModal))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-filter-ui"]],decls:5,vars:0,consts:[["filtermodal",""],["type","button",1,"settings-button",3,"click"],["image","filter",1,"sicon"],[1,"filter-modal"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close Filter Modal",1,"close",3,"click"],["image","close_modal",1,"sicon"],[1,"modal-body"],[3,"ngIf"],[1,"modal-footer"],[1,"row","w-100"],[1,"col-lg-3"],[1,"col-lg-9"],[1,"modal-buttons"],["type","button","data-dismiss","modal",1,"btn","modal-button-cancel"],["type","button",1,"btn","modal-button-save"],[1,"row"],[1,"col-lg-12"],[1,"modal-label"],["type","text","placeholder","Lorem Ipsum",1,"modal-input"],[1,"filter-checkbox-container"],["type","filter-checkbox"],[1,"filter-checkmark"],[1,"quick-filter-options"],["type","text","placeholder","Lorem Ipsum",1,"modal-input","modal-input-large"],[1,"relate-input-group"],["type","button",1,"create-popup-button","create-popup-arrow"],["image","cursor",1,"sicon"],["type","button",1,"create-popup-button","create-popup-cross"],["image","cross",1,"sicon"],[1,"select"],["type","text","placeholder","0",1,"modal-input","modal-input-small"],[1,"col-lg-8"],[1,"col-lg-4"],["type","text","placeholder","dd/mm/yy",1,"modal-input","modal-date-input"],["type","button",1,"create-popup-button","create-popup-calendar"],["image","calendar",1,"sicon"],[1,"save-filter-button"],["type","button",1,"modal-button-save","dropdown-toggle"],["type","button",1,"btn","modal-button-save",3,"click"]],template:function(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275template(0,Js,21,6,"ng-template",null,0,k.\u0275\u0275templateRefExtractor),k.\u0275\u0275elementStart(2,"button",1),k.\u0275\u0275listener("click",function(){k.\u0275\u0275restoreView(n);var e=k.\u0275\u0275reference(1);return t.open(e)}),k.\u0275\u0275element(3,"scrm-image",2),k.\u0275\u0275text(4," Filter\n"),k.\u0275\u0275elementEnd()}},directives:[Vv,B.NgIf],encapsulation:2}),e}(),RS=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Uv]]}),e}(),TS={tabs:[],groupedTabs:[],modules:{},userActionMenu:[],quickActions:[],maxTabs:0},PS=(0,w.deepClone)(TS),BS=null,$S=function(){var e=function(){function e(t){I(this,e),this.recordGQL=t,this.store=new x.BehaviorSubject(PS),this.state$=this.store.asObservable(),this.resourceName="navbar",this.fieldsMetadata={fields:["tabs","groupedTabs","modules","userActionMenu","maxTabs"]},this.tabs$=this.state$.pipe((0,M.map)(function(e){return e.tabs}),(0,M.distinctUntilChanged)()),this.groupedTabs$=this.state$.pipe((0,M.map)(function(e){return e.groupedTabs}),(0,M.distinctUntilChanged)()),this.modules$=this.state$.pipe((0,M.map)(function(e){return e.modules}),(0,M.distinctUntilChanged)()),this.userActionMenu$=this.state$.pipe((0,M.map)(function(e){return e.userActionMenu}),(0,M.distinctUntilChanged)()),this.maxTabs$=this.state$.pipe((0,M.map)(function(e){return e.maxTabs}),(0,M.distinctUntilChanged)()),this.quickActions$=this.state$.pipe((0,M.map)(function(e){return e.quickActions}),(0,M.distinctUntilChanged)()),this.vm$=(0,x.combineLatest)([this.tabs$,this.groupedTabs$,this.modules$,this.userActionMenu$,this.maxTabs$,this.quickActions$]).pipe((0,M.map)(function(e){var t=v(e,6);return{tabs:t[0],groupedTabs:t[1],modules:t[2],userActionMenu:t[3],maxTabs:t[4],quickActions:t[5]}}))}return j(e,[{key:"clear",value:function(){BS=null,this.updateState((0,w.deepClone)(TS))}},{key:"clearAuthBased",value:function(){this.clear()}},{key:"load",value:function(){var e=this;return this.getNavigation().pipe((0,M.tap)(function(t){var n;e.updateState(Object.assign(Object.assign({},PS),{tabs:t.tabs,groupedTabs:t.groupedTabs,userActionMenu:t.userActionMenu,modules:t.modules,maxTabs:t.maxTabs,quickActions:null!==(n=null==t?void 0:t.quickActions)&&void 0!==n?n:[]}))}))}},{key:"isCached",value:function(){return null!==BS}},{key:"set",value:function(e){var t;BS=(0,x.of)(e).pipe((0,M.shareReplay)(1)),this.updateState(Object.assign(Object.assign({},PS),{tabs:e.tabs,groupedTabs:e.groupedTabs,userActionMenu:e.userActionMenu,modules:e.modules,maxTabs:e.maxTabs,quickActions:null!==(t=null==e?void 0:e.quickActions)&&void 0!==t?t:[]}))}},{key:"updateState",value:function(e){this.store.next(PS=e)}},{key:"getNavigation",value:function(){return null===BS&&(BS=this.fetch("1").pipe((0,M.shareReplay)(1))),BS}},{key:"fetch",value:function(e){return this.recordGQL.fetch(this.resourceName,"/api/navbars/".concat(e),this.fieldsMetadata).pipe((0,M.map)(function(e){var t,n,i=e.data,r=null;return i&&i.navbar&&(r={tabs:i.navbar.tabs,groupedTabs:i.navbar.groupedTabs,userActionMenu:i.navbar.userActionMenu,modules:i.navbar.modules,maxTabs:i.navbar.maxTabs,quickActions:null!==(n=null===(t=null==i?void 0:i.navbar)||void 0===t?void 0:t.quickActions)&&void 0!==n?n:[]}),r}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(qm))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(qm))},token:e,providedIn:"root"}),e}(),VS={adminPanel:[]},US=(0,w.deepClone)(VS),KS=null,zS=function(){var e=function(){function e(t){I(this,e),this.appStateStore=t,this.store=new x.BehaviorSubject(US),this.state$=this.store.asObservable(),this.adminPanel$=this.state$.pipe((0,M.map)(function(e){return e.adminPanel}),(0,M.distinctUntilChanged)())}return j(e,[{key:"clear",value:function(){KS=null,this.updateState((0,w.deepClone)(VS))}},{key:"clearAuthBased",value:function(){this.clear()}},{key:"getAdminPanel",value:function(){return US.adminPanel}},{key:"isCached",value:function(){return null!==KS}},{key:"updateState",value:function(e){this.store.next(US=e)}},{key:"set",value:function(e){KS=(0,x.of)(e).pipe((0,M.shareReplay)(1)),this.updateState(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(jv))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(jv))},token:e,providedIn:"root"}),e}(),GS={systemConfig:!1,userPreferences:!1,appStrings:!1,appListStrings:!1,modStrings:!1,themeImages:!1,navigation:!1,moduleMetadata:!1,adminMetadata:!1},ZS=(0,w.deepClone)(GS),HS=null,qS=function(){var e=function(){function e(t,n,i,r,o,a,s,l,u){I(this,e),this.recordGQL=t,this.metadata=n,this.language=i,this.themeImages=r,this.config=o,this.preferences=a,this.navigation=s,this.adminMetadataStore=l,this.auth=u,this.store=new x.BehaviorSubject(ZS),this.state$=this.store.asObservable(),this.resourceName="appMetadata",this.fieldsMetadata={fields:["id","_id"]},this.types=["systemConfig","userPreferences","language","themeImages","navigation","moduleMetadata","adminMetadata"],this.metadata$=this.state$}return j(e,[{key:"clear",value:function(){HS=null,this.updateState((0,w.deepClone)(GS))}},{key:"clearAuthBased",value:function(){this.clear()}},{key:"get",value:function(){return ZS}},{key:"load",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.getNotLoadedTypes();return i=i&&r.length<1,(!n||n.length<1)&&(n=r).push("minimalModuleMetadata"),this.getMetadata(t,n,i).pipe((0,M.tap)(function(t){e.updateState(t)}))}},{key:"loadModuleMetadata",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login",i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=null!==(e=null==ZS?void 0:ZS.moduleMetadata)&&void 0!==e&&e;return this.getMetadata(n,["moduleMetadata"],i=i&&r).pipe((0,M.tap)(function(e){t.updateState(e)}))}},{key:"getMetadata",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"app",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(!t||t.length<1)&&(t=S(this.types)),(null==HS||!0!==n)&&(HS=this.fetch(e,t).pipe((0,M.shareReplay)(1))),HS}},{key:"getNotLoadedTypes",value:function(){var e=[];return this.isNavigationLoaded()||e.push("navigation"),this.arePreferencesLoaded()||e.push("userPreferences"),this.areSystemConfigsLoaded()||e.push("systemConfig"),this.areAllLanguageStringsLoaded()||e.push("language"),this.areThemeImagesLoaded()||e.push("themeImages"),this.isAdminMetadataLoaded()||e.push("adminMetadata"),e}},{key:"areAllLanguageStringsLoaded",value:function(){return this.language.areAllCached()}},{key:"arePreferencesLoaded",value:function(){return this.preferences.isCached()}},{key:"areSystemConfigsLoaded",value:function(){return this.config.isCached()}},{key:"areThemeImagesLoaded",value:function(){return this.themeImages.isCached()}},{key:"isNavigationLoaded",value:function(){return this.navigation.isCached()}},{key:"isAdminMetadataLoaded",value:function(){var e;return!(null===(e=ZS.adminMetadata)||void 0===e||!e)}},{key:"updateState",value:function(e){this.store.next(ZS=e)}},{key:"fetch",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i={fields:[].concat(S(this.fieldsMetadata.fields),S(n))};return this.recordGQL.fetch(this.resourceName,"/api/app-metadata/".concat(e),i).pipe((0,M.catchError)(function(){return(0,x.of)({})}),(0,M.map)(function(e){var n=e.data,i=null==n?void 0:n.appMetadata,r=Object.assign({},ZS);return(0,w.emptyObject)(i)||(t.setConfig(r,i),t.setPreferences(r,i),t.setThemeImages(r,i),t.setNavigation(r,i),t.setLanguages(r,i),t.setModuleMetadata(r,i),t.setAdminMetadata(r,i)),r}))}},{key:"setModuleMetadata",value:function(e,t){var n,i,r=this,o=null!==(n=null==t?void 0:t.moduleMetadata)&&void 0!==n?n:{},a="moduleMetadata";(0,w.emptyObject)(o)&&(o=null!==(i=null==t?void 0:t.minimalModuleMetadata)&&void 0!==i?i:{},a="minimalModuleMetadata"),(0,w.emptyObject)(o)||(e[a]=!0,Object.keys(o).forEach(function(e){var t,n=null!==(t=o[e])&&void 0!==t?t:{};if(!(0,w.emptyObject)(n)){var i=r.metadata.mapMetadata(e,o[e]);r.metadata.getModule()!==e?r.metadata.setModuleMetadata(e,i):r.metadata.isCached(e)||r.metadata.set(e,i)}}))}},{key:"setLanguages",value:function(e,t){var n,i,r,o,a,s,l,u,c=null!==(n=null==t?void 0:t.language)&&void 0!==n?n:{};if(!(0,w.emptyObject)(c)){var d={};d.languageKey=null!==(i=c.id)&&void 0!==i?i:"",d.appStrings=null!==(o=null===(r=null==c?void 0:c.appStrings)||void 0===r?void 0:r.items)&&void 0!==o?o:{},d.appListStrings=null!==(s=null===(a=null==c?void 0:c.appListStrings)||void 0===a?void 0:a.items)&&void 0!==s?s:{},d.modStrings=null!==(u=null===(l=null==c?void 0:c.modStrings)||void 0===l?void 0:l.items)&&void 0!==u?u:{},e.appStrings=!(0,w.emptyObject)(d.appStrings),e.appListStrings=!(0,w.emptyObject)(d.appListStrings),e.modStrings=!(0,w.emptyObject)(d.modStrings),this.language.set(d.languageKey,d)}}},{key:"setNavigation",value:function(e,t){var n,i=null!==(n=null==t?void 0:t.navigation)&&void 0!==n?n:{};(0,w.emptyObject)(i)||(e.navigation=!0,this.navigation.set(i))}},{key:"setThemeImages",value:function(e,t){var n,i,r=null!==(n=null==t?void 0:t.themeImages)&&void 0!==n?n:{},o=null!==(i=null==r?void 0:r.items)&&void 0!==i?i:{};(0,w.emptyObject)(r)||(0,w.emptyObject)(o)||(e.themeImages=!0,this.themeImages.set(r.id,o))}},{key:"setPreferences",value:function(e,t){var n,i=null!==(n=null==t?void 0:t.userPreferences)&&void 0!==n?n:{};if(!(0,w.emptyObject)(i)){e.userPreferences=!0;var r=this.mapPreferences(i);this.preferences.set(r)}}},{key:"setConfig",value:function(e,t){var n,i=null!==(n=null==t?void 0:t.systemConfig)&&void 0!==n?n:{};(0,w.emptyObject)(i)||(e.systemConfig=!0,this.config.set(i))}},{key:"setAdminMetadata",value:function(e,t){var n,i=null!==(n=null==t?void 0:t.adminMetadata)&&void 0!==n?n:{};(0,w.emptyObject)(i)||(e.adminMetadata=!0,this.adminMetadataStore.set(i))}},{key:"mapPreferences",value:function(e){var t={};return Object.keys(e).forEach(function(n){!e[n].items||Object.keys(e[n].items).forEach(function(i){t[i]=e[n].items[i]})}),t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(qm),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject($v),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(ah),k.\u0275\u0275inject($S),k.\u0275\u0275inject(zS),k.\u0275\u0275inject(YS))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(qm),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject($v),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(ah),k.\u0275\u0275inject($S),k.\u0275\u0275inject(zS),k.\u0275\u0275inject(YS))},token:e,providedIn:"root"}),e}(),WS=function(){var e=function(){function e(t,n,i,r,o,a,s,l){I(this,e),this.appStore=t,this.languageStore=n,this.metadataStore=i,this.navigationStore=r,this.systemConfigStore=o,this.themeImagesStore=a,this.userPreferenceStore=s,this.appMetadataStore=l,this.stateStores={},this.stateStores.appStore=this.buildMapEntry(t,!1),this.stateStores.navigationStore=this.buildMapEntry(r,!0),this.stateStores.languageStore=this.buildMapEntry(n,!0),this.stateStores.metadataStore=this.buildMapEntry(i,!1),this.stateStores.systemConfigStore=this.buildMapEntry(o,!1),this.stateStores.themeImagesStore=this.buildMapEntry(a,!1),this.stateStores.userPreferenceStore=this.buildMapEntry(s,!0),this.stateStores.appMetadataStore=this.buildMapEntry(l,!0)}return j(e,[{key:"clear",value:function(){var e=this;Object.keys(this.stateStores).forEach(function(t){e.stateStores[t].store.clear()})}},{key:"clearAuthBased",value:function(){var e=this;Object.keys(this.stateStores).forEach(function(t){e.stateStores[t].authBased&&e.stateStores[t].store.clearAuthBased()})}},{key:"buildMapEntry",value:function(e,t){return{store:e,authBased:t}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(xh),k.\u0275\u0275inject($S),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject($v),k.\u0275\u0275inject(ah),k.\u0275\u0275inject(qS))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(xh),k.\u0275\u0275inject($S),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject($v),k.\u0275\u0275inject(ah),k.\u0275\u0275inject(qS))},token:e,providedIn:"root"}),e}(),QS=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"calculateRoute",value:function(e){var t=window.location.pathname;return t.includes("index.php")&&(e="".concat(t,"/").concat(e)),e}},{key:"appendNativeAuth",value:function(e){return window.location.pathname.includes("auth")&&(e="auth/".concat(e)),e}},{key:"removeNativeAuth",value:function(){var e=window.location.pathname;return e.includes("/auth")&&(e=e.replace("/auth","/")),e=e.replace("//","/")}},{key:"isNativeAuth",value:function(){return window.location.pathname.includes("auth")}},{key:"getNativeOutLogoutUrl",value:function(){return"auth/logout"}},{key:"isLoggedOutPath",value:function(){return window.location.pathname.includes("logged-out")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),YS=function(){var e=function(){function e(t,n,i,r,o,a,s,l,u){I(this,e),this.http=t,this.router=n,this.message=i,this.stateManager=r,this.languageStore=o,this.appStateStore=a,this.localStorage=s,this.configs=l,this.baseRoute=u,this.isUserLoggedIn=new x.BehaviorSubject(!1),this.currentUserSubject=new x.BehaviorSubject({}),this.currentUser$=this.currentUserSubject.asObservable().pipe((0,M.distinctUntilChanged)())}return j(e,[{key:"isLoggedIn",value:function(){return this.isUserLoggedIn.value}},{key:"getCurrentUser",value:function(){return this.currentUserSubject.value}},{key:"setCurrentUser",value:function(e){this.appStateStore.setCurrentUser(e),this.currentUserSubject.next(e),this.isUserLoggedIn.next(!0)}},{key:"doLogin",value:function(e,t,n,i){var r=this,o="login";o=this.baseRoute.appendNativeAuth(o),o=this.baseRoute.calculateRoute(o);var a=new Tr.HttpHeaders({"Content-Type":"application/json"});return this.http.post(o,{username:e,password:t},{headers:a}).subscribe(function(e){r.baseRoute.isNativeAuth()&&(window.location.href=r.baseRoute.removeNativeAuth()),r.appStateStore.updateInitialAppLoading(!0),n(e),r.isUserLoggedIn.next(!0),r.setCurrentUser(e),r.appStateStore.enableNotifications(),r.appStateStore.refreshNotifications()},function(e){i(e)})}},{key:"logout",value:function(){var e,t,n,i=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LBL_LOGOUT_SUCCESS",o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.appStateStore.updateLoading("logout",!0,!1);var a=null!==(e=this.configs.getConfigValue("logout"))&&void 0!==e?e:[],s=null!==(t=null==a?void 0:a.path)&&void 0!==t?t:"logout",l=(0,w.isTrue)(null!==(n=null==a?void 0:a.redirect)&&void 0!==n&&n);this.baseRoute.isNativeAuth()&&(s=this.baseRoute.getNativeOutLogoutUrl()),s=this.baseRoute.calculateRoute(s);var u=new Tr.HttpParams,c=(new Tr.HttpHeaders).set("Content-Type","text/plain; charset=utf-8");this.appStateStore.getActiveRequests()<1?this.callLogout(s,u,c,o,r,l):this.appStateStore.activeRequests$.pipe((0,M.filter)(function(e){return e<1}),(0,M.take)(1)).subscribe(function(){i.callLogout(s,u,c,o,r,l)})}},{key:"callLogout",value:function(e,t,n,i,r,o){var a=this;this.resetState(),o?window.location.href=e:this.http.post(e,t.toString(),{headers:n,responseType:"text"}).pipe((0,M.take)(1),(0,M.catchError)(function(e){return a.message.log("Logout failed"),(0,x.throwError)(e)}),(0,M.finalize)(function(){a.appStateStore.updateInitialAppLoading(!0),a.appStateStore.updateLoading("logout",!1,!1),a.appStateStore.setCurrentUser(null),a.stateManager.clearAuthBased(),a.configs.clear(),!0===i&&a.router.navigate(["/Login"]).finally()})).subscribe(function(){a.message.log("Logout success"),(0,w.isEmptyString)(r)||a.message.addSuccessMessageByKey(r)},function(){a.message.log("Error on logout"),(0,w.isEmptyString)(r)||a.message.addSuccessMessageByKey(r)})}},{key:"resetState",value:function(){this.stateManager.clearAuthBased(),this.localStorage.clear(),this.isUserLoggedIn.next(!1)}},{key:"fetchSessionStatus",value:function(){var e="session-status";e=this.baseRoute.appendNativeAuth(e),e=this.baseRoute.calculateRoute(e);var t=(new Tr.HttpHeaders).set("Content-Type","text/plain; charset=utf-8");return this.http.get(e,{headers:t})}},{key:"getSessionExpiredRoute",value:function(){var e,t,n=null!==(e=this.configs.getConfigValue("session-expired"))&&void 0!==e?e:[];return null!==(t=null==n?void 0:n.path)&&void 0!==t?t:"Login"}},{key:"handleInvalidSession",value:function(e){this.sessionExpiredRedirect()?this.handleSessionExpiredRedirect():this.logout(e)}},{key:"handleSessionExpiredRedirect",value:function(){window.location.href=this.getSessionExpiredRoute()}},{key:"sessionExpiredRedirect",value:function(){var e,t,n=null!==(e=this.configs.getConfigValue("session-expired"))&&void 0!==e?e:[];return(0,w.isTrue)(null!==(t=null==n?void 0:n.redirect)&&void 0!==t&&t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Tr.HttpClient),k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(WS),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(nh),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(QS))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Tr.HttpClient),k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(WS),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(nh),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(QS))},token:e,providedIn:"root"}),e}(),XS=function(){var e=function(){function e(t,n){I(this,e),this.modalService=t,this.authService=n}return j(e,[{key:"openSugarCopyright",value:function(e){var t=this;this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg"}).result.then(function(e){t.closeResult="Closed with: ".concat(e)},function(e){t.closeResult="Dismissed ".concat(t.getDismissReason(e))})}},{key:"openSuiteCopyright",value:function(e){var t=this;this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg"}).result.then(function(e){t.closeResult="Closed with: ".concat(e)},function(e){t.closeResult="Dismissed ".concat(t.getDismissReason(e))})}},{key:"getDismissReason",value:function(e){return e===Z.ModalDismissReasons.ESC?"by pressing ESC":e===Z.ModalDismissReasons.BACKDROP_CLICK?"by clicking on a backdrop":"with: ".concat(e)}},{key:"backToTop",value:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}},{key:"ngOnInit",value:function(){var e=this;this.authSub=this.authService.isUserLoggedIn.subscribe(function(t){e.isUserLoggedIn=t})}},{key:"ngOnDestroy",value:function(){this.authSub.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Z.NgbModal),k.\u0275\u0275directiveInject(YS))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-footer-ui"]],decls:12,vars:1,consts:[[1,"footer"],[1,"copyright-links"],["data-toggle","modal","data-target",".copyright-suitecrm",1,"footer-link",3,"click"],["data-toggle","modal","data-target",".copyright-sugarcrm",1,"footer-link",3,"click"],[4,"ngIf"],[1,"copyright"],["sugarcopyright",""],["suitecopyright",""],[1,"back-to-top"],[1,"footer-link",3,"click"],["image","arrow_up_filled",1,"sicon","back-top-icon"],["role","dialog","aria-hidden","true",1,"copyright-sugarcrm"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["image","icon_modal_close",1,"sicon"],[1,"modal-body"],["role","dialog","aria-hidden","true",1,"copyright-suitecrm"]],template:function(e,t){if(1&e){var n=k.\u0275\u0275getCurrentView();k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275elementStart(2,"a",2),k.\u0275\u0275listener("click",function(){k.\u0275\u0275restoreView(n);var e=k.\u0275\u0275reference(11);return t.openSuiteCopyright(e)}),k.\u0275\u0275text(3," \xa9 Supercharged by SuiteCRM "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(4,"a",3),k.\u0275\u0275listener("click",function(){k.\u0275\u0275restoreView(n);var e=k.\u0275\u0275reference(9);return t.openSugarCopyright(e)}),k.\u0275\u0275text(5," \xa9 Powered By SugarCRM "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(6,el,6,0,"ng-container",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(7,"div",5),k.\u0275\u0275template(8,tl,13,0,"ng-template",null,6,k.\u0275\u0275templateRefExtractor),k.\u0275\u0275template(10,nl,13,0,"ng-template",null,7,k.\u0275\u0275templateRefExtractor),k.\u0275\u0275elementEnd()}2&e&&(k.\u0275\u0275advance(6),k.\u0275\u0275property("ngIf",t.isUserLoggedIn))},directives:[B.NgIf,Vv],encapsulation:2}),e}(),JS=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Uv]]}),e}(),eC=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["app-full-page-spinner"]],decls:20,vars:0,consts:[[1,"app-overlay"],["id","overlay-spinner"],[1,"app-loading"],[1,"sk-cube-grid"],[1,"sk-cube","sk-cube1","sk-cube-primary"],[1,"sk-cube","sk-cube2","sk-cube-secondary"],[1,"sk-cube","sk-cube3","sk-cube-secondary"],[1,"sk-cube","sk-cube4","sk-cube-primary"],[1,"sk-cube","sk-cube5","sk-cube-secondary"],[1,"sk-cube","sk-cube6","sk-cube-secondary"],[1,"sk-cube","sk-cube7","sk-cube-primary"],[1,"sk-cube","sk-cube8","sk-cube-primary"],[1,"sk-cube","sk-cube9","sk-cube-primary"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275elementStart(2,"div",2),k.\u0275\u0275elementStart(3,"div",3),k.\u0275\u0275element(4,"div",4),k.\u0275\u0275element(5,"div",4),k.\u0275\u0275element(6,"div",5),k.\u0275\u0275element(7,"div",6),k.\u0275\u0275element(8,"div",7),k.\u0275\u0275element(9,"div",7),k.\u0275\u0275element(10,"div",8),k.\u0275\u0275element(11,"div",9),k.\u0275\u0275element(12,"div",10),k.\u0275\u0275element(13,"div",10),k.\u0275\u0275element(14,"div",11),k.\u0275\u0275element(15,"div",12),k.\u0275\u0275element(16,"div",10),k.\u0275\u0275element(17,"div",10),k.\u0275\u0275element(18,"div",11),k.\u0275\u0275element(19,"div",12),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd())},styles:[".app-overlay[_ngcontent-%COMP%]{position:fixed;display:flex;justify-content:center;align-items:center;flex-direction:column;width:100%;height:100%;top:0;left:0;right:0;bottom:0;background-color:#fff9;z-index:4000;cursor:default}.app-loading[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}.app-loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{height:200px;width:200px;-webkit-animation:scaleIn 4s linear infinite;animation:scaleIn 4s linear infinite;transform-origin:center center;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}.app-loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]   .path[_ngcontent-%COMP%]{stroke-dasharray:1,200;stroke-dashoffset:0;-webkit-animation:dash 1.5s ease-in-out infinite;animation:dash 1.5s ease-in-out infinite;stroke-linecap:round;stroke:#ddd}.sk-cube-primary[_ngcontent-%COMP%]{background-color:#e67062}.sk-cube-secondary[_ngcontent-%COMP%]{background-color:#4e5063}.sk-cube-grid[_ngcontent-%COMP%]{width:100px;height:100px}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube[_ngcontent-%COMP%]{width:25%;height:25%;float:left;-webkit-animation:sk-cubeGridScaleDelay 1.3s infinite ease-in-out;animation:sk-cubeGridScaleDelay 1.3s infinite ease-in-out}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube1[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube2[_ngcontent-%COMP%]{-webkit-animation-delay:.3s;animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube3[_ngcontent-%COMP%]{-webkit-animation-delay:.4s;animation-delay:.4s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube4[_ngcontent-%COMP%]{-webkit-animation-delay:.1s;animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube5[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube6[_ngcontent-%COMP%]{-webkit-animation-delay:.3s;animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube7[_ngcontent-%COMP%]{-webkit-animation-delay:0s;animation-delay:0s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube8[_ngcontent-%COMP%]{-webkit-animation-delay:.1s;animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube9[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}@-webkit-keyframes sk-cubeGridScaleDelay{0%,70%,to{transform:scale(1)}35%{transform:scale(0)}}@keyframes sk-cubeGridScaleDelay{0%,70%,to{transform:scale(1)}35%{transform:scale(0)}}"]}),e}(),tC=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,H.AngularSvgIconModule]]}),e}(),nC=function(){var e=function(){function e(t){I(this,e),this.apollo=t}return j(e,[{key:"fetch",value:function(e,t){var n={query:L()(a||(a=u(["\n            query getBatchedStatistics($module: String!, $queries: Iterable!){\n              getBatchedStatistics(module: $module, queries: $queries) {\n                  _id\n                  id\n                  items\n              }\n            }\n        "]))),variables:{module:e,queries:t}};return this.apollo.query(n).pipe((0,M.map)(function(e){var t={},n=(e.data&&e.data.getBatchedStatistics||{}).items||{},i=Object.keys(n);return i&&i.length&&i.forEach(function(e){var i=n[e];t[e||i._id]={id:i._id,data:i.data,metadata:i.metadata}}),t}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(_.Apollo))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(_.Apollo))},token:e,providedIn:"root"}),e}(),iC={module:"",query:{},statistic:{id:"",data:{}},loading:!1},rC=function(){var e=function(){function e(t){I(this,e),this.fetchGQL=t,this.cache$=null,this.internalState=(0,w.deepClone)(iC),this.store=new x.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.statistic$=this.state$.pipe((0,M.map)(function(e){return e.statistic}),(0,M.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,M.map)(function(e){return e.loading}),(0,M.distinctUntilChanged)())}return j(e,[{key:"clear",value:function(){this.store.unsubscribe(),this.cache$=null}},{key:"clearAuthBased",value:function(){this.clear()}},{key:"getQuery",value:function(){return(0,w.deepClone)(this.internalState.query)}},{key:"context",get:function(){return this.internalState.query.context},set:function(e){var t=(0,w.deepClone)(this.internalState.query);t.context=e,this.updateState(Object.assign(Object.assign({},this.internalState),{query:t}))}},{key:"init",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.internalState.module=e,this.updateState(Object.assign(Object.assign({},this.internalState),{module:e,query:t})),!1===n?null:this.load()}},{key:"load",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.updateState(Object.assign(Object.assign({},this.internalState),{loading:!0})),this.fetchStatistics(this.internalState.module,this.getQuery(),t).pipe((0,M.map)(function(t){return e.mapStatistics(t)}),(0,M.tap)(function(t){e.addNewState(t)}))}},{key:"setLoading",value:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{loading:e}))}},{key:"setStatistic",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.addNewState(t),n){var i={};i[e]=t,this.cache$=(0,x.of)(i).pipe((0,M.shareReplay)(1))}}},{key:"addNewState",value:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{statistic:e,loading:!1}))}},{key:"mapStatistics",value:function(e){var t=Object.keys(e),n=t&&t.length&&t[0],i={id:"",data:{}};return n&&(i=e[n]),i}},{key:"updateState",value:function(e){this.store.next(this.internalState=e)}},{key:"fetchStatistics",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={};return i[t.key]=t,(null==this.cache$||!1===n)&&(this.cache$=this.fetchGQL.fetch(e,i).pipe((0,M.shareReplay)(1))),this.cache$}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(nC))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),oC={module:"",query:{},statistic:{id:"",data:{}},loading:!1},aC=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this,e)).fetchGQL=e,r.fieldManager=i,r.cache$=null,r.internalState=(0,w.deepClone)(oC),r.store=new x.BehaviorSubject(r.internalState),r.state$=r.store.asObservable(),r.statistic$=r.state$.pipe((0,M.map)(function(e){return e.statistic}),(0,M.distinctUntilChanged)()),r.loading$=r.state$.pipe((0,M.map)(function(e){return e.loading}),(0,M.distinctUntilChanged)()),r}return j(n,[{key:"addNewState",value:function(e){if(e.metadata&&e.metadata.dataType){var t=this.fieldManager.buildShallowField(e.metadata.dataType,e.data.value);t.metadata={digits:0},this.updateState(Object.assign(Object.assign({},this.internalState),{statistic:e,field:t,loading:!1}))}}},{key:"updateState",value:function(e){l(h(n.prototype),"updateState",this).call(this,e)}}]),n}(rC);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(nC),k.\u0275\u0275inject(dv))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),sC=function(){var e=function(){function e(t,n){I(this,e),this.fetchGQL=t,this.fieldManager=n}return j(e,[{key:"create",value:function(){return new aC(this.fetchGQL,this.fieldManager)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(nC),k.\u0275\u0275inject(dv))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(nC),k.\u0275\u0275inject(dv))},token:e,providedIn:"root"}),e}(),lC=function(){var e=function(){function e(t,n){I(this,e),this.language=t,this.factory=n,this.loading=!0,this.subs=[],this.statistics={}}return j(e,[{key:"ngOnInit",value:function(){!this.validateConfig()||(this.gridWidgetInput=this.config,this.buildStatistics(),this.setupLoading$(),this.setupVM(),this.setupReload())}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"validateConfig",value:function(){return this.config&&this.config.layout?this.config.queryArgs.context&&this.config.queryArgs.module?this.config.widgetConfig?!(!this.config.layout||!this.config.layout.rows)||(this.messageLabelKey="LBL_CONFIG_NO_STATISTICS_KEY",!1):(this.messageLabelKey="LBL_CONFIG_NO_CONFIG",!1):(this.messageLabelKey="LBL_CONFIG_BAD_CONTEXT",!1):(this.messageLabelKey="LBL_CONFIG_NO_CONFIG",!1)}},{key:"getRowClass",value:function(){return this.gridWidgetInput.rowClass}},{key:"getColClass",value:function(){return this.gridWidgetInput.columnClass}},{key:"getContextModule",value:function(){return this.gridWidgetInput.queryArgs.context.module}},{key:"getMessageContext",value:function(){var e=this.getContextModule();return e?{module:e}:{}}},{key:"getMessageFields",value:function(e){if(!e||!Object.keys(e).length)return{};var t={};return Object.keys(e).forEach(function(n){t[n]=e[n].field}),t}},{key:"getSizeClass",value:function(e){return{regular:"text-regular",medium:"text-medium",large:"text-large","x-large":"text-x-large","xx-large":"text-xx-large",huge:"text-huge"}[e]||"text-regular"}},{key:"getFontWeight",value:function(e){var t="font-weight-normal";return e&&(0,w.isTrue)(e)&&(t="font-weight-bolder"),t}},{key:"getColor",value:function(e){return{yellow:"text-yellow",blue:"text-blue",green:"text-green",red:"text-red",purple:"text-purple",dark:"text-dark",grey:"text-grey"}[e]||""}},{key:"getJustify",value:function(e){return{start:"justify-content-start",end:"justify-content-end",center:"justify-content-center",between:"justify-content-between",around:"justify-content-around"}[e]||"justify-content-center"}},{key:"getAlign",value:function(e){return{start:"align-items-start",end:"align-items-end",center:"align-items-center",baseline:"align-items-baseline",stretch:"align-items-stretch"}[e]||"align-items-center"}},{key:"getLayoutRowClass",value:function(e){var t="";return e&&e.class&&(t=e.class),t}},{key:"getClass",value:function(e){var t="";return e&&(t=e.class),t=t+" "+this.getSizeClass(e.size)+" "+this.getFontWeight(e.bold)+" "+this.getColor(e.color)}},{key:"isEmptyFieldValue",value:function(e){return"string"==typeof e&&(e=e.trim()),null==e||void 0===e||""===e||0===e.length}},{key:"getLabel",value:function(e,t){var n="";return e&&e[t]&&(n=this.language.getFieldLabel(e[t])),n}},{key:"getLayout",value:function(){return this.gridWidgetInput.layout.rows}},{key:"buildStatistics",value:function(){var e=this;this.gridWidgetInput.layout.rows.forEach(function(t){!t.cols||!t.cols.length||t.cols.forEach(function(t){if(t.statistic){if(t.store)return void(e.statistics[t.statistic]={type:t.statistic,store:t.store});e.statistics[t.statistic]={type:t.statistic,store:e.factory.create()},e.statistics[t.statistic].store.init(e.gridWidgetInput.queryArgs.module,{key:t.statistic,context:Object.assign({},e.gridWidgetInput.queryArgs.context),params:Object.assign({},e.gridWidgetInput.queryArgs.params)}).pipe((0,M.take)(1)).subscribe()}})})}},{key:"setupLoading$",value:function(){var e=this,t=[];Object.keys(this.statistics).forEach(function(n){return t.push(e.statistics[n].store.loading$)}),this.loading$=(0,x.combineLatest)(t).pipe((0,M.map)(function(t){if(!t||t.length<1)return e.loading=!1,!1;var n=!0;return t.forEach(function(e){n=n&&e}),e.loading=n,n})),this.subs.push(this.loading$.subscribe())}},{key:"setupReload",value:function(){var e=this;this.gridWidgetInput.widgetConfig.reload$&&this.subs.push(this.gridWidgetInput.widgetConfig.reload$.subscribe(function(){!1===e.loading&&(e.loading=!0,Object.keys(e.statistics).forEach(function(t){var n=e.statistics[t];!n.store||n.store.load(!1).pipe((0,M.take)(1)).subscribe()}))}))}},{key:"setupVM",value:function(){var e=this,t=(0,x.of)([]).pipe((0,M.shareReplay)()),n=(0,x.of)(this.getLayout()).pipe((0,M.shareReplay)());if(this.statistics&&Object.keys(this.statistics).length>0){var i=[];Object.keys(this.statistics).forEach(function(t){return i.push(e.statistics[t].store.state$)}),t=(0,x.combineLatest)(i)}this.vm$=(0,x.combineLatest)([t,n]).pipe((0,M.map)(function(t){var n=v(t,2),i=n[0],r=n[1],o={},a=[],s=[];return i.forEach(function(t){o[t.query.key]=t;var n=e.getLabel(t.statistic.metadata,"tooltip_title_key");n&&a.push(n);var i=e.getLabel(t.statistic.metadata,"descriptionKey");i&&s.push(i)}),{layout:r,statistics:o,tooltipTitleText:a.join(" | "),description:s.join(" | ")}}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(sC))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-grid-widget"]],inputs:{config:"config"},decls:3,vars:4,consts:[["class","p-3 widget-message",4,"ngIf"],["class","grid-widget d-flex flex-column","placement","auto","container","body",3,"ngbTooltip",4,"ngIf"],[1,"p-3","widget-message"],[3,"labelKey"],["placement","auto","container","body",1,"grid-widget","d-flex","flex-column",3,"ngbTooltip"],[4,"ngFor","ngForOf"],[3,"class",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"widget-entry-icon"],[3,"image","klass"],["class","widget-entry-value",4,"ngIf"],["class","widget-entry-loading",4,"ngIf"],[1,"widget-entry-value"],["mode","list",3,"type","field"],[1,"widget-entry-loading"],[1,"widget-entry-label","text-truncate"],[3,"labelKey","module"],[1,"text-truncate","widget-entry-label"],["class","widget-entry-dynamic-label",4,"ngIf"],[1,"widget-entry-dynamic-label"],[3,"context","fields","labelKey"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,il,2,1,"div",0),k.\u0275\u0275template(1,gl,2,2,"div",1),k.\u0275\u0275pipe(2,"async")),2&e&&(k.\u0275\u0275property("ngIf",t.messageLabelKey),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!t.messageLabelKey&&k.\u0275\u0275pipeBind1(2,2,t.vm$)))},directives:[B.NgIf,zv,Z.NgbTooltip,B.NgForOf,Vv,ES,Jv,Yv],pipes:[B.AsyncPipe],encapsulation:2}),e}(),uC=function(){var e=function(){function e(t){I(this,e),this.languageStore=t,this.title="",this.mode="none",this.displayContent=!0}return j(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-widget-panel"]],inputs:{title:"title",mode:"mode"},ngContentSelectors:Sl,decls:5,vars:3,consts:[[1,"accordion","widget-panel","mr-0","shadow-sm"],["bodyPadding","0",3,"mode","title"],["panel-header-button",""],["panel-body",""],["class","widget collapse show open-close-container","data-parent",".widget-panel",4,"ngIf"],["data-parent",".widget-panel",1,"widget","collapse","show","open-close-container"]],template:function(e,t){1&e&&(k.\u0275\u0275projectionDef(bl),k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"scrm-panel",1),k.\u0275\u0275element(2,"span",2),k.\u0275\u0275elementStart(3,"div",3),k.\u0275\u0275template(4,yl,2,1,"div",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("mode",t.mode)("title",t.title),k.\u0275\u0275advance(3),k.\u0275\u0275property("ngIf",t.displayContent))},directives:function(){return[cC,B.NgIf]},encapsulation:2,data:{animation:[(0,Nr.trigger)("widgetFade",[(0,Nr.transition)("void => *",[(0,Nr.style)({transform:"translateX(100%)",opacity:0}),(0,Nr.animate)("500ms",(0,Nr.style)({transform:"translateX(0)",opacity:1}))]),(0,Nr.transition)("* => void",[(0,Nr.style)({transform:"translateX(0)",opacity:1}),(0,Nr.animate)("500ms",(0,Nr.style)({transform:"translateX(100%)",opacity:0}))])]),(0,Nr.trigger)("widgetContentFade",[(0,Nr.transition)("void => *",[(0,Nr.style)({transform:"translateY(-5%)",opacity:0}),(0,Nr.animate)("500ms",(0,Nr.style)({transform:"translateY(0)",opacity:1}))]),(0,Nr.transition)("* => void",[(0,Nr.style)({transform:"translateY(0)",opacity:1}),(0,Nr.animate)("500ms",(0,Nr.style)({transform:"translateY(-5%)",opacity:0}))])])]}}),e}(),cC=function(){var e=function(){function e(){I(this,e),this.klass="",this.bodyPadding=2,this.mode="closable",this.close={klass:["btn","btn-outline-light","btn-sm"]},this.showHeader=!0,this.isCollapsed=!1,this.buttonClasses=["btn","btn-outline-light","btn-sm"],this.subs=[]}return j(e,[{key:"ngOnInit",value:function(){var e=this;this.isCollapsed$&&this.subs.push(this.isCollapsed$.subscribe(function(t){e.isCollapsed=t,e.initMinimiseButton()})),this.initMinimiseButton()}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"getCloseButton",value:function(){if(!this.close)return null;var e=w.Button.fromButton(this.close);return e.addClasses(this.buttonClasses),this.close=e,e}},{key:"isClosable",value:function(){return"closable"===this.mode}},{key:"isCollapsible",value:function(){return"collapsible"===this.mode}},{key:"initMinimiseButton",value:function(){var e=this;this.minimiseButton={klass:["btn","btn-outline-light","btn-sm"],onClick:function(){e.isCollapsed=!e.isCollapsed,e.initMinimiseStatus()}},this.initMinimiseStatus()}},{key:"initMinimiseStatus",value:function(){this.minimiseStatus=this.isCollapsed?"minimised":"maximised"}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-panel"]],inputs:{klass:"klass",bodyPadding:"bodyPadding",mode:"mode",close:"close",showHeader:"showHeader",title:"title",titleKey:"titleKey",isCollapsed$:"isCollapsed$"},ngContentSelectors:El,decls:4,vars:10,consts:[["class","card-header d-flex justify-content-between align-items-center",4,"ngIf"],[3,"ngbCollapse"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"flex-grow-1","align-items-center","d-flex"],[1,"d-flex","align-items-center"],[3,"config",4,"ngIf"],[3,"config","status",4,"ngIf"],["class","pl-1 panel-title",4,"ngIf"],[1,"panel-buttons","float-right"],[3,"config"],[3,"config","status"],[1,"pl-1","panel-title"],[3,"labelKey"]],template:function(e,t){1&e&&(k.\u0275\u0275projectionDef(jl),k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275template(1,xl,10,4,"div",0),k.\u0275\u0275elementStart(2,"div",1),k.\u0275\u0275projection(3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275classMapInterpolate1("card panel-card ",t.klass,""),k.\u0275\u0275classProp("collapsed",t.isCollapsed),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.showHeader),k.\u0275\u0275advance(1),k.\u0275\u0275classMapInterpolate1("card-body p-",t.bodyPadding,""),k.\u0275\u0275property("ngbCollapse",t.isCollapsed))},directives:function(){return[B.NgIf,Z.NgbCollapse,Sg,dC,zv]},encapsulation:2}),e}(),dC=function(){var e=function(){function e(){I(this,e),this.status="maximised",this.buttonClasses=["minimise-button"]}return j(e,[{key:"ngOnInit",value:function(){this.buildButton()}},{key:"ngOnChanges",value:function(e){e.config&&this.buildButton()}},{key:"buildButton",value:function(){var e=this,t=w.Button.fromButton(this.config);t.addClasses(this.buttonClasses),t.icon=this.getIcon(),t.onClick=function(){e.config.onClick(),e.toggleStatus()},this.internalConfig=t}},{key:"toggleStatus",value:function(){var e="minimised";"minimised"===this.status&&(e="maximised"),this.status=e,this.buildButton()}},{key:"getIcon",value:function(){return"minimised"===this.status?"plus_thin":"minimise"}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-minimise-button"]],inputs:{status:"status",config:"config"},features:[k.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[3,"config"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,Ml,2,1,"ng-container",0),2&e&&k.\u0275\u0275property("ngIf",t.internalConfig)},directives:[B.NgIf,Hv],encapsulation:2}),e}(),fC=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,qv]]}),e}(),pC=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,qv,Cg,Z.NgbModule,fC,Gv]]}),e}(),mC=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Uv,pC]]}),e}(),hC=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,LS,eg,mC,Gv,Uv,Xv,Z.NgbTooltipModule]]}),e}(),vC=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-home-ui"]],decls:3,vars:0,consts:[[2,"margin","70px"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"h1"),k.\u0275\u0275text(2,"Home Page"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd())},encapsulation:2}),e}(),gC=[{path:"",component:vC}],yC=function e(){I(this,e),this.url="",this.md5="",this.width=0,this.height=0},bC=function(){return(e=bC||(bC={})).none="",e.blank="_blank",e.parent="_parent",e.self="_self",e.top="_top",bC;var e}(),SC=function(){function e(t,n,i,r,o){I(this,e),this.routeConverter=t,this.moduleNavigation=n,this.preferences=i,this.language=r,this.appState=o,this.authenticated=!0,this.logo=new yC,this.useGroupTabs=!1,this.globalActions=[],this.currentUser={id:"",firstName:"",lastName:""},this.all={modules:[],extra:[]},this.menu=[]}return j(e,[{key:"resetMenu",value:function(){this.menu=[],this.globalActions=[],this.all.modules=[],this.all.extra=[],this.current=null,this.currentUser={}}},{key:"buildUserActionMenu",value:function(e,t){var n=this;this.currentUser.id=t.id,this.currentUser.firstName=t.firstName,this.currentUser.lastName=t.lastName,e&&e.forEach(function(e){var t,i=e.name,r=e.url;if("logout"!==i){var o=bC.none;"training"===i?o=bC.blank:r=n.routeConverter.toFrontEndLink(r);var a=null!==(t=n.language.getAppString(e.labelKey))&&void 0!==t?t:"";n.globalActions.push({link:{url:r,label:a,target:o}})}})}},{key:"build",value:function(e,t,n){this.buildUserActionMenu(e.userActionMenu,t);var i=this.preferences.getUserPreference("navigation_paradigm"),r="on"===this.preferences.getUserPreference("sort_modules_by_name");"m"!==i?"gm"!==i||this.buildGroupedNavigation(e,n,r):this.buildModuleNavigation(e,n,r)}},{key:"buildGroupTabMenu",value:function(e,t,n,i,r){var o=this,a=[],s=[];e&&e.length>0&&(e.forEach(function(e){s.push(o.buildTabMenuItem(e,t[e]))}),r&&this.sortMenuItems(s));var l=0;i.forEach(function(e){l<=n&&a.push(o.buildTabGroupedMenuItem(e.labelKey,e.modules,t,r)),l++}),this.menu=a,this.all.modules=s}},{key:"buildModuleNavigation",value:function(e,t,n){!(0,w.ready)([e.tabs,e.modules])||(this.buildTabMenu(e.tabs,e.modules,t,n),this.buildSelectedModule(e))}},{key:"buildGroupedNavigation",value:function(e,t,n){!(0,w.ready)([e.tabs,e.modules,e.groupedTabs])||(this.buildGroupTabMenu(e.tabs,e.modules,t,e.groupedTabs,n),this.buildSelectedModule(e))}},{key:"buildSelectedModule",value:function(e){var t,n=null!==(t=this.appState.getModule())&&void 0!==t?t:"";""===n||"home"===n||!e.modules[n]||(this.current=this.buildTabMenuItem(n,e.modules[n]))}},{key:"buildTabMenu",value:function(e,t,n,i){var r=this,o=[],a=[];if(!e||0===e.length)return this.menu=o,void(this.all.modules=a);var s=0;e.forEach(function(e){var i=r.buildTabMenuItem(e,t[e]);"home"===e||r.appState.getModule()===e||s>=n?a.push(i):o.push(i),s++}),i&&(this.sortMenuItems(o),this.sortMenuItems(a)),this.menu=o,this.all.modules=a}},{key:"buildTabGroupedMenuItem",value:function(e,t,n,i){return{link:{label:this.language.getAppString(e)||e,url:"",route:null,params:null},icon:"",submenu:this.buildGroupedMenu(t,n,i)}}},{key:"buildGroupedMenu",value:function(e,t,n){var i=this,r=[],o=null;return e.forEach(function(e){var n=t[e];if(n){var a=i.buildTabMenuItem(e,n);"home"!==e?r.push(a):o=a}}),n&&this.sortMenuItems(r),o&&r.unshift(o),r}},{key:"buildTabMenuItem",value:function(e,t){var n,i,r=this;t.name&&(e=t.name);var o=this.moduleNavigation.getModuleRoute(t),a=null!==(i=null===(n=this.language.getLanguageStrings())||void 0===n?void 0:n.appListStrings)&&void 0!==i?i:{},s={link:{label:this.moduleNavigation.getModuleLabel(t,a),url:o.url,route:o.route,params:null},icon:"home"===e?"home":"",submenu:[],module:null!=e?e:null,isGroupedMenu:!1},l=!1;return t&&t.menu.forEach(function(t){var n=t.sublinks||[],i=r.buildSubMenuItem(e,t,n);s.submenu.push(i),n.length>0&&(l=!0)}),s.isGroupedMenu=l,s}},{key:"buildSubMenuItem",value:function(e,t,n){var i=this,r=this.moduleNavigation.getActionRoute(t);return{link:{label:this.moduleNavigation.getActionLabel(e,t,this.language.getLanguageStrings()),url:r.url,route:r.route,params:r.params,process:r.process},icon:t.icon||"",submenu:n.map(function(t){return i.buildSubMenuItem(e,t,[])})}}},{key:"sortMenuItems",value:function(e){e.sort(function(e,t){var n=e.link.label.toUpperCase(),i=t.link.label.toUpperCase();return n<i?-1:n>i?1:0})}}]),e}(),CC=function(){var e=function(){function e(t,n,i){I(this,e),this.moduleNameMapper=t,this.actionNameMapper=n,this.systemConfigStore=i}return j(e,[{key:"toFrontEndLink",value:function(e){return"#/"+this.toFrontEndRoute(e)}},{key:"toFrontEndRoute",value:function(e){if(e&&e.includes("/#/")){var t=e.split("/#/");return t.length<2?"/":t[1]}var n=this.parse(e);if(!n)return"/";var i=this.buildRoute(n.module,n.action,n.record);return i+=this.buildQueryString(n.params,["module","action","record"])}},{key:"toLegacy",value:function(e,t){var n="./legacy/index.php",i=Object.assign({},t);return e.module&&(i.module=this.moduleNameMapper.toLegacy(e.module)),e.action&&(i.action=this.actionNameMapper.toLegacy(e.action)),e.record&&(i.record=e.record),n+=this.buildQueryString(i)}},{key:"parse",value:function(e){var t=new Ar.DefaultUrlSerializer,n=e.replace("/legacy","").split("?");if(n.length<2)return null;var i=t.parse("/?"+n[1]),r=i.queryParamMap;return{module:r.get("module")||"",action:r.get("action")||"",record:r.get("record")||"",params:i.queryParams}}},{key:"parseRouteURL",value:function(e){var t,n,i,r,o,a;return{module:null!==(n=null===(t=e[0])||void 0===t?void 0:t.path)&&void 0!==n?n:"",action:null!==(r=null===(i=e[1])||void 0===i?void 0:i.path)&&void 0!==r?r:"index",record:null!==(a=null===(o=e[2])||void 0===o?void 0:o.path)&&void 0!==a?a:""}}},{key:"parseRouteInfoFromUrlTree",value:function(e){return this.parseRouteURL(e.root.children[Ar.PRIMARY_OUTLET].segments)}},{key:"isClassicViewRoute",value:function(e){var t=this.systemConfigStore.getConfigValue("module_routing"),n=this.parseRouteInfoFromUrlTree(e),i=n.module;return!t[i]||!t[i][n.action]}},{key:"matchesActiveRoute",value:function(e,t){var n=this,i=!0;return[{name:"module",map:function(e){return e&&n.mapModuleToFrontend(e)}},{name:"action",map:function(e){return e&&n.mapActionToFrontEnd(e)}},{name:"record",map:function(e){return e}}].forEach(function(n){!e.snapshot.params[n.name]&&!t[n.name]||(i=i&&e.snapshot.params[n.name]===n.map(t[n.name]))}),i}},{key:"buildRoute",value:function(e,t,n){var i="".concat(this.mapModuleToFrontend(e));return t&&(i+="/".concat(this.mapActionToFrontEnd(t))),n&&(i+="/".concat(n)),i}},{key:"buildQueryString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new Tr.HttpParams;return Object.keys(e).forEach(function(i){t.includes(i)||(n=n.set(i,e[i]))}),n.keys().length>0?"?"+n.toString():""}},{key:"mapModuleToFrontend",value:function(e){return this.moduleNameMapper.toFrontend(e)}},{key:"mapActionToFrontEnd",value:function(e){return this.actionNameMapper.toFrontend(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(Zy),k.\u0275\u0275inject(Gm))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(Zy),k.\u0275\u0275inject(Gm))},token:e,providedIn:"root"}),e}(),kC=function(){var e=function(){function e(t,n,i,r,o,a,s,l,u){var c=this;I(this,e),this.navigationStore=t,this.languageStore=n,this.userPreferenceStore=i,this.systemConfigStore=r,this.appState=o,this.authService=a,this.moduleNavigation=s,this.screenSize=l,this.asyncActionService=u,this.loaded=!0,this.mainNavCollapse=!0,this.subNavCollapse=!0,this.mobileNavbar=!1,this.mobileSubNav=!1,this.backLink=!1,this.mainNavLink=!0,this.submenu=[],this.moduleNameMapper=new Gy(this.systemConfigStore),this.actionNameMapper=new Zy(this.systemConfigStore),this.routeConverter=new CC(this.moduleNameMapper,this.actionNameMapper,this.systemConfigStore),this.maxTabs=8,this.screen=Zm.Medium,this.notificationsEnabled=!1,this.subs=[],this.languages$=this.languageStore.vm$,this.userPreferences$=this.userPreferenceStore.userPreferences$,this.currentUser$=this.authService.currentUser$,this.appState$=this.appState.vm$,this.navigation$=this.navigationStore.vm$,this.vm$=(0,x.combineLatest)([this.navigation$,this.userPreferences$,this.currentUser$,this.appState$,this.screenSize.screenSize$,this.languages$]).pipe((0,M.map)(function(e){var t=v(e,6),n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5];return a&&(c.screen=a),n&&n.modules&&(c.navigation=n),c.calculateMaxTabs(n),c.getModuleQuickActions(o.module),c.navbar.resetMenu(),(0,w.ready)([s.appStrings,s.modStrings,s.appListStrings,i,r])&&c.navbar.build(n,r,c.maxTabs),{navigation:n,userPreferences:i,appState:o,appStrings:s.appStrings||{},appListStrings:s.appListStrings||{}}}))}return j(e,[{key:"onResize",value:function(e){this.mobileNavbar=e.target.innerWidth<=768}},{key:"ngOnInit",value:function(){var e=this,t=new SC(this.routeConverter,this.moduleNavigation,this.userPreferenceStore,this.languageStore,this.appState);this.setNavbar(t),this.authService.isUserLoggedIn.subscribe(function(t){e.isUserLoggedIn=t}),window.dispatchEvent(new Event("resize")),this.notificationCount$=this.appState.notificationsUnreadTotal$,this.subs.push(this.appState.notificationsEnabled$.subscribe(function(t){e.notificationsEnabled=t}))}},{key:"ngOnDestroy",value:function(){this.authService.isUserLoggedIn.unsubscribe(),this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"checkAppStrings",value:function(e){return e&&Object.keys(e).length>0}},{key:"arePreferencesInitialized",value:function(e){return e&&Object.keys(e).length}},{key:"markAsRead",value:function(){this.appState.markNotificationsAsRead()}},{key:"changeSubNav",value:function(e,t){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink,this.submenu=t}},{key:"navBackLink",value:function(){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink}},{key:"getHomePage",value:function(){return this.systemConfigStore.getHomePage()}},{key:"getCloseCallBack",value:function(e){return function(){return e.close()}}},{key:"setNavbar",value:function(e){this.navbar=e,this.loaded=!0}},{key:"isLoaded",value:function(){return this.loaded}},{key:"calculateMaxTabs",value:function(e){var t=this.systemConfigStore.getConfigValue("navigation_tab_limits");if(this.screen&&t){var n=t[this.screen];(!n||e.maxTabs&&e.maxTabs<n)&&(n=e.maxTabs),this.maxTabs=n}}},{key:"getModuleQuickActions",value:function(e){var t,n,i,r=null!==(n=null===(t=null==this?void 0:this.navigation)||void 0===t?void 0:t.modules[e])&&void 0!==n?n:null,o=null!==(i=null==r?void 0:r.menu)&&void 0!==i?i:[];(null===r||!o.length)&&(this.currentQuickActions=[]);var a=[];o.forEach(function(e){var t;if(e.url&&e.quickAction){var n=null!==(t=null==e?void 0:e.url)&&void 0!==t?t:"";a.push(Object.assign(Object.assign({},e),{url:n.replace("/#/","/")}))}}),this.currentQuickActions=a}},{key:"handleProcess",value:function(e){if(e.process){var t=e.process;this.asyncActionService.run(t,{action:t,module:e.module}).pipe((0,M.take)(1)).subscribe()}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject($S),k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(ah),k.\u0275\u0275directiveInject(Gm),k.\u0275\u0275directiveInject(jv),k.\u0275\u0275directiveInject(YS),k.\u0275\u0275directiveInject(qy),k.\u0275\u0275directiveInject(Hm),k.\u0275\u0275directiveInject(ty))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-navbar"]],hostBindings:function(e,t){1&e&&k.\u0275\u0275listener("resize",function(e){return t.onResize(e)},!1,k.\u0275\u0275resolveWindow)},decls:2,vars:3,consts:[["class","top-panel fixed-top",4,"ngIf"],[1,"top-panel","fixed-top"],[3,"ngIf"],[4,"ngIf"],["actionIcons",""],[1,"navbar","navbar-expand-lg"],[1,"navbar-collapse","collapse","order-4","order-md-0","collapsenav"],[1,"navbar-nav"],[1,"top-nav","nav-item"],[1,"navbar","ml-0","pl-0"],[1,"navbar-collapse"],[1,"pl-0"],[1,"navbar","mobile-nav-block","mobilenavbar"],["ngbDropdown","",1,"position-static",3,"autoClose"],["myDrop","ngbDropdown"],["aria-controls","navbar","aria-expanded","false","aria-label","Toggle navigation","ngbDropdownToggle","","type","button",1,"navbar-toggler"],["image","hamburger",1,"responsive-menu-toggler"],["ngbDropdownMenu","",1,"mobile-nav-dropdown","w-100"],[1,"d-flex","align-items-center"],[4,"ngTemplateOutlet"],["ngbDropdown","",1,"global-links"],[1,"global-link-item",3,"click"],["ngbDropdownToggle","",1,"nav-link","primary-global-link","dropdown-toggle"],["mobileGlobalLinkTitle",""],["image","user",1,"global-action-icon","sicon-2x"],["aria-labelledby","navbarDropdownMenuLink","ngbDropdownMenu","",1,"dropdown-menu","global-links-dropdown","border","shadow-sm-2"],[1,"global-user-name"],[3,"all","current","items","navigationType","onClose"],[4,"ngFor","ngForOf"],["ngbDropdownItem","",1,"dropdown-item","global-links-sublink",3,"href","target"],[1,"navbar","navbar-expand-md","navbar-1"],[1,"navbar-collapse","collapse","collapsenav",3,"ngbCollapse"],[3,"active","route"],[1,"global-link-item"],["aria-labelledby","navbarDropdownMenuLink","ngbDropdownMenu","",1,"dropdown-menu","global-links-dropdown","border","shadow-sm-2","dropdown-menu-right"],[1,"navbar-nav","grouped"],["class","top-nav nav-item dropdown non-grouped active",4,"ngIf"],["class","top-nav nav-item dropdown main-grouped",4,"ngFor","ngForOf"],["labelKey","LBL_TABGROUP_ALL",3,"items"],[1,"top-nav","nav-item","dropdown","main-grouped"],[3,"item","subNavCollapse"],[1,"top-nav","nav-item","dropdown","non-grouped","active"],[3,"item"],["class","top-nav nav-item dropdown non-grouped",4,"ngFor","ngForOf"],["labelKey","LBL_MORE",3,"items"],[1,"top-nav","nav-item","dropdown","non-grouped"],[1,"action-group","navbar-action-group"],[1,"action-new","dropdown"],["type","button","aria-label","Quick Create",1,"action-link","primary-global-link"],["image","plus",1,"action-btn-icon"],[1,"dropdown-menu","border","shadow-sm-2"],[1,"d-flex","align-items-center","mx-1"],["class","action-alert dropdown",4,"ngIf"],[1,"new-list-item-header","font-weight-bold"],["labelKey","LBL_MODULE_NAME",3,"module"],["class","new-list-item",4,"ngFor","ngForOf"],[1,"new-list-item"],[1,"d-flex","align-items-center",3,"routerLink","queryParams"],[3,"labelKey","module"],[1,"d-flex","align-items-center",3,"click"],["labelKey","LBL_QUICK_ACTIONS"],[1,"action-alert","dropdown"],["type","button","aria-label","Toggle Alerts",1,"action-link","primary-global-link",3,"mouseenter"],["image","alert",1,"action-btn-icon"],[1,"dropdown-menu","border","shadow-sm-2","dropdown-menu-right"],["class","badge badge-position rounded-pill bg-danger text-white",4,"ngIf"],[1,"badge","badge-position","rounded-pill","bg-danger","text-white"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,du,5,2,"div",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:function(){return[B.NgIf,Z.NgbNavbar,xC,Z.NgbDropdown,Z.NgbDropdownToggle,Vv,Z.NgbDropdownMenu,B.NgTemplateOutlet,EC,WC,B.NgForOf,Z.NgbDropdownItem,Z.NgbCollapse,KC,TC,AC,ZC,Kk,zv,Ar.RouterLinkWithHref,fk]},pipes:function(){return[B.AsyncPipe]},encapsulation:2,data:{animation:[(0,Nr.trigger)("mobileNavFade",[(0,Nr.transition)(":enter",(0,Nr.useAnimation)(io.fadeIn,{params:{timing:.5,delay:0}}))])]}}),e.instances=[],e}(),wC=function(){var e=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.call(this)}return j(n,[{key:"initDefault",value:function(){this.register("default","default",kC)}}]),n}(w.BaseComponentRegistry);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),IC=function(){var e=function(){function e(t){I(this,e),this.registry=t}return j(e,[{key:"getType",get:function(){return this.registry.get("default","default")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(wC))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-navbar-ui"]],decls:1,vars:1,consts:[[3,"ndcDynamicComponent"]],template:function(e,t){1&e&&k.\u0275\u0275element(0,"ndc-dynamic",0),2&e&&k.\u0275\u0275property("ndcDynamicComponent",t.getType)},directives:[re],encapsulation:2}),e}(),xC=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-logo-ui"]],decls:1,vars:0,consts:[["image","company_logo",1,"logo"]],template:function(e,t){1&e&&k.\u0275\u0275element(0,"scrm-image",0)},directives:[Vv],encapsulation:2}),e}(),jC=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Uv]]}),e}(),EC=function(){var e=function(){function e(t,n){I(this,e),this.auth=t,this.languageStore=n,this.logout={logoutAction:{label:"LBL_LOGOUT"}},this.languages$=this.languageStore.vm$,this.vm$=(0,x.combineLatest)([this.languages$]).pipe((0,M.map)(function(e){var t=v(e,1)[0];return{appStrings:t.appStrings||{},appListStrings:t.appListStrings||{}}}))}return j(e,[{key:"doLogout",value:function(){this.auth.logout()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(YS),k.\u0275\u0275directiveInject(Ov))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-logout-ui"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"dropdown-item","global-links-sublink",3,"click"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,fu,3,1,"ng-container",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf],pipes:[B.AsyncPipe],encapsulation:2}),e}(),MC=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),_C=function(){var e=function(){function e(t,n){I(this,e),this.asyncActionService=t,this.appState=n}return j(e,[{key:"handleProcess",value:function(e){if(e){var t=e,n={action:t,module:this.appState.getModule()};this.asyncActionService.run(t,n).pipe((0,M.take)(1)).subscribe()}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(ty),k.\u0275\u0275directiveInject(jv))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-menu-item-link"]],inputs:{link:"link",icon:"icon",class:"class"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngClass","queryParams","routerLink",4,"ngIf"],[3,"href","ngClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass","queryParams","routerLink"],[3,"image",4,"ngIf"],[3,"image"],[3,"href","ngClass"],[3,"ngClass"],[3,"ngClass","click"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,bu,4,3,"ng-container",0),k.\u0275\u0275template(1,Cu,4,3,"ng-container",0)),2&e&&(k.\u0275\u0275property("ngIf",!t.link.process),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.link.process))},directives:[B.NgIf,Ar.RouterLinkWithHref,B.NgClass,Vv],encapsulation:2}),e}(),FC=function(){var e=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.call(this)}return j(n,[{key:"initDefault",value:function(){this.register("default","default",_C)}}]),n}(w.BaseComponentRegistry);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),LC=function(){var e=function(){function e(t){I(this,e),this.registry=t}return j(e,[{key:"getType",get:function(){return this.registry.get("default","default")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(FC))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-menu-item-link"]],inputs:{link:"link",icon:"icon",class:"class"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,wu,1,6,"ndc-dynamic",0),2&e&&k.\u0275\u0275property("ngIf",t.getType)},directives:[B.NgIf,re,ne],encapsulation:2}),e}(),OC=function(){var e=function(){function e(){I(this,e),this.showDropdown=!0}return j(e,[{key:"hideDropdown",value:function(){var e=this;this.showDropdown=!1,setTimeout(function(){return e.showDropdown=!0},0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-grouped-menu-item"]],inputs:{item:"item",subNavCollapse:"subNavCollapse"},decls:4,vars:3,consts:[["data-target",".navbar-collapse","data-toggle","collapse",4,"ngIf"],["class","navbar-nav grouped",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink","class","dropdown-menu main",3,"ngbCollapse","click",4,"ngIf"],["data-target",".navbar-collapse","data-toggle","collapse"],["data-toggle","dropdown",1,"top-nav-link","nav-link-grouped","dropdown-toggle","active"],[1,"navbar-nav","grouped"],[1,"top-nav","nav-item","dropdown","main-grouped","active"],[3,"item"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","main",3,"ngbCollapse","click"],["class","nav-item dropdown-submenu submenu",4,"ngFor","ngForOf"],[1,"nav-item","dropdown-submenu","submenu"],[3,"link"],["class","dropdown-menu submenu",3,"rounded-0",4,"ngIf"],[1,"dropdown-menu","submenu"],["class","nav-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nav-item"],[3,"icon","link"],[3,"module"]],template:function(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275template(1,Iu,3,1,"span",0),k.\u0275\u0275template(2,xu,3,1,"ul",1),k.\u0275\u0275template(3,Lu,2,2,"ul",2),k.\u0275\u0275elementContainerEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!t.item.isGroupedMenu),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.item.isGroupedMenu),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.showDropdown))},directives:function(){return[B.NgIf,ZC,Z.NgbCollapse,B.NgForOf,LC,rk,lk]},encapsulation:2}),e}(),DC=function(){var e=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.call(this)}return j(n,[{key:"initDefault",value:function(){this.register("default","default",OC)}}]),n}(w.BaseComponentRegistry);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),AC=function(){var e=function(){function e(t){I(this,e),this.registry=t}return j(e,[{key:"getType",get:function(){return this.registry.get("default","default")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(DC))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-grouped-menu-item"]],inputs:{item:"item",subNavCollapse:"subNavCollapse"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,Du,1,5,"ndc-dynamic",0),2&e&&k.\u0275\u0275property("ngIf",t.getType)},directives:[B.NgIf,re,ne],encapsulation:2}),e}(),NC=function(){var e=function(){function e(){I(this,e),this.showDropdown=!0}return j(e,[{key:"hideDropdown",value:function(){var e=this;this.showDropdown=!1,setTimeout(function(){return e.showDropdown=!0},0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-menu-items-list"]],inputs:{items:"items",labelKey:"labelKey"},decls:1,vars:1,consts:[["class","navbar-nav nav-collapsed-items",4,"ngIf"],[1,"navbar-nav","nav-collapsed-items"],[1,"top-nav","nav-item","dropdown","non-grouped"],[1,"nav-link-nongrouped","dropdown-toggle"],[3,"labelKey"],["aria-labelledby","navbarDropdownMenuLink","class","dropdown-menu more-menu submenu",3,"click",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","more-menu","submenu",3,"click"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[3,"link"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,Ru,5,2,"ul",0),2&e&&k.\u0275\u0275property("ngIf",t.items&&t.items.length>0)},directives:[B.NgIf,zv,B.NgForOf,LC],encapsulation:2}),e}(),RC=function(){var e=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.call(this)}return j(n,[{key:"initDefault",value:function(){this.register("default","default",NC)}}]),n}(w.BaseComponentRegistry);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),TC=function(){var e=function(){function e(t){I(this,e),this.registry=t}return j(e,[{key:"getType",get:function(){return this.registry.get("default","default")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(RC))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-menu-items-list"]],inputs:{items:"items",labelKey:"labelKey"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,Pu,1,5,"ndc-dynamic",0),2&e&&k.\u0275\u0275property("ngIf",t.getType)},directives:[B.NgIf,re,ne],encapsulation:2}),e}(),PC=function(){var e=function(){function e(t,n,i,r){I(this,e),this.navigation=t,this.nameMapper=n,this.configs=i,this.metadata=r,this.collapsible=!1,this.maxDisplayed=5,this.collapsed=!1,this.subs=[]}return j(e,[{key:"ngOnInit",value:function(){var e,t,n=null!==(e=this.configs.getConfigValue("ui"))&&void 0!==e?e:{};this.maxDisplayed=null!==(t=parseInt(n.navigation_max_module_recently_viewed))&&void 0!==t?t:5,this.initMetadata$(),this.collapsed=!!this.collapsible}},{key:"ngOnDestroy",value:function(){this.clear()}},{key:"ngOnChanges",value:function(e){var t,n,i,r,o;null!==(null!==(t=null==e?void 0:e.module)&&void 0!==t?t:null)&&(null!==(i=null===(n=null==e?void 0:e.module)||void 0===n?void 0:n.previousValue)&&void 0!==i?i:"")!==(null!==(o=null===(r=null==e?void 0:e.module)||void 0===r?void 0:r.currentValue)&&void 0!==o?o:"")&&(this.clear(),this.initMetadata$())}},{key:"buildRoute",value:function(e){var t,n,i,r=null!==(t=e.attributes.module_name)&&void 0!==t?t:"",o=null!==(n=this.nameMapper.toFrontend(r))&&void 0!==n?n:"",a=null!==(i=e.attributes.item_id)&&void 0!==i?i:"";return this.navigation.getRecordRouterLink(o,a)}},{key:"toggleCollapse",value:function(){!this.collapsible||(this.collapsed=!this.collapsed)}},{key:"initMetadata$",value:function(){var e=this,t=this.metadata.allModuleMetadata$.pipe((0,M.map)(function(t){var n;return null!==(n=t[e.module])&&void 0!==n?n:null}));this.subs.push(t.subscribe(function(t){var n;e.records=null!==(n=null==t?void 0:t.recentlyViewed)&&void 0!==n?n:null}))}},{key:"clear",value:function(){this.records=null,this.subs.forEach(function(e){return e.unsubscribe()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(qy),k.\u0275\u0275directiveInject(Gy),k.\u0275\u0275directiveInject(Gm),k.\u0275\u0275directiveInject(xh))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-menu-recently-viewed"]],inputs:{collapsible:"collapsible",module:"module",onClick:"onClick"},features:[k.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"recently-viewed-header","mt-0","pb-1","pl-2","pr-2",3,"click"],["labelKey","LBL_LAST_VIEWED"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"nav-link","action-link","pb-2","pt-2",3,"routerLink"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,Vu,4,1,"ng-container",0),2&e&&k.\u0275\u0275property("ngIf",t.records&&t.records.length)},directives:[B.NgIf,zv,B.NgForOf,Ar.RouterLinkWithHref],pipes:[B.SlicePipe],encapsulation:2}),e}(),BC=function(){var e=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.call(this)}return j(n,[{key:"initDefault",value:function(){this.register("default","default",PC)}}]),n}(w.BaseComponentRegistry);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),$C=function(){var e=function(){function e(t){I(this,e),this.registry=t,this.collapsible=!1}return j(e,[{key:"getType",get:function(){return this.registry.get("default","default")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(BC))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-menu-recently-viewed"]],inputs:{collapsible:"collapsible",module:"module",onClick:"onClick"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,Ku,1,6,"ndc-dynamic",0),2&e&&k.\u0275\u0275property("ngIf",t.getType)},directives:[B.NgIf,re,ne],encapsulation:2}),e}(),VC=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-home-menu-item"]],inputs:{route:"route",active:"active"},decls:4,vars:3,consts:[[1,"navbar-nav","home-nav"],[1,"nav-item"],[1,"home-nav-link",3,"routerLink"],["image","home",1,"home-icon"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"ul",0),k.\u0275\u0275elementStart(1,"li",1),k.\u0275\u0275elementStart(2,"a",2),k.\u0275\u0275element(3,"scrm-image",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275classProp("active",t.active),k.\u0275\u0275advance(1),k.\u0275\u0275property("routerLink",t.route))},directives:[Ar.RouterLinkWithHref,Vv],encapsulation:2}),e}(),UC=function(){var e=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.call(this)}return j(n,[{key:"initDefault",value:function(){this.register("default","default",VC)}}]),n}(w.BaseComponentRegistry);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),KC=function(){var e=function(){function e(t){I(this,e),this.registry=t}return j(e,[{key:"getType",get:function(){return this.registry.get("default","default")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(UC))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-home-menu-item"]],inputs:{route:"route",active:"active"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,Gu,1,5,"ndc-dynamic",0),2&e&&k.\u0275\u0275property("ngIf",t.getType)},directives:[B.NgIf,re,ne],encapsulation:2}),e}(),zC=function(){var e=function(){function e(){I(this,e),this.showDropdown=!0}return j(e,[{key:"hideDropdown",value:function(){var e=this;this.showDropdown=!1,setTimeout(function(){return e.showDropdown=!0},0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-menu-item"]],inputs:{item:"item"},decls:4,vars:6,consts:[["data-target",".navbar-collapse","data-toggle","collapse"],[3,"link"],["aria-labelledby","navbarDropdownMenuLink","class","dropdown-menu submenu",3,"click",4,"ngIf"],["aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","submenu",3,"click"],["class","nav-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nav-item"],[3,"icon","link"],[3,"module"]],template:function(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"span",0),k.\u0275\u0275element(2,"scrm-menu-item-link",1),k.\u0275\u0275elementEnd(),k.\u0275\u0275template(3,qu,3,2,"div",2),k.\u0275\u0275elementContainerEnd()),2&e&&(k.\u0275\u0275advance(2),k.\u0275\u0275classMap(k.\u0275\u0275pureFunction1(4,Wu,t.item.submenu.length)),k.\u0275\u0275property("link",t.item.link),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.item.submenu.length&&t.showDropdown))},directives:function(){return[LC,B.NgIf,B.NgForOf,rk,lk]},encapsulation:2}),e}(),GC=function(){var e=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.call(this)}return j(n,[{key:"initDefault",value:function(){this.register("default","default",zC)}}]),n}(w.BaseComponentRegistry);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),ZC=function(){var e=function(){function e(t){I(this,e),this.registry=t}return j(e,[{key:"getType",get:function(){return this.registry.get("default","default")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(GC))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-menu-item"]],inputs:{item:"item"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,Yu,1,4,"ndc-dynamic",0),2&e&&k.\u0275\u0275property("ngIf",t.getType)},directives:[B.NgIf,re,ne],encapsulation:2}),e}(),HC=function(){var e=function(){function e(){I(this,e),this.navigationType="",this.submenu=[],this.subNavigationType="mm",this.backLink=!1,this.mobileSubNav=!1,this.mainNavLink=!0,this.isAdminNavbar=!1,this.isAdminNavbarClicked=!1}return j(e,[{key:"ngOnInit",value:function(){this.mainItems=this.items,"gm"!==this.navigationType&&this.current&&(this.isAdminNavbar=this.current.isGroupedMenu,this.current.isGroupedMenu||(this.mainItems=[this.current].concat(S(this.items))))}},{key:"changeSubNav",value:function(e,t,n,i){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink,this.subNavItem=i,this.submenu=t,this.subNavigationType=n,i.isGroupedMenu?(this.isAdminNavbarClicked=!0,this.mainItems=this.items):(this.isAdminNavbarClicked=!1,this.isAdminNavbar=!1)}},{key:"navBackLink",value:function(){this.mobileSubNav=!this.mobileSubNav,this.backLink=!this.backLink,this.mainNavLink=!this.mainNavLink}},{key:"getItems",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-mobile-menu"]],inputs:{navigationType:"navigationType",current:"current",items:"items",all:"all",onClose:"onClose"},decls:7,vars:2,consts:[[4,"ngIf"],[1,"mobile-nav-close","clicable","pl-3","pr-3","pt-2","pb-2","w-100",3,"click"],["image","cross_bold",1,"sicon","mobile-nav-close"],[1,"nav-close-text"],["labelKey","LBL_CLOSE_MENU"],[1,"d-flex","align-items-center","mobile-back-row",3,"click"],["image","arrow_left_filled",1,"sicon-xs","mobile-nav-arrow","pl-3","pr-3"],[1,"mobile-back-link","pl-1","pr-3","pt-2","pb-2"],["labelKey","LBL_BACK"],[1,"mobile-menu-items"],["class"," d-flex align-items-center",3,"click",4,"ngIf"],["class"," d-flex align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center",3,"click"],[1,"flex-grow-1","mobile-nav-link","pl-3","pr-3","pt-2","pb-2"],["labelKey","LBL_MORE"],["image","arrow_right_filled",1,"sicon-xs","mobile-nav-arrow","pl-3","pr-3"],[3,"items","onClose",4,"ngIf"],[3,"items","onClose"],[1,""],[3,"collapsible","module","onClick"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Xu,5,0,"ng-container",0),k.\u0275\u0275template(1,lc,3,2,"ng-container",0),k.\u0275\u0275elementStart(2,"li"),k.\u0275\u0275elementStart(3,"a",1),k.\u0275\u0275listener("click",function(){return t.onClose&&t.onClose()}),k.\u0275\u0275element(4,"scrm-image",2),k.\u0275\u0275elementStart(5,"span",3),k.\u0275\u0275element(6,"scrm-label",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275property("ngIf",t.backLink),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.mainItems&&t.mainItems.length))},directives:function(){return[B.NgIf,Vv,zv,B.NgForOf,XC,tk,$C,dk]},encapsulation:2}),e}(),qC=function(){var e=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.call(this)}return j(n,[{key:"initDefault",value:function(){this.register("default","default",HC)}}]),n}(w.BaseComponentRegistry);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),WC=function(){var e=function(){function e(t){I(this,e),this.registry=t,this.navigationType=""}return j(e,[{key:"getType",get:function(){return this.registry.get("default","default")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(qC))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-mobile-menu"]],inputs:{navigationType:"navigationType",current:"current",items:"items",all:"all",onClose:"onClose"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,cc,1,8,"ndc-dynamic",0),2&e&&k.\u0275\u0275property("ngIf",t.getType)},directives:[B.NgIf,re,ne],encapsulation:2}),e}(),QC=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-mobile-grouped-menu"]],inputs:{items:"items",onClose:"onClose"},decls:3,vars:2,consts:[[1,"mobile-menu-items"],[3,"closeOthers"],[4,"ngFor","ngForOf"],[3,"cardClass","disabled",4,"ngIf"],["cardClass","mobile-nav-group-item",3,"title",4,"ngIf"],[3,"cardClass","disabled"],["ngbPanelHeader",""],[1,"",3,"click"],[3,"icon","link"],["cardClass","mobile-nav-group-item",3,"title"],["ngbPanelContent",""],["class","ml-4",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"ml-4",3,"click"],[3,"collapsible","module","onClick"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"ngb-accordion",1),k.\u0275\u0275template(2,gc,3,2,"ng-container",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("closeOthers",!0),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngForOf",t.items))},directives:function(){return[Z.NgbAccordion,B.NgForOf,B.NgIf,Z.NgbPanel,Z.NgbPanelHeader,LC,Z.NgbPanelContent,$C,dk]},encapsulation:2}),e}(),YC=function(){var e=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.call(this)}return j(n,[{key:"initDefault",value:function(){this.register("default","default",QC)}}]),n}(w.BaseComponentRegistry);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),XC=function(){var e=function(){function e(t){I(this,e),this.registry=t}return j(e,[{key:"getType",get:function(){return this.registry.get("default","default")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(YC))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-mobile-grouped-menu"]],inputs:{items:"items",onClose:"onClose"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,bc,1,5,"ndc-dynamic",0),2&e&&k.\u0275\u0275property("ngIf",t.getType)},directives:[B.NgIf,re,ne],encapsulation:2}),e}(),JC=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-mobile-module-menu"]],inputs:{items:"items",onClose:"onClose"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"mobile-menu-items"],[1,"",3,"click"],[3,"icon","link"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,Sc,4,4,"ng-container",0),2&e&&k.\u0275\u0275property("ngForOf",t.items)},directives:[B.NgForOf,LC],encapsulation:2}),e}(),ek=function(){var e=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.call(this)}return j(n,[{key:"initDefault",value:function(){this.register("default","default",JC)}}]),n}(w.BaseComponentRegistry);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),tk=function(){var e=function(){function e(t){I(this,e),this.registry=t}return j(e,[{key:"getType",get:function(){return this.registry.get("default","default")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(ek))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-mobile-module-menu"]],inputs:{items:"items",onClose:"onClose"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,Cc,1,5,"ndc-dynamic",0),2&e&&k.\u0275\u0275property("ngIf",t.getType)},directives:[B.NgIf,re,ne],encapsulation:2}),e}(),nk=function(){var e=function(){function e(t,n,i,r){I(this,e),this.navigation=t,this.nameMapper=n,this.configs=i,this.metadata=r,this.maxDisplayed=5,this.subs=[]}return j(e,[{key:"ngOnInit",value:function(){var e,t,n=null!==(e=this.configs.getConfigValue("ui"))&&void 0!==e?e:{};this.maxDisplayed=null!==(t=parseInt(n.navigation_max_module_recently_viewed))&&void 0!==t?t:5,this.initMetadata$()}},{key:"ngOnDestroy",value:function(){this.clear()}},{key:"ngOnChanges",value:function(e){var t,n,i,r,o;null!==(null!==(t=null==e?void 0:e.module)&&void 0!==t?t:null)&&(null!==(i=null===(n=null==e?void 0:e.module)||void 0===n?void 0:n.previousValue)&&void 0!==i?i:"")!==(null!==(o=null===(r=null==e?void 0:e.module)||void 0===r?void 0:r.currentValue)&&void 0!==o?o:"")&&(this.clear(),this.initMetadata$())}},{key:"buildRoute",value:function(e){var t,n,i,r=null!==(t=e.attributes.module_name)&&void 0!==t?t:"",o=null!==(n=this.nameMapper.toFrontend(r))&&void 0!==n?n:"",a=null!==(i=e.attributes.item_id)&&void 0!==i?i:"";return this.navigation.getRecordRouterLink(o,a)}},{key:"initMetadata$",value:function(){var e=this,t=this.metadata.allModuleMetadata$.pipe((0,M.map)(function(t){var n;return null!==(n=t[e.module])&&void 0!==n?n:null}));this.subs.push(t.subscribe(function(t){var n;e.records=null!==(n=null==t?void 0:t.recentlyViewed)&&void 0!==n?n:null}))}},{key:"clear",value:function(){this.records=null,this.subs.forEach(function(e){return e.unsubscribe()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(qy),k.\u0275\u0275directiveInject(Gy),k.\u0275\u0275directiveInject(Gm),k.\u0275\u0275directiveInject(xh))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-sub-menu-recently-viewed"]],inputs:{module:"module"},features:[k.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nav-item","dropdown-submenu","submenu","submenu-extra"],[1,"sub-nav-link","nav-link","action-link","dropdown-item","dropdown-toggle","pr-4"],["image","clock"],["labelKey","LBL_LAST_VIEWED"],[1,"dropdown-menu","submenu"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[3,"link"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,Ic,8,5,"ng-container",0),2&e&&k.\u0275\u0275property("ngIf",t.records&&t.records.length)},directives:[B.NgIf,Vv,zv,B.NgForOf,LC],pipes:[B.SlicePipe],encapsulation:2}),e}(),ik=function(){var e=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.call(this)}return j(n,[{key:"initDefault",value:function(){this.register("default","default",nk)}}]),n}(w.BaseComponentRegistry);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),rk=function(){var e=function(){function e(t){I(this,e),this.registry=t}return j(e,[{key:"getType",get:function(){return this.registry.get("default","default")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(ik))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-sub-menu-recently-viewed"]],inputs:{module:"module"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,jc,1,4,"ndc-dynamic",0),2&e&&k.\u0275\u0275property("ngIf",t.getType)},directives:[B.NgIf,re,ne],encapsulation:2}),e}(),ok=function(){var e=function(){function e(t,n,i,r){I(this,e),this.navigation=t,this.nameMapper=n,this.configs=i,this.metadata=r,this.maxDisplayed=5,this.subs=[]}return j(e,[{key:"ngOnInit",value:function(){var e,t,n=null!==(e=this.configs.getConfigValue("ui"))&&void 0!==e?e:{};this.maxDisplayed=null!==(t=parseInt(n.navigation_max_module_favorites))&&void 0!==t?t:5,this.initMetadata$()}},{key:"ngOnDestroy",value:function(){this.clear()}},{key:"ngOnChanges",value:function(e){var t,n,i,r,o;null!==(null!==(t=null==e?void 0:e.module)&&void 0!==t?t:null)&&(null!==(i=null===(n=null==e?void 0:e.module)||void 0===n?void 0:n.previousValue)&&void 0!==i?i:"")!==(null!==(o=null===(r=null==e?void 0:e.module)||void 0===r?void 0:r.currentValue)&&void 0!==o?o:"")&&(this.clear(),this.initMetadata$())}},{key:"buildRoute",value:function(e){var t,n,i,r=null!==(t=e.attributes.parent_type)&&void 0!==t?t:"",o=null!==(n=this.nameMapper.toFrontend(r))&&void 0!==n?n:"",a=null!==(i=e.attributes.parent_id)&&void 0!==i?i:"";return this.navigation.getRecordRouterLink(o,a)}},{key:"initMetadata$",value:function(){var e=this,t=this.metadata.allModuleMetadata$.pipe((0,M.map)(function(t){var n;return null!==(n=t[e.module])&&void 0!==n?n:null}));this.subs.push(t.subscribe(function(t){var n;e.records=null!==(n=null==t?void 0:t.favorites)&&void 0!==n?n:null}))}},{key:"clear",value:function(){this.records=null,this.subs.forEach(function(e){return e.unsubscribe()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(qy),k.\u0275\u0275directiveInject(Gy),k.\u0275\u0275directiveInject(Gm),k.\u0275\u0275directiveInject(xh))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],inputs:{module:"module"},features:[k.\u0275\u0275NgOnChangesFeature],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),ak=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).navigation=e,a.nameMapper=i,a.configs=r,a.metadata=o,a}return n}(ok);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(qy),k.\u0275\u0275directiveInject(Gy),k.\u0275\u0275directiveInject(Gm),k.\u0275\u0275directiveInject(xh))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-sub-menu-favorites"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"nav-item","dropdown-submenu","submenu","submenu-extra"],[1,"sub-nav-link","nav-link","action-link","dropdown-item","dropdown-toggle","pr-4"],["image","star"],["labelKey","LBL_FAVORITES"],[1,"dropdown-menu","submenu"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[3,"link"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,Mc,8,5,"ng-container",0),2&e&&k.\u0275\u0275property("ngIf",t.records&&t.records.length)},directives:[B.NgIf,Vv,zv,B.NgForOf,LC],pipes:[B.SlicePipe],encapsulation:2}),e}(),sk=function(){var e=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.call(this)}return j(n,[{key:"initDefault",value:function(){this.register("default","default",ak)}}]),n}(w.BaseComponentRegistry);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),lk=function(){var e=function(){function e(t){I(this,e),this.registry=t}return j(e,[{key:"getType",get:function(){return this.registry.get("default","default")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(sk))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-sub-menu-favorites"]],inputs:{module:"module"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,_c,1,4,"ndc-dynamic",0),2&e&&k.\u0275\u0275property("ngIf",t.getType)},directives:[B.NgIf,re,ne],encapsulation:2}),e}(),uk=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).navigation=e,a.nameMapper=i,a.configs=r,a.metadata=o,a.collapsible=!1,a.collapsed=!1,a}return j(n,[{key:"ngOnInit",value:function(){l(h(n.prototype),"ngOnInit",this).call(this),this.collapsed=!!this.collapsible}},{key:"toggleCollapse",value:function(){!this.collapsible||(this.collapsed=!this.collapsed)}}]),n}(ok);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(qy),k.\u0275\u0275directiveInject(Gy),k.\u0275\u0275directiveInject(Gm),k.\u0275\u0275directiveInject(xh))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-base-menu-favorites"]],inputs:{collapsible:"collapsible",onClick:"onClick"},features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[4,"ngIf"],[1,"favorite-header","mt-0","pb-1","pl-2","pr-2",3,"click"],["labelKey","LBL_FAVORITES"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"nav-link","action-link","pb-2","pt-2",3,"routerLink"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,Oc,4,1,"ng-container",0),2&e&&k.\u0275\u0275property("ngIf",t.records&&t.records.length)},directives:[B.NgIf,zv,B.NgForOf,Ar.RouterLinkWithHref],pipes:[B.SlicePipe],encapsulation:2}),e}(),ck=function(){var e=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.call(this)}return j(n,[{key:"initDefault",value:function(){this.register("default","default",uk)}}]),n}(w.BaseComponentRegistry);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),dk=function(){var e=function(){function e(t){I(this,e),this.registry=t,this.collapsible=!1}return j(e,[{key:"getType",get:function(){return this.registry.get("default","default")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(ck))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-menu-favorites"]],inputs:{collapsible:"collapsible",module:"module",onClick:"onClick"},decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,Dc,1,6,"ndc-dynamic",0),2&e&&k.\u0275\u0275property("ngIf",t.getType)},directives:[B.NgIf,re,ne],encapsulation:2}),e}(),fk=function(){var e=function(){function e(t,n,i,r,o,a,s){I(this,e),this.language=t,this.systemConfig=n,this.storeFactory=i,this.appStateStore=r,this.message=o,this.notificationService=a,this.dynamicLabels=s}return j(e,[{key:"ngOnInit",value:function(){this.options=this.notificationService.getOptions(),this.recordThreadConfig=this.getConfig()}},{key:"getConfig",value:function(){var e,t,n,i,r,o,a,s,l,u,c,d,f,p,m,h,v,g,y,b,S,C,k=this,w={filters$:(0,x.of)({orderBy:null!==(n=null===(t=null===(e=null==this?void 0:this.options)||void 0===e?void 0:e.filters)||void 0===t?void 0:t.orderBy)&&void 0!==n?n:"date_entered",sortOrder:null!==(o=null===(r=null===(i=null==this?void 0:this.options)||void 0===i?void 0:i.filters)||void 0===r?void 0:r.sortOrder)&&void 0!==o?o:"asc",preset:{type:"alerts"}}),module:this.options.module,klass:null!==(a=this.options.class)&&void 0!==a?a:"",maxListHeight:null!==(s=this.options.maxListHeight)&&void 0!==s?s:350,direction:this.options.direction||"asc",autoRefreshFrequency:this.options.autoRefreshFrequency||0,autoRefreshDeviationMin:null!==(l=this.options.autoRefreshDeviationMin)&&void 0!==l?l:0,autoRefreshDeviationMax:null!==(u=this.options.autoRefreshDeviationMax)&&void 0!==u?u:0,onRefresh:function(){k.notificationService.onRefresh(k.store,k.appStateStore)},onLoadMore:function(){k.notificationService.onLoadMore(k.appStateStore)},loadMorePosition:null!==(d=null===(c=this.options)||void 0===c?void 0:c.loadMorePosition)&&void 0!==d?d:"",create:!1,listActionsClass:null!==(p=null===(f=this.options)||void 0===f?void 0:f.listActionsClass)&&void 0!==p?p:"",listActionsButtonClass:null!==(h=null===(m=this.options)||void 0===m?void 0:m.listActionsButtonClass)&&void 0!==h?h:"",listActionsButtonGroupClass:null!==(g=null===(v=this.options)||void 0===v?void 0:v.listActionsButtonGroupClass)&&void 0!==g?g:"",pageSize:null!==(b=null===(y=this.options)||void 0===y?void 0:y.pageSize)&&void 0!==b?b:"",showNoDataMessage:null===(S=this.options)||void 0===S?void 0:S.showNoDataMessage,noDataLabel:null===(C=this.options)||void 0===C?void 0:C.noDataLabel};return this.notificationService.setupListActions(w,this.options),this.notificationService.setupItemConfig(w,this.options),w.store=this.appStateStore.getNotificationStore(),this.store=this.appStateStore.getNotificationStore(),w}},{key:"setupItemMetadata",value:function(e,t){t&&t.header&&(e.headerLayout=(0,w.deepClone)(t.header)),t&&t.body&&(e.bodyLayout=(0,w.deepClone)(t.body)),t&&t.actions&&(e.actions=(0,w.deepClone)(t.actions))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(Gm),k.\u0275\u0275directiveInject(Cv),k.\u0275\u0275directiveInject(jv),k.\u0275\u0275directiveInject(Ym),k.\u0275\u0275directiveInject(wv),k.\u0275\u0275directiveInject(kv))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-notifications"]],decls:3,vars:2,consts:[["widget-body","",1,"notifications"],[4,"ngIf"],[1,"p-3","widget-message"],["labelKey","LBL_BAD_CONFIG"],[3,"config"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275template(1,Ac,3,0,"ng-container",1),k.\u0275\u0275template(2,Nc,2,1,"ng-container",1),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!t.options),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.options))},directives:function(){return[B.NgIf,zv,xk]},encapsulation:2}),e}(),pk=function(){var e=function(){function e(){I(this,e),this.gridButtons=[],this.mode="detail",this.maxColumns=4,this.sizeMap={handset:1,tablet:2,web:3,wide:4},this.fields=[],this.special=[]}return j(e,[{key:"ngOnInit",value:function(){var e=this;if(this.config){var t=this.config;this.vm$=(0,x.combineLatest)([t.record$,t.mode$,t.fields$,t.maxColumns$,t.sizeMap$]).pipe((0,M.map)(function(t){var n=v(t,5),i=n[0],r=n[1],o=n[2],a=n[3],s=n[4];return e.mode=r,e.maxColumns=a,e.sizeMap=s,e.fields=e.getFields(i,o),{record:i,mode:r,fields:o,maxColumns:a}}))}}},{key:"getFields",value:function(e,t){if(!e||!t||!e.fields)return[];var n=[];return t.forEach(function(t){!e.fields[t]||n.push(e.fields[t])}),n}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-grid"]],inputs:{config:"config"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"class",4,"ngIf"],[3,"actions","appendActions","colClass","fieldMode","fields","inputClass","labelClass","labelDisplay","maxColumns","rowClass","sizeMap"],["class","float-right","field-grid-actions","",4,"ngIf"],["field-grid-actions","",1,"float-right"],[3,"buttonClass","config"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,Pc,3,3,"ng-container",0),2&e&&k.\u0275\u0275property("ngIf",t.config)},directives:[B.NgIf,Eg,Dv],pipes:[B.AsyncPipe],encapsulation:2}),e}(),mk=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,OS,tg]]}),e}(),hk=function(){var e=function(){function e(t){I(this,e),this.activeModal=t,this.buttons=[]}return j(e,[{key:"ngOnInit",value:function(){var e=this;this.buttonGroup$=(0,x.of)({buttons:this.buttons}),this.closeButton={klass:["btn","btn-outline-light","btn-sm"],onClick:function(){e.activeModal.close({type:"close-button"})}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Z.NgbActiveModal))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-message-modal"]],inputs:{buttons:"buttons",titleKey:"titleKey",textKey:"textKey"},decls:6,vars:6,consts:[["klass","message-modal",3,"closable","close","title"],["modal-body","",1,"p-3"],[3,"labelKey"],["modal-footer",""],[3,"activeModal","config$"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"scrm-modal",0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275elementStart(2,"span"),k.\u0275\u0275element(3,"scrm-label",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(4,"div",3),k.\u0275\u0275element(5,"scrm-modal-button-group",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275property("closable",!0)("close",t.closeButton)("title",t.titleKey||""),k.\u0275\u0275advance(3),k.\u0275\u0275property("labelKey",t.textKey),k.\u0275\u0275advance(2),k.\u0275\u0275property("activeModal",t.activeModal)("config$",t.buttonGroup$))},directives:function(){return[wg,zv,cw]},encapsulation:2,data:{animation:[(0,Nr.trigger)("modalFade",[(0,Nr.transition)("void <=> *",[(0,Nr.animate)("800ms")])])]}}),e}(),vk=function(){var e=function(){function e(t){I(this,e),this.modalService=t}return j(e,[{key:"showModal",value:function(e,t){var n=this.modalService.open(hk);n.componentInstance.textKey=null!=e?e:"LBL_GENERIC_CONFIRMATION",n.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:function(e){return e.dismiss()}},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:function(e){t(),e.close()}}]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Z.NgbModal))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Z.NgbModal))},token:e,providedIn:"root"}),e}(),gk=function(){var e=function(){function e(t,n,i){I(this,e),this.languageStore=t,this.message=n,this.modalService=i}return j(e,[{key:"showSelectModal",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.modalService.open(gb,{size:"xl",scrollable:!0});i.componentInstance.module=e,i.result.then(function(e){if(e&&e.selection&&e.selection.selected){var i=t.getSelectedRecord(e);if(i.id)null!==n&&n(i);else{var r=t.languageStore.getFieldLabel("ERROR_NO_RECORD");t.message.addDangerMessage(r)}}})}},{key:"getSelectedRecord",value:function(e){var t="";Object.keys(e.selection.selected).some(function(e){return t=e,!0});var n=null;return e.records.some(function(e){if(e&&e.id===t)return n=e,!0}),n}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(Z.NgbModal))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(Z.NgbModal))},token:e,providedIn:"root"}),e}(),yk=function(){function e(t,n,i,r,o,a,s){I(this,e),this.actionManager=t,this.asyncActionService=n,this.message=i,this.confirmation=r,this.language=o,this.selectModalService=a,this.metadata=s,this.defaultActions={detail:[],list:[],edit:[],create:[],massupdate:[]}}return j(e,[{key:"runAction",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=e&&e.params||{},r=e.params&&e.params.selectModal,o=r&&r.module;i.displayConfirmation?this.confirmation.showModal(i.confirmationLabel||"",function(){o?t.showSelectModal(r.module,e,n):t.callAction(e,n)}):o?this.showSelectModal(r.module,e,n):this.callAction(e,n)}},{key:"showSelectModal",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.selectModalService.showSelectModal(e,function(e){if(e){var r=(0,G._T)(e,["fields","formGroup"]);t.params.modalRecord=r}n.callAction(t,i)})}},{key:"getActionName",value:function(e){return"".concat(e.key)}},{key:"parseModeActions",value:function(e,t){var n,i,r,o,a,s=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return[];var u={list:[],detail:[],edit:[],create:[],massupdate:[]};e&&e.length&&e.forEach(function(e){!e.modes||!e.modes.length||e.modes.forEach(function(t){!u[t]&&!e.asyncProcess||u[t].push(e)})}),u.detail=u.detail.concat(null!==(n=this.defaultActions.detail)&&void 0!==n?n:[]),u.list=u.list.concat(null!==(i=this.defaultActions.list)&&void 0!==i?i:[]),u.edit=u.edit.concat(null!==(r=this.defaultActions.edit)&&void 0!==r?r:[]),u.create=u.create.concat(null!==(o=this.defaultActions.create)&&void 0!==o?o:[]),u.massupdate=u.massupdate.concat(null!==(a=this.defaultActions.massupdate)&&void 0!==a?a:[]);var c=[];return u[t].forEach(function(e){var n=s.actionManager.getHandler(e,t);if(n){var i=s.buildActionData(e,l);if(!s.shouldDisplay(n,i))return;e.status=n.getStatus(i)||""}var r=s.language.getFieldLabel(e.labelKey,l&&l.module||"");c.push(Object.assign(Object.assign({},e),{label:r}))}),c}},{key:"shouldDisplay",value:function(e,t){return e&&e.shouldDisplay(t)}},{key:"callAction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.asyncProcess?this.runAsyncAction(e,t):this.runFrontEndAction(e,t)}},{key:"runAsyncAction",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.getActionName(e),r=this.getModuleName(n);this.message.removeMessages();var o=this.buildActionInput(e,i,r,n);this.asyncActionService.run(i,o).pipe((0,M.take)(1)).subscribe(function(a){t.afterAsyncAction(i,r,o,a,e,n)})}},{key:"afterAsyncAction",value:function(e,t,n,i,r,o){this.shouldReload(i)&&this.reload(r,i,o),this.reloadMetadata(t,r,i,o)}},{key:"reloadMetadata",value:function(e,t,n,i){var r=[];this.shouldReloadRecentlyViewed(n)&&r.push(this.metadata.typeKeys.recentlyViewed),this.shouldReloadFavorites(n)&&r.push(this.metadata.typeKeys.favorites),r&&r.length&&this.metadata.reloadModuleMetadata(e,r,!1).pipe((0,M.take)(1)).subscribe()}},{key:"shouldReloadRecentlyViewed",value:function(e){return!(!e.data||!e.data.reloadRecentlyViewed)}},{key:"shouldReloadFavorites",value:function(e){return!(!e.data||!e.data.reloadFavorites)}},{key:"shouldReload",value:function(e){return!(!e.data||!e.data.reload)}},{key:"runFrontEndAction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.buildActionData(e,t);this.actionManager.run(e,this.getMode(),n)}}]),e}(),bk=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l){var u;return I(this,n),(u=t.call(this,e,i,r,o,a,s,l)).actionManager=e,u.asyncActionService=i,u.message=r,u.confirmation=o,u.language=a,u.selectModalService=s,u.metadata=l,u}return j(n,[{key:"getActionName",value:function(e){return"record-".concat(e.key)}},{key:"buildActionInput",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{action:t,module:n,id:i&&i.record&&i.record.id||"",params:e&&e.params||[]}}}]),n}(yk);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(void 0),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Sk=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.apply(this,arguments)}return j(n,[{key:"checkRecordAccess",value:function(e){return!0}},{key:"navigateBack",value:function(e,t,n,i,r){var o=e.getReturnModule(t),a=e.getReturnAction(t),s=e.getReturnId(t);n!==s&&(o===i&&"record"===a&&s!==n||!o||!a||e.navigateBack(r,i,t))}}]),n}(w.ActionHandler),Ck=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="async-process",e.modes=w.ALL_VIEW_MODES,e}return j(n,[{key:"run",value:function(e){}},{key:"shouldDisplay",value:function(e){var t,n,i=null!==(n=null===(t=null==e?void 0:e.action)||void 0===t?void 0:t.acl)&&void 0!==n?n:[];return!i.length||this.checkRecordAccess(e,i)}}]),n}(Sk);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),kk=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this)).async=e,e.modes.forEach(function(t){return i.actions[t][e.key]=e}),i}return n}(Mg);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ck))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ck))},token:e,providedIn:"root"}),e}(),wk=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u){var c;return I(this,n),(c=t.call(this,r,o,a,s,i,l,u)).threadStore=e,c.language=i,c.actionManager=r,c.asyncActionService=o,c.message=a,c.confirmation=s,c.selectModalService=l,c.metadata=u,c.defaultActions={detail:[],edit:[],create:[],list:[]},c.collapseButtons=!1,c}return j(n,[{key:"getActions",value:function(e){var t=this;return(0,x.combineLatest)([(0,x.of)(this.threadStore.getListMetadata()),(0,x.of)("list")]).pipe((0,M.map)(function(e){var n=v(e,2),i=n[0],r=n[1];return r&&i?t.parseModeActions(i.actions,r,t.threadStore.getViewContext()):[]}))}},{key:"getActionName",value:function(e){return"record-thread-list-".concat(e.key)}},{key:"buildActionData",value:function(e,t){return{threadStore:this.threadStore,action:e}}},{key:"buildActionInput",value:function(e,t,n){return this.message.removeMessages(),{action:t,module:this.threadStore.module,ids:this.threadStore.getRecordIds(),params:e&&e.params||[]}}},{key:"getMode",value:function(){return"list"}},{key:"getModuleName",value:function(e){return this.threadStore.module}},{key:"reload",value:function(e,t,n){var i,r,o=null!==(r=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.reloadThread)&&void 0!==r&&r;(0,w.isTrue)(o)&&this.threadStore.reload()}},{key:"shouldReload",value:function(e){var t,n,i=null!==(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.reloadThread)&&void 0!==n&&n;return(0,w.isTrue)(i)}}]),n}(bk);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Sv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(kk),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Ik=function(){var e=function(){function e(t,n,i,r,o,a,s){I(this,e),this.language=t,this.actionManager=n,this.asyncActionService=i,this.message=r,this.confirmation=o,this.selectModalService=a,this.metadata=s}return j(e,[{key:"create",value:function(e,t){var n,i=new wk(e,this.language,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.selectModalService,this.metadata),r=null!==(n=null==t?void 0:t.collapseListActions)&&void 0!==n?n:null;return null!==r&&(i.collapseButtons=r),i}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(kk),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(kk),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},token:e,providedIn:"root"}),e}(),xk=function(){var e=function(){function e(t,n,i,r,o){I(this,e),this.storeFactory=t,this.itemFactory=n,this.recordManager=i,this.message=r,this.actionAdapterFactory=o,this.loading=!1,this.maxHeight=400,this.direction="asc",this.loadMorePosition="top",this.shouldResetScroll=!1,this.subs=[]}return j(e,[{key:"ngOnInit",value:function(){var e,t,n,i,r,o,a=this;if((0,w.isVoid)(this.config.maxListHeight)||(this.maxHeight=this.config.maxListHeight),this.config.module){this.config.store?this.store=this.config.store:(this.store=this.storeFactory.create(),this.store.setItemMetadata(this.config.itemConfig.metadata),this.store.setListMetadata({actions:this.config.listActions}),this.store.init(this.config.module,!1,null!==(t=null===(e=null==this?void 0:this.config)||void 0===e?void 0:e.pageSize)&&void 0!==t?t:null)),this.direction=this.config.direction||this.direction,this.setLoadMorePosition(),this.initCreate(),this.initDataSubscription(),this.config.filters$?this.subs.push(this.config.filters$.subscribe(function(e){a.store.setFilters(e).pipe((0,M.take)(1)).subscribe(function(){a.config.onRefresh&&a.config.onRefresh()})})):this.store.load(!1).subscribe(function(){a.config.onRefresh&&a.config.onRefresh()});var s=null!==(i=null===(n=null==this?void 0:this.config)||void 0===n?void 0:n.autoRefreshFrequency)&&void 0!==i?i:0;if(s&&this.store){var l=null!==(r=this.config.autoRefreshDeviationMin)&&void 0!==r?r:-15,u=null!==(o=this.config.autoRefreshDeviationMax)&&void 0!==o?o:15;this.subs.push(this.store.initAutoRefresh(s,l,u,this.config.onRefresh).subscribe())}this.initLoading(),this.listActionAdapter=this.actionAdapterFactory.create(this.store,this.config)}}},{key:"setLoadMorePosition",value:function(){this.loadMorePosition="asc"===this.direction?"top":"bottom",this.config.loadMorePosition&&(this.loadMorePosition=this.config.loadMorePosition)}},{key:"ngAfterViewInit",value:function(){this.shouldResetScroll=!0,this.resetScroll()}},{key:"ngOnDestroy",value:function(){var e,t;(null!==(t=null===(e=null==this?void 0:this.config)||void 0===e?void 0:e.store)&&void 0!==t?t:null)||this.store.clear(),this.store=null,this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"buildItem",value:function(e,t){var n,i,r,o=this,a="record-thread-list-item";return this.config.itemConfig.klass&&(a+=" "+this.config.itemConfig.klass),Object.assign(Object.assign({},this.config.itemConfig),{store:e,threadStore:this.store,klass:a,containerClass:this.config.itemConfig.containerClass,flexDirection:null!==(r=null===(i=null===(n=this.config)||void 0===n?void 0:n.itemConfig)||void 0===i?void 0:i.flexDirection)&&void 0!==r?r:"",expanded:function(){o.scrollToItem(t)},collapsed:function(){o.scrollToItem(t)}})}},{key:"getLoadMoreButton",value:function(){var e=this;return{klass:"load-more-button btn btn-link btn-sm",labelKey:"LBL_LOAD_MORE",onClick:function(){var t;(null===(t=null==e?void 0:e.config)||void 0===t?void 0:t.onLoadMore)&&e.store.getRecordList().records$.pipe((0,M.take)(1),(0,M.tap)(function(){return e.config.onLoadMore()})).subscribe(),e.store.loadMore()}}}},{key:"buildCreateItem",value:function(){return Object.assign(Object.assign({},this.config.createConfig),{store:this.createStore,rowClass:{"pt-1":!0},klass:"record-thread-create-item"})}},{key:"getCreateButton",value:function(){var e=this;return{klass:"create-thread-item-button btn btn-main btn-sm",labelKey:"LBL_SUBMIT_BUTTON_LABEL",onClick:function(){e.createStore.validate().pipe((0,M.take)(1)).subscribe(function(t){t?e.createStore.save().pipe((0,M.take)(1)).subscribe(function(){e.store.reload(),e.initRecord(),e.shouldResetScroll=!0,e.message.addSuccessMessageByKey("LBL_ACTION_SUCCESS")}):e.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}}}},{key:"allLoaded",value:function(){return!(!this.store||!this.store.allLoaded())}},{key:"getMaxHeight",value:function(){return 0==this.maxHeight?null:{"max-height.px":this.maxHeight,"overflow-y":"auto"}}},{key:"initRecord",value:function(){var e=this.recordManager.buildEmptyRecord(this.config.module);this.addPresetFields(e);var t="edit";this.config.createConfig&&this.config.createConfig.initialMode&&(t=this.config.createConfig.initialMode),this.createStore.initRecord(e,t,!1)}},{key:"scrollToEnd",value:function(){!this.listContainer||!this.listContainer.nativeElement||this.scrollTo(this.listContainer.nativeElement.scrollHeight)}},{key:"scrollToTop",value:function(){this.scrollTo(0)}},{key:"scrollTo",value:function(e){try{this.listContainer.nativeElement.scrollTop=e}catch(t){}}},{key:"scrollToItem",value:function(e){e&&this.listContainer&&this.listContainer.nativeElement&&this.scrollTo(e.offsetTop-this.listContainer.nativeElement.offsetTop)}},{key:"resetScroll",value:function(){!1!==this.shouldResetScroll&&("asc"===this.direction?this.scrollToEnd():this.scrollToTop(),this.shouldResetScroll=!1)}},{key:"scheduleScrollReset",value:function(){var e=this;setTimeout(function(){e.resetScroll()},500)}},{key:"initCreate",value:function(){!this.config.create||(this.createStore=this.itemFactory.create(),this.createStore.setMetadata(this.config.createConfig.metadata),this.initRecord(),this.initPresetFieldsMapping())}},{key:"initPresetFieldsMapping",value:function(){var e=this;!this.config.presetFields$||this.subs.push(this.config.presetFields$.subscribe(function(t){if(t&&Object.keys(t).length){e.presetFieldValues=t;var n=e.createStore.recordStore.getBaseRecord();e.addPresetFields(n),e.createStore.recordStore.setRecord(n)}}))}},{key:"addPresetFields",value:function(e){!this.presetFieldValues||(e.attributes=Object.assign(Object.assign({},this.presetFieldValues),e.attributes||{}))}},{key:"initDataSubscription",value:function(){var e=this;this.subs.push(this.store.stores$.subscribe(function(t){if((!e.records||!e.records.length)&&(e.shouldResetScroll=!0),"asc"===e.direction)return e.records=t.reverse(),void e.scheduleScrollReset();e.records=t,e.scheduleScrollReset()}))}},{key:"initLoading",value:function(){var e=this,t=[this.store.$loading];this.createStore&&this.createStore.loading$&&t.push(this.createStore.loading$);var n=(0,x.combineLatest)(t);this.subs.push(n.subscribe(function(t){if(t&&t.length){var n=!1;t.forEach(function(e){n=n||e}),e.loading=n}else e.loading=!1}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Cv),k.\u0275\u0275directiveInject(bv),k.\u0275\u0275directiveInject(vv),k.\u0275\u0275directiveInject(Ym),k.\u0275\u0275directiveInject(Ik))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-thread"]],viewQuery:function(e,t){var n;(1&e&&k.\u0275\u0275viewQuery(Bc,5),2&e)&&(k.\u0275\u0275queryRefresh(n=k.\u0275\u0275loadQuery())&&(t.listContainer=n.first))},inputs:{config:"config"},decls:6,vars:8,consts:[["class","d-flex record-thread-no-data justify-content-center h3",4,"ngIf"],["class","d-flex record-thread-loading justify-content-center",4,"ngIf"],["class","record-thread-list scrollbar-thin",3,"ngStyle",4,"ngIf"],[4,"ngIf"],[1,"d-flex","record-thread-no-data","justify-content-center","h3"],["labelKey","LBL_NO_DATA"],[1,"d-flex","record-thread-loading","justify-content-center"],[3,"overlay"],[1,"record-thread-list","scrollbar-thin",3,"ngStyle"],["list",""],["class","record-thread-load-more d-flex justify-content-center flex-grow-1",4,"ngIf"],[4,"ngFor","ngForOf"],["class","record-thread-load-more d-flex justify-content-center",4,"ngIf"],[1,"record-thread-load-more","d-flex","justify-content-center","flex-grow-1"],[3,"config"],["item",""],[1,"record-thread-load-more","d-flex","justify-content-center"],[3,"buttonClass","buttonGroupClass","config"],[1,"pt-3","pl-3","pr-3","pb-2"],[3,"labelKey"],["class","d-flex flex-column record-thread-create-container",4,"ngIf"],[1,"d-flex","flex-column","record-thread-create-container"],[1,"flex-grow-1"],[1,"flex-grow-1","d-flex","justify-content-start","pt-1","record-thread-create-buttons"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275template(1,$c,2,0,"div",0),k.\u0275\u0275template(2,Vc,2,1,"div",1),k.\u0275\u0275template(3,Zc,7,7,"div",2),k.\u0275\u0275template(4,Hc,3,1,"div",3),k.\u0275\u0275template(5,Wc,2,1,"ng-container",3),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275classMapInterpolate1("record-thread ",t.config&&t.config.klass||"",""),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!t.loading&&!t.records&&!t.records.length),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.loading),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.records&&t.records.length),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",(!t.records||!t.records.length)&&!t.loading&&t.config.showNoDataMessage),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.config.create&&t.createStore))},directives:function(){return[B.NgIf,zv,Pk,B.NgStyle,B.NgForOf,Hv,Ak,Dv]},encapsulation:2}),e}(),jk=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.apply(this,arguments)}return j(n,[{key:"checkRecordAccess",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=null!==(t=e.itemStore.recordStore.getBaseRecord().acls)&&void 0!==t?t:[];if(!r||!r.length)return!1;var o=null!==(n=e.action)&&void 0!==n?n:null;return this.checkAccess(o,r,i)}},{key:"navigateBack",value:function(e,t,n,i,r){var o=e.getReturnModule(t),a=e.getReturnAction(t),s=e.getReturnId(t);n!==s&&(o===i&&"record"===a&&s!==n||!o||!a||e.navigateBack(r,i,t))}}]),n}(w.ActionHandler),Ek=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="async-process",e.modes=w.ALL_VIEW_MODES,e}return j(n,[{key:"run",value:function(e){}},{key:"shouldDisplay",value:function(e){var t,n,i=null!==(n=null===(t=null==e?void 0:e.action)||void 0===t?void 0:t.acl)&&void 0!==n?n:[];return!i.length||this.checkRecordAccess(e,i)}}]),n}(jk);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Mk=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this)).modalService=e,r.navigation=i,r.key="cancel",r.modes=["edit","detail"],r}return j(n,[{key:"run",value:function(e){e.itemStore.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}},{key:"shouldDisplay",value:function(){return!0}},{key:"cancel",value:function(e){e.itemStore.recordStore.resetStaging(),e.itemStore.setMode("detail")}},{key:"showConfirmationModal",value:function(e){var t=this,n=this.modalService.open(hk);n.componentInstance.textKey="WARN_UNSAVED_CHANGES",n.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:function(e){return e.dismiss()}},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:function(n){t.cancel(e),n.close()}}]}}]),n}(jk);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Z.NgbModal),k.\u0275\u0275inject(qy))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Z.NgbModal),k.\u0275\u0275inject(qy))},token:e,providedIn:"root"}),e}(),_k=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="edit",e.modes=["detail"],e}return j(n,[{key:"run",value:function(e){e.itemStore.setMode("edit")}},{key:"shouldDisplay",value:function(e){return this.checkRecordAccess(e,["edit"])}}]),n}(jk);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Fk=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this)).message=e,r.navigation=i,r.key="save",r.modes=["edit"],r}return j(n,[{key:"run",value:function(e){var t=this;e.itemStore.recordStore.validate().pipe((0,M.take)(1)).subscribe(function(n){n?e.itemStore.save().pipe((0,M.take)(1)).subscribe(function(t){e.itemStore.setMode("detail")}):t.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}},{key:"shouldDisplay",value:function(e){return!0}}]),n}(jk);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(qy))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(qy))},token:e,providedIn:"root"}),e}(),Lk=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this)).async=e,a.cancel=i,a.edit=r,a.save=o,e.modes.forEach(function(t){return a.actions[t][e.key]=e}),r.modes.forEach(function(e){return a.actions[e][r.key]=r}),o.modes.forEach(function(e){return a.actions[e][o.key]=o}),i.modes.forEach(function(e){return a.actions[e][i.key]=i}),a}return n}(Mg);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ek),k.\u0275\u0275inject(Mk),k.\u0275\u0275inject(_k),k.\u0275\u0275inject(Fk))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ek),k.\u0275\u0275inject(Mk),k.\u0275\u0275inject(_k),k.\u0275\u0275inject(Fk))},token:e,providedIn:"root"}),e}(),Ok=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u,c){var d;return I(this,n),(d=t.call(this,o,a,s,l,r,u,c)).itemStore=e,d.threadStore=i,d.language=r,d.actionManager=o,d.asyncActionService=a,d.message=s,d.confirmation=l,d.selectModalService=u,d.metadata=c,d.defaultActions={detail:[],edit:[],create:[]},d.collapseButtons=!1,d}return j(n,[{key:"getActions",value:function(e){var t=this;return(0,x.combineLatest)([this.itemStore.meta$,this.itemStore.mode$]).pipe((0,M.map)(function(e){var n=v(e,2),i=n[0],r=n[1];return r&&i?t.parseModeActions(i.actions,r,t.itemStore.getViewContext()):[]}))}},{key:"getActionName",value:function(e){return"record-thread-item-".concat(e.key)}},{key:"buildActionData",value:function(e,t){return{itemStore:this.itemStore,threadStore:this.threadStore,action:e}}},{key:"buildActionInput",value:function(e,t,n){var i=this.itemStore.getBaseRecord();return this.message.removeMessages(),{action:t,module:i.module,id:i.id,params:e&&e.params||[]}}},{key:"getMode",value:function(){return this.itemStore.getMode()}},{key:"getModuleName",value:function(e){return this.itemStore.getModuleName()}},{key:"reload",value:function(e,t,n){var i,r,o,a,s=null!==(r=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.reload)&&void 0!==r&&r,l=null!==(a=null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.reloadThread)&&void 0!==a&&a;(0,w.isTrue)(s)&&this.itemStore.load(!1).pipe((0,M.take)(1)).subscribe(),(0,w.isTrue)(l)&&this.threadStore.reload()}},{key:"shouldReload",value:function(e){var t,n,i,r,o=null!==(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.reload)&&void 0!==n&&n,a=null!==(r=null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.reloadThread)&&void 0!==r&&r;return(0,w.isTrue)(o)||(0,w.isTrue)(a)}}]),n}(bk);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(yh),k.\u0275\u0275inject(Sv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Lk),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Dk=function(){var e=function(){function e(t,n,i,r,o,a,s){I(this,e),this.language=t,this.actionManager=n,this.asyncActionService=i,this.message=r,this.confirmation=o,this.selectModalService=a,this.metadata=s}return j(e,[{key:"create",value:function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=new Ok(e,t,this.language,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.selectModalService,this.metadata),a=null!==(i=null===(n=null==r?void 0:r.metadata)||void 0===n?void 0:n.collapseActions)&&void 0!==i?i:null;return null!==a&&(o.collapseButtons=a),o}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Lk),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Lk),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},token:e,providedIn:"root"}),e}(),Ak=function(){var e=function(){function e(t,n){I(this,e),this.actionAdapterFactory=t,this.appStateStore=n,this.collapsed=!1,this.collapsible=!1,this.collapseLimit=300,this.dynamicClass="",this.subs=[],this.dynamicClassesMap={},this.dynamicClassFieldSubs=[]}return j(e,[{key:"ngOnInit",value:function(){this.actionAdapter=this.actionAdapterFactory.create(this.config.store,this.config.threadStore,this.config),this.initDynamicClass()}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()}),this.dynamicClassFieldSubs.forEach(function(e){return e.unsubscribe()})}},{key:"ngAfterViewInit",value:function(){var e=this;!this.config||!this.config.collapsible||setTimeout(function(){(e.bodyEl.nativeElement.offsetHeight||e.bodyEl.nativeElement.height)>(e.config.collapseLimit||e.collapseLimit)&&(e.collapsible=!0,e.collapsed=!0)},2e3)}},{key:"buildConfig",value:function(e){var t,n,i,r,o,a,s,l,u,c,d,f;return{record$:this.config.store.stagingRecord$,mode$:this.config.store.mode$,layout$:(0,x.of)(e).pipe((0,M.shareReplay)(1)),inputClass:Object.assign(Object.assign({},this.config.inputClass||{}),{"form-control form-control-sm":!0}),buttonClass:null!==(n=null===(t=null==this?void 0:this.config)||void 0===t?void 0:t.buttonClass)&&void 0!==n?n:"",buttonGroupClass:null!==(r=null===(i=null==this?void 0:this.config)||void 0===i?void 0:i.buttonGroupClass)&&void 0!==r?r:"",labelClass:null!==(a=null===(o=null==this?void 0:this.config)||void 0===o?void 0:o.labelClass)&&void 0!==a?a:{},rowClass:null!==(l=null===(s=null==this?void 0:this.config)||void 0===s?void 0:s.rowClass)&&void 0!==l?l:{},colClass:null!==(c=null===(u=null==this?void 0:this.config)||void 0===u?void 0:u.colClass)&&void 0!==c?c:{},actions:null==this?void 0:this.actionAdapter,klass:null===(d=null==this?void 0:this.config)||void 0===d?void 0:d.containerClass,flexDirection:(null===(f=null==this?void 0:this.config)||void 0===f?void 0:f.flexDirection)||""}}},{key:"getCollapseButton",value:function(){var e=this;return{klass:"collapse-button btn btn-link btn-sm",labelKey:this.collapsed?"LBL_SHOW_MORE":"LBL_SHOW_LESS",onClick:function(){e.collapsed=!e.collapsed,e.collapsed?e.config&&e.config.collapsed():e.config&&e.config.expanded()}}}},{key:"initDynamicClass",value:function(){var e=this;!this.config||!this.config.dynamicClass||!this.config.dynamicClass.length||this.subs.push(this.config.store.stagingRecord$.subscribe(function(t){var n={};e.dynamicClassFieldSubs.forEach(function(e){return e.unsubscribe()}),t&&t.fields&&Object.keys(t.fields).length&&(e.config.dynamicClass.forEach(function(i){var r;if(i&&(t.fields[i]||t.attributes[i])){t.fields[i]&&e.dynamicClassFieldSubs.push(t.fields[i].valueChanges$.pipe((0,M.debounceTime)(100)).subscribe(function(){var n,r=null!==(n=e.getDynamicClasses(i,t))&&void 0!==n?n:"";""!==r&&(e.dynamicClassesMap[i]=r,e.calculateDynamicClasses())}));var o=null!==(r=e.getDynamicClasses(i,t))&&void 0!==r?r:"";""!==o&&(n[i]=o)}}),e.dynamicClassesMap=n,e.calculateDynamicClasses())}))}},{key:"calculateDynamicClasses",value:function(){var e,t=this,n=[];Object.keys(null!==(e=this.dynamicClassesMap)&&void 0!==e?e:{}).forEach(function(e){var i,r=null!==(i=t.dynamicClassesMap[e])&&void 0!==i?i:"";""!==r&&n.push(r)}),this.dynamicClass=n.join(" ")}},{key:"getDynamicClasses",value:function(e,t){var n=e+"-",i=[];return t.fields[e]?(t.fields[e].value&&i.push(t.fields[e].value),t.fields[e].valueList&&t.fields[e].valueList.length&&(i=i.concat(t.fields[e].valueList))):Array.isArray(t.attributes[e])?i=i.concat(t.attributes[e]):"object"!=typeof t.attributes[e]&&i.push(t.attributes[e]),i&&i.length?n+i.join(" "+n):""}},{key:"getBodyClass",value:function(){var e,t,n,i;return null!==(i=null===(n=null===(t=null===(e=this.config)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.bodyLayout)||void 0===n?void 0:n.class)&&void 0!==i?i:""}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Dk),k.\u0275\u0275directiveInject(jv))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-thread-item"]],viewQuery:function(e,t){var n;(1&e&&k.\u0275\u0275viewQuery(Qc,5),2&e)&&(k.\u0275\u0275queryRefresh(n=k.\u0275\u0275loadQuery())&&(t.bodyEl=n.first))},inputs:{config:"config"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"record-thread-item-header","flex-grow-1"],[4,"ngIf"],["body",""],["class","fadeout",4,"ngIf"],["class","record-thread-item-collapse d-flex justify-content-center flex-grow-1",4,"ngIf"],[3,"config"],[1,"fadeout"],[1,"record-thread-item-collapse","d-flex","justify-content-center","flex-grow-1"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,td,8,15,"div",0),2&e&&k.\u0275\u0275property("ngIf",t.config)},directives:function(){return[B.NgIf,Nk,Hv]},encapsulation:2}),e}(),Nk=function(){var e=function(){function e(){I(this,e),this.mode="detail",this.maxColumns=4,this.sizeMap={handset:1,tablet:2,web:3,wide:4},this.subs=[]}return j(e,[{key:"ngOnInit",value:function(){var e=this;if(this.config){var t=this.config;t.record$&&this.subs.push(t.record$.subscribe(function(t){e.record=null!=t?t:null})),t.mode$&&this.subs.push(t.mode$.subscribe(function(t){e.mode=null!=t?t:"detail"})),t.layout$&&this.subs.push(t.layout$.subscribe(function(t){e.layout=null!=t?t:null}))}}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"getRowClass",value:function(){return this.config.rowClass}},{key:"getColClass",value:function(){return this.config.colClass}},{key:"getSizeClass",value:function(e){return{regular:"text-regular",medium:"text-medium",large:"text-large","x-large":"text-x-large","xx-large":"text-xx-large",huge:"text-huge"}[e]||"text-regular"}},{key:"getFontWeight",value:function(e){var t="font-weight-normal";return e&&(0,w.isTrue)(e)&&(t="font-weight-bolder"),t}},{key:"getColor",value:function(e){return{yellow:"text-yellow",blue:"text-blue",green:"text-green",red:"text-red",purple:"text-purple",dark:"text-dark",grey:"text-grey"}[e]||""}},{key:"getJustify",value:function(e){return{start:"justify-content-start",end:"justify-content-end",center:"justify-content-center",between:"justify-content-between",around:"justify-content-around"}[e]||""}},{key:"getAlign",value:function(e){return{start:"align-items-start",end:"align-items-end",center:"align-items-center",baseline:"align-items-baseline",stretch:"align-items-stretch"}[e]||""}},{key:"getLayoutRowClass",value:function(e){return e&&e.class||""}},{key:"getClass",value:function(e){if(!e)return"";var t=[];return t.push(e.class||""),e.size&&t.push(this.getSizeClass(e.size)||""),e.bold&&t.push(this.getFontWeight(e.bold)||""),e.color&&t.push(this.getColor(e.color)||""),t.join(" ")}},{key:"getLabelDisplay",value:function(e,t){return this.shouldLabelDisplayInMode(e,t)?e.labelDisplay||this.config&&this.config.labelDisplay||"inline":"none"}},{key:"getField",value:function(e,t){var n;return t&&t.name&&e&&e.fields&&null!==(n=e.fields[t.name])&&void 0!==n?n:null}},{key:"getFieldClass",value:function(e){var t=this.config.inputClass||{};return e.inputClass&&(t[e.inputClass]=!0),t}},{key:"getLabelClass",value:function(e){var t=this.config.labelClass||{};return e.labelClass&&(t[e.labelClass]=!0),t}},{key:"shouldDisplay",value:function(e,t,n){if(!this.shouldFieldDisplayInMode(e,n))return!1;if(!e.hideIfEmpty)return!0;var i=!1;return i=(i=(i=i||!!t.value)||!(!t.valueList||!t.valueList.length))||!(!t.valueObject||!Object.keys(t.valueObject).length)}},{key:"shouldColDisplayInMode",value:function(e,t){return this.shouldFieldDisplayInMode(e,t)||this.shouldLabelDisplayInMode(e,t)}},{key:"shouldFieldDisplayInMode",value:function(e,t){var n,i=null!==(n=null==e?void 0:e.modes)&&void 0!==n?n:null;return!(i&&i.length&&!i.includes(t))}},{key:"shouldLabelDisplayInMode",value:function(e,t){var n,i=null!==(n=null==e?void 0:e.labelModes)&&void 0!==n?n:null;return!(i&&i.length&&!i.includes(t))}},{key:"getDisplay",value:function(e){return e.display||""}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-flexbox"]],inputs:{config:"config"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngClass","class",4,"ngIf"],[1,"d-flex"],[3,"ngClass",4,"ngIf"],[3,"labelKey","ngClass",4,"ngIf"],[3,"labelKey","fields",4,"ngIf"],[3,"labelKey","ngClass"],[3,"labelKey","fields"],[3,"field","klass","mode","record","type"],[3,"buttonClass","buttonGroupClass","config"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,vd,2,5,"div",0),2&e&&k.\u0275\u0275property("ngIf",t.config)},directives:[B.NgIf,B.NgForOf,B.NgClass,zv,Yv,ES,Dv],encapsulation:2}),e}(),Rk=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,qv,LS,Gv,tg,Xv]]}),e}(),Tk=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,qv,pC,OS,Zv,Gv,mk,AS,Rk]]}),e}(),Pk=function(){var e=function e(){I(this,e),this.overlay=!1};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-loading-spinner"]],inputs:{overlay:"overlay"},decls:19,vars:2,consts:[[1,"loading-spinner"],[1,"sk-cube-grid"],[1,"sk-cube","sk-cube1","sk-cube-primary"],[1,"sk-cube","sk-cube2","sk-cube-secondary"],[1,"sk-cube","sk-cube3","sk-cube-secondary"],[1,"sk-cube","sk-cube4","sk-cube-primary"],[1,"sk-cube","sk-cube5","sk-cube-secondary"],[1,"sk-cube","sk-cube6","sk-cube-secondary"],[1,"sk-cube","sk-cube7","sk-cube-primary"],[1,"sk-cube","sk-cube8","sk-cube-primary"],[1,"sk-cube","sk-cube9","sk-cube-primary"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275elementStart(1,"div",0),k.\u0275\u0275elementStart(2,"div",1),k.\u0275\u0275element(3,"div",2),k.\u0275\u0275element(4,"div",2),k.\u0275\u0275element(5,"div",3),k.\u0275\u0275element(6,"div",4),k.\u0275\u0275element(7,"div",5),k.\u0275\u0275element(8,"div",5),k.\u0275\u0275element(9,"div",6),k.\u0275\u0275element(10,"div",7),k.\u0275\u0275element(11,"div",8),k.\u0275\u0275element(12,"div",8),k.\u0275\u0275element(13,"div",9),k.\u0275\u0275element(14,"div",10),k.\u0275\u0275element(15,"div",8),k.\u0275\u0275element(16,"div",8),k.\u0275\u0275element(17,"div",9),k.\u0275\u0275element(18,"div",10),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&k.\u0275\u0275classProp("overlay",t.overlay)},styles:[".sk-cube-grid[_ngcontent-%COMP%]{width:6.25em;height:6.25em}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube[_ngcontent-%COMP%]{width:25%;height:25%;float:left;-webkit-animation:sk-cubeGridScaleDelay 1.3s infinite ease-in-out;animation:sk-cubeGridScaleDelay 1.3s infinite ease-in-out}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube1[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube2[_ngcontent-%COMP%]{-webkit-animation-delay:.3s;animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube3[_ngcontent-%COMP%]{-webkit-animation-delay:.4s;animation-delay:.4s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube4[_ngcontent-%COMP%]{-webkit-animation-delay:.1s;animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube5[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube6[_ngcontent-%COMP%]{-webkit-animation-delay:.3s;animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube7[_ngcontent-%COMP%]{-webkit-animation-delay:0s;animation-delay:0s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube8[_ngcontent-%COMP%]{-webkit-animation-delay:.1s;animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube9[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}@-webkit-keyframes sk-cubeGridScaleDelay{0%,70%,to{transform:scale(1)}35%{transform:scale(0)}}@keyframes sk-cubeGridScaleDelay{0%,70%,to{transform:scale(1)}35%{transform:scale(0)}}"]}),e}(),Bk=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),$k=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,qv,pC,OS,Zv,Gv,mk,qv,Tk,Bk,tg]]}),e}(),Vk=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,LS,mC,Gv,$k,Tk]]}),e}(),Uk=function(){var e=function(){function e(t){I(this,e),this.router=t}return j(e,[{key:"navigateToSearch",value:function(e){var t="";return e&&(t=e),this.router.navigate(["/home/unified-search"],{queryParams:{query_string:t}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ar.Router))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ar.Router))},token:e,providedIn:"root"}),e}(),Kk=function(){var e=function(){function e(t,n){I(this,e),this.globalSearch=t,this.languageStore=n,this.searchWord="",this.searchResults=[],this.isFocused=!1,this.hasSearchTyped=!1,this.subs=[],this.languages$=this.languageStore.vm$,this.vm$=this.languages$.pipe((0,M.map)(function(e){return{appStrings:e.appStrings||{}}}))}return j(e,[{key:"ngOnInit",value:function(){var e=this;this.searchForm=new V.FormGroup({searchTerm:new V.FormControl("")}),this.subs.push(this.searchForm.get("searchTerm").valueChanges.pipe((0,M.tap)(function(t){e.hasSearchTyped=!!t}),(0,M.distinctUntilChanged)(),(0,M.filter)(function(e){return(null==e?void 0:e.length)>1})).subscribe(function(t){return e.searchWord=t}))}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"search",value:function(){var e=this;this.searchWord.length&&this.globalSearch.navigateToSearch(this.searchWord).finally(function(){e.clearSearchTerm(),e.searchInput.nativeElement.blur()})}},{key:"clearSearchTerm",value:function(){this.searchForm.reset(),this.hasSearchTyped=!1,this.searchWord=""}},{key:"onFocus",value:function(){var e,t,n;this.isFocused=!0;var i=null!==(n=null===(t=null===(e=this.searchForm)||void 0===e?void 0:e.get("searchTerm"))||void 0===t?void 0:t.value)&&void 0!==n?n:"";i.length>2&&(this.hasSearchTyped=!0,this.searchWord=i)}},{key:"onBlur",value:function(){var e=this;setTimeout(function(){e.isFocused=!1,e.hasSearchTyped=!1},200)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Uk),k.\u0275\u0275directiveInject(Ov))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-search-bar"]],viewQuery:function(e,t){var n;(1&e&&k.\u0275\u0275viewQuery(gd,5),2&e)&&(k.\u0275\u0275queryRefresh(n=k.\u0275\u0275loadQuery())&&(t.searchInput=n.first))},decls:2,vars:3,consts:[[4,"ngIf"],["name","global-search",1,"global-search",3,"formGroup"],[1,"input-group","dropdown",3,"ngClass"],["formControlName","searchTerm","type","text","name","global-search-term","aria-label","Search","data-toggle","dropdown","autocomplete","off","required","",1,"form-control","dropdown-toggle","global-search-term",3,"placeholder","focus","blur","keydown.enter"],["searchInput",""],["class","dropdown-menu global-search-dropdown",4,"ngIf"],[1,"input-group-append"],["class","btn btn-default search-button d-flex align-items-center","aria-label","Search","scrm-button-loading","",3,"click",4,"ngIf"],[1,"dropdown-menu","global-search-dropdown"],[1,"dropdown-item-block",3,"ngClass"],[1,"dropdown-item",3,"click"],["image","search",1,"search-icon","sicon"],[1,"dropdown-text","ml-2"],["aria-label","Search","scrm-button-loading","",1,"btn","btn-default","search-button","d-flex","align-items-center",3,"click"],["image","cross",1,"search-icon","sicon"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,wd,9,8,"ng-container",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,V.\u0275NgNoValidate,V.NgControlStatusGroup,V.FormGroupDirective,B.NgClass,V.DefaultValueAccessor,V.NgControlStatus,V.FormControlName,V.RequiredValidator,Vv],pipes:[B.AsyncPipe,B.LowerCasePipe],encapsulation:2}),e}(),zk=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule,Uv,Gv,V.ReactiveFormsModule]]}),e}(),Gk=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,jC,MC,Z.NgbModule,Ar.RouterModule,Uv,oe,Gv,V.FormsModule,Vk,zk]]}),e}(),Zk=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[Ar.RouterModule.forChild(gC),Gk,JS,B.CommonModule]]}),e}(),Hk={success:{alertClass:"alert-success",alertIcon:"info-circle"},error:{alertClass:"alert-danger",alertIcon:"exclamation-circle"},warning:{alertClass:"alert-warning",alertIcon:"exclamation-triangle"},info:{alertClass:"alert-info",alertIcon:"info-circle"},light:{alertClass:"alert-light",alertIcon:"exclamation-circle"}},qk=function(){var e=function(){function e(t,n,i){I(this,e),this.appState=t,this.languageStore=n,this.modal=i,this.titleKey="LBL_CHECKSYS_TITLE"}return j(e,[{key:"getHeaderLabel",value:function(){return this.languageStore.getFieldLabel("LBL_CHECKSYS_TITLE")}},{key:"getColumnLabel",value:function(e){var t=this.languageStore.getFieldLabel(e,this.appState.getModule());return(0,w.isEmptyString)(t)?e:t}},{key:"ngOnInit",value:function(){var e=this;console.log(this.errors),this.closeButtonIcon={klass:["btn","btn-outline-light","btn-sm"],onClick:function(){e.modal.close({type:"close-button"})}},this.closeButton={klass:["btn","modal-button-cancel"],labelKey:"LBL_COLUMN_SELECTOR_CLOSE_BUTTON",onClick:function(){e.modal.close({type:"close-button"})}}}},{key:"getAlertType",value:function(e){return"error"===e.status?Hk[e.type].alertClass:Hk[e.status].alertClass}},{key:"getAlertIcon",value:function(e){return"error"===e.status?Hk[e.type].alertIcon:Hk[e.status].alertIcon}},{key:"returnZero",value:function(){return 0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(jv),k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(Z.NgbActiveModal))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-install-error-modal"]],inputs:{errors:"errors"},decls:8,vars:11,consts:[[3,"closable","close","title","titleKey","headerKlass","bodyKlass"],["modal-body",""],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"list-style-none"],[4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-danger"],[1,"alert-heading"],[1,"alert-desc"],["role","alert"],[3,"image"],[2,"margin-left","2px"],["style","float:right",4,"ngIf"],[4,"ngIf"],["class","alert alert-light","role","alert",4,"ngIf"],[2,"float","right"],["role","alert",1,"alert","alert-light"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"scrm-modal",0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275elementContainerStart(2),k.\u0275\u0275template(3,Id,6,2,"div",2),k.\u0275\u0275elementStart(4,"div"),k.\u0275\u0275elementStart(5,"ul",3),k.\u0275\u0275template(6,_d,10,8,"li",4),k.\u0275\u0275pipe(7,"keyvalue"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275property("closable",!0)("close",t.closeButtonIcon)("title",t.getHeaderLabel())("titleKey",t.titleKey)("headerKlass","alert-header")("bodyKlass","alert-body"),k.\u0275\u0275advance(3),k.\u0275\u0275property("ngIf",t.errors.hasValidationError&&!0===t.errors.hasValidationError),k.\u0275\u0275advance(3),k.\u0275\u0275property("ngForOf",k.\u0275\u0275pipeBind2(7,8,t.errors.data,t.returnZero)))},directives:[wg,B.NgIf,B.NgForOf,Vv],pipes:[B.KeyValuePipe],encapsulation:2}),e}(),Wk=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e,bootstrap:function(){return[qk]}}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,rt,Cg,Ig,Gv,qv,Z.NgbModule,Z.NgbAlertModule,Uv]]}),e}(),Qk=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.apply(this,arguments)}return n}(w.ActionHandler),Yk=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this)).moduleNameMapper=e,r.router=i,r.key="create",r.modes=["list"],r}return j(n,[{key:"run",value:function(e){var t,n,i,r,o=null!==(n=null===(t=null==e?void 0:e.action)||void 0===t?void 0:t.moduleAction)&&void 0!==n?n:"edit",a=null!==(i=null==e?void 0:e.parentId)&&void 0!==i?i:"",s=null!==(r=e.parentModule)&&void 0!==r?r:"",l="/".concat(e.module,"/").concat(o),u={return_module:this.moduleNameMapper.toLegacy(s),return_action:"DetailView",return_id:a,relate_to:s,relate_id:a};this.addAdditionalFields(e,u),this.addParams(e,u),this.router.navigate([l],{queryParams:u}).then()}},{key:"shouldDisplay",value:function(){return!0}},{key:"addAdditionalFields",value:function(e,t){var n,i=e.store.parentRecord&&e.store.parentRecord.attributes||{};if(i||Object.keys(i).length){var r=null!==(n=e.action.additionalFields)&&void 0!==n?n:{};(Object.keys(r)||[]).forEach(function(e){if(e&&r[e]){var n=(0,U.Z)(i,r[e],null);(0,w.isVoid)(n)||(t[e]=n)}})}}},{key:"addParams",value:function(e,t){var n,i=null!==(n=e.action.extraParams)&&void 0!==n?n:{};(Object.keys(i)||[]).forEach(function(e){!e||!i[e]||(t[e]=i[e])})}}]),n}(Qk);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(Ar.Router))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(Ar.Router))},token:e,providedIn:"root"}),e}(),Xk=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this)).modalService=e,o.message=i,o.asyncActionService=r,o.key="select",o.modes=["list"],o}return j(n,[{key:"shouldDisplay",value:function(e){return!0}},{key:"run",value:function(e){this.showSelectModal(e)}},{key:"showSelectModal",value:function(e){var t,n=this,i=this.modalService.open(gb,{size:"xl",scrollable:!0}),r=e.module;i.componentInstance.module=r,i.componentInstance.parentModule=null!==(t=null==e?void 0:e.parentModule)&&void 0!==t?t:"",i.componentInstance.multiSelect=!0,i.componentInstance.multiSelectButtonLabel="LBL_LINK",i.result.then(function(t){var i,o,a;if(t&&t.selection&&t.selection.selected){var s=n.getSelectedIds(t),l=e.subpanelMeta.get_subpanel_data,u=null!==(o=null===(i=e.subpanelMeta)||void 0===i?void 0:i.collection_list)&&void 0!==o?o:null;u&&(null===(a=null==u?void 0:u[r])||void 0===a?void 0:a.get_subpanel_data)&&(l=u[r].get_subpanel_data),n.runAsyncAction({action:"record-select",module:e.store.parentModule,id:e.store.parentId||"",payload:{baseModule:e.parentModule,baseRecordId:e.parentId,linkField:l,relateModule:r,relateRecordIds:s}},e)}})}},{key:"getSelectedIds",value:function(e){var t=[];return Object.keys(e.selection.selected).forEach(function(e){e&&t.push(e)}),t}},{key:"runAsyncAction",value:function(e,t){this.message.removeMessages(),this.asyncActionService.run("record-select",e).pipe((0,M.take)(1)).subscribe(function(){t.store.load(!1).pipe((0,M.take)(1)).subscribe(),t.store.loadAllStatistics(!1).pipe((0,M.take)(1)).subscribe()})}}]),n}(Qk);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Z.NgbModal),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(ty))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Z.NgbModal),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(ty))},token:e,providedIn:"root"}),e}(),Jk=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="async-process",e.modes=w.ALL_VIEW_MODES,e}return j(n,[{key:"run",value:function(e){}},{key:"shouldDisplay",value:function(e){return!0}}]),n}(Qk);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),ew=function(){var e,t=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.apply(this,arguments)).key="show-filter",e.modes=["list"],e}return j(n,[{key:"shouldDisplay",value:function(e){return!0}},{key:"getStatus",value:function(e){return this.isAnyFilterApplied(e.store)?"active":""}},{key:"run",value:function(e){e.store.toggleFilter()}},{key:"isAnyFilterApplied",value:function(e){return e.hasActiveFilter()||!e.areAllCurrentCriteriaFilterEmpty()}}]),n}(Qk);return t.\u0275fac=function(n){return(e||(e=k.\u0275\u0275getInheritedFactory(t)))(n||t)},t.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),tw=function(){var e,t=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.apply(this,arguments)).key="clear-filter",e.modes=["list"],e}return j(n,[{key:"shouldDisplay",value:function(e){return this.isAnyFilterApplied(e.store)}},{key:"run",value:function(e){e.store.clearFilter()}},{key:"isAnyFilterApplied",value:function(e){return e.hasActiveFilter()||!e.areAllCurrentCriteriaFilterEmpty()}}]),n}(Qk);return t.\u0275fac=function(n){return(e||(e=k.\u0275\u0275getInheritedFactory(t)))(n||t)},t.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),nw=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a){var s;return I(this,n),(s=t.call(this)).create=e,s.select=i,s.async=r,s.showFilter=o,s.clearFilter=a,r.modes.forEach(function(e){return s.actions[e][r.key]=r}),e.modes.forEach(function(t){return s.actions[t][e.key]=e}),i.modes.forEach(function(e){return s.actions[e][i.key]=i}),o.modes.forEach(function(e){return s.actions[e][o.key]=o}),a.modes.forEach(function(e){return s.actions[e][a.key]=a}),s}return n}(Mg);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Yk),k.\u0275\u0275inject(Xk),k.\u0275\u0275inject(Jk),k.\u0275\u0275inject(ew),k.\u0275\u0275inject(tw))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Yk),k.\u0275\u0275inject(Xk),k.\u0275\u0275inject(Jk),k.\u0275\u0275inject(ew),k.\u0275\u0275inject(tw))},token:e,providedIn:"root"}),e}(),iw=function(){var e=function(){function e(t,n,i,r,o){I(this,e),this.languageStore=t,this.actionManager=n,this.languages=i,this.screenSize=r,this.systemConfigStore=o,this.klass="",this.limitConfigKey="listview_line_actions_limits",this.configState=new x.BehaviorSubject({buttons:[]}),this.config$=this.configState.asObservable(),this.buttonClass="line-action-item line-action",this.buttonGroupClass="float-right",this.subs=[],this.screen=Zm.Medium,this.defaultBreakpoint=3}return j(e,[{key:"ngOnInit",value:function(){var e=this;this.subs.push((0,x.combineLatest)([this.config.getActions({record:this.record}),this.screenSize.screenSize$,this.languages.vm$]).pipe((0,M.map)(function(t){var n=v(t,3),i=n[0],r=n[1];n[2];r&&(e.screen=r),e.configState.next(e.getButtonGroupConfig(i)),e.actions=i})).subscribe())}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"getButtonGroupConfig",value:function(e){var t=this,n=[],i=[];e.forEach(function(e){var r=t.buildButton(e);e.params&&e.params.expanded?n.push(r):i.push(r)});var r=e.length,o=n.concat(i);return{buttonKlass:[this.buttonClass],dropdownLabel:this.languages.getAppString("LBL_ACTIONS")||"",breakpoint:r,dropdownOptions:{placement:["bottom-right"],wrapperKlass:[this.buttonGroupClass]},buttons:o}}},{key:"getBreakpoint",value:function(){var e=this.systemConfigStore.getConfigValue(this.limitConfigKey);return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}},{key:"buildButton",value:function(e){var t,n,i=this,r={titleKey:e.labelKey||"",klass:this.buttonClass,icon:e.icon||"",onClick:function(){i.config.runAction(e,{module:i.record&&i.record.module||"",record:i.record})}};e.icon&&(r.icon=e.icon);var o=null!==(n=null===(t=null==e?void 0:e.params)||void 0===t?void 0:t.debounceClick)&&void 0!==n?n:null;return r.debounceClick=!0,(0,w.isFalse)(o)&&(r.debounceClick=!1),e.status&&w.Button.appendClasses(r,[e.status]),r}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(nw),k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(Hm),k.\u0275\u0275directiveInject(Gm))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-line-action-menu"]],inputs:{klass:"klass",limitConfigKey:"limitConfigKey",record:"record",config:"config"},decls:1,vars:1,consts:[[4,"ngIf"],["id","line-action-div",1,"line-action","float-right"],[3,"config$",4,"ngIf"],[3,"config$"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,Ld,4,4,"ng-container",0),2&e&&k.\u0275\u0275property("ngIf",t.actions)},directives:[B.NgIf,Wv],encapsulation:2}),e}(),rw=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Z.NgbModule,Uv,Ar.RouterModule,Qv]]}),e}(),ow=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-load-more"]],inputs:{loadMoreButton:"loadMoreButton"},decls:3,vars:1,consts:[[1,"float-right"],[1,"",3,"config"],["image","plus_thin",1,"small",2,"fill","#FFFFFF"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"scrm-button",1),k.\u0275\u0275element(2,"scrm-image",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("config",t.loadMoreButton))},directives:[Hv,Vv],encapsulation:2}),e}(),aw=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Uv,qv]]}),e}(),sw=function(){var e=function(){function e(t,n){I(this,e),this.messageService=t,this.languages=n,this.appStrings$=n.appStrings$}return j(e,[{key:"ngOnInit",value:function(){this.messages$=this.messageService.messages$}},{key:"close",value:function(e){this.messageService.contains(e,!0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ym),k.\u0275\u0275directiveInject(Ov))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-message-ui"]],decls:2,vars:3,consts:[["class","container-fluid alert-fixed message-wrapper",4,"ngIf"],[1,"container-fluid","alert-fixed","message-wrapper"],["class","d-flex justify-content-center flex-column align-items-center message-container",4,"ngIf"],[1,"d-flex","justify-content-center","flex-column","align-items-center","message-container"],["role","alert",3,"class","click",4,"ngFor","ngForOf"],["role","alert",3,"click"],[4,"ngIf"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Rd,3,3,"div",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.appStrings$))},directives:[B.NgIf,B.NgForOf],pipes:[B.AsyncPipe],encapsulation:2,data:{animation:[(0,Nr.trigger)("fade",[(0,Nr.transition)(":enter",(0,Nr.useAnimation)(io.fadeIn,{params:{timing:.5,delay:0}})),(0,Nr.transition)(":leave",(0,Nr.useAnimation)(io.fadeOut,{params:{timing:.5,delay:0}}))])]}}),e}(),lw=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),uw=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Ig]]}),e}(),cw=function(){var e=function(){function e(t,n){I(this,e),this.buttonUtils=t,this.config=n,this.activeModal=null,this.defaultButtonGroup={breakpoint:4,wrapperKlass:["modal-buttons"],buttonKlass:["modal-button","btn","btn-sm"],buttons:[]};var i=this.config.getConfigValue("ui");i&&i.modal_button_group_breakpoint&&(this.defaultButtonGroup.breakpoint=i.modal_buttons_collapse_breakpoint)}return j(e,[{key:"ngOnInit",value:function(){var e=this;this.config$&&(this.buttonGroup$=this.config$.pipe((0,M.map)(function(t){return e.mapButtonGroup(t)})))}},{key:"mapButtonGroup",value:function(e){var t=(0,ro.Z)(Object.assign({},e),(0,w.deepClone)(this.defaultButtonGroup));return this.mapButtons(t),t}},{key:"mapButtons",value:function(e){var t=this,n=e.buttons||[];e.buttons=[],n.length>0&&n.forEach(function(n){var i=t.buttonUtils.addOnClickPartial(n,t.activeModal);e.buttons.push(i)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rg),k.\u0275\u0275directiveInject(Gm))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-modal-button-group"]],inputs:{activeModal:"activeModal",config$:"config$"},decls:1,vars:1,consts:[[3,"config$"]],template:function(e,t){1&e&&k.\u0275\u0275element(0,"scrm-button-group",0),2&e&&k.\u0275\u0275property("config$",t.buttonGroup$)},directives:[Wv],encapsulation:2}),e}(),dw=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Qv]]}),e}(),fw=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Ig,Qv,Gv,dw,Z.NgbModule]]}),e}(),pw=function(){var e=function e(){I(this,e),this.title=""};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-module-title"]],inputs:{title:"title"},decls:2,vars:3,template:function(e,t){1&e&&(k.\u0275\u0275text(0),k.\u0275\u0275pipe(1,"uppercase")),2&e&&k.\u0275\u0275textInterpolate1("\n",k.\u0275\u0275pipeBind1(1,1,t.title),"\n")},pipes:[B.UpperCasePipe],encapsulation:2}),e}(),mw=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),hw=function e(){I(this,e),this.target=bC.none},vw=function(){var e=function(){function e(t){I(this,e),this.languageStore=t,this.allowPagination=!0,this.appStrings$=this.languageStore.appStrings$,this.vm$=null}return j(e,[{key:"ngOnInit",value:function(){var e=this.state.getPaginationCount();this.vm$=(0,x.combineLatest)([this.appStrings$,e]).pipe((0,M.map)(function(e){var t=v(e,2);return{appStrings:t[0],pageCount:t[1]}}))}},{key:"first",value:function(){this.state.changePage(w.PageSelection.FIRST)}},{key:"previous",value:function(){this.state.changePage(w.PageSelection.PREVIOUS)}},{key:"next",value:function(){this.state.changePage(w.PageSelection.NEXT)}},{key:"last",value:function(){this.state.changePage(w.PageSelection.LAST)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-pagination"]],inputs:{allowPagination:"allowPagination",state:"state"},decls:2,vars:3,consts:[["class","bulk-action float-right",4,"ngIf"],[1,"bulk-action","float-right"],["class","pagination-button pagination-first","aria-label","Navigate to first page",3,"click",4,"ngIf"],["class","pagination-button pagination-previous","aria-label","Previous page",3,"click",4,"ngIf"],[1,"pagination-count",3,"ngClass"],["class","pagination-button pagination-next","aria-label","Navigate to last page",3,"click",4,"ngIf"],["class","pagination-button pagination-last","aria-label","Next page",3,"click",4,"ngIf"],["aria-label","Navigate to first page",1,"pagination-button","pagination-first",3,"click"],["image","paginate_first",1,"sicon-2x","pagination-icons"],["aria-label","Previous page",1,"pagination-button","pagination-previous",3,"click"],["image","paginate_previous",1,"sicon-2x","pagination-icons"],["aria-label","Navigate to last page",1,"pagination-button","pagination-next",3,"click"],["image","paginate_next",1,"sicon-2x","pagination-icons"],["aria-label","Next page",1,"pagination-button","pagination-last",3,"click"],["image","paginate_last",1,"sicon-2x","pagination-icons"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Ud,7,12,"div",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,B.NgClass,Vv],pipes:[B.AsyncPipe],encapsulation:2}),e}(),gw=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Uv]]}),e}(),yw=function(){var e=function(){function e(){I(this,e),this.klass="line-action-item line-action float-right"}return j(e,[{key:"getButtonConfig",value:function(){return{icon:this.icon,klass:this.klass}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-popup-button"]],inputs:{klass:"klass",icon:"icon"},ngContentSelectors:Zd,decls:5,vars:6,consts:[["popContent",""],["popTitle",""],[3,"config","autoClose","ngbPopover","popoverTitle","popoverClass","placement"]],template:function(e,t){if(1&e&&(k.\u0275\u0275projectionDef(Gd),k.\u0275\u0275template(0,Kd,1,0,"ng-template",null,0,k.\u0275\u0275templateRefExtractor),k.\u0275\u0275template(2,zd,1,0,"ng-template",null,1,k.\u0275\u0275templateRefExtractor),k.\u0275\u0275element(4,"scrm-button",2)),2&e){var n=k.\u0275\u0275reference(1),i=k.\u0275\u0275reference(3);k.\u0275\u0275advance(4),k.\u0275\u0275property("config",t.getButtonConfig())("autoClose","outside")("ngbPopover",n)("popoverTitle",i)("popoverClass","popover-wrapper")("placement","right")}},directives:[Hv,Z.NgbPopover],encapsulation:2}),e}(),bw=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,qv,Z.NgbPopoverModule]]}),e}(),Sw=function(){var e=function(){function e(t){I(this,e),this.fieldManager=t}return j(e,[{key:"getField",value:function(e,t){return e&&t?this.fieldManager.addField(t,e):null}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(dv))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-details-popup-button"]],inputs:{record:"record",columns:"columns"},decls:2,vars:2,consts:[[3,"icon"],["popup-content","","class","container container-popover scroll-thin",4,"ngIf"],["popup-content","",1,"container","container-popover","scroll-thin"],["class","row py-1",4,"ngFor","ngForOf"],[1,"row","py-1"],[1,"col","font-weight-bold","text-muted"],[3,"labelKey","module"],[1,"col"],[3,"mode","field","type","record"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"scrm-popup-button",0),k.\u0275\u0275template(1,qd,2,1,"div",1),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275property("icon","dots-vertical"),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.columns))},directives:[yw,B.NgIf,B.NgForOf,zv,ES],encapsulation:2}),e}(),Cw=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,bw,LS,Gv]]}),e}(),kw=function(){var e=function(){function e(t){I(this,e),this.language=t,this.config={},this.panelsInPrevTab=[],this.active=1,this.subs=[]}return j(e,[{key:"ngOnInit",value:function(){var e=this;this.subs.push(this.dataSource.getDisplayConfig().subscribe(function(t){e.config=Object.assign({},t)})),this.subs.push(this.dataSource.getPanels().subscribe(function(t){var n;e.panels=S(t),"tabs"===(null===(n=null==e?void 0:e.config)||void 0===n?void 0:n.layout)&&e.updatePanelsArray()})),this.subs.push(this.dataSource.getRecord().subscribe(function(t){e.record=Object.assign({},t),e.fields=t.fields}))}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"updatePanelsArray",value:function(){var e=this,t=[],n="",i=this.buildPanelMap(),r=this.mapTabDefs();Object.keys(null!=r?r:{}).length||Object.keys(null!=i?i:{}).forEach(function(e){r[e.toUpperCase()]={newTab:!0,panelDefault:"expanded"}}),Object.keys(r).forEach(function(o){if((0,w.isTrue)(r[o].newTab))t=[].concat(S(t),[i[o]]),n=o;else{var a=r[n],s=i[n];e.panelsInPrevTab.includes(s)||e.panelsInPrevTab.push(s);var l=i[o];(0,w.isTrue)(null==a?void 0:a.newTab)&&e.panelsInPrevTab.length>0&&e.addToPrevTab(l)}}),this.panels=t}},{key:"addToPrevTab",value:function(e){var t,n,i=this.panelsInPrevTab.length-1;(null!==(n=null===(t=this.panelsInPrevTab[i])||void 0===t?void 0:t.subPanels)&&void 0!==n?n:null)||(this.panelsInPrevTab[i].subPanels=[]),this.panelsInPrevTab[i].subPanels.push(e)}},{key:"buildPanelMap",value:function(){var e={};return this.panels.forEach(function(t){var n,i,r,o;t.label=null!==(i=null===(n=null==t?void 0:t.label)||void 0===n?void 0:n.toUpperCase())&&void 0!==i?i:"";var a=null!==(o=null===(r=null==t?void 0:t.key)||void 0===r?void 0:r.toUpperCase())&&void 0!==o?o:"";e[a]=t}),e}},{key:"mapTabDefs",value:function(){var e,t,n=this,i={};return Object.keys(null!==(t=null===(e=null==this?void 0:this.config)||void 0===e?void 0:e.tabDefs)&&void 0!==t?t:{}).forEach(function(e){var t;i[e.toUpperCase()]=null===(t=null==n?void 0:n.config)||void 0===t?void 0:t.tabDefs[e]}),i}},{key:"getLayoutDataSource",value:function(e){var t=this;return{inlineEdit:!0,getConfig:function(){return t.dataSource.getDisplayConfig().pipe((0,M.map)(function(e){return{mode:e.mode,maxColumns:e.maxColumns}}))},getLayout:function(){return(0,x.of)(e).pipe((0,M.shareReplay)(1))},getFields:function(){return t.dataSource.getRecord().pipe((0,M.map)(function(e){return e.fields}))},getRecord:function(){return t.dataSource.getRecord()},getEditAction:function(){return t.dataSource.getEditAction()}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-content"]],inputs:{dataSource:"dataSource"},decls:1,vars:1,consts:[[4,"ngIf"],["class","record-content panel-layout container-fluid pl-0 pr-0",4,"ngIf"],["class","record-content tabs-layout container-fluid pl-0 pr-0",4,"ngIf"],[1,"record-content","panel-layout","container-fluid","pl-0","pr-0"],["class","row no-gutters mb-3",4,"ngFor","ngForOf"],[1,"row","no-gutters","mb-3"],[1,"col"],["mode","collapsible",3,"title"],["panel-body",""],[3,"dataSource"],[1,"record-content","tabs-layout","container-fluid","pl-0","pr-0"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[4,"ngFor","ngForOf"],[1,"p-2","pt-3","rounded-right","rounded-bottom",3,"ngbNavOutlet"],["class","tab",3,"ngbNavItem",4,"ngIf"],[1,"tab",3,"ngbNavItem"],["ngbNavLink","",1,"tab-link"],["ngbNavContent",""],["class","row no-gutters mt-3",4,"ngIf"],[1,"row","no-gutters","mt-3"],["class","col",4,"ngIf"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,uf,3,2,"ng-container",0),2&e&&k.\u0275\u0275property("ngIf",t.dataSource)},directives:[B.NgIf,B.NgForOf,cC,DS,Z.NgbNav,Z.NgbNavOutlet,Z.NgbNavItem,Z.NgbNavLink,Z.NgbNavContent],pipes:[B.AsyncPipe],encapsulation:2}),e}(),ww=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,pC,Z.NgbModule,AS]]}),e}(),Iw=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-content-skeleton"]],decls:138,vars:0,consts:[[1,"record-content","tabs-layout","container-fluid","pl-0","pr-0","record-content-skeleton"],[1,"nav-tabs","nav"],[1,"tab","nav-item"],["href","",1,"tab-link","nav-link","active","pl-5","pr-5","h-100","box-loading"],["href","",1,"tab-link","nav-link","pl-5","pr-5","h-100","box-loading"],[1,"p-2","pt-3","rounded-right","rounded-bottom","tab-content"],[1,"tab-pane","fade","active","show"],[1,""],[1,"detail","field-layout"],[1,"form-row","align-items-center","pt-1","pb-1"],[1,"field-column-bordered","col","form-group","m-0","pl-3","pb-2","pr-3"],[1,"label-container"],[1,"col-form-label-sm","mb-0","pb-3","pl-5","pr-5","h-100","rounded","box-loading"],[1,"d-flex"],[1,"flex-grow-1","text-break","rounded","box-loading","skeleton-field-content"],["type","button",1,"record-action-button"],["image","pencil"],[1,"field-separation","mt-2"],[1,"col","form-group","m-0","pl-3","pb-2","pr-3"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"ul",1),k.\u0275\u0275elementStart(2,"li",2),k.\u0275\u0275element(3,"a",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(4,"li",2),k.\u0275\u0275element(5,"a",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(6,"li",2),k.\u0275\u0275element(7,"a",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(8,"div",5),k.\u0275\u0275elementStart(9,"div",6),k.\u0275\u0275elementStart(10,"div",7),k.\u0275\u0275elementStart(11,"form",8),k.\u0275\u0275elementStart(12,"div",9),k.\u0275\u0275elementStart(13,"div",10),k.\u0275\u0275elementStart(14,"div",11),k.\u0275\u0275elementStart(15,"strong"),k.\u0275\u0275element(16,"label",12),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(17,"div",13),k.\u0275\u0275element(18,"div",14),k.\u0275\u0275elementStart(19,"div"),k.\u0275\u0275elementStart(20,"button",15),k.\u0275\u0275element(21,"scrm-image",16),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(22,"div",17),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(23,"div",18),k.\u0275\u0275elementStart(24,"div",11),k.\u0275\u0275elementStart(25,"strong"),k.\u0275\u0275element(26,"label",12),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(27,"div",13),k.\u0275\u0275element(28,"div",14),k.\u0275\u0275elementStart(29,"div"),k.\u0275\u0275elementStart(30,"button",15),k.\u0275\u0275element(31,"scrm-image",16),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(32,"div",17),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(33,"div",9),k.\u0275\u0275elementStart(34,"div",10),k.\u0275\u0275elementStart(35,"div",11),k.\u0275\u0275elementStart(36,"strong"),k.\u0275\u0275element(37,"label",12),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(38,"div",13),k.\u0275\u0275element(39,"div",14),k.\u0275\u0275elementStart(40,"div"),k.\u0275\u0275elementStart(41,"button",15),k.\u0275\u0275element(42,"scrm-image",16),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(43,"div",17),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(44,"div",18),k.\u0275\u0275elementStart(45,"div",11),k.\u0275\u0275elementStart(46,"strong"),k.\u0275\u0275element(47,"label",12),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(48,"div",13),k.\u0275\u0275element(49,"div",14),k.\u0275\u0275elementStart(50,"div"),k.\u0275\u0275elementStart(51,"button",15),k.\u0275\u0275element(52,"scrm-image",16),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(53,"div",17),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(54,"div",9),k.\u0275\u0275elementStart(55,"div",10),k.\u0275\u0275elementStart(56,"div",11),k.\u0275\u0275elementStart(57,"strong"),k.\u0275\u0275element(58,"label",12),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(59,"div",13),k.\u0275\u0275element(60,"div",14),k.\u0275\u0275elementStart(61,"div"),k.\u0275\u0275elementStart(62,"button",15),k.\u0275\u0275element(63,"scrm-image",16),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(64,"div",17),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(65,"div",18),k.\u0275\u0275elementStart(66,"div",11),k.\u0275\u0275elementStart(67,"strong"),k.\u0275\u0275element(68,"label",12),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(69,"div",13),k.\u0275\u0275element(70,"div",14),k.\u0275\u0275elementStart(71,"div"),k.\u0275\u0275elementStart(72,"button",15),k.\u0275\u0275element(73,"scrm-image",16),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(74,"div",17),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(75,"div",9),k.\u0275\u0275elementStart(76,"div",10),k.\u0275\u0275elementStart(77,"div",11),k.\u0275\u0275elementStart(78,"strong"),k.\u0275\u0275element(79,"label",12),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(80,"div",13),k.\u0275\u0275element(81,"div",14),k.\u0275\u0275elementStart(82,"div"),k.\u0275\u0275elementStart(83,"button",15),k.\u0275\u0275element(84,"scrm-image",16),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(85,"div",17),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(86,"div",18),k.\u0275\u0275elementStart(87,"div",11),k.\u0275\u0275elementStart(88,"strong"),k.\u0275\u0275element(89,"label",12),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(90,"div",13),k.\u0275\u0275element(91,"div",14),k.\u0275\u0275elementStart(92,"div"),k.\u0275\u0275elementStart(93,"button",15),k.\u0275\u0275element(94,"scrm-image",16),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(95,"div",17),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(96,"div",9),k.\u0275\u0275elementStart(97,"div",10),k.\u0275\u0275elementStart(98,"div",11),k.\u0275\u0275elementStart(99,"strong"),k.\u0275\u0275element(100,"label",12),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(101,"div",13),k.\u0275\u0275element(102,"div",14),k.\u0275\u0275elementStart(103,"div"),k.\u0275\u0275elementStart(104,"button",15),k.\u0275\u0275element(105,"scrm-image",16),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(106,"div",17),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(107,"div",18),k.\u0275\u0275elementStart(108,"div",11),k.\u0275\u0275elementStart(109,"strong"),k.\u0275\u0275element(110,"label",12),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(111,"div",13),k.\u0275\u0275element(112,"div",14),k.\u0275\u0275elementStart(113,"div"),k.\u0275\u0275elementStart(114,"button",15),k.\u0275\u0275element(115,"scrm-image",16),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(116,"div",17),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(117,"div",9),k.\u0275\u0275elementStart(118,"div",10),k.\u0275\u0275elementStart(119,"div",11),k.\u0275\u0275elementStart(120,"strong"),k.\u0275\u0275element(121,"label",12),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(122,"div",13),k.\u0275\u0275element(123,"div",14),k.\u0275\u0275elementStart(124,"div"),k.\u0275\u0275elementStart(125,"button",15),k.\u0275\u0275element(126,"scrm-image",16),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(127,"div",17),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(128,"div",18),k.\u0275\u0275elementStart(129,"div",11),k.\u0275\u0275elementStart(130,"strong"),k.\u0275\u0275element(131,"label",12),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(132,"div",13),k.\u0275\u0275element(133,"div",14),k.\u0275\u0275elementStart(134,"div"),k.\u0275\u0275elementStart(135,"button",15),k.\u0275\u0275element(136,"scrm-image",16),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275element(137,"div",17),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd())},directives:[Vv],encapsulation:2}),e}(),xw=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Uv]]}),e}(),jw=function(){var e=function(){function e(){I(this,e),this.statusIcons={NONE:"sort",ASC:"sort_ascend",DESC:"sort_descend"},this.nextDirection={NONE:w.SortDirection.DESC,ASC:w.SortDirection.NONE,DESC:w.SortDirection.ASC}}return j(e,[{key:"ngOnInit",value:function(){this.direction$=this.state.getSortDirection()}},{key:"getStatusIcon",value:function(e){return this.statusIcons[e]}},{key:"changeSorting",value:function(e){this.state.changeSortDirection(this.nextDirection[e])}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-sort-button"]],inputs:{state:"state"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"btn","btn-sm","p-0","sort-button",3,"click"],[1,"sort-icon","sicon",3,"image"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,cf,3,1,"ng-container",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.direction$))},directives:[B.NgIf,Vv],pipes:[B.AsyncPipe],encapsulation:2}),e}(),Ew=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Uv]]}),e}(),Mw=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this,e)).apollo=e,i}return j(n,[{key:"get",value:function(e,t,i,r){return l(h(n.prototype),"get",this).call(this,e,t,i,r)}},{key:"mapRecord",value:function(e){if(!e)return e;e.key=e.id||e.attributes&&e.attributes.id||"";var t=e.attributes&&e.attributes&&e.attributes.contents||null;if(t){var n=Object.assign({},e);return n.criteria=t,n}return e}}]),n}(Xm);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(_.Apollo))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(_.Apollo))},token:e,providedIn:"root"}),e}(),_w=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u){var c;return I(this,n),(c=t.call(this,e,i,r,o,a,s)).listGQL=e,c.configs=i,c.preferences=r,c.appState=o,c.language=a,c.message=s,c.auth=l,c.moduleNameMapper=u,c.moduleName="saved-search",c.filterFields={module:"search_module",user:"assigned_user_id"},c}return j(n,[{key:"init",value:function(e){var t=l(h(n.prototype),"init",this).call(this,this.moduleName,!1);return this.initCriteria(e),t}},{key:"load",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return l(h(n.prototype),"load",this).call(this,e)}},{key:"getFilters",value:function(){return this.records}},{key:"addFilter",value:function(e){var t=!0,n=[];this.records.forEach(function(i){if(i.id===e.id)return n.push(e),void(t=!1);n.push(i)}),t&&n.push(e),this.updateState(Object.assign(Object.assign({},this.internalState),{records:n}))}},{key:"removeFilter",value:function(e){if(e&&e.id){var t=[];this.records.forEach(function(n){n.id!==e.id&&t.push(n)}),this.updateState(Object.assign(Object.assign({},this.internalState),{records:t}))}}},{key:"initCriteria",value:function(e){var t=this.criteria;t.filters[this.filterFields.module]={field:this.filterFields.module,operator:"=",values:[this.moduleNameMapper.toLegacy(e)]},t.filters[this.filterFields.user]={field:this.filterFields.user,operator:"=",values:[this.auth.getCurrentUser().id]},this.updateSearchCriteria(t,!1)}}]),n}(ph);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Mw),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(ah),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(YS),k.\u0275\u0275inject(Gy))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Fw=function(){var e=function(){function e(t,n,i,r,o,a,s,l){I(this,e),this.listGQL=t,this.configs=n,this.preferences=i,this.appState=r,this.language=o,this.message=a,this.auth=s,this.moduleNameMapper=l}return j(e,[{key:"create",value:function(){return new _w(this.listGQL,this.configs,this.preferences,this.appState,this.language,this.message,this.auth,this.moduleNameMapper)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Mw),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(ah),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(YS),k.\u0275\u0275inject(Gy))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Mw),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(ah),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(YS),k.\u0275\u0275inject(Gy))},token:e,providedIn:"root"}),e}(),Lw=function(){var e=function(){function e(t,n,i,r,o,a){I(this,e),this.listStoreFactory=t,this.languageStore=n,this.statisticsStoreFactory=i,this.filterListStoreFactory=r,this.meta=o,this.preferences=a,this.show=!1,this.showFilter=!1,this.filterApplied=!1,this.preferenceKey=null,this.subs=[],this.recordList=t.create(),this.filterList=this.filterListStoreFactory.create(),this.criteria$=this.recordList.criteria$,this.statistics={},this.metadataState=new x.BehaviorSubject({}),this.metadata$=this.metadataState.asObservable(),this.loading$=this.recordList.loading$}return j(e,[{key:"getTitle",value:function(){var e=this.languageStore.getFieldLabel(this.metadata.title_key,this.parentModule);if(!e){var t=this.languageStore.getAppListString("moduleList");e=t&&t[this.metadata.title_key]||""}return e}},{key:"getIcon",value:function(){return this.metadata.icon}},{key:"clear",value:function(){this.metadataState.unsubscribe(),this.metadataState=null,this.recordList.clear(),this.recordList=null,this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"clearAuthBased",value:function(){this.recordList.clearAuthBased()}},{key:"searchFilter",value:function(){this.filterApplied=!0,this.showFilter=!1}},{key:"init",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.parentModule=e,this.parentId=t,this.metadata=n,this.metadataState.next(this.metadata);var o=this.meta.getMetadata(n.module).pipe((0,M.tap)(function(){i.recordList.load().pipe((0,M.take)(1)).subscribe()}));this.searchMetadata$=o.pipe((0,M.map)(function(e){return e.search}));var a=this.initSearchCriteria(this.parentModule,this.parentId,n);this.recordList.init(n.module,!1,"list_max_entries_per_subpanel",a),this.initStatistics(n,e,t),r&&(this.parentRecord$=r,this.parentRecord$.subscribe(function(e){return i.parentRecord=e}))}},{key:"setFilters",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.recordList.setFilters(e,t,null)}},{key:"isAnyFilterApplied",value:function(){return this.hasActiveFilter()||!this.areAllCurrentCriteriaFilterEmpty()}},{key:"hasActiveFilter",value:function(){var e,t=this.recordList.criteria;if(t)return!1;var n=null!==(e=Object.keys(t))&&void 0!==e?e:[];if(!n||!n.length)return!1;if(n.length>1)return!0;var i=t[n[0]];return i.key&&""!==i.key&&"default"!==i.key}},{key:"areAllCurrentCriteriaFilterEmpty",value:function(){var e,t=this;return Object.keys(null!==(e=this.getFilters())&&void 0!==e?e:{}).every(function(e){return""===t.getFilters()[e].operator})}},{key:"getFilters",value:function(){var e,t,n;return null!==(n=null===(t=null===(e=this.recordList)||void 0===e?void 0:e.criteria)||void 0===t?void 0:t.filters)&&void 0!==n?n:{}}},{key:"load",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.recordList.load(e)}},{key:"getStatistic",value:function(e){return this.statistics[e]?this.statistics[e]:null}},{key:"resetFilters",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.recordList.resetFilters(e)}},{key:"clearFilter",value:function(){this.resetFilters(),this.filterApplied=!1,this.showFilter=!1}},{key:"initSearchCriteria",value:function(e,t,n){var i,r,o=null!==(i=null==n?void 0:n.sort_order)&&void 0!==i?i:"desc",a=null!==(r=null==n?void 0:n.sort_by)&&void 0!==r?r:"";return{key:"default",module:"saved-search",attributes:{contents:""},criteria:{name:"default",filters:{},preset:{type:"subpanel",params:{subpanel:null==n?void 0:n.name,parentModule:e,parentId:t}},sortOrder:o,orderBy:a}}}},{key:"loadStatistics",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.statistics[e]?this.statistics[e].load(t):null}},{key:"loadAllStatistics",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.statistics||!Object.keys(this.statistics).length)return null;var n={};return Object.keys(this.statistics).forEach(function(i){!e.statistics[i]||(n[i]=e.loadStatistics(i,t))}),(0,x.forkJoin)(n)}},{key:"shouldBatchStatistic",value:function(){var e=this.metadata||{};return!(e.insightWidget&&e.insightWidget.batch&&!1===e.insightWidget.batch)}},{key:"setStatisticsLoading",value:function(e,t){!this.statistics[e]||this.statistics[e].setLoading(t)}},{key:"setAllStatisticsLoading",value:function(e){var t=this;!this.statistics||!Object.keys(this.statistics).length||Object.keys(this.statistics).forEach(function(n){!t.statistics[n]||t.setStatisticsLoading(n,e)})}},{key:"setStatistics",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!this.statistics[e]||this.statistics[e].setStatistic(e,t,n)}},{key:"getStatisticQuery",value:function(e){return this.statistics[e].getQuery()}},{key:"getAllStatisticQuery",value:function(){var e=this;if(!this.statistics||!Object.keys(this.statistics).length)return{};var t={};return Object.keys(this.statistics).forEach(function(n){!e.statistics[n]||(t[n]=e.getStatisticQuery(n))}),t}},{key:"getWidgetLayout",value:function(){var e=this.metadata;if(!(e&&e.insightWidget&&e.insightWidget.options&&e.insightWidget.options.insightWidget))return{rows:[]};var t=(0,w.deepClone)(e.insightWidget.options.insightWidget);return(!t.rows||!t.rows.length)&&(t.rows={}),t}},{key:"toggleFilter",value:function(){return this.showFilter=!this.showFilter}},{key:"initStatistics",value:function(e,t,n){var i=this;this.getWidgetLayout().rows.forEach(function(r){!r.cols||!r.cols.length||r.cols.forEach(function(r){!r.statistic||"string"!=typeof r.statistic||(i.initStatistic(r.statistic,e,t,n),r.store=i.statistics[r.statistic])})})}},{key:"initStatistic",value:function(e,t,n,i){this.statistics[e]=this.statisticsStoreFactory.create(),this.statistics[e].init(t.module,{key:e,context:{module:n,id:i},params:{subpanel:t.name}},!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(mh),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(sC),k.\u0275\u0275inject(Fw),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(ah))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Ow=function(){var e=function(){function e(t,n,i,r,o,a){I(this,e),this.listStoreFactory=t,this.languageStore=n,this.statisticsStoreFactory=i,this.filterListStoreFactory=r,this.meta=o,this.preferences=a}return j(e,[{key:"create",value:function(){return new Lw(this.listStoreFactory,this.languageStore,this.statisticsStoreFactory,this.filterListStoreFactory,this.meta,this.preferences)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(mh),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(sC),k.\u0275\u0275inject(Fw),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(ah))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(mh),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(sC),k.\u0275\u0275inject(Fw),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(ah))},token:e,providedIn:"root"}),e}(),Dw=function(){var e=function(){function e(t,n,i,r,o){var a=this;I(this,e),this.appStateStore=t,this.languageStore=n,this.navigationStore=i,this.moduleNavigation=r,this.metadataStore=o,this.appState$=this.appStateStore.vm$,this.language$=this.languageStore.vm$,this.navigation$=this.navigationStore.vm$,this.module$=(0,x.combineLatest)([this.appState$,this.navigationStore.vm$]).pipe((0,M.map)(function(e){var t=v(e,2),n=t[0],i=t[1];return a.moduleNavigation.getModuleInfo(n.module,i)})),this.appData$=(0,x.combineLatest)([this.appState$,this.module$,this.language$,this.navigation$]).pipe((0,M.map)(function(e){var t=v(e,4),n=t[0],i=t[1],r=t[2],o=t[3];return a.appData={appState:n,module:i,language:r,navigation:o},a.appData})),this.metadata$=o.metadata$.pipe((0,M.tap)(function(e){a.metadata=e}))}return j(e,[{key:"clear",value:function(){}},{key:"clearAuthBased",value:function(){this.clear()}},{key:"appState",get:function(){return this.appData.appState?this.appData.appState:{}}},{key:"module",get:function(){return this.appData.module}},{key:"language",get:function(){return this.appData.language?this.appData.language:{appStrings:{},appListStrings:{},modStrings:{},languageKey:""}}},{key:"appStrings",get:function(){return this.language.appStrings}},{key:"appListStrings",get:function(){return this.language.appListStrings}},{key:"modStrings",get:function(){return this.language.modStrings}},{key:"navigation",get:function(){return this.appData.navigation}},{key:"searchMeta",get:function(){return this.metadata.search?this.metadata.search:{layout:{basic:{},advanced:{}}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject($S),k.\u0275\u0275inject(qy),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Aw=function(){var e=function(){function e(t){I(this,e),this.fetchGQL=t}return j(e,[{key:"fetch",value:function(e,t){return this.fetchGQL.fetch(e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(nC))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(nC))},token:e,providedIn:"root"}),e}(),Nw={module:"",recordID:"",loading:!1,widgets:!1,showSidebarWidgets:!1,showTopWidget:!1,showSubpanels:!1,mode:"detail",params:{returnModule:"",returnId:"",returnAction:""}},Rw=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u,c,d,f,p,m,h){var g;I(this,n),(g=t.call(this,r,o,a,s,l)).recordFetchGQL=e,g.recordSaveGQL=i,g.appStateStore=r,g.languageStore=o,g.navigationStore=a,g.moduleNavigation=s,g.metadataStore=l,g.localStorage=u,g.message=c,g.subpanelFactory=d,g.recordManager=f,g.statisticsBatch=p,g.recordStoreFactory=m,g.preferences=h,g.cache$=null,g.internalState=(0,w.deepClone)(Nw),g.store=new x.BehaviorSubject(g.internalState),g.state$=g.store.asObservable(),g.subpanelReloadSubject=new x.BehaviorSubject({}),g.subpanelReloadSub=[],g.subs=[],g.recordStore=m.create(g.getViewFieldsObservable()),g.record$=g.recordStore.state$.pipe((0,M.distinctUntilChanged)()),g.stagingRecord$=g.recordStore.staging$.pipe((0,M.distinctUntilChanged)()),g.loading$=g.state$.pipe((0,M.map)(function(e){return e.loading})),g.widgets$=g.state$.pipe((0,M.map)(function(e){return e.widgets})),g.showSidebarWidgets$=g.state$.pipe((0,M.map)(function(e){return e.showSidebarWidgets})),g.showTopWidget$=g.state$.pipe((0,M.map)(function(e){return e.showTopWidget})),g.showSubpanels$=g.state$.pipe((0,M.map)(function(e){return e.showSubpanels})),g.mode$=g.state$.pipe((0,M.map)(function(e){return e.mode})),g.subpanelReload$=g.subpanelReloadSubject.asObservable();var y=(0,x.combineLatest)([g.record$,g.loading$]).pipe((0,M.map)(function(e){var t=v(e,2),n=t[0],i=t[1];return g.data={record:n,loading:i},g.data}));return g.vm$=(0,x.combineLatest)([y,g.appData$,g.metadata$]).pipe((0,M.map)(function(e){var t=v(e,3),n=t[0],i=t[1],r=t[2];return g.vm={data:n,appData:i,metadata:r},g.vm})),g.subpanelsState=new x.BehaviorSubject({}),g.subpanels$=g.subpanelsState.asObservable(),g.viewContext$=g.record$.pipe((0,M.map)(function(){return g.getViewContext()})),g}return j(n,[{key:"widgets",get:function(){return this.internalState.widgets},set:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{widgets:e}))}},{key:"showSidebarWidgets",get:function(){return this.internalState.showSidebarWidgets},set:function(e){this.savePreference(this.getModuleName(),"show-sidebar-widgets",e),this.updateState(Object.assign(Object.assign({},this.internalState),{showSidebarWidgets:e}))}},{key:"showTopWidget",get:function(){return this.internalState.showTopWidget},set:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{showTopWidget:e}))}},{key:"showSubpanels",get:function(){return this.internalState.showTopWidget},set:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{showSubpanels:e}))}},{key:"params",get:function(){return this.internalState.params||{}},set:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{params:e}))}},{key:"getModuleName",value:function(){return this.internalState.module}},{key:"getRecordId",value:function(){return this.internalState.recordID}},{key:"getViewContext",value:function(){return{module:this.getModuleName(),id:this.getRecordId(),record:this.getBaseRecord()}}},{key:"getSubpanels",value:function(){return this.subpanels}},{key:"destroy",value:function(){this.clear()}},{key:"init",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"detail",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.internalState.module=e,this.internalState.recordID=t,this.setMode(i),this.initSubpanels(e,t),this.calculateShowWidgets(),this.load().pipe((0,M.tap)(function(){n.showTopWidget=!0,n.loadSubpanelStatistics(e),n.parseParams(r)}))}},{key:"clear",value:function(){this.cache$=null,this.clearSubpanels(),this.subpanelsState.unsubscribe(),this.updateState((0,w.deepClone)(Nw))}},{key:"getBaseRecord",value:function(){return this.internalState?this.recordStore.getBaseRecord():null}},{key:"getMode",value:function(){return this.internalState?this.internalState.mode:null}},{key:"setMode",value:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{mode:e}))}},{key:"save",value:function(){var e=this;return this.appStateStore.updateLoading("".concat(this.internalState.module,"-record-save"),!0),this.updateState(Object.assign(Object.assign({},this.internalState),{loading:!0})),this.recordStore.save().pipe((0,M.catchError)(function(){return e.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,x.of)({})}),(0,M.finalize)(function(){e.setMode("detail"),e.appStateStore.updateLoading("".concat(e.internalState.module,"-record-save"),!1),e.updateState(Object.assign(Object.assign({},e.internalState),{loading:!1}))}))}},{key:"load",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.updateState(Object.assign(Object.assign({},this.internalState),{loading:!0})),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordID,t).pipe((0,M.tap)(function(t){e.updateState(Object.assign(Object.assign({},e.internalState),{recordID:t.id,module:t.module,loading:!1}))}))}},{key:"getSummaryTemplate",value:function(){return(((this.metadata||{}).recordView||{}).summaryTemplates||{})[this.getMode()]||""}},{key:"parseParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e){var t=Object.assign({},this.internalState.params);Object.keys(e).forEach(function(n){(0,w.isVoid)(t[n])||(t[n]=e[n])}),this.params=e}}},{key:"loadSubpanelStatistics",value:function(e){var t=this,n=this.subpanelsState.value;if(n){var i={};Object.keys(n).forEach(function(e){var r=n[e],o=r.statistics;if(o&&Object.keys(o).length)if(!1!==r.shouldBatchStatistic()){var a=r.getAllStatisticQuery();Object.keys(a).forEach(function(n){var r=t.buildStatKey(e,n);i[r]=a[n]}),r.setAllStatisticsLoading(!0)}else r.loadAllStatistics().pipe((0,M.take)(1)).subscribe()}),this.statisticsBatch.fetch(e,i).pipe((0,M.take)(1)).subscribe(function(e){Object.keys(n).forEach(function(i){var r=n[i],o=r.getAllStatisticQuery();Object.keys(o).forEach(function(n){var o=t.buildStatKey(i,n),a=e[o];!a||r.setStatistics(n,a,!0)}),r.setAllStatisticsLoading(!1)})})}}},{key:"buildStatKey",value:function(e,t){return(e=e.replace(/_/g,"-"))+"-"+t.replace(/_/g,"-")}},{key:"updateState",value:function(e){this.store.next(this.internalState=e)}},{key:"initSubpanels",value:function(e,t){var n=this;this.showSubpanels=!0,this.metadataStore.subPanelMetadata$.subscribe(function(i){n.clearSubpanels(),Object.keys(i).forEach(function(r){n.subpanels[r]=n.subpanelFactory.create(),n.subpanels[r].init(e,t,i[r],n.record$)}),n.subpanelsState.next(n.subpanels),Object.keys(n.subpanels).forEach(function(e){n.subpanelReloadSub.push(n.subpanels[e].recordList.records$.pipe((0,M.tap)(function(){var t={};t[e]=!0,n.subpanelReloadSubject.next(t)})).subscribe())})})}},{key:"clearSubpanels",value:function(){var e=this;this.subpanels&&Object.keys(this.subpanels).forEach(function(t){e.subpanels[t].clear()}),this.subpanelReloadSub.length&&(this.subpanelReloadSub.forEach(function(e){return e.unsubscribe()}),this.subpanelReloadSub=[]),this.subpanels={}}},{key:"calculateShowWidgets",value:function(){var e,t=!1,n=this.getRecordViewMetadata().sidebarWidgets||[];n&&n.length>0&&(t=!0);var i=null!==(e=this.loadPreference(this.getModuleName(),"show-sidebar-widgets"))&&void 0!==e?e:null;this.showSidebarWidgets=null!==i?i:t,this.widgets=t}},{key:"getRecordViewMetadata",value:function(){return(this.metadataStore.get()||{}).recordView||{}}},{key:"getVardefs",value:function(){return this.getRecordViewMetadata().vardefs||{}}},{key:"getViewFieldsObservable",value:function(){return this.metadataStore.recordViewMetadata$.pipe((0,M.map)(function(e){var t=[];return e.panels.forEach(function(e){e.rows.forEach(function(e){e.cols.forEach(function(e){t.push(e)})})}),t}))}},{key:"getPreferenceKey",value:function(e){return"recordview-"+e}},{key:"savePreference",value:function(e,t,n){this.preferences.setUi(e,this.getPreferenceKey(t),n)}},{key:"loadPreference",value:function(e,t){return this.preferences.getUi(e,this.getPreferenceKey(t))}},{key:"initValidators",value:function(e){var t=this;!e||!Object.keys(null==e?void 0:e.fields).length||Object.keys(e.fields).forEach(function(n){var i,r,o,a,s,l=e.fields[n];if(null!==(i=null==l?void 0:l.formControl)&&void 0!==i&&i){t.resetValidators(l);var u=null!==(r=null==l?void 0:l.validators)&&void 0!==r?r:[],c=null!==(o=null==l?void 0:l.asyncValidators)&&void 0!==o?o:[];u.length&&(null===(a=null==l?void 0:l.formControl)||void 0===a||a.setValidators(u)),c.length&&(null===(s=null==l?void 0:l.formControl)||void 0===s||s.setAsyncValidators(c))}})}},{key:"resetValidators",value:function(e){var t,n;null===(t=null==e?void 0:e.formControl)||void 0===t||t.clearValidators(),null===(n=null==e?void 0:e.formControl)||void 0===n||n.clearAsyncValidators()}},{key:"resetValidatorsForAllFields",value:function(e){var t,n=this;!e||!(null===(t=null==e?void 0:e.fields)||void 0===t?void 0:t.length)||Object.keys(e.fields).forEach(function(t){var i,r=e.fields[t];null===(i=null==r?void 0:r.formControl)||void 0===i||!i||n.resetValidators(r)})}}]),n}(Dw);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(mv),k.\u0275\u0275inject(hv),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject($S),k.\u0275\u0275inject(qy),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(nh),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(Ow),k.\u0275\u0275inject(vv),k.\u0275\u0275inject(Aw),k.\u0275\u0275inject(yv),k.\u0275\u0275inject(ah))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Tw=function(){var e=function e(t,n){I(this,e),this.recordViewStore=t,this.moduleNavigation=n,this.displayResponsiveTable=!1};return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Rw),k.\u0275\u0275directiveInject(qy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-status-bar"]],decls:4,vars:2,consts:[[1,"record-view-header"],[4,"ngIf"],[3,"ngIf"],[1,"d-flex","flex-nowrap"],[1,"row"],[1,"w-100"],[1,"col"],[1,"order-2"],[1,"row","mr-0"],[1,"col-md-4"]],template:function(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",0),k.\u0275\u0275template(2,df,8,0,"ng-container",1),k.\u0275\u0275template(3,ff,4,0,"ng-template",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e&&(k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",t.displayResponsiveTable),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!t.displayResponsiveTable))},directives:[B.NgIf],encapsulation:2}),e}(),Pw={key:"default",module:"saved-search",attributes:{contents:""},criteria:{name:"default",filters:{}}},Bw={default:(0,w.deepClone)(Pw)},$w={module:"",widgets:!0,actionPanel:"",showSidebarWidgets:!1,recordPanelConfig:{},activeFilters:(0,w.deepClone)(Bw),openFilter:(0,w.deepClone)(Pw)},Vw=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u,c,d,f,p){var m;I(this,n),(m=t.call(this,e,i,r,o,a)).appStateStore=e,m.languageStore=i,m.navigationStore=r,m.moduleNavigation=o,m.metadataStore=a,m.localStorage=s,m.message=l,m.listStoreFactory=u,m.modalService=c,m.filterListStoreFactory=d,m.confirmation=f,m.preferences=p,m.cache$=null,m.internalState=(0,w.deepClone)($w),m.store=new x.BehaviorSubject(m.internalState),m.state$=m.store.asObservable(),m.subs=[],m.recordList=m.listStoreFactory.create(),m.columns$=a.listViewColumns$,m.lineActions$=a.listViewLineActions$,m.records$=m.recordList.records$,m.criteria$=m.recordList.criteria$,m.context$=m.recordList.criteria$.pipe((0,M.map)(function(){return m.getViewContext()})),m.sort$=m.recordList.sort$,m.pagination$=m.recordList.pagination$,m.selection$=m.recordList.selection$,m.selectedCount$=m.recordList.selectedCount$,m.selectedStatus$=m.recordList.selectedStatus$,m.loading$=m.recordList.loading$,m.moduleName$=m.state$.pipe((0,M.map)(function(e){return e.module}),(0,M.distinctUntilChanged)()),m.widgets$=m.state$.pipe((0,M.map)(function(e){return e.widgets}),(0,M.distinctUntilChanged)()),m.showSidebarWidgets$=m.state$.pipe((0,M.map)(function(e){return e.showSidebarWidgets})),m.displayFilters$=m.state$.pipe((0,M.map)(function(e){return"filters"===e.actionPanel}),(0,M.distinctUntilChanged)()),m.actionPanel$=m.state$.pipe((0,M.map)(function(e){return e.actionPanel}),(0,M.distinctUntilChanged)()),m.activeFilters$=m.state$.pipe((0,M.map)(function(e){return e.activeFilters}),(0,M.distinctUntilChanged)()),m.openFilter$=m.state$.pipe((0,M.map)(function(e){return e.openFilter}),(0,M.distinctUntilChanged)());var h=(0,x.combineLatest)([m.records$,m.criteria$,m.pagination$,m.selection$,m.loading$]).pipe((0,M.map)(function(e){var t=v(e,5),n=t[0],i=t[1],r=t[2],o=t[3],a=t[4];return m.data={records:n,criteria:i,pagination:r,selection:o,loading:a},m.data}));return m.vm$=(0,x.combineLatest)([h,m.appData$,m.metadata$]).pipe((0,M.map)(function(e){var t=v(e,3),n=t[0],i=t[1],r=t[2];return m.vm={data:n,appData:i,metadata:r},m.vm})),m.columns=new x.BehaviorSubject([]),m.columns$=m.columns.asObservable(),m.initDataUpdateState(),m.initDataSetUpdatedState(),m.filterList=m.filterListStoreFactory.create(),m}return j(n,[{key:"actionPanel",get:function(){return this.internalState.actionPanel}},{key:"showFilters",get:function(){return"filters"===this.internalState.actionPanel},set:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{actionPanel:e?"filters":""}))}},{key:"widgets",get:function(){return this.internalState.widgets},set:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{widgets:e}))}},{key:"showSidebarWidgets",get:function(){return this.internalState.showSidebarWidgets},set:function(e){this.savePreference(this.getModuleName(),"show-sidebar-widgets",e),this.updateState(Object.assign(Object.assign({},this.internalState),{showSidebarWidgets:e}))}},{key:"recordPanelConfig",get:function(){return this.internalState.recordPanelConfig}},{key:"isRecordPanelOpen",value:function(){return"recordPanel"===this.internalState.actionPanel}},{key:"openRecordPanel",value:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{actionPanel:"recordPanel",recordPanelConfig:e}))}},{key:"closeRecordPanel",value:function(){this.updateState(Object.assign(Object.assign({},this.internalState),{actionPanel:"",recordPanelConfig:{}}))}},{key:"getModuleName",value:function(){return this.internalState.module}},{key:"getViewContext",value:function(){var e={module:this.getModuleName()};return e.criteria=this.recordList.criteria,e.sort=this.recordList.sort,e}},{key:"destroy",value:function(){this.clear(),this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"activeFilters",get:function(){return(0,w.deepClone)(this.internalState.activeFilters)}},{key:"clear",value:function(){this.cache$=null,this.updateState((0,w.deepClone)($w)),this.recordList.clear()}},{key:"clearAuthBased",value:function(){this.clear(),this.recordList.clearAuthBased()}},{key:"init",value:function(e){var t,n,i,r,o,a;return this.internalState.module=e,this.recordList.init(e,!1),this.filterList.init(e),this.filterList.load(!1).pipe((0,M.take)(1)).subscribe(),this.calculateShowWidgets(),this.recordList.sort={orderBy:null!==(i=null===(n=null===(t=null==this?void 0:this.metadata)||void 0===t?void 0:t.listView)||void 0===n?void 0:n.orderBy)&&void 0!==i?i:"",sortOrder:null!==(a=null===(o=null===(r=null==this?void 0:this.metadata)||void 0===r?void 0:r.listView)||void 0===o?void 0:o.sortOrder)&&void 0!==a?a:"NONE"},this.loadCurrentFilter(e),this.loadCurrentSort(e),this.loadCurrentDisplayedColumns(),this.load()}},{key:"setOpenFilter",value:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{openFilter:(0,w.deepClone)(e)}))}},{key:"setFilters",value:function(e){var t,n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=e[Object.keys(e).shift()];if(this.updateState(Object.assign(Object.assign({},this.internalState),{activeFilters:(0,w.deepClone)(e),openFilter:(0,w.deepClone)(o)})),o.criteria){var a=null!==(t=o.criteria.orderBy)&&void 0!==t?t:"",s=null!==(n=o.criteria.sortOrder)&&void 0!==n?n:"",l=this.recordList.mapSortOrder(s);null!==r&&(a=r.orderBy,l=r.sortOrder),this.recordList.updateSorting(a,l,!1),this.updateSortLocalStorage()}this.updateSearchCriteria(i)}},{key:"addSavedFilter",value:function(e){var t=Object.assign({},this.internalState),n=this.activeFilters;e.key&&n[e.key]&&(n[e.key]=e,t.activeFilters=n),t.openFilter=e,this.filterList.addFilter(e),this.updateState(t)}},{key:"removeSavedFilter",value:function(e){if(e&&e.key){this.filterList.removeFilter(e);var t=Object.assign({},this.internalState);t.openFilter&&t.openFilter.key===e.key&&this.resetFilters(!0)}}},{key:"resetFilters",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.updateState(Object.assign(Object.assign({},this.internalState),{activeFilters:(0,w.deepClone)(Bw),openFilter:(0,w.deepClone)(Pw)})),this.recordList.clearSort(),this.updateSortLocalStorage(),this.updateSearchCriteria(e)}},{key:"updateSearchCriteria",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.assign({},this.internalState.activeFilters),n=Object.keys(t).shift();this.recordList.updateSearchCriteria(t[n].criteria,e),this.updateFilterLocalStorage()}},{key:"updateFilterLocalStorage",value:function(){this.savePreference(this.internalState.module,"current-filters",this.internalState.activeFilters)}},{key:"updateSortLocalStorage",value:function(){this.savePreference(this.internalState.module,"current-sort",this.recordList.sort)}},{key:"updateDisplayedColumnsPreference",value:function(e){this.savePreference(this.internalState.module,"displayed-columns",e)}},{key:"getDisplayedColumnsPreference",value:function(){var e=this.loadPreference(this.internalState.module,"displayed-columns");return(0,K.isArray)(e)&&e&&e.length?e:null}},{key:"triggerDataUpdate",value:function(){this.dataUpdateState.next(!0)}},{key:"load",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.internalState.module;return this.savePreference(t,"current-filters",this.internalState.activeFilters),this.savePreference(t,"current-sort",this.recordList.sort),this.recordList.load(e)}},{key:"updateState",value:function(e){this.store.next(this.internalState=e)}},{key:"openColumnChooserDialog",value:function(){var e=this,t=this.modalService.open(kg,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg",windowClass:"column-chooser-modal"}),n=this.columns.getValue().filter(function(e){return!e.hasOwnProperty("default")||e.hasOwnProperty("default")&&!0===e.default}),i=this.columns.getValue().filter(function(e){return e.hasOwnProperty("default")&&!1===e.default});t.componentInstance.displayed=n,t.componentInstance.hidden=i,t.result.then(function(t){if(t.displayed&&t.hidden){var n=[],i=t.displayed,r=t.hidden;i.forEach(function(e){e.default=!0}),r.forEach(function(e){e.default=!1}),n.push.apply(n,S(i).concat(S(r))),e.columns.next(n);var o=i.map(function(e){return e.name});e.updateDisplayedColumnsPreference(o)}})}},{key:"calculateShowWidgets",value:function(){var e,t=!1,n=((this.metadataStore.get()||{}).listView||{}).sidebarWidgets||[];n&&n.length>0&&(t=!0);var i=null!==(e=this.loadPreference(this.getModuleName(),"show-sidebar-widgets"))&&void 0!==e?e:null;this.showSidebarWidgets=null!==i?i:t,this.widgets=t}},{key:"getPreferenceKey",value:function(e){return"listview-"+e}},{key:"savePreference",value:function(e,t,n){this.preferences.setUi(e,this.getPreferenceKey(t),n)}},{key:"loadPreference",value:function(e,t){return this.preferences.getUi(e,this.getPreferenceKey(t))}},{key:"loadCurrentFilter",value:function(e){var t,n=null!==(t=this.loadPreference(e,"current-filters"))&&void 0!==t?t:{};if(n&&!(0,w.emptyObject)(n)){var i=this.loadPreference(e,"current-sort");!i&&(0,w.emptyObject)(i)&&(i=null),this.setFilters(n,!1,i)}}},{key:"loadCurrentSort",value:function(e){var t=this.loadPreference(e,"current-sort");!t||(0,w.emptyObject)(t)||(this.recordList.sort=t)}},{key:"loadCurrentDisplayedColumns",value:function(){var e=this;this.metadataStore.listViewColumns$.pipe((0,M.take)(1)).subscribe(function(t){var n=e.getDisplayedColumnsPreference();if(n&&t){var i={};n.forEach(function(e){i[e]=!0});var r={},o=[];t.forEach(function(e){var t;e.default=null!==(t=i[e.name])&&void 0!==t&&t,e.default?r[e.name]=e:o.push(e)});var a=n.filter(function(e){return!!r[e]}).map(function(e){return r[e]});e.columns.next([].concat(S(a),o))}else e.columns.next(t)})}},{key:"initDataUpdateState",value:function(){this.dataUpdateState=new x.BehaviorSubject(!0),this.dataUpdate$=this.dataUpdateState.asObservable()}},{key:"initDataSetUpdatedState",value:function(){this.dataSetUpdate$=(0,x.combineLatest)([this.criteria$,this.dataUpdate$]).pipe((0,M.map)(function(){return!0}))}}]),n}(Dw);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject($S),k.\u0275\u0275inject(qy),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(nh),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(mh),k.\u0275\u0275inject(Z.NgbModal),k.\u0275\u0275inject(Fw),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(ah))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Uw=function(){var e=function(){function e(t,n,i,r,o){var a=this;I(this,e),this.listStore=t,this.actionHandler=n,this.screenSize=i,this.systemConfigs=r,this.asyncActionService=o,this.configState=new x.BehaviorSubject({buttons:[]}),this.config$=this.configState.asObservable(),this.vm$=(0,x.combineLatest)([this.screenSize.screenSize$]).pipe((0,M.map)(function(e){var t=v(e,1)[0];return t&&(a.screen=t),a.configState.next(a.getButtonGroupConfig()),{screenSize:t}})),this.screen=Zm.Medium,this.defaultBreakpoint=3}return j(e,[{key:"ngOnInit",value:function(){this.configState.next(this.getButtonGroupConfig())}},{key:"getButtonGroupConfig",value:function(){var e=this,t=this.actions,n={buttonKlass:["action-button"],dropdownLabel:this.listStore.appStrings.LBL_MORE||"",buttons:[],dropdownOptions:{placement:["bottom-right"]},breakpoint:this.getBreakpoint()};return t.forEach(function(t){var i=e.getButtonConfig(t);i&&i.klass&&n.buttons.push(i)}),n}},{key:"getBreakpoint",value:function(){var e=this.systemConfigs&&this.systemConfigs.getConfigValue("listview_actions_limits");return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}},{key:"actions",get:function(){return this.listStore.vm.appData.module&&this.listStore.vm.appData.module.menu?this.listStore.vm.appData.module.menu.filter(function(e){return!("List"===e.name||"View"===e.name)}):[]}},{key:"getButtonConfig",value:function(e){var t=this;if(!this.listStore.vm.appData.appState.module)return{};if(!this.listStore.vm.appData.language)return{};var n=this.listStore.vm.appData.appState.module,i="";return e.actionLabelKey&&(i=e.actionLabelKey),{klass:"action-button",label:this.actionHandler.getActionLabel(n,e,this.listStore.vm.appData.language,i),onClick:function(){(null==e?void 0:e.process)?t.handleProcess(n,null==e?void 0:e.process):t.actionHandler.navigate(e).then()}}}},{key:"handleProcess",value:function(e,t){t&&this.asyncActionService.run(t,{action:t,module:e}).pipe((0,M.take)(1)).subscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Vw),k.\u0275\u0275directiveInject(qy),k.\u0275\u0275directiveInject(Hm),k.\u0275\u0275directiveInject(Gm),k.\u0275\u0275directiveInject(ty))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-action-menu"]],decls:2,vars:3,consts:[["class","list-view-actions float-right",4,"ngIf"],[1,"list-view-actions","float-right"],[3,"config$"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,pf,2,1,"div",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,Wv],pipes:[B.AsyncPipe],encapsulation:2}),e}(),Kw=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Ig,qv,H.AngularSvgIconModule,Qv]]}),e}(),zw=function(){var e=function(){function e(t,n,i,r){var o=this;I(this,e),this.listStore=t,this.modalService=n,this.screenSize=i,this.systemConfigStore=r,this.configState=new x.BehaviorSubject({buttons:[]}),this.config$=this.configState.asObservable(),this.vm$=(0,x.combineLatest)([this.listStore.widgets$,this.listStore.displayFilters$,this.listStore.criteria$,this.screenSize.screenSize$,this.listStore.showSidebarWidgets$,this.listStore.filterList.records$]).pipe((0,M.map)(function(e){var t=v(e,6),n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],l=t[5];return a&&(o.screen=a),o.configState.next(o.getButtonGroupConfig()),{widgets:n,displayFilters:i,criteria:r,screenSize:a,showSidebarWidgets:s,savedFilters:l}})),this.screen=Zm.Medium,this.defaultBreakpoint=5}return j(e,[{key:"ngOnInit",value:function(){this.configState.next(this.getButtonGroupConfig())}},{key:"getButtonGroupConfig",value:function(){var e=this,t=[{show:function(){return e.listStore.filterList.getFilters()&&e.listStore.filterList.getFilters().length>=1},button:this.getMyFiltersButton()},{button:this.getFilterButton()},{show:function(){return e.isAnyFilterApplied()},button:this.getClearButton()},{button:this.getColumnChooserButton()},{show:function(){return e.listStore.widgets},button:this.getChartsButton()}],n={buttonKlass:["settings-button"],dropdownLabel:this.listStore.appStrings.LBL_OPTIONS||"",breakpoint:this.getBreakpoint(),dropdownOptions:{placement:["bottom-right"],wrapperKlass:["dropdown-button-secondary"]},buttons:[]};return t.forEach(function(e){e.show?e.show()&&n.buttons.push(e.button):n.buttons.push(e.button)}),n}},{key:"getFilters",value:function(){var e,t,n,i;return null!==(i=null===(n=null===(t=null===(e=null==this?void 0:this.listStore)||void 0===e?void 0:e.recordList)||void 0===t?void 0:t.criteria)||void 0===n?void 0:n.filters)&&void 0!==i?i:{}}},{key:"getCurrentCriteria",value:function(){var e,t,n;return null!==(n=null===(t=null===(e=null==this?void 0:this.listStore)||void 0===e?void 0:e.recordList)||void 0===t?void 0:t.criteria)&&void 0!==n?n:{}}},{key:"hasActiveFilter",value:function(){var e,t=this.listStore.activeFilters;if(!t)return!1;var n=null!==(e=Object.keys(t))&&void 0!==e?e:[];if(!n||!n.length)return!1;if(n.length>1)return!0;var i=t[n[0]];return i.key&&""!==i.key&&"default"!==i.key}},{key:"areAllCurrentCriteriaFilterEmpty",value:function(){var e,t=this;return Object.keys(null!==(e=this.getFilters())&&void 0!==e?e:{}).every(function(e){return""===t.getFilters()[e].operator})}},{key:"isAnyFilterApplied",value:function(){return this.hasActiveFilter()||!this.areAllCurrentCriteriaFilterEmpty()}},{key:"getBreakpoint",value:function(){var e=this.systemConfigStore.getConfigValue("listview_settings_limits");return this.screen&&e&&e[this.screen]?(this.breakpoint=e[this.screen],this.breakpoint):this.breakpoint?this.breakpoint:this.defaultBreakpoint}},{key:"getFilterButton",value:function(){var e=this,t={label:this.listStore.appStrings.LBL_FILTER||"",klass:{"filter-settings-button":!0,active:this.isAnyFilterApplied()},onClick:function(){e.listStore.showFilters=!e.listStore.showFilters}};return this.isAnyFilterApplied()&&(t.icon="filter"),t}},{key:"getMyFiltersButton",value:function(){var e=this,t=this.listStore.filterList.getFilters(),n={label:this.listStore.appStrings.LBL_SAVED_FILTER_SHORTCUT||"",klass:["dropdown-toggle"],wrapperKlass:["filter-action-group"],items:[]},i=this.listStore.activeFilters,r=!1;return t.forEach(function(t){var o=Object.keys(i).some(function(e){return e===t.key});r=r||o;var a={label:t.attributes.name,onClick:function(){if(e.listStore.showFilters=!1,o)e.listStore.resetFilters();else{e.listStore.setOpenFilter(t);var n={};n[t.key]=t,e.listStore.setFilters(n)}}};o&&(a.icon="filter",a.iconKlass="small",a.klass=["active"]),n.items.push(a)}),r&&(n.klass=["dropdown-toggle","active"]),n}},{key:"getClearButton",value:function(){var e=this;return{label:this.listStore.appStrings.LBL_CLEAR_FILTER||"",onClick:function(){e.listStore.showFilters=!1,e.listStore.resetFilters()}}}},{key:"getChartsButton",value:function(){var e=this;return{label:this.listStore.appStrings.LBL_INSIGHTS||"",klass:{active:this.listStore.showSidebarWidgets},icon:"pie",onClick:function(){e.listStore.showSidebarWidgets=!e.listStore.showSidebarWidgets}}}},{key:"getDisplayAsButton",value:function(){return{label:"Display As",klass:{},items:[]}}},{key:"getColumnChooserButton",value:function(){var e=this;return{label:this.listStore.appStrings.LBL_COLUMNS||"",klass:{"column-chooser-button":!0},icon:"column_chooser",onClick:function(){e.listStore.openColumnChooserDialog()}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Vw),k.\u0275\u0275directiveInject(Z.NgbModal),k.\u0275\u0275directiveInject(Hm),k.\u0275\u0275directiveInject(Gm))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-settings-menu"]],decls:2,vars:3,consts:[["class","list-view-settings float-right",4,"ngIf"],[1,"list-view-settings","float-right"],[3,"config$",4,"ngIf"],[3,"config$"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,hf,2,1,"div",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,Wv],pipes:[B.AsyncPipe],encapsulation:2}),e}(),Gw=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,xg,Uv,qv,Zv,Z.NgbModule,Qv]]}),e}(),Zw=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,mw,Kw,Gw,H.AngularSvgIconModule]]}),e}(),Hw=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"getPaginationType",value:function(){var e,t;return(null===(e=this.config)||void 0===e?void 0:e.loadMore)&&"load-more"===(null===(t=this.config)||void 0===t?void 0:t.paginationType)?this.config.paginationType:"pagination"}},{key:"showHeader",value:function(){return this.config.showHeader}},{key:"showFooter",value:function(){return this.config.showFooter}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-table"]],inputs:{config:"config"},decls:4,vars:6,consts:[[3,"bulkActions","paginationType","pagination","selection",4,"ngIf"],[3,"config"],[3,"bulkActions","paginationType","pagination","selection","config",4,"ngIf"],[3,"bulkActions","paginationType","pagination","selection"],[3,"bulkActions","paginationType","pagination","selection","config"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div"),k.\u0275\u0275template(1,vf,1,4,"scrm-table-header",0),k.\u0275\u0275element(2,"scrm-table-body",1),k.\u0275\u0275template(3,gf,1,5,"scrm-table-footer",2),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275classMap(t.config&&t.config.klass||""),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.showHeader()),k.\u0275\u0275advance(1),k.\u0275\u0275property("config",t.config),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.showFooter()))},directives:function(){return[B.NgIf,Qw,qw,Xw]},encapsulation:2}),e}(),qw=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"isPaginationEnabled",value:function(){return"pagination"===this.paginationType}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-table-header"]],inputs:{selection:"selection",bulkActions:"bulkActions",pagination:"pagination",paginationType:"paginationType"},decls:5,vars:2,consts:[[1,"list-view-tableactions","table-header"],[1,"row"],[3,"selectionSource","actionSource",4,"ngIf"],[1,"col","mx-0","pl-0","table-pagination-wrapper"],[3,"allowPagination","state",4,"ngIf"],[3,"selectionSource","actionSource"],[3,"allowPagination","state"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275template(2,yf,1,2,"scrm-bulk-action-menu",2),k.\u0275\u0275elementStart(3,"div",3),k.\u0275\u0275template(4,bf,1,2,"scrm-pagination",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",t.selection&&t.bulkActions),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",t.pagination))},directives:[B.NgIf,ng,vw],encapsulation:2}),e}(),Ww=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,gw,ig,H.AngularSvgIconModule]]}),e}(),Qw=function(){var e=function(){function e(t,n){I(this,e),this.fieldManager=t,this.loadingBufferFactory=n,this.maxColumns=4,this.subs=[],this.loadingBuffer=this.loadingBufferFactory.create("table_loading_display_delay")}return j(e,[{key:"ngOnInit",value:function(){var e=this,t=this.config.selection$||(0,x.of)(null).pipe((0,M.shareReplay)(1)),n=this.initLoading();this.vm$=(0,x.combineLatest)([this.config.columns,t,this.config.maxColumns$,this.config.dataSource.connect(null),n]).pipe((0,M.map)(function(t){var n=v(t,5),i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=[];e.maxColumns=o;var u=e.buildDisplayColumns(i);return e.popoverColumns=e.buildHiddenColumns(i,u),r&&l.push("checkbox"),e.popoverColumns&&e.popoverColumns.length&&l.push("show-more"),l.push.apply(l,S(u)),l.push("line-actions"),{columns:i,selection:r,selected:r&&r.selected||{},selectionStatus:r&&r.status||w.SelectionStatus.NONE,displayedColumns:l,records:a||[],loading:s}}))}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"toggleSelection",value:function(e){this.config.toggleRecordSelection(e)}},{key:"allSelected",value:function(e){return e===w.SelectionStatus.ALL}},{key:"buildDisplayColumns",value:function(e){for(var t=0,n=!1,i=[],r=e.filter(function(e){return!e.hasOwnProperty("default")||e.hasOwnProperty("default")&&!0===e.default});t<this.maxColumns&&t<r.length;)i.push(r[t].name),n=n||r[t].link,t++;if(!n&&this.maxColumns<r.length)for(t=this.maxColumns;t<r.length;t++)if(r[t].link){i.splice(-1,1),i.push(r[t].name);break}return i}},{key:"buildHiddenColumns",value:function(e,t){for(var n=e.filter(function(e){return!e.hasOwnProperty("default")||e.hasOwnProperty("default")&&!0===e.default}),i=[],r=0;r<n.length;r++)-1===t.indexOf(n[r].name)&&i.push(n[r].name);return n.filter(function(e){return i.includes(e.name)})}},{key:"getFieldSort",value:function(e){var t=this;return{getSortDirection:function(){return t.config.sort$.pipe((0,M.map)(function(t){var n=w.SortDirection.NONE;return t.orderBy===e.name&&(n=t.sortOrder),n}))},changeSortDirection:function(n){t.config.updateSorting(e.name,n)}}}},{key:"getField",value:function(e,t){return e&&t?this.fieldManager.addField(t,e):null}},{key:"initLoading",value:function(){var e=this,t=(0,x.of)(!1).pipe((0,M.shareReplay)(1));return this.config.loading$&&(this.subs.push(this.config.loading$.subscribe(function(t){e.loadingBuffer.updateLoading(t)})),t=this.loadingBuffer.loading$),t}},{key:"trackRecord",value:function(e,t){var n;return null!==(n=null==t?void 0:t.id)&&void 0!==n?n:""}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(dv),k.\u0275\u0275directiveInject(Qm))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-table-body"]],inputs:{config:"config"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"position-relative","d-flex","flex-column"],["cdk-table","","aria-describedby","table-body",1,"list-view-table","striped-table","table",3,"dataSource","trackBy"],["cdkColumnDef","checkbox",4,"ngIf"],["cdkColumnDef","show-more",4,"ngIf"],[3,"cdkColumnDef",4,"ngFor","ngForOf"],["cdkColumnDef","line-actions"],["cdk-header-cell","","scope","col","class","primary-table-header",4,"cdkHeaderCellDef"],["cdk-cell","",4,"cdkCellDef"],["cdk-header-row","",4,"cdkHeaderRowDef"],["cdk-row","",4,"cdkRowDef","cdkRowDefColumns"],[3,"m-5",4,"ngIf"],["cdkColumnDef","checkbox"],["cdk-header-cell","","scope","col",1,"primary-table-header"],["cdk-cell",""],[1,"checkbox-container"],["type","checkbox","aria-hidden","true",3,"checked","disabled","change"],[1,"checkmark"],["cdkColumnDef","show-more"],["cdk-header-cell","","scope","col","class","primary-table-header show-more-column",4,"cdkHeaderCellDef"],["cdk-cell","","class","show-more-column",4,"cdkCellDef"],["cdk-header-cell","","scope","col",1,"primary-table-header","show-more-column"],["cdk-cell","",1,"show-more-column"],[3,"record","columns",4,"ngIf"],[3,"record","columns"],[3,"cdkColumnDef"],["cdk-header-cell","","scope","col",3,"class",4,"cdkHeaderCellDef"],["cdk-cell","",3,"class",4,"cdkCellDef"],["cdk-header-cell","","scope","col"],[3,"labelKey","module"],[3,"state",4,"ngIf"],[3,"state"],[3,"mode","type","field","record"],[3,"config","record",4,"ngIf"],[3,"config","record"],["cdk-header-row",""],["cdk-row",""],[1,"lead","text-center","pt-3"],["labelKey","MSG_LIST_VIEW_NO_RESULTS_BASIC"],[3,"overlay"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Pf,13,9,"ng-container",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,oo.CdkTable,B.NgForOf,oo.CdkColumnDef,oo.CdkHeaderCellDef,oo.CdkCellDef,oo.CdkHeaderRowDef,oo.CdkRowDef,oo.CdkHeaderCell,oo.CdkCell,Sw,zv,jw,ES,iw,oo.CdkHeaderRow,oo.CdkRow,Pk],pipes:[B.AsyncPipe],encapsulation:2}),e}(),Yw=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,H.AngularSvgIconModule,oo.CdkTableModule,LS,Ew,rw,Bk,Gv,Cw]]}),e}(),Xw=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"isPaginationEnabled",value:function(){return"pagination"===this.paginationType}},{key:"getLoadMoreButton",value:function(){var e=this;return{klass:"load-more",labelKey:"LBL_LOAD_MORE",onClick:function(){e.config.loadMore()}}}},{key:"allLoaded",value:function(){var e;return null===(e=this.config)||void 0===e?void 0:e.allLoaded()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-table-footer"]],inputs:{selection:"selection",bulkActions:"bulkActions",pagination:"pagination",paginationType:"paginationType",config:"config"},decls:6,vars:3,consts:[[1,"list-view-tableactions","table-footer"],[1,"row"],[3,"selectionSource","actionSource",4,"ngIf"],["class","col mx-0 pl-0 load-more-style",4,"ngIf"],[1,"col","mx-0","pl-0","table-pagination-wrapper"],[3,"allowPagination","state",4,"ngIf"],[3,"selectionSource","actionSource"],[1,"col","mx-0","pl-0","load-more-style"],[3,"loadMoreButton"],[3,"allowPagination","state"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275template(2,Bf,1,2,"scrm-bulk-action-menu",2),k.\u0275\u0275template(3,$f,2,1,"div",3),k.\u0275\u0275elementStart(4,"div",4),k.\u0275\u0275template(5,Vf,1,2,"scrm-pagination",5),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",t.selection&&t.bulkActions),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!t.isPaginationEnabled()&&!t.allLoaded()),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",t.pagination))},directives:[B.NgIf,ng,ow,vw],encapsulation:2}),e}(),Jw=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,gw,ig,H.AngularSvgIconModule,aw]]}),e}(),eI=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Ww,Yw,Jw,H.AngularSvgIconModule]]}),e}(),tI=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.apply(this,arguments)}return j(n,[{key:"checkRecordAccess",value:function(e){var t,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=null!==(n=(null!==(t=e.record)&&void 0!==t?t:{}).acls)&&void 0!==n?n:[];if(!o||!o.length)return!1;var a=null!==(i=e.action)&&void 0!==i?i:null;return this.checkAccess(a,o,r)}}]),n}(w.ActionHandler),nI=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this)).moduleNameMapper=e,r.router=i,r.key="create",r.modes=["list"],r}return j(n,[{key:"run",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.params.create||{},i={};i.return_module=n.legacyModuleName,i.return_action=n.returnAction,i.return_id=e.record.id,i[n.mapping.moduleName]=n.legacyModuleName,i[n.mapping.name]=e.record.attributes.name,i[n.mapping.id]=e.record.id,this.router.navigate(["/"+n.module+"/"+n.action],{queryParams:i}).then()}},{key:"shouldDisplay",value:function(e){return!0}}]),n}(tI);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(Ar.Router))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(Ar.Router))},token:e,providedIn:"root"}),e}(),iI=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="async-process",e.modes=w.ALL_VIEW_MODES,e}return j(n,[{key:"run",value:function(e){}},{key:"shouldDisplay",value:function(e){var t,n,i=null!==(n=null===(t=null==e?void 0:e.action)||void 0===t?void 0:t.acl)&&void 0!==n?n:[];return!i.length||this.checkRecordAccess(e,i)}}]),n}(tI);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),rI=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this)).createRelated=e,r.async=i,e.modes.forEach(function(t){return r.actions[t][e.key]=e}),i.modes.forEach(function(e){return r.actions[e][i.key]=i}),r}return n}(Mg);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(nI),k.\u0275\u0275inject(iI))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(nI),k.\u0275\u0275inject(iI))},token:e,providedIn:"root"}),e}(),oI=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l){var u;return I(this,n),(u=t.call(this,e,i,r,o,a,s,l)).actionManager=e,u.asyncActionService=i,u.message=r,u.confirmation=o,u.language=a,u.selectModalService=s,u.metadata=l,u}return j(n,[{key:"buildActionData",value:function(e,t){return{record:t&&t.record||null,action:e}}}]),n}(bk);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(rI),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),aI=function(){var e=function(){function e(t){I(this,e),this.http=t,this.model=null}return j(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Tr.HttpClient))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-user-action-menu-ui"]],decls:5,vars:3,template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"p"),k.\u0275\u0275text(1," user-action-menu works!\n"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(2,"pre"),k.\u0275\u0275text(3),k.\u0275\u0275pipe(4,"json"),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(3),k.\u0275\u0275textInterpolate(k.\u0275\u0275pipeBind1(4,1,t.model)))},pipes:[B.JsonPipe],encapsulation:2}),e}(),sI=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,H.AngularSvgIconModule]]}),e}(),lI=function(){var e=function(){function e(t,n){I(this,e),this.metadata=t,this.processService=n}return j(e,[{key:"build",value:function(e,t){return(0,w.deepClone)({module:"Favorite",type:"Favorite",attributes:{parent_id:t,parent_type:e}})}},{key:"add",value:function(e,t){this.update(e,t,"add")}},{key:"remove",value:function(e,t){this.update(e,t,"remove")}},{key:"update",value:function(e,t,n){var i=this,r={favorite:t,action:n};setTimeout(function(){i.processService.submit("update-favorite",r).pipe((0,M.take)(1)).subscribe(function(n){var r,o,a=null!==(o=null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.favorite)&&void 0!==o?o:null;null!==a?i.addFavoriteToMetadata(a,e):i.removeFavoriteFromMetadata(e,t)})},100)}},{key:"addFavoriteToMetadata",value:function(e,t){var n,i,r,o,a,s,l={id:null!==(n=null==e?void 0:e.id)&&void 0!==n?n:"",module:null!==(i=null==e?void 0:e.module)&&void 0!==i?i:"",attributes:Object.assign({},null!==(r=null==e?void 0:e.attributes)&&void 0!==r?r:{})},u=null!==(a=null===(o=null==e?void 0:e.attributes)||void 0===o?void 0:o.parent_id)&&void 0!==a?a:"",c=this.metadata.getModuleMeta(t),d=null!==(s=null==c?void 0:c.favorites)&&void 0!==s?s:null;if(d){var f=d.filter(function(e){var t,n;return(null!==(n=null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.parent_id)&&void 0!==n?n:"")!==u});f.unshift(l),c.favorites=f}this.metadata.setModuleMetadata(t,c)}},{key:"removeFavoriteFromMetadata",value:function(e,t){var n,i,r,o=this.metadata.getModuleMeta(e),a=null!==(n=null==o?void 0:o.favorites)&&void 0!==n?n:null,s=null!==(r=null===(i=null==t?void 0:t.attributes)||void 0===i?void 0:i.parent_id)&&void 0!==r?r:null;!a||!a.length||!s||(o.favorites=a.filter(function(e){var t,n;return(null!==(n=null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.parent_id)&&void 0!==n?n:"")!==s}),this.metadata.setModuleMetadata(e,o))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(xh),k.\u0275\u0275inject(th))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(xh),k.\u0275\u0275inject(th))},token:e,providedIn:"root"}),e}(),uI=function(){var e=function(){function e(){I(this,e),this.buffer=new x.Subject,this.buffer$=this.buffer.asObservable(),this.enabled=!0,this.subs=[],this.debounceTime=1e3}return j(e,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this.debounceTime=t,this.subs.push(this.buffer$.pipe((0,M.debounceTime)(this.debounceTime)).subscribe(function(){e.enabled=!0}))}},{key:"destroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"debounce",value:function(e){!e||!this.enabled||(this.enabled=!1,e(),this.buffer.next(!0))}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),cI=function(){var e=function(){function e(t){I(this,e),this.handler=t,this.favorite=!1}return j(e,[{key:"ngOnInit",value:function(){var e,t,n=this;!this.record||(this.debounceService=new uI,this.debounceService.init(),this.favorite=null!==(t=null===(e=null==this?void 0:this.record)||void 0===e?void 0:e.favorite)&&void 0!==t&&t,this.addButton={klass:["btn btn-sm btn-outline-light favorite-star favorite-off"],onClick:function(){n.debounceService.debounce(function(){n.add()})},icon:"star"},this.removeButton={klass:["btn btn-sm btn-outline-light favorite-star favorite-on"],onClick:function(){n.debounceService.debounce(function(){n.remove()})},icon:"star"})}},{key:"ngOnDestroy",value:function(){this.debounceService.destroy()}},{key:"add",value:function(){this.record.favorite=!0,this.favorite=!0;var e=this.handler.build(this.record.module,this.record.id);this.handler.add(this.record.module,e)}},{key:"remove",value:function(){this.record.favorite=!1,this.favorite=!1;var e=this.handler.build(this.record.module,this.record.id);this.handler.remove(this.record.module,e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(lI))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-favorite-toggle"]],inputs:{record:"record"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"config"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Uf,2,1,"ng-container",0),k.\u0275\u0275template(1,Kf,2,1,"ng-container",0)),2&e&&(k.\u0275\u0275property("ngIf",!t.favorite),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.favorite))},directives:[B.NgIf,Hv],encapsulation:2}),e}(),dI=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,qv]]}),e}(),fI=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.apply(this,arguments)}return n}(w.ActionHandler),pI=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this)).message=e,i.key="save",i.modes=["edit"],i}return j(n,[{key:"run",value:function(e){var t=this;e.store.validate().pipe((0,M.take)(1)).subscribe(function(n){n?e.store.save().pipe((0,M.take)(1)).subscribe(function(n){e.listFilterStore.config.addSavedFilter(e.store.recordStore.extractBaseRecord(n)),e.listFilterStore.applyFilter(),t.message.addSuccessMessageByKey("LBL_SAVED_FILTER_SAVED")}):t.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}},{key:"shouldDisplay",value:function(){return!0}}]),n}(fI);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ym))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ym))},token:e,providedIn:"root"}),e}(),mI=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this)).message=e,r.asyncActionService=i,r.key="delete",r.modes=["edit","detail"],r}return j(n,[{key:"run",value:function(e){var t="record-".concat(this.key),n=e.store.getBaseRecord()||{};n.id?(this.message.removeMessages(),this.asyncActionService.run(t,{action:t,module:n.module,id:n.id},"noop").pipe((0,M.take)(1)).subscribe(function(){e.listFilterStore.config.removeSavedFilter(n)})):this.message.addWarningMessageByKey("LBL_FILTER_ID_NOT_DEFINED")}},{key:"shouldDisplay",value:function(e){var t=e&&e.store;return!!(t&&t.recordStore.getBaseRecord()||{}).id}}]),n}(fI);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(ty))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(ty))},token:e,providedIn:"root"}),e}(),hI=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),r=t.call(this),e.modes.forEach(function(t){return r.actions[t][e.key]=e}),i.modes.forEach(function(e){return r.actions[e][i.key]=i}),r}return n}(Mg);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(pI),k.\u0275\u0275inject(mI))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(pI),k.\u0275\u0275inject(mI))},token:e,providedIn:"root"}),e}(),vI={id:"",type:"",module:"",attributes:{}},gI=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u){var c;return I(this,n),(c=t.call(this,e,i,r,o,a,s)).definitions$=e,c.recordSaveGQL=i,c.recordFetchGQL=r,c.message=o,c.recordManager=a,c.recordMappers=s,c.fieldManager=l,c.language=u,c.internalState=(0,w.deepClone)(vI),c.stagingState=(0,w.deepClone)(vI),c.store=new x.BehaviorSubject(c.internalState),c.staging=new x.BehaviorSubject(c.stagingState),c.searchFields={},c.listColumns=[],c.state$=c.store.asObservable().pipe((0,M.tap)(function(e){c.updateStaging(e)})),c.staging$=c.staging.asObservable(),c}return j(n,[{key:"getSearchFields",value:function(){return this.searchFields}},{key:"setSearchFields",value:function(e){this.searchFields=e}},{key:"getListColumns",value:function(){return this.listColumns}},{key:"setListColumns",value:function(e){this.listColumns=e}},{key:"getBaseRecord",value:function(){return this.stagingState?(this.mapStagingFields(),(0,w.deepClone)({id:this.stagingState.id,type:this.stagingState.type,module:this.stagingState.module,key:this.stagingState.key,searchModule:this.stagingState.searchModule,criteria:this.stagingState.criteria,attributes:this.stagingState.attributes})):null}},{key:"extractBaseRecord",value:function(e){var t;if(!e)return null;var n=null!==(t=e.criteria)&&void 0!==t?t:{};return Array.isArray(n)&&!n.length&&(n={}),(0,w.deepClone)({id:e.id,type:e.type,module:e.module,key:e.key,searchModule:e.searchModule,criteria:n,attributes:e.attributes})}},{key:"initRecord",value:function(e){var t,n,i;e.attributes=e.attributes||{},e.attributes.search_module=e.searchModule;var r=null!==(i=null===(n=null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.contents)||void 0===n?void 0:n.filters)&&void 0!==i?i:{};e.attributes.contents=e.attributes.contents||{filters:{}},e.attributes.contents.filters=Array.isArray(r)&&!r.length?{}:r,e.criteria=this.getCriteria(e),this.initCriteriaFields(e,this.getSearchFields()),e.module&&this.definitions&&this.definitions.length>0&&(e.fields=this.recordManager.initFields(e,this.definitions)),this.initOrderByOptions(e)}},{key:"initOrderByOptions",value:function(e){var t=this;if(e.fields&&e.fields.orderBy){e.fields.orderBy.metadata=e.fields.orderBy.metadata||{};var n=[];this.getListColumns().forEach(function(i){if(i.default&&!0===i.default){var r=t.language.getFieldLabel(i.label||i.fieldDefinition.vname||"",e.searchModule);n.push({value:i.fieldDefinition.name||i.name,label:r})}}),e.fields.orderBy.metadata.options$=(0,x.of)(n).pipe((0,M.shareReplay)())}}},{key:"getCriteria",value:function(e){return e&&e.criteria?e.criteria.filters?Array.isArray(e.criteria.filters)&&!e.criteria.filters.length?Object.assign(Object.assign({},e.criteria),{filters:{}}):(0,w.deepClone)(e.criteria):Object.assign(Object.assign({},e.criteria),{filters:{}}):{filters:{}}}},{key:"initCriteriaFields",value:function(e,t){var n=this;e.criteriaFields=e.criteriaFields||{},e.criteriaFormGroup||(e.criteriaFormGroup=new V.FormGroup({})),t&&Object.keys(t).forEach(function(i){n.buildField(e,t[i])})}},{key:"buildField",value:function(e,t){var n=t.type,i={name:t.name,label:t.label,type:n,fieldDefinition:{}};t.fieldDefinition&&(i.fieldDefinition=t.fieldDefinition),("bool"===n||"boolean"===n)&&(i.fieldDefinition.options="dom_int_bool"),this.fieldManager.addFilterField(e,i,this.language)}}]),n}(pv),yI=function(){var e=function(){function e(t,n,i,r,o,a,s,l){I(this,e),this.recordFetchGQL=t,this.recordSaveGQL=n,this.message=i,this.recordManager=r,this.recordMappers=o,this.baseMapper=a,this.fieldManager=s,this.language=l,o.register("default",a.getKey(),a)}return j(e,[{key:"create",value:function(e){return new gI(e,this.recordSaveGQL,this.recordFetchGQL,this.message,this.recordManager,this.recordMappers,this.fieldManager,this.language)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(mv),k.\u0275\u0275inject(hv),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vv),k.\u0275\u0275inject(w.RecordMapperRegistry),k.\u0275\u0275inject(gv),k.\u0275\u0275inject(dv),k.\u0275\u0275inject(Ov))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(mv),k.\u0275\u0275inject(hv),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vv),k.\u0275\u0275inject(w.RecordMapperRegistry),k.\u0275\u0275inject(gv),k.\u0275\u0275inject(dv),k.\u0275\u0275inject(Ov))},token:e,providedIn:"root"}),e}(),bI={module:"",searchModule:"",recordID:"",loading:!1,mode:"detail"},SI=function(){var e=function(){function e(t,n,i,r,o,a){var s=this;I(this,e),this.appStateStore=t,this.meta=n,this.message=i,this.fieldManager=r,this.language=o,this.savedFilterStoreFactory=a,this.cache$=null,this.internalState=(0,w.deepClone)(bI),this.store=new x.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.subs=[],this.metadataLoadingState=new x.BehaviorSubject(!1),this.metadataLoading$=this.metadataLoadingState.asObservable(),this.meta$=this.meta.getMetadata("saved-search",["recordView"]).pipe((0,M.tap)(function(){return s.metadataLoadingState.next(!1)}),(0,M.map)(function(e){var t,n=Object.assign({},e.recordView);return n.actions=(null!==(t=null==n?void 0:n.actions)&&void 0!==t?t:[]).filter(function(e){return"cancel"!==e.key}),n})),this.recordStore=a.create(this.getViewFields$()),this.record$=this.recordStore.state$.pipe((0,M.distinctUntilChanged)(),(0,M.map)(function(e){return e})),this.stagingRecord$=this.recordStore.staging$.pipe((0,M.distinctUntilChanged)(),(0,M.map)(function(e){return e})),this.loading$=this.state$.pipe((0,M.map)(function(e){return e.loading})),this.mode$=this.state$.pipe((0,M.map)(function(e){return e.mode})),this.vm$=(0,x.combineLatest)([this.stagingRecord$,this.mode$]).pipe((0,M.map)(function(e){var t=v(e,2),n=t[0],i=t[1];return s.vm={record:n,mode:i},s.vm}))}return j(e,[{key:"getModuleName",value:function(){return this.internalState.module}},{key:"getRecordId",value:function(){return this.internalState.recordID}},{key:"getViewContext",value:function(){return{module:this.getModuleName(),id:this.getRecordId()}}},{key:"destroy",value:function(){this.clear()}},{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"detail";this.internalState.module="saved-search",this.internalState.recordID=e,this.setMode(t),this.metadataLoadingState.next(!0);var n={$meta:this.meta$,record:this.load()};return(0,x.forkJoin)(n).pipe((0,M.map)(function(e){return e.record}))}},{key:"initRecord",value:function(e,t,n,i){var r=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"detail";this.updateState(Object.assign(Object.assign({},this.internalState),{recordID:t.id,module:"saved-search",searchModule:e,mode:o})),this.metadataLoadingState.next(!0),this.meta$.pipe((0,M.take)(1),(0,M.tap)(function(){r.metadataLoadingState.next(!1),r.initStaging(e,t,n,i)})).subscribe()}},{key:"initStaging",value:function(e,t,n,i){var r=(0,w.deepClone)(this.recordStore.extractBaseRecord(t));r.searchModule=e,this.recordStore.setSearchFields(n),this.recordStore.setListColumns(i),this.recordStore.setStaging(r)}},{key:"clear",value:function(){this.cache$=null,this.updateState((0,w.deepClone)(bI)),this.metadataLoadingState.unsubscribe(),this.metadataLoadingState=null,this.recordStore.destroy(),this.recordStore=null}},{key:"clearAuthBased",value:function(){this.clear()}},{key:"getBaseRecord",value:function(){return this.recordStore.getBaseRecord()}},{key:"getMode",value:function(){return this.internalState?this.internalState.mode:null}},{key:"setMode",value:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{mode:e}))}},{key:"save",value:function(){var e=this;return this.appStateStore.updateLoading("".concat(this.internalState.module,"-record-save"),!0),this.recordStore.save().pipe((0,M.catchError)(function(){return e.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,x.of)({})}),(0,M.finalize)(function(){e.appStateStore.updateLoading("".concat(e.internalState.module,"-record-save"),!1)}))}},{key:"validate",value:function(){return(0,x.forkJoin)({fields:this.recordStore.validate(),criteria:this.validateCriteria()}).pipe((0,M.map)(function(e){var t=e.fields,n=e.criteria;return t&&n}))}},{key:"validateCriteria",value:function(){var e=this.recordStore.getStaging().criteriaFormGroup;return e.markAllAsTouched(),e.statusChanges.pipe((0,M.startWith)(e.status),(0,M.filter)(function(e){return"PENDING"!==e}),(0,M.take)(1),(0,M.map)(function(e){return"VALID"===e}))}},{key:"load",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.appStateStore.updateLoading("".concat(this.internalState.module,"-record-fetch"),!0),this.recordStore.retrieveRecord(this.internalState.module,this.internalState.recordID,t).pipe((0,M.tap)(function(t){e.appStateStore.updateLoading("".concat(e.internalState.module,"-record-fetch"),!1),e.updateState(Object.assign(Object.assign({},e.internalState),{recordID:t.id,module:t.module}))}))}},{key:"getViewFieldsKeys$",value:function(){return this.meta$.pipe((0,M.map)(function(e){var t=[];return e.panels.forEach(function(e){e.rows.forEach(function(e){e.cols.forEach(function(e){t.push(e.name)})})}),t}))}},{key:"getViewFields$",value:function(){return this.meta$.pipe((0,M.map)(function(e){var t=[];return e.panels.forEach(function(e){e.rows.forEach(function(e){e.cols.forEach(function(e){t.push(e)})})}),t}))}},{key:"updateState",value:function(e){this.store.next(this.internalState=e)}},{key:"getMetadata",value:function(){return(this.meta.get()||{}).recordView||{}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(jv),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(dv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(yI))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),CI=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this,e)).apollo=e,i}return j(n,[{key:"save",value:function(e){return l(h(n.prototype),"save",this).call(this,e)}},{key:"mapToRecord",value:function(e){if(!e.data||!e.data.saveRecord||!e.data.saveRecord.record)return null;var t={id:e.data.saveRecord.record._id,type:e.data.saveRecord.record.type||"",module:e.data.saveRecord.record.module||"",attributes:e.data.saveRecord.record.attributes||null};t.key=t.id||t.attributes&&t.attributes.id||"";var n=t.attributes&&t.attributes.contents||null;return n&&(t.criteria=n),t}}]),n}(hv);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(_.Apollo))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(_.Apollo))},token:e,providedIn:"root"}),e}(),kI=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"getKey",value:function(){return"criteria"}},{key:"map",value:function(e){var t,n,i,r,o=e;if(o.criteria){var a=null!==(n=null===(t=null==o?void 0:o.attributes)||void 0===t?void 0:t.contents)&&void 0!==n?n:{},s=null!==(r=null===(i=null==o?void 0:o.criteria)||void 0===i?void 0:i.filters)&&void 0!==r?r:{};a.filters=(0,w.deepClone)(s),e.fields.name&&(a.name=e.fields.name.value,o.criteria.name=a.name),e.fields.orderBy&&(a.orderBy=e.fields.orderBy.value,o.criteria.orderBy=a.orderBy),e.fields.sortOrder&&(a.sortOrder=e.fields.sortOrder.value,o.criteria.sortOrder=a.sortOrder),e.attributes.search_module&&(a.searchModule=e.attributes.search_module,o.criteria.searchModule=a.searchModule),o.attributes.contents=a}var l=o.key||"";"default"===l&&(l=""),o.id=l,o.attributes.id=l}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),wI=function(){var e=function(){function e(t,n,i,r,o,a,s,l,u,c,d){I(this,e),this.recordFetchGQL=t,this.recordSaveGQL=n,this.appStateStore=i,this.languageStore=r,this.metadataStore=o,this.message=a,this.recordManager=s,this.fieldManager=l,this.recordMappers=u,this.baseMapper=c,this.savedSearchMapper=d,this.savedFilterStoreFactory=new yI(t,n,a,s,u,c,l,r),this.recordMappers.register("saved-search",this.savedSearchMapper.getKey(),this.savedSearchMapper)}return j(e,[{key:"create",value:function(){return new SI(this.appStateStore,this.metadataStore,this.message,this.fieldManager,this.languageStore,this.savedFilterStoreFactory)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(mv),k.\u0275\u0275inject(CI),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vv),k.\u0275\u0275inject(dv),k.\u0275\u0275inject(w.RecordMapperRegistry),k.\u0275\u0275inject(gv),k.\u0275\u0275inject(kI))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(mv),k.\u0275\u0275inject(CI),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vv),k.\u0275\u0275inject(dv),k.\u0275\u0275inject(w.RecordMapperRegistry),k.\u0275\u0275inject(gv),k.\u0275\u0275inject(kI))},token:e,providedIn:"root"}),e}(),II=function(){var e=function(){function e(t,n){I(this,e),this.message=t,this.savedFilterStoreFactory=n,this.panelMode="closable",this.mode="filter",this.gridButtons=null,this.fields=[],this.special=[],this.savedFilters=[],this.subs=[],this.filterStore=n.create()}return j(e,[{key:"init",value:function(e){var t=this;this.config=e,this.initSearchFields(),this.initConfigUpdatesSubscription(),this.vm$=(0,x.combineLatest)([this.filterStore.stagingRecord$]).pipe((0,M.tap)(function(e){var n=v(e,1)[0];t.reset(),t.splitCriteriaFields(n),t.initDisplayFields(),t.initGridButtons(),t.initHeaderButtons(),t.initMyFiltersButton(t.savedFilters)})),this.config.panelMode&&(this.panelMode=this.config.panelMode),this.collapse=new x.BehaviorSubject(!1),this.isCollapsed$=this.collapse.asObservable(),(0,w.isVoid)(this.config.isCollapsed)||this.collapse.next(this.config.isCollapsed),this.reset(),this.initGridButtons(),this.initHeaderButtons()}},{key:"clear",value:function(){this.subs.forEach(function(e){return e.unsubscribe()}),this.reset(),this.filterStore.clear(),this.filterStore=null,this.collapse.unsubscribe()}},{key:"clearAuthBased",value:function(){this.clear()}},{key:"reset",value:function(){this.fields=[],this.special=[]}},{key:"applyFilter",value:function(){var e=this;this.filterStore.validateCriteria().pipe((0,M.take)(1)).subscribe(function(t){if(t)return"collapsible"===e.config.panelMode&&e.config.collapseOnSearch&&e.collapse.next(!0),e.config.onSearch(),void e.config.updateFilter(e.filterStore.getBaseRecord());e.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}},{key:"clearFilter",value:function(){this.config.resetFilter(!1)}},{key:"initConfigUpdatesSubscription",value:function(){var e=this;this.subs.push((0,x.combineLatest)([this.config.filter$,this.config.searchFields$]).pipe((0,M.tap)(function(t){var n=v(t,2),i=n[0],r=n[1];e.reset(),e.filterStore.initRecord(e.config.module,i,r,e.config.listFields,"edit")})).subscribe()),this.subs.push((0,x.combineLatest)([this.config.savedFilters$]).pipe((0,M.tap)(function(t){var n=v(t,1)[0];e.savedFilters=n,e.initMyFiltersButton(n)})).subscribe())}},{key:"splitCriteriaFields",value:function(e){var t=this;!e||!e.criteriaFields||Object.keys(e.criteriaFields).forEach(function(n){var i=e.criteriaFields[n];(i.name||n).includes("_only")?t.special.push(i):t.fields.push(i)})}},{key:"initSearchFields",value:function(){var e=this;this.subs.push(this.config.searchFields$.subscribe(function(t){e.searchFields=t}))}},{key:"initDisplayFields",value:function(){var e=this;(!this.searchFields||(0,w.emptyObject)(this.searchFields)||!this.fields)&&(this.displayFields=[]);var t=[];this.fields.forEach(function(n){!e.searchFields[n.name]||t.push(n)}),this.displayFields=t}},{key:"initGridButtons",value:function(){this.gridButtons=[{labelKey:"LBL_CLEAR_BUTTON_LABEL",klass:["clear-filters-button","btn","btn-outline-danger","btn-sm"],onClick:this.clearFilter.bind(this)},{labelKey:"LBL_SEARCH_BUTTON_LABEL",klass:["filter-button","btn","btn-danger","btn-sm"],onClick:this.applyFilter.bind(this)}]}},{key:"initHeaderButtons",value:function(){var e=this;this.closeButton={onClick:function(){e.config.onClose()}}}},{key:"initMyFiltersButton",value:function(e){var t=this;if(!e||e.length<1)this.myFilterButton=null;else{var n={wrapperKlass:["filter-select"],labelKey:"LBL_SAVED_FILTER_SHORTCUT",klass:["btn","btn-outline-light","btn-sm"],items:[]},i=this.filterStore.getRecordId();e.forEach(function(e){var r={label:e.attributes.name,onClick:function(){t.config.setOpenFilter(e)}};e.key===i&&(n.label=e.attributes.name,n.labelKey="",r.icon="filter",r.iconKlass="small",r.klass="active"),n.items.push(r)}),this.myFilterButton=n}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(wI))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),xI=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u,c){var d;return I(this,n),(d=t.call(this,o,a,s,l,r,u,c)).store=e,d.listFilterStore=i,d.language=r,d.actionManager=o,d.asyncActionService=a,d.message=s,d.confirmation=l,d.selectModalService=u,d.metadata=c,d}return j(n,[{key:"getActions",value:function(e){var t=this;return(0,x.combineLatest)([this.store.meta$,this.store.mode$,this.store.stagingRecord$,this.language.vm$]).pipe((0,M.map)(function(e){var n=v(e,2),i=n[0],r=n[1];return r&&i?t.parseModeActions(i.actions,r):[]}))}},{key:"buildActionData",value:function(e,t){return{store:this.store,listFilterStore:this.listFilterStore,action:e}}},{key:"getMode",value:function(){return this.store.getMode()}},{key:"getModuleName",value:function(e){return this.store.getModuleName()}},{key:"reload",value:function(e,t,n){this.store.load(!1).pipe((0,M.take)(1)).subscribe()}}]),n}(bk);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(SI),k.\u0275\u0275inject(II),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(hI),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),jI=function(){var e=function(){function e(t,n,i,r,o,a,s){I(this,e),this.language=t,this.actionManager=n,this.asyncActionService=i,this.message=r,this.confimation=o,this.selectModalService=a,this.metadata=s}return j(e,[{key:"create",value:function(e,t){return new xI(e,t,this.language,this.actionManager,this.asyncActionService,this.message,this.confimation,this.selectModalService,this.metadata)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(hI),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(hI),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},token:e,providedIn:"root"}),e}(),EI=function(){var e=function(){function e(t,n){I(this,e),this.message=t,this.savedFilterStoreFactory=n}return j(e,[{key:"create",value:function(){return new II(this.message,this.savedFilterStoreFactory)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(wI))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(wI))},token:e,providedIn:"root"}),e}(),MI=function(){var e=function(){function e(t,n){I(this,e),this.storeFactory=t,this.actionAdapterFactory=n,this.store=t.create(),this.filterActionsAdapter=n.create(this.store.filterStore,this.store)}return j(e,[{key:"ngOnInit",value:function(){this.store.init(this.config),this.vm$=this.store.vm$.pipe((0,M.map)(function(e){var t=v(e,1)[0],n=Object.assign({},t);return n.fields=t.criteriaFields,n}))}},{key:"ngOnDestroy",value:function(){this.store.clear(),this.store=null}},{key:"getGridConfig",value:function(){return{record$:this.store.filterStore.stagingRecord$,mode$:this.store.filterStore.mode$,fields$:this.store.filterStore.getViewFieldsKeys$(),actions:this.filterActionsAdapter,appendActions:!0,klass:"mt-2 p-2 saved-search-container rounded",buttonClass:"btn btn-outline-danger btn-sm",labelDisplay:"inline",maxColumns$:(0,x.of)(4).pipe((0,M.shareReplay)(1)),sizeMap$:(0,x.of)({handset:1,tablet:2,web:3,wide:4}).pipe((0,M.shareReplay)(1))}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(EI),k.\u0275\u0275directiveInject(jI))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-list-filter"]],inputs:{config:"config"},decls:2,vars:3,consts:[[3,"showHeader","close","isCollapsed$","mode","klass","titleKey",4,"ngIf"],[3,"showHeader","close","isCollapsed$","mode","klass","titleKey"],["panel-header-button","",4,"ngIf"],["panel-body","",1,"p-2","filter-body"],[3,"actions","appendActions","fieldMode","fields","record","special",4,"ngIf"],[4,"ngIf"],["panel-header-button",""],[3,"config"],[3,"actions","appendActions","fieldMode","fields","record","special"],["class","float-right mt-4","field-grid-special","",4,"ngIf"],["class","mt-4 align-self-end","field-grid-actions","",4,"ngIf"],["field-grid-special","",1,"float-right","mt-4"],["class","d-inline-block form-check mb-2 mr-sm-2",4,"ngFor","ngForOf"],[1,"d-inline-block","form-check","mb-2","mr-sm-2"],["type","checkbox",1,"form-check-input",3,"value"],[1,"form-check-label"],[3,"labelKey"],["field-grid-actions","",1,"mt-4","align-self-end"],[3,"config",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Yf,5,9,"scrm-panel",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,cC,Av,Eg,B.NgForOf,zv,Hv,pk],pipes:[B.AsyncPipe],encapsulation:2}),e}(),_I=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,qv,pC,OS,Zv,Gv,mk,qv]]}),e}(),FI=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Ig,eI,Gv,Bk,_I,qv]]}),e}(),LI=function(){var e=function(){function e(){I(this,e),this.panelMode="closable"}return j(e,[{key:"ngOnInit",value:function(){this.vm$=this.config.store.vm$,this.initCloseButton(),this.config.panelMode&&(this.panelMode=this.config.panelMode),this.collapse=new x.BehaviorSubject(!1),this.isCollapsed$=this.collapse.asObservable(),(0,w.isVoid)(this.config.isCollapsed)||this.collapse.next(this.config.isCollapsed)}},{key:"ngOnDestroy",value:function(){}},{key:"getGridConfig",value:function(){return{record$:this.config.store.stagingRecord$,mode$:this.config.store.mode$,fields$:this.config.store.getViewFieldsKeys$(),actions:this.config.actions,klass:"mt-2 rounded",buttonClass:"btn btn-outline-danger btn-sm",maxColumns$:(0,x.of)(4).pipe((0,M.shareReplay)(1)),sizeMap$:(0,x.of)({handset:1,tablet:2,web:3,wide:4}).pipe((0,M.shareReplay)(1))}}},{key:"initCloseButton",value:function(){var e=this;this.closeButton={onClick:function(){e.config.onClose()}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-panel"]],inputs:{config:"config"},decls:2,vars:3,consts:[[3,"close","isCollapsed$","mode","titleKey","klass",4,"ngIf"],[3,"close","isCollapsed$","mode","titleKey","klass"],["panel-body","",1,"pl-2","pr-2"],[4,"ngIf"],[3,"config"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Jf,3,6,"scrm-panel",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,cC,pk],pipes:[B.AsyncPipe],encapsulation:2}),e}(),OI=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.apply(this,arguments)}return n}(w.ActionHandler),DI=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,qv,pC,OS,Zv,Gv,qv,mk]]}),e}(),AI=function(){var e,t=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.apply(this,arguments)}return j(n,[{key:"getViewFields$",value:function(){return this.meta$.pipe((0,M.map)(function(e){return e.fields}))}},{key:"getViewFieldsKeys$",value:function(){return this.meta$.pipe((0,M.map)(function(e){if(!e.fields||!e.fields.length)return[];var t=[];return e.fields.forEach(function(e){t.push(e.name)}),t}))}},{key:"initRecord",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"detail",i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];l(h(n.prototype),"initRecord",this).call(this,e,t,i),this.setRecord(e)}}]),n}(gh);return t.\u0275fac=function(n){return(e||(e=k.\u0275\u0275getInheritedFactory(t)))(n||t)},t.\u0275prov=k.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),NI=function(){var e=function(){function e(t,n,i,r,o,a,s,l,u){I(this,e),this.recordFetchGQL=t,this.recordSaveGQL=n,this.appStateStore=i,this.languageStore=r,this.metadataStore=o,this.message=a,this.recordManager=s,this.fieldManager=l,this.recordStoreFactory=u}return j(e,[{key:"create",value:function(){return new AI(this.appStateStore,this.metadataStore,this.message,this.fieldManager,this.languageStore,this.recordStoreFactory)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(mv),k.\u0275\u0275inject(hv),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vv),k.\u0275\u0275inject(dv),k.\u0275\u0275inject(yv))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(mv),k.\u0275\u0275inject(hv),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vv),k.\u0275\u0275inject(dv),k.\u0275\u0275inject(yv))},token:e,providedIn:"root"}),e}(),RI={module:"",query:{},statistic:{id:"",data:{}},loading:!1},TI=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this,e)).fetchGQL=e,i.cache$=null,i.internalState=(0,w.deepClone)(RI),i.store=new x.BehaviorSubject(i.internalState),i.state$=i.store.asObservable(),i.statistic$=i.state$.pipe((0,M.map)(function(e){return e.statistic}),(0,M.distinctUntilChanged)()),i}return j(n,[{key:"updateState",value:function(e){l(h(n.prototype),"updateState",this).call(this,e)}}]),n}(rC);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(nC))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),PI=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"traverse",value:function(e,t,n){e.singleSeries&&e.singleSeries.forEach(function(e){t.visit(e,n)}),e.multiSeries&&e.multiSeries.forEach(function(e){e.series.forEach(function(e){t.visit(e,n)})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),BI=function(){var e=function(){function e(t,n){I(this,e),this.currencyService=t,this.preferences=n}return j(e,[{key:"toUserFormat",value:function(e){var t=parseFloat(e);if(!isFinite(t))return e;var n=this.currencyService.getUserCurrency();return this.currencyService.baseToCurrency(n.id,t).toString()}},{key:"toInternalFormat",value:function(e){var t=parseFloat(e);if(!isFinite(t))return e;var n=this.currencyService.getUserCurrency();return this.currencyService.currencyToBase(n.id,t).toString()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ug),k.\u0275\u0275inject(ah))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ug),k.\u0275\u0275inject(ah))},token:e,providedIn:"root"}),e}(),$I=function(){var e=function(){function e(t){I(this,e),this.currencyUnitConverter=t,this.map={},this.addUnitConverter("currency",t)}return j(e,[{key:"addUnitConverter",value:function(e,t){this.map[e]=t}},{key:"toUserFormat",value:function(e,t,n){if(!e)return t;var i=this.map[e];return i?i.toUserFormat(t,n):t}},{key:"toInternalFormat",value:function(e,t){if(!e)return t;var n=this.map[e];return n?n.toInternalFormat(t):t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(BI))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(BI))},token:e,providedIn:"root"}),e}(),VI=function(){var e=function(){function e(t){I(this,e),this.converter=t}return j(e,[{key:"visit",value:function(e,t){var n,i,r=null!==(n=null==t?void 0:t.dataType)&&void 0!==n?n:null,o=null!==(i=null==t?void 0:t.direction)&&void 0!==i?i:"user-unit";if(r){var a=parseFloat(e.value.toString());if(isFinite(a)){if("user-unit"===o)return void(e.value=this.converter.toUserFormat(r,a.toString()));e.value=this.converter.toInternalFormat(r,a.toString())}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject($I))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject($I))},token:e,providedIn:"root"}),e}(),UI=function(){var e=function(){function e(t,n){I(this,e),this.traverser=t,this.dataTypeMapper=n,this.registry={},this.addMapper("data-type-unit-converter",n)}return j(e,[{key:"addMapper",value:function(e,t){this.registry[e]=t}},{key:"map",value:function(e,t,n){var i,r=null!==(i=null==this?void 0:this.registry[t])&&void 0!==i?i:null;!r||this.traverser.traverse(e,r,n)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(PI),k.\u0275\u0275inject(VI))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(PI),k.\u0275\u0275inject(VI))},token:e,providedIn:"root"}),e}(),KI={module:"",query:{},statistic:{id:"",data:{}},loading:!1},zI=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e)).fetchGQL=e,o.formatter=i,o.seriesMapper=r,o.internalState=(0,w.deepClone)(KI),o.store=new x.BehaviorSubject(o.internalState),o.defaultOptions={},o.state$=o.store.asObservable(),o.statistic$=o.state$.pipe((0,M.map)(function(e){return e.statistic}),(0,M.distinctUntilChanged)()),o.loading$=o.state$.pipe((0,M.map)(function(e){return e.loading}),(0,M.distinctUntilChanged)()),o}return j(n,[{key:"setDefaultOptions",value:function(e){this.defaultOptions=e}},{key:"getDataSource",value:function(){return this.internalState.dataSource}},{key:"addNewState",value:function(e){if(e.metadata&&e.metadata.dataType){this.injectDefaultValues(e);var t=this.buildCharDataSource(e);this.updateState(Object.assign(Object.assign({},this.internalState),{statistic:e,dataSource:t,loading:!1}))}}},{key:"injectDefaultValues",value:function(e){var t=this;e.metadata.chartOptions?Object.keys(this.defaultOptions).forEach(function(n){n in e.metadata.chartOptions||(e.metadata.chartOptions[n]=t.defaultOptions[n])}):e.metadata.chartOptions=(0,w.deepClone)(this.defaultOptions)}},{key:"buildCharDataSource",value:function(e){var t=this,n=e.metadata.dataType||"",i=null,r=e.metadata&&e.metadata.digits||null;return null!==r&&(i={digits:r}),{options:e.metadata.chartOptions||{},getResults:function(){return(0,x.of)(t.buildSeriesResult(e)).pipe((0,M.shareReplay)(1))},tickFormatting:function(e){return t.formatter.toUserFormat(n,e,i)},tooltipFormatting:function(e){return t.formatter.toUserFormat(n,e,i)}}}},{key:"buildSeriesResult",value:function(e){var t=e.metadata.dataType||"",n={},i=e.data.singleSeries||null;i&&(n.singleSeries=i);var r=e.data.multiSeries||null;return r&&(n.multiSeries=r),this.seriesMapper.map(n,"data-type-unit-converter",{dataType:t}),n}},{key:"updateState",value:function(e){l(h(n.prototype),"updateState",this).call(this,e)}}]),n}(TI);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(nC),k.\u0275\u0275inject(rv),k.\u0275\u0275inject(UI))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),GI=function(){var e=function(){function e(t,n,i){I(this,e),this.fetchGQL=t,this.formatter=n,this.seriesMapper=i}return j(e,[{key:"create",value:function(){return new zI(this.fetchGQL,this.formatter,this.seriesMapper)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(nC),k.\u0275\u0275inject(rv),k.\u0275\u0275inject(UI))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(nC),k.\u0275\u0275inject(rv),k.\u0275\u0275inject(UI))},token:e,providedIn:"root"}),e}(),ZI=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ng-component"]],inputs:{config:"config",context:"context",context$:"context$"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),HI=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this)).language=e,r.factory=i,r.charts={},r.titleLabelKey="LBL_INSIGHTS",r.title="",r.messageLabelKey="LBL_CHART_NOT_FOUND",r.selectedChart="",r.chartType="",r.loading=!0,r.subs=[],r}return j(n,[{key:"ngOnInit",value:function(){var e=this;if(this.appStrings$=this.language.appStrings$,!1!==this.validateConfig()){this.context$&&this.subs.push(this.context$.subscribe(function(t){e.context=t,Object.keys(e.charts).forEach(function(n){e.charts[n].store.context=t})}));var t=this.config.options,n=t.charts;t.defaultChart&&(this.selectedChart=t.defaultChart||""),this.setupCharts(n),this.setHeaderTitle(t),this.reloadSelectedChart(),this.setupLoading(),this.setupVM(),this.setupReload()}}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"configuredCharts",get:function(){return this.chartOptions.charts||[]}},{key:"chartOptions",get:function(){return this.config.options||{}}},{key:"isConfigured",value:function(){return!(!this.config.options.charts||!this.config.options.charts.length)}},{key:"getLabelKey",value:function(e){return e.statistic.metadata&&e.statistic.metadata.labelKey||this.charts[e.query.key].labelKey}},{key:"getKey",value:function(e){return e.chartKey||e.statisticsType||""}},{key:"validateConfig",value:function(){if(!this.context||!this.context.module)return this.messageLabelKey="LBL_BAD_CONFIG_BAD_CONTEXT",!1;if(!this.config)return this.messageLabelKey="LBL_BAD_CONFIG_NO_CONFIG",!1;var e=this.config.options;return!!(e&&e.charts&&e.charts.length)||(this.messageLabelKey="LBL_BAD_CONFIG_NO_STATISTICS_KEY",!1)}},{key:"setupCharts",value:function(e){var t=this;this.selectedChart="",e.forEach(function(e){var n=t.getKey(e);!n||(t.selectedChart||(t.selectedChart=n||"",t.chartType=e.chartType),t.buildChartInfo(n,e),t.initChartStore(n,e))})}},{key:"buildChartInfo",value:function(e,t){this.charts[e]={key:e,labelKey:t.labelKey||"",chartType:t.chartType,statisticsType:t.statisticsType,store:this.factory.create(),reload:!0}}},{key:"initChartStore",value:function(e,t){this.charts[e].store.init(this.context.module,{key:t.statisticsType,context:Object.assign({},this.context)},!1),this.charts[e].store.setDefaultOptions(t.chartOptions)}},{key:"setHeaderTitle",value:function(e){if(this.config.labelKey&&(this.titleLabelKey=this.config.labelKey),e.headerTitle){if(!this.charts||!this.charts[this.selectedChart]||!this.charts[this.selectedChart].labelKey)return;this.titleLabelKey=this.charts[this.selectedChart].labelKey}this.title=this.language.getFieldLabel(this.titleLabelKey)}},{key:"onChartSelect",value:function(){this.dataSource=null,this.chartType=this.charts[this.selectedChart].chartType,this.reloadSelectedChart(!1)}},{key:"setupVM",value:function(){var e=this,t=[];Object.keys(this.charts).forEach(function(n){return t.push(e.charts[n].store.state$)}),this.vm$=(0,x.combineLatest)([(0,x.combineLatest)(t),this.language.appStrings$]).pipe((0,M.map)(function(t){var n=v(t,2),i=n[0],r=n[1];return{statistics:e.mapChartData(i),appStrings:r}}))}},{key:"mapChartData",value:function(e){var t=this,n={};return e.forEach(function(e){!e.query.key||(n[e.query.key]=e,t.charts[e.query.key].labelKey=t.getLabelKey(e))}),n}},{key:"setupReload",value:function(){var e=this;!this.config.reload$||this.subs.push(this.config.reload$.subscribe(function(){!0!==e.loading&&(e.loading=!0,Object.keys(e.charts).forEach(function(t){e.charts[t].reload=!0}),e.reloadSelectedChart())}))}},{key:"setupLoading",value:function(){var e=this,t=[];Object.keys(this.charts).forEach(function(n){return t.push(e.charts[n].store.loading$)}),this.loading$=(0,x.combineLatest)(t).pipe((0,M.map)(function(t){if(!t||t.length<1)return e.loading=!1,!1;var n=!1;return t.forEach(function(e){n=n||e}),e.loading=n,n})),this.subs.push(this.loading$.subscribe())}},{key:"reloadSelectedChart",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!this.charts||!this.charts[this.selectedChart]||!this.charts[this.selectedChart].store||this.charts[this.selectedChart].store.load(t=t&&!this.charts[this.selectedChart].reload).pipe((0,M.take)(1),(0,M.tap)(function(){var t,n,i;e.dataSource=null!==(i=null===(n=null===(t=e.charts[e.selectedChart])||void 0===t?void 0:t.store)||void 0===n?void 0:n.getDataSource())&&void 0!==i?i:null,e.charts[e.selectedChart].reload=!1})).subscribe()}}]),n}(ZI);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(GI))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["chart-sidebar-widget"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[3,"title",4,"ngIf"],[3,"title"],["widget-body",""],[1,"widget-background","chart-sidebar-widget"],[1,"mb-2","ml-1","mr-1"],[1,"container-fluid"],["class","row",4,"ngIf"],[1,"row","mt-3","chart-widget"],[1,"col","pl-0","pr-0","pb-1","pt-1","d-flex","justify-content-center"],[1,"flex-grow-1"],[4,"ngIf"],["class","chart-loading",3,"m-5",4,"ngIf"],["class","lead text-center pt-3",4,"ngIf"],[1,"row"],[1,"col","pr-2","pl-2"],[1,"login-form","mb-0","mt-2","w-100"],["name","chart",1,"m-0","w-100",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"dataSource","type",4,"ngIf"],[3,"dataSource","type"],[1,"chart-loading"],[3,"overlay"],[1,"lead","text-center","pt-3"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,ap,12,5,"scrm-widget-panel",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,uC,V.\u0275NgNoValidate,V.NgControlStatusGroup,V.NgForm,V.SelectControlValueAccessor,V.NgControlStatus,V.NgModel,B.NgForOf,V.NgSelectOption,V.\u0275NgSelectMultipleOption,yg,Pk],pipes:[B.AsyncPipe],encapsulation:2}),e}(),qI=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,mC,V.FormsModule,bg,Bk]]}),e}(),WI=function(){var e=function(){function e(t){I(this,e),this.listStoreFactory=t,this.recordList=t.create()}return j(e,[{key:"clear",value:function(){this.recordList.clear(),this.recordList=null}},{key:"clearAuthBased",value:function(){this.recordList.clearAuthBased()}},{key:"init",value:function(e){this.recordList.init("history",!1,"list_max_entries_per_subpanel"),this.initViewContext(e)}},{key:"load",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.recordList.load(e)}},{key:"initSearchCriteria",value:function(e,t){this.recordList.criteria={preset:{type:"history-timeline",params:{parentModule:this.viewContext.module,parentId:this.viewContext.id,offset:e,limit:t}}}}},{key:"initViewContext",value:function(e){this.viewContext=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(mh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),QI=function(){var e=function(){function e(t){I(this,e),this.listStoreFactory=t}return j(e,[{key:"create",value:function(){return new WI(this.listStoreFactory)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(mh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(mh))},token:e,providedIn:"root"}),e}(),YI=function(){var e=function(){function e(t){I(this,e),this.historyTimelineStoreFactory=t,this.loading=!1,this.cache=[],this.dataStream=new x.BehaviorSubject(this.cache),this.dataStream$=this.dataStream.asObservable(),this.defaultPageSize=10}return j(e,[{key:"init",value:function(e){this.store=this.historyTimelineStoreFactory.create(),this.store.init(e)}},{key:"fetchTimelineEntries",value:function(e){var t=this;if(!0!==this.loading)return!0===e&&(this.cache.length=0),this.store.initSearchCriteria(this.cache.length,this.defaultPageSize),this.loading=!0,this.store.load(!1).pipe((0,M.take)(1)).subscribe(function(e){t.loading=!1;var n=e.records;(0,w.emptyObject)(n)||Object.keys(n).forEach(function(e){t.cache.push(t.buildTimelineEntry(n[e]))}),t.dataStream.next(S(t.cache))}),this.dataStream$}},{key:"getActivityGridColor",value:function(e){return{calls:"yellow",tasks:"green",meetings:"blue",notes:"orange",audit:"purple",history:"purple"}[e]||"yellow"}},{key:"buildTimelineEntry",value:function(e){var t=e.module,n=e.attributes.module_name;"audit"===t&&(n="History");var i={module:t,icon:n,color:this.getActivityGridColor(e.module),title:{type:"varchar",value:e.attributes.name},user:{type:"varchar",value:e.attributes.assigned_user_name.user_name},date:{type:"datetime",value:e.attributes.date_end},record:e};return"audit"===t&&(i.description={type:"html",value:e.attributes.description}),i}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(QI))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),XI=function(){var e=function(){function e(t){I(this,e),this.historyTimelineStoreFactory=t}return j(e,[{key:"create",value:function(){return new YI(this.historyTimelineStoreFactory)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(QI))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(QI))},token:e,providedIn:"root"}),e}(),JI=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this)).historyTimelineAdapterFactory=e,o.languageStore=i,o.navigation=r,o.subscription=new x.Subscription,o}return j(n,[{key:"ngOnInit",value:function(){this.adapter=this.historyTimelineAdapterFactory.create(),this.adapter.init(this.context)}},{key:"ngAfterViewInit",value:function(){var e=this,t=[];t.push(this.config.reload$),t.push(this.config.subpanelReload$);var n=["history","activities"],i=(0,x.combineLatest)(t).pipe((0,M.map)(function(e){var t=v(e,2),i=t[0],r=t[1];return i||!!r&&n.some(function(e){return!!r[e]})})).pipe((0,M.debounce)(function(){return(0,x.timer)(1e3)}));this.subscription.add(i.subscribe(function(t){t&&e.adapter.fetchTimelineEntries(!0)}))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"getHeaderLabel",value:function(){return this.languageStore.getFieldLabel("LBL_QUICK_HISTORY")}},{key:"onScroll",value:function(){if(this.adapter){var e=this.virtualScroll.measureScrollOffset("bottom");0===(0,K.floor)(e)&&this.adapter.fetchTimelineEntries(!1)}}},{key:"redirectLink",value:function(e,t){if("audit"!==e)return this.navigation.getRecordRouterLink(e,t)}}]),n}(ZI);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(XI),k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(qy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-history-timeline-widget"]],viewQuery:function(e,t){var n;(1&e&&k.\u0275\u0275viewQuery(ae.N7,5),2&e)&&(k.\u0275\u0275queryRefresh(n=k.\u0275\u0275loadQuery())&&(t.virtualScroll=n.first))},features:[k.\u0275\u0275ProvidersFeature([YI]),k.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"title"],["widget-body","",4,"ngIf"],["widget-body",""],[1,"widget-background","history-timeline","p-2","pt-2"],["class","d-flex record-thread-loading justify-content-center",4,"ngIf"],["itemSize","100",1,"history-timeline-viewport",3,"ngClass","scroll"],["labelKey","LBL_NO_DATA",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-flex","record-thread-loading","justify-content-center"],[3,"overlay"],["labelKey","LBL_NO_DATA"],[3,"class",4,"ngIf"],[1,""],[1,"circle"],[1,"d-flex","justify-content-center","align-items-center","h-100","history-timeline-image"],[3,"image"],[1,"d-flex","justify-content-center","h-100"],[1,"connector","mt-3"],[1,"flex-grow-1"],[1,"card"],[1,"card-body","p-1","pr-2","pl-2"],[1,"card-title","text-break","history-timeline-entry-title"],[3,"routerLink",4,"ngIf"],[4,"ngIf"],["class","card-text history-timeline-entry-description",4,"ngIf"],[1,"card-text","history-timeline-entry-user","text-uppercase"],[1,"text-break"],["mode","list",3,"type","field","record"],[1,"card-text","text-break","history-timeline-entry-date"],[1,"font-italic"],[3,"routerLink"],[1,"card-text","history-timeline-entry-description"],["mode","detail",3,"type","field","record"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"scrm-widget-panel",0),k.\u0275\u0275template(1,mp,6,6,"div",1),k.\u0275\u0275pipe(2,"async"),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275property("title",t.getHeaderLabel()),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(2,2,null==t.adapter?null:t.adapter.dataStream$)))},directives:[uC,B.NgIf,ae.N7,ae.xd,B.NgClass,B.NgForOf,Pk,ug,Vv,ES,Ar.RouterLinkWithHref],pipes:[B.AsyncPipe],encapsulation:2}),e}(),ex=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,ae.Cl,Uv,LS,mC,Bk,Gv,cg,Ar.RouterModule]]}),e}(),tx=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this)).language=e,r.sytemConfig=i,r.panelMode="none",r.subs=[],r}return j(n,[{key:"ngOnInit",value:function(){var e=this;this.options=(this.config.options||{}).recordThread||null,this.options&&(this.initPanelMode(),this.initFilters$(),this.initPresetFields$(),this.context$&&this.context$.subscribe()&&this.subs.push(this.context$.subscribe(function(t){e.context=t})),this.recordThreadConfig=this.getConfig())}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"getHeaderLabel",value:function(){return this.getLabel(this.config.labelKey)||""}},{key:"getLabel",value:function(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}},{key:"getConfig",value:function(){var e,t={filters$:this.filters$,presetFields$:this.presetFields$,module:this.options.module,klass:this.options.class||"",maxListHeight:null!==(e=this.options.maxListHeight)&&void 0!==e?e:350,direction:this.options.direction||"asc",create:!!this.options.create,itemConfig:{collapsible:this.options.item.collapsible||!1,collapseLimit:this.options.item.collapseLimit||null,klass:this.options.item.itemClass||"",dynamicClass:this.options.item.dynamicClass||[],metadata:{}},createConfig:{collapsible:!1,metadata:{}}};return this.setupItemMetadata(t.itemConfig.metadata,this.options.item.layout),this.setupItemMetadata(t.createConfig.metadata,this.options.create.layout),t}},{key:"setupItemMetadata",value:function(e,t){var n;t&&t.header&&(e.headerLayout=(0,w.deepClone)(t.header)),t&&t.body&&(e.bodyLayout=(0,w.deepClone)(t.body)),t&&t.actions&&(e.actions=(0,w.deepClone)(t.actions)),t&&t.fields&&(e.fields=(0,w.deepClone)(t.fields)),null!==(null!==(n=null==t?void 0:t.collapseActions)&&void 0!==n?n:null)&&(e.collapseActions=null==t?void 0:t.collapseActions)}},{key:"initPanelMode",value:function(){var e,t,n,i,r=this.sytemConfig.getConfigValue("ui"),o=null!==(t=null===(e=null==r?void 0:r.widget)||void 0===e?void 0:e.allowCollapse)&&void 0!==t?t:null,a=null!==(i=null===(n=null==this?void 0:this.config)||void 0===n?void 0:n.allowCollapse)&&void 0!==i?i:null,s="none";null!==o&&((0,w.isTrue)(o)?s="collapsible":(0,w.isFalse)(o)&&(s="none")),null!==a&&((0,w.isTrue)(a)?s="collapsible":(0,w.isFalse)(a)&&(s="none")),this.panelMode=s}},{key:"initFilters$",value:function(){var e=this;if(this.options&&this.options.filters&&this.context$){var t=this.options.filters.parentFilters||{},n=(0,x.of)({}).pipe((0,M.shareReplay)());Object.keys(t).length>0&&(n=this.context$.pipe((0,M.filter)(function(e){var t=e&&e.record||{};return!(!t.attributes||!Object.keys(t.attributes).length)}))),this.filters$=n.pipe((0,M.map)(function(t){var n={filters:{}};e.initParentFilters(t,n);var i=e.options.filters.static||{};return n.filters=Object.assign(Object.assign({},n.filters),i),e.options.filters.orderBy&&(n.orderBy=e.options.filters.orderBy),e.options.filters.sortOrder&&(n.sortOrder=e.options.filters.sortOrder),n}),(0,M.distinctUntilChanged)())}}},{key:"initPresetFields$",value:function(){var e=this;!this.options||!this.options.create||!this.options.create.presetFields||!this.context$||(this.presetFields$=this.context$.pipe((0,M.map)(function(t){var n=e.initParentValues(t),i=e.options.create.presetFields.static||{};return Object.assign(Object.assign({},n),i)}),(0,M.distinctUntilChanged)()))}},{key:"initParentFilters",value:function(e,t){var n=this.options.filters.parentFilters||{};!e||!e.record||!n||Object.keys(n).forEach(function(i){var r=e.record.attributes[i]||"";!r||(t.filters[n[i]]={field:n,operator:"=",values:[r]})})}},{key:"initParentValues",value:function(e){var t=this.options.create.presetFields.parentValues||{};if(e&&e.record&&t){var n={};return Object.keys(t).forEach(function(i){var r=e.record.attributes[i]||"";!r||(n[t[i]]=r)}),n}}}]),n}(ZI);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(Gm))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-thread-sidebar-widget"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[[3,"mode","title"],["widget-body","",1,"record-thread-sidebar-widget"],[4,"ngIf"],[1,"p-3","widget-message"],["labelKey","LBL_BAD_CONFIG"],[3,"config"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"scrm-widget-panel",0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275template(2,hp,3,0,"ng-container",2),k.\u0275\u0275template(3,vp,2,1,"ng-container",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275property("mode",t.panelMode)("title",t.getHeaderLabel()),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",!t.options),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.options))},directives:[uC,B.NgIf,zv,xk],encapsulation:2}),e}(),nx=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,LS,mC,Gv,$k,Tk]]}),e}(),ix=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this)).language=e,i.subs=[],i}return j(n,[{key:"ngOnInit",value:function(){var e=this;this.options=(this.config.options||{}).sidebarStatistic||null,this.context$&&this.subs.push(this.context$.subscribe(function(t){e.context=t}))}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"getHeaderLabel",value:function(){return this.getLabel(this.config.labelKey)||""}},{key:"getLabel",value:function(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}},{key:"getGridConfig",value:function(){return{rowClass:"statistics-sidebar-widget-row",columnClass:"statistics-sidebar-widget-col",layout:this.options,widgetConfig:{reload$:this.config.reload$},queryArgs:{module:this.context.module,context:this.context,params:{}}}}}]),n}(ZI);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-statistics-sidebar-widget"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[3,"title"],["widget-body","",1,"p-3"],[3,"config"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"scrm-widget-panel",0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275element(2,"scrm-grid-widget",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275property("title",t.getHeaderLabel()),k.\u0275\u0275advance(2),k.\u0275\u0275property("config",t.getGridConfig()))},directives:[uC,lC],encapsulation:2}),e}(),rx=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,LS,eg,mC,hC,Gv]]}),e}(),ox=[ex,qI,rx],ax={"history-timeline":JI,chart:HI,statistics:ix,"record-thread":tx},sx=function(){var e=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.call(this)}return j(n,[{key:"initDefault",value:function(){var e=this;Object.keys(ax).forEach(function(t){e.register("default",t,ax[t])})}}]),n}(w.BaseComponentRegistry);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),lx=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this)).registry=e,i}return j(n,[{key:"componentType",get:function(){var e,t=null!==(e=this.context.module)&&void 0!==e?e:"default";return this.registry.get(t,this.type)}},{key:"getErrorMessage",value:function(){return this.type&&this.config?this.componentType?"LBL_BAD_CONFIG":"LBL_WIDGET_NOT_FOUND":"LBL_CONFIG_NO_CONFIG"}}]),n}(ZI);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(sx))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-sidebar-widget"]],inputs:{type:"type"},features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:2,consts:[["class","d-flex mb-4 mt-4 justify-content-center",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[1,"d-flex","mb-4","mt-4","justify-content-center"],[1,"lead"],[3,"labelKey"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,gp,3,1,"div",0),k.\u0275\u0275template(1,bp,1,6,"ndc-dynamic",1)),2&e&&(k.\u0275\u0275property("ngIf",!(t.type&&t.config&&t.componentType)),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.type&&t.config&&t.componentType))},directives:[B.NgIf,zv,re,ne],encapsulation:2}),e}(),ux=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule].concat(ox,[oe,Gv])]}),e}(),cx=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u){var c;return I(this,n),(c=t.call(this,r,o,a,s,i,l,u)).store=e,c.language=i,c.actionManager=r,c.asyncActionService=o,c.message=a,c.confirmation=s,c.selectModalService=l,c.metadata=u,c}return j(n,[{key:"getActions",value:function(e){var t=this;return(0,x.combineLatest)([this.store.metadata$,this.language.vm$,this.store.criteria$]).pipe((0,M.map)(function(e){var n=v(e,1)[0];return n?t.parseModeActions(n.top_buttons,"list"):[]}))}},{key:"buildActionData",value:function(e,t){var n,i;return{subpanelMeta:null===(n=this.store)||void 0===n?void 0:n.metadata,module:e.module||(null===(i=this.store.metadata)||void 0===i?void 0:i.module),parentModule:this.store.parentModule,parentId:this.store.parentId,store:this.store,action:e}}},{key:"getMode",value:function(){return"list"}},{key:"getModuleName",value:function(e){var t,n;return null===(n=null===(t=this.store)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.module}},{key:"reload",value:function(e,t,n){this.store.load(!1).pipe((0,M.take)(1)).subscribe()}}]),n}(bk);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Lw),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(nw),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),dx=function(){var e=function(){function e(t,n,i,r,o,a,s){I(this,e),this.language=t,this.actionManager=n,this.asyncActionService=i,this.message=r,this.confimation=o,this.selectModalService=a,this.metadata=s}return j(e,[{key:"create",value:function(e){return new cx(e,this.language,this.actionManager,this.asyncActionService,this.message,this.confimation,this.selectModalService,this.metadata)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(nw),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(nw),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},token:e,providedIn:"root"}),e}(),fx=function(){var e=function(){function e(t){I(this,e),this.store=t}return j(e,[{key:"getConfig",value:function(){var e=this;return{panelMode:"collapsible",collapseOnSearch:!0,savedFilterEdit:!1,module:this.store.recordList.getModule(),displayHeader:!1,filter$:this.store.recordList.openFilter$,savedFilters$:this.store.filterList.records$,searchFields$:this.store.searchMetadata$.pipe((0,M.map)(function(t){var n;if(e.store.metadata.searchdefs)return e.store.metadata.searchdefs;if(!t)return{};var i="advanced";return(null===(n=null==t?void 0:t.layout)||void 0===n?void 0:n.advanced)||(i="basic"),null==t?void 0:t.layout[i]})),listFields:[],onClose:function(){},onSearch:function(){e.store.searchFilter()},updateFilter:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i={};i[t.key]=t,e.store.setFilters(i,n)},resetFilter:function(t){e.store.resetFilters(t)},addSavedFilter:function(e){},removeSavedFilter:function(e){},setOpenFilter:function(e){}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Lw))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),px=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"create",value:function(e){return new fx(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),mx=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.apply(this,arguments)}return j(n,[{key:"checkRecordAccess",value:function(e){var t,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=null!==(n=(null!==(t=e.record)&&void 0!==t?t:{}).acls)&&void 0!==n?n:[];if(!o||!o.length)return!1;var a=null!==(i=e.action)&&void 0!==i?i:null;return this.checkAccess(a,o,r)}}]),n}(w.ActionHandler),hx=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="async-process",e.modes=w.ALL_VIEW_MODES,e}return j(n,[{key:"run",value:function(e){}},{key:"shouldDisplay",value:function(e){var t,n,i=null!==(n=null===(t=null==e?void 0:e.action)||void 0===t?void 0:t.acl)&&void 0!==n?n:[];return!i.length||this.checkRecordAccess(e,i)}}]),n}(mx);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),vx=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this)).async=e,e.modes.forEach(function(t){return i.actions[t][e.key]=e}),i}return n}(Mg);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(hx))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(hx))},token:e,providedIn:"root"}),e}(),gx=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u){var c;return I(this,n),(c=t.call(this,i,r,o,a,s,l,u)).store=e,c.actionManager=i,c.asyncActionService=r,c.message=o,c.confirmation=a,c.language=s,c.selectModalService=l,c.metadata=u,c}return j(n,[{key:"getActions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,x.combineLatest)([this.store.metadata$.pipe((0,M.map)(function(e){return e.lineActions})),(0,x.of)("list").pipe((0,M.shareReplay)())]).pipe((0,M.map)(function(n){var i=v(n,2),r=i[0],o=i[1];return e.parseModeActions(r,o,t)}))}},{key:"buildActionData",value:function(e,t){return{record:t&&t.record||null,store:this.store,action:e}}},{key:"getMode",value:function(){return"list"}},{key:"getModuleName",value:function(e){return this.store.metadata.module}},{key:"reload",value:function(e,t,n){this.store.load(!1).pipe((0,M.take)(1)).subscribe(),this.store.loadAllStatistics(!1).pipe((0,M.take)(1)).subscribe()}},{key:"buildActionInput",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=this.store.metadata,o=r.collection_list||null,a=i&&i.module||n,s=r.get_subpanel_data;return o&&o[a]&&o[a].get_subpanel_data&&(s=o[a].get_subpanel_data),s&&e&&e.params&&e.params.linkFieldMapping&&Object.keys(e.params.linkFieldMapping).some(function(t){if(s.includes(t))return s=e.params.linkFieldMapping[t],!0}),{action:t,module:n,id:i&&i.record&&i.record.id||"",payload:{baseModule:this.store.parentModule,baseRecordId:this.store.parentId,linkField:s,recordModule:a,relateModule:this.store.metadata.module,relateRecordId:i&&i.record&&i.record.id||""}}}}]),n}(bk);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Lw),k.\u0275\u0275inject(vx),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Lw),k.\u0275\u0275inject(vx),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},token:e,providedIn:"root"}),e}(),yx=function(){var e=function(){function e(t,n,i,r,o,a,s){I(this,e),this.actionManager=t,this.asyncActionService=n,this.message=i,this.confirmation=r,this.language=o,this.selectModalService=a,this.metadata=s}return j(e,[{key:"create",value:function(e){return new gx(e,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.language,this.selectModalService,this.metadata)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(vx),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(vx),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},token:e,providedIn:"root"}),e}(),bx=function(){var e=function(){function e(t,n,i,r){I(this,e),this.store=t,this.lineActionsAdapterFactory=n,this.preferences=i,this.systemConfigs=r}return j(e,[{key:"getTable",value:function(){var e,t,n=this;return{showHeader:!1,showFooter:!0,module:this.store.metadata.headerModule,columns:this.getColumns(),lineActions:this.getLineActions(),sort$:this.store.recordList.sort$,maxColumns$:(0,x.of)(5),loading$:this.store.recordList.loading$,dataSource:this.store.recordList,pagination:this.store.recordList,toggleRecordSelection:function(e){n.store.recordList.toggleSelection(e)},updateSorting:function(e,t){n.store.recordList.updateSorting(e,t);var i=n.store.parentModule,r=n.store.recordList.getModule();n.preferences.setUi(i,r+"-subpanel-sort",{orderBy:e,sortOrder:t})},maxListHeight:null!==(e=this.preferences.getUserPreference("subpanel_max_height"))&&void 0!==e?e:this.systemConfigs.getConfigValue("subpanel_max_height"),paginationType:null!==(t=this.preferences.getUserPreference("subpanel_pagination_type"))&&void 0!==t?t:this.systemConfigs.getConfigValue("subpanel_pagination_type"),loadMore:function(){var e,t=null!==(e=n.preferences.getUserPreference("list_max_entries_per_subpanel"))&&void 0!==e?e:n.systemConfigs.getConfigValue("list_max_entries_per_subpanel"),i=n.store.recordList.getPagination(),r=Number(i.pageSize||0)+Number(t);n.store.recordList.setPageSize(r),n.store.recordList.updatePagination(i.current)},allLoaded:function(){var e=n.store.recordList.getPagination();return!!e&&(Number(e.pageLast)>=Number(e.total)||Number(e.pageSize)>=Number(e.total))}}}},{key:"getColumns",value:function(){return this.store.metadata$.pipe((0,M.map)(function(e){return e.columns}))}},{key:"getLineActions",value:function(){return this.lineActionsAdapterFactory.create(this.store)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Lw),k.\u0275\u0275inject(yx),k.\u0275\u0275inject(ah),k.\u0275\u0275inject(Gm))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Sx=function(){var e=function(){function e(t,n,i){I(this,e),this.lineActionsAdapterFactory=t,this.preferences=n,this.systemConfigs=i}return j(e,[{key:"create",value:function(e){return new bx(e,this.lineActionsAdapterFactory,this.preferences,this.systemConfigs)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(yx),k.\u0275\u0275inject(ah),k.\u0275\u0275inject(Gm))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(yx),k.\u0275\u0275inject(ah),k.\u0275\u0275inject(Gm))},token:e,providedIn:"root"}),e}(),Cx=function(){var e=function(){function e(t,n,i,r,o,a,s){I(this,e),this.actionManager=t,this.languages=n,this.tableAdapterFactory=i,this.preferences=r,this.systemConfigs=o,this.filterAdapterFactory=a,this.actionAdapterFactory=s}return j(e,[{key:"ngOnInit",value:function(){var e,t,n,i,r,o,a,s=this;if(this.buildAdapters(),this.maxColumns$&&(this.tableConfig.maxColumns$=this.maxColumns$),(null===(t=null===(e=this.store)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.max_height)&&(this.tableConfig.maxListHeight=this.store.metadata.max_height),!(null===(n=this.tableConfig)||void 0===n?void 0:n.maxListHeight)){var l=null!==(i=this.systemConfigs.getConfigValue("ui"))&&void 0!==i?i:{};this.tableConfig.maxListHeight=l.subpanel_max_height}this.tableConfig.paginationType=null!==(a=null===(o=null===(r=null==this?void 0:this.store)||void 0===r?void 0:r.metadata)||void 0===o?void 0:o.pagination_type)&&void 0!==a?a:this.tableConfig.paginationType;var u=this.store.parentModule,c=this.store.recordList.getModule(),d=this.preferences.getUi(u,c+"-subpanel-sort");d&&this.store.recordList.updateSorting(d.orderBy,d.sortOrder),this.closeButton={onClick:function(){s.onClose&&s.onClose()}}}},{key:"getActionContext",value:function(){var e,t,n;return{module:null!==(n=null===(t=null===(e=this.store)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.module)&&void 0!==n?n:""}}},{key:"buildAdapters",value:function(){this.adapter=this.tableAdapterFactory.create(this.store),this.tableConfig=this.adapter.getTable(),this.filterAdapter=this.filterAdapterFactory.create(this.store),this.filterConfig=this.filterAdapter.getConfig(),this.actionsAdapter=this.actionAdapterFactory.create(this.store)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(nw),k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(Sx),k.\u0275\u0275directiveInject(ah),k.\u0275\u0275directiveInject(Gm),k.\u0275\u0275directiveInject(px),k.\u0275\u0275directiveInject(dx))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-subpanel"]],inputs:{filterConfig:"filterConfig",store:"store",maxColumns$:"maxColumns$",onClose:"onClose"},features:[k.\u0275\u0275ProvidersFeature([bx])],decls:9,vars:9,consts:[["mode","closable","bodyPadding","0",3,"title","close","klass"],["panel-icon-area","",1,"subpanel-icon","pl-1"],[3,"image"],["panel-header-button",""],["buttonClass","btn btn-sm btn-outline-light",3,"config","actionContext","actionLimitConfig"],["panel-body",""],[3,"config",4,"ngIf"],[3,"config"]],template:function(e,t){var n;(1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"scrm-panel",0),k.\u0275\u0275elementStart(2,"span",1),k.\u0275\u0275element(3,"scrm-image",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(4,"span",3),k.\u0275\u0275element(5,"scrm-action-group-menu",4),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(6,"div",5),k.\u0275\u0275template(7,Sp,1,1,"scrm-list-filter",6),k.\u0275\u0275element(8,"scrm-table",7),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e)&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("title",t.store.getTitle())("close",t.closeButton)("klass",null!==(n="subpanel-"+(null==t.store||null==t.store.metadata?null:t.store.metadata.name))&&void 0!==n?n:""),k.\u0275\u0275advance(2),k.\u0275\u0275property("image",t.store.getIcon()),k.\u0275\u0275advance(2),k.\u0275\u0275property("config",t.actionsAdapter)("actionContext",t.getActionContext())("actionLimitConfig","subpanelview_actions_limits"),k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",t.store.showFilter),k.\u0275\u0275advance(1),k.\u0275\u0275property("config",t.tableConfig))},directives:[cC,Vv,Dv,B.NgIf,Hw,MI],encapsulation:2}),e}(),kx=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Z.NgbModule,Uv,pC,Ar.RouterModule,Qv,eI,_I,tg]]}),e}(),wx=function(){var e=function(){function e(t,n,i,r){I(this,e),this.languageStore=t,this.maxColumnCalculator=n,this.localStorage=i,this.preferences=r,this.isCollapsed=!1,this.toggleIcon="arrow_down_filled",this.languages$=this.languageStore.vm$,this.openSubpanels=[]}return j(e,[{key:"ngOnInit",value:function(){var e,t,n,i,r=this,o=null!==(t=null===(e=null==this?void 0:this.config)||void 0===e?void 0:e.parentModule)&&void 0!==t?t:"default";this.isCollapsed=(0,w.isTrue)(null!==(n=this.preferences.getUi(o,"subpanel-container-collapse"))&&void 0!==n&&n),this.openSubpanels=null!==(i=this.preferences.getUi(o,"subpanel-container-open-subpanels"))&&void 0!==i?i:[],this.vm$=this.config.subpanels$.pipe((0,M.map)(function(e){return{subpanels:e}}),(0,M.tap)(function(e){!e||!Object.keys(e).length||!r.openSubpanels||r.openSubpanels.length<1||r.openSubpanels.forEach(function(t){var n=e.subpanels[t];!n||n.show||(n.show=!0,n.load().pipe((0,M.take)(1)).subscribe())})})),this.maxColumns$=this.getMaxColumns()}},{key:"getMaxColumns",value:function(){return this.maxColumnCalculator.getMaxColumns(this.config.sidebarActive$)}},{key:"toggleSubPanels",value:function(){var e,t;this.isCollapsed=!this.isCollapsed,this.toggleIcon=this.isCollapsed?"arrow_up_filled":"arrow_down_filled";var n=null!==(t=null===(e=null==this?void 0:this.config)||void 0===e?void 0:e.parentModule)&&void 0!==t?t:"default";this.preferences.setUi(n,"subpanel-container-collapse",this.isCollapsed)}},{key:"showSubpanel",value:function(e,t){var n,i;t.show=!t.show,t.show?(this.openSubpanels.includes(e)||this.openSubpanels.push(e),t.load().pipe((0,M.take)(1)).subscribe()):this.openSubpanels=this.openSubpanels.filter(function(t){return t!=e});var r=null!==(i=null===(n=null==this?void 0:this.config)||void 0===n?void 0:n.parentModule)&&void 0!==i?i:"default";this.preferences.setUi(r,"subpanel-container-open-subpanels",this.openSubpanels)}},{key:"getCloseCallBack",value:function(e,t){var n=this;return function(){return n.showSubpanel(e,t)}}},{key:"getGridConfig",value:function(e){if(!e.metadata||!e.metadata.insightWidget)return{layout:null};var t=e.getWidgetLayout();return t.rows.forEach(function(t){!t.cols||!t.cols.length||t.cols.forEach(function(t){if(t.statistic){var n=e.getStatistic(t.statistic);n&&(t.store=n)}})}),{rowClass:"statistics-sidebar-widget-row",columnClass:"statistics-sidebar-widget-col",layout:t,widgetConfig:{},queryArgs:{module:e.metadata.name,context:{module:e.parentModule,id:e.parentId},params:{subpanel:e.metadata.name}}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(vb),k.\u0275\u0275directiveInject(nh),k.\u0275\u0275directiveInject(ah))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-subpanel-container"]],inputs:{config:"config"},features:[k.\u0275\u0275ProvidersFeature([vb])],decls:2,vars:3,consts:[[4,"ngIf"],["activeIds","sub-panel-buttons",1,"sub-panel-banner"],["accordion","ngbAccordion"],["id","sub-panel-buttons"],["ngbPanelHeader",""],["ngbPanelContent",""],["id","sub-panels"],[4,"ngFor","ngForOf"],[1,"clickable",3,"click"],[1,"d-flex","align-items-center","justify-content-between"],["labelKey","LBL_SELECT_SUBPANEL_BANNER"],["aria-controls","collapseShowSubPanels",1,"float-right",3,"image"],["id","collapseShowSubPanels",3,"ngbCollapse"],[1,"row","insight-panel"],["class","col-xs-6 col-sm-3 col-md-2 insight-panel-card border-insight",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-xs-6","col-sm-3","col-md-2","insight-panel-card","border-insight",3,"ngClass","click"],[3,"config"],["class","sub-panel",3,"maxColumns$","store","filterConfig","onClose",4,"ngIf"],[1,"sub-panel",3,"maxColumns$","store","filterConfig","onClose"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Mp,8,1,"ng-container",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,Z.NgbAccordion,Z.NgbPanel,Z.NgbPanelHeader,Z.NgbPanelContent,B.NgForOf,zv,Vv,Z.NgbCollapse,B.NgClass,lC,Cx],pipes:[B.AsyncPipe,B.KeyValuePipe],encapsulation:2}),e}(),Ix=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Z.NgbModule,Uv,Ar.RouterModule,kx,eg,LS,hC,Gv]]}),e}(),xx=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this)).language=e,r.factory=i,r.statistics={},r.loading=!0,r.subs=[],r}return j(n,[{key:"ngOnInit",value:function(){var e=this;if(this.context&&this.context.module)if(this.config)if(this.config.options&&this.config.options.statistics&&this.config.options.statistics.length){this.context$&&this.subs.push(this.context$.subscribe(function(t){e.context=t}));var t=[],n=[];this.config.options.statistics.forEach(function(i){!i.type||(e.statistics[i.type]={labelKey:i.labelKey||"",endLabelKey:i.endLabelKey||"",hideValueIfEmpty:i.hideValueIfEmpty||!1,type:i.type,store:e.factory.create()},e.statistics[i.type].store.init(e.context.module,{key:i.type,context:Object.assign({},e.context)}).pipe((0,M.take)(1)).subscribe(),t.push(e.statistics[i.type].store.state$),n.push(e.statistics[i.type].store.loading$))}),this.loading$=(0,x.combineLatest)(n).pipe((0,M.map)(function(t){if(!t||t.length<1)return e.loading=!1,!1;var n=!0;return t.forEach(function(e){n=n&&e}),e.loading=n,n})),this.subs.push(this.loading$.subscribe()),this.vm$=(0,x.combineLatest)([(0,x.combineLatest)(t),this.language.appStrings$]).pipe((0,M.map)(function(t){var n=v(t,2),i=n[0],r=n[1],o={};return i.forEach(function(t){o[t.query.key]=t,e.statistics[t.query.key].labelKey=e.getMetadataEntry(t,"labelKey"),e.statistics[t.query.key].endLabelKey=e.getMetadataEntry(t,"endLabelKey")}),{statistics:o,appStrings:r}})),this.config.reload$&&this.subs.push(this.config.reload$.subscribe(function(){!1===e.loading&&(e.loading=!0,e.config.options.statistics.forEach(function(t){!t.type||!e.statistics[t.type]||!e.statistics[t.type].store||e.statistics[t.type].store.load(!1).pipe((0,M.take)(1)).subscribe()}))}))}else this.messageLabelKey="LBL_CONFIG_NO_STATISTICS_KEY";else this.messageLabelKey="LBL_CONFIG_NO_CONFIG";else this.messageLabelKey="LBL_CONFIG_BAD_CONTEXT"}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"shouldHide",value:function(e,t){return this.hasLoaded(e)&&this.isValueEmpty(e)&&!0===t.hideIfEmpty}},{key:"hasLoaded",value:function(e){return!e.loading}},{key:"isValueEmpty",value:function(e){var t,n,i,r,o,a=null!==(i=null===(n=null===(t=null==e?void 0:e.statistic)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.emptyValueString)&&void 0!==i?i:null;if(null!==a)return!0;var s=null!==(o=null===(r=null==e?void 0:e.field)||void 0===r?void 0:r.value)&&void 0!==o?o:null;return!s&&a===s}},{key:"getMetadataEntry",value:function(e,t){var n=e.statistic.metadata&&e.statistic.metadata[t];return null!=n?n:this.statistics[e.query.key][t]}},{key:"getLabel",value:function(e){return this.language.getFieldLabel(e,(this.context||{}).module||"")}}]),n}(ZI);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(sC))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-statistics-top-widget"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[["class","d-flex justify-content-center widget-bar rounded",4,"ngIf"],[1,"d-flex","justify-content-center","widget-bar","rounded"],["class","p-2 widget-bar-entry-message",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"p-2","widget-bar-entry-message"],[1,"d-flex","justify-content-center","align-items-baseline","widget-bar-entry","p-2"],[4,"ngIf"],["class","pl-1 pr-1 widget-bar-entry-loading",4,"ngIf"],["class","pr-1 widget-bar-entry-label",4,"ngIf"],[1,"pr-1","widget-bar-entry-label"],["class","pl-1 pr-1 widget-bar-entry-value",4,"ngIf"],[1,"pl-1","pr-1","widget-bar-entry-value"],["mode","list",3,"type","field"],[1,"pl-1","pr-1","widget-bar-entry-loading"],["class","pl-1 widget-bar-entry-end-label",4,"ngIf"],[1,"pl-1","widget-bar-entry-end-label"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Up,4,4,"div",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,B.NgForOf,ES,Jv],pipes:[B.AsyncPipe,B.KeyValuePipe,B.UpperCasePipe],encapsulation:2}),e}(),jx=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,LS,eg]]}),e}(),Ex=[jx],Mx={statistics:xx},_x=function(){var e,t=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.apply(this,arguments)).map=Mx,e}return j(n,[{key:"componentType",get:function(){return this.map[this.type]}},{key:"ngOnInit",value:function(){this.component=this.componentType,this.inputs={config:this.config,context:this.context}}}]),n}(ZI);return t.\u0275fac=function(n){return(e||(e=k.\u0275\u0275getInheritedFactory(t)))(n||t)},t.\u0275cmp=k.\u0275\u0275defineComponent({type:t,selectors:[["scrm-top-widget"]],inputs:{type:"type"},features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs",4,"ngIf"],[3,"ndcDynamicComponent","ndcDynamicInputs"]],template:function(e,t){1&e&&k.\u0275\u0275template(0,zp,1,5,"ndc-dynamic",0),2&e&&k.\u0275\u0275property("ngIf",t.type&&t.config)},directives:[B.NgIf,re,ne],encapsulation:2}),t}(),Fx=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule].concat(Ex,[oe])]}),e}(),Lx=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,oe]]}),e}(),Ox=function(){var e=function(){function e(t,n){I(this,e),this.el=t,this.appStateStore=n,this.appLoading=!1}return j(e,[{key:"ngOnInit",value:function(){var e=this;this.subscription=this.appStateStore.loading$.pipe((0,M.tap)(function(t){e.appLoading=t,e.updateComponent()})).subscribe(),this.updateComponent()}},{key:"ngOnChanges",value:function(e){e.state&&this.updateComponent()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"clickEvent",value:function(){this.updateComponent()}},{key:"updateComponent",value:function(){var e=this.isLoading();this.setDisabledState(e)}},{key:"isLoading",value:function(){var e=!1;return(!0===this.state||!0===this.appLoading)&&(e=!0),e}},{key:"setDisabledState",value:function(e){this.el.nativeElement.disabled=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(k.ElementRef),k.\u0275\u0275directiveInject(jv))},e.\u0275dir=k.\u0275\u0275defineDirective({type:e,selectors:[["","scrm-button-loading",""]],hostBindings:function(e,t){1&e&&k.\u0275\u0275listener("click",function(){return t.clickEvent()})},inputs:{state:["scrm-button-loading","state"]},features:[k.\u0275\u0275NgOnChangesFeature]}),e}(),Dx=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),Ax=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),Nx=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).languages=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a}return n}(cy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-dynamicenum-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,t){1&e&&k.\u0275\u0275text(0),2&e&&k.\u0275\u0275textInterpolate1("\n",t.valueLabel,"\n")},encapsulation:2}),e}(),Rx=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,V.FormsModule]]}),e}(),Tx=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this,e,i,r,o)).languages=e,a.typeFormatter=i,a.logic=r,a.logicDisplay=o,a}return j(n,[{key:"ngOnInit",value:function(){l(h(n.prototype),"ngOnInit",this).call(this)}},{key:"onAdd",value:function(e){if(e&&e.value)return this.field.value=e.value,this.field.formControl.setValue(e.value),void this.field.formControl.markAsDirty();this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),this.selectedValues=[]}},{key:"onRemove",value:function(){var e=this;this.field.value="",this.field.formControl.setValue(""),this.field.formControl.markAsDirty(),setTimeout(function(){e.tag.focus(!0,!0),e.tag.dropdown.show()},200)}},{key:"getPlaceholderLabel",value:function(){return this.languages.getAppString("LBL_SELECT_ITEM")||""}}]),n}(cy);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-dynamicenum-edit"]],viewQuery:function(e,t){var n;(1&e&&k.\u0275\u0275viewQuery(_a,5),2&e)&&(k.\u0275\u0275queryRefresh(n=k.\u0275\u0275loadQuery())&&(t.tag=n.first))},features:[k.\u0275\u0275InheritDefinitionFeature],decls:3,vars:13,consts:[["maxItems","1",3,"ngModel","onlyFromAutocomplete","clearOnBlur","displayBy","identifyBy","placeholder","secondaryPlaceholder","inputClass","ngModelChange","onAdd","onRemove"],["tag",""],[3,"displayBy","identifyBy","showDropdownIfEmpty","keepOpen","autocompleteItems"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"tag-input",0,1),k.\u0275\u0275listener("ngModelChange",function(e){return t.selectedValues=e})("onAdd",function(e){return t.onAdd(e)})("onRemove",function(){return t.onRemove()}),k.\u0275\u0275element(2,"tag-input-dropdown",2),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275property("ngModel",t.selectedValues)("onlyFromAutocomplete",!0)("clearOnBlur",!0)("displayBy","label")("identifyBy","value")("placeholder",t.getPlaceholderLabel())("secondaryPlaceholder",t.getPlaceholderLabel())("inputClass",t.getInvalidClass()),k.\u0275\u0275advance(2),k.\u0275\u0275property("displayBy","label")("identifyBy","value")("showDropdownIfEmpty",!0)("keepOpen",!1)("autocompleteItems",t.options))},directives:[Rr.TagInputComponent,V.NgControlStatus,V.NgModel,Rr.TagInputDropdown],encapsulation:2}),e}(),Px=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Rr.TagInputModule,V.FormsModule]]}),e}(),Bx=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this,e,i,r)).typeFormatter=e,o.logic=i,o.logicDisplay=r,o}return n}(ly);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(rv),k.\u0275\u0275directiveInject(ry),k.\u0275\u0275directiveInject(sy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-email-detail"]],features:[k.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,template:function(e,t){1&e&&k.\u0275\u0275text(0),2&e&&k.\u0275\u0275textInterpolate1("\n",t.field.value,"\n")},encapsulation:2}),e}(),$x=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),Vx=function(){var e=function(){function e(t){I(this,e),this.sanitizer=t}return j(e,[{key:"transform",value:function(e){return this.sanitizer.sanitize(k.SecurityContext.HTML,e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(uo.H7,16))},e.\u0275pipe=k.\u0275\u0275definePipe({name:"htmlSanitize",type:e,pure:!0}),e}(),Ux=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),Kx=function(){var e=function(){function e(t,n,i,r,o,a,s,l,u){I(this,e),this.message=t,this.router=n,this.authService=i,this.preferences=r,this.asyncActionService=o,this.appState=a,this.routeConverter=s,this.configs=l,this.language=u}return j(e,[{key:"canActivate",value:function(e,t){return this.authorizeUser(e,t)}},{key:"authorizeUser",value:function(e,t){return(0,x.forkJoin)({session:this.authorizeUserSession(e,t),acl:this.authorizeUserACL(e)}).pipe((0,M.map)(function(e){var t=e.session,n=e.acl;return t instanceof Ar.UrlTree?t:(n instanceof Ar.UrlTree||t)&&n}))}},{key:"authorizeUserACL",value:function(e){var t,n,i=this,r=this.routeConverter.parseRouteURL(e.url),o=null!==(t=this.appState.getRouteUrl())&&void 0!==t?t:"";if(!r.module||"home"===r.module)return(0,x.of)(!0);var a=this.router.parseUrl(""),s="user-acl",l={action:s,module:r.module,payload:{routeAction:r.action,record:r.record,routeURL:o,queryParams:null!==(n=null==e?void 0:e.queryParams)&&void 0!==n?n:[]}};return this.asyncActionService.run(s,l).pipe((0,M.take)(1),(0,M.map)(function(e){if(e.data&&!0===e.data.result)return!0;if((0,w.isEmptyString)(o))return a;var t=i.router.parseUrl(i.router.url);return!!i.routeConverter.isClassicViewRoute(t)&&t}),(0,M.catchError)(function(){return(0,x.of)(a)}),(0,M.tap)(function(e){return e}))}},{key:"authorizeUserSession",value:function(e,t){var n=this;if(this.authService.isUserLoggedIn.value&&!0!==e.data.checkSession)return(0,x.of)(!0);var i=this.authService.getSessionExpiredRoute(),r=this.authService.sessionExpiredRedirect(),o=this.router.parseUrl(i);return this.authService.fetchSessionStatus().pipe((0,M.take)(1),(0,M.map)(function(e){if(e&&!1===e.appStatus.installed)return n.router.parseUrl("install");if(e&&!0===e.active){var i=!!n.appState.getCurrentUser();return n.authService.setCurrentUser(e),i||n.language.appStrings$.pipe((0,M.filter)(function(e){return e&&!(0,w.emptyObject)(e)}),(0,M.tap)(function(){n.appState.enableNotifications(),n.appState.refreshNotifications()}),(0,M.take)(1)).subscribe(),!0}return n.appState.setPreLoginUrl(t.url),n.authService.resetState(),r?(n.authService.handleSessionExpiredRedirect(),!1):o}),(0,M.catchError)(function(){return r?(n.authService.handleSessionExpiredRedirect(),(0,x.of)(!1)):(n.authService.logout("LBL_SESSION_EXPIRED",!1),(0,x.of)(o))}),(0,M.tap)(function(e){!0===e&&n.authService.isUserLoggedIn.next(!0)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(YS),k.\u0275\u0275inject(ah),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(CC),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(Ov))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(YS),k.\u0275\u0275inject(ah),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(CC),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(Ov))},token:e,providedIn:"root"}),e}(),zx=function(){var e=function(){function e(){I(this,e)}return j(e,[{key:"intercept",value:function(e,t){return t.handle(e).pipe((0,M.catchError)(function(e){return(0,x.throwError)(e)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Gx=function(){var e=function(){function e(t,n,i,r,o,a){I(this,e),this.systemConfigStore=t,this.authService=n,this.router=i,this.routeConverter=r,this.asyncActionService=o,this.message=a}return j(e,[{key:"canActivate",value:function(e){return this.canActivateWebInstallation(e)}},{key:"canActivateWebInstallation",value:function(e){var t=this,n=this.systemConfigStore.getHomePage(),i=this.router.parseUrl(n);return this.authService.fetchSessionStatus().pipe((0,M.take)(1),(0,M.map)(function(e){return e&&!0===e.appStatus.locked&&!0===e.appStatus.installed?(t.message.addDangerMessageByKey("LBL_DISABLED_TITLE_2"),!(!e||!1!==e.active)&&i):(e&&!0===e.active&&(t.authService.logout("",!1),t.authService.isUserLoggedIn.next(!1)),!0)}),(0,M.catchError)(function(){return(0,x.of)(!0)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(YS),k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(CC),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(YS),k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(CC),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym))},token:e,providedIn:"root"}),e}(),Zx=function(){var e=function(){function e(t,n,i,r,o){I(this,e),this.router=t,this.authService=n,this.systemConfigStore=i,this.appStateStore=r,this.message=o}return j(e,[{key:"canActivate",value:function(){var e=this,t=this.systemConfigStore.getHomePage(),n=this.router.parseUrl(t);return this.authService.isUserLoggedIn.value?n:this.authService.fetchSessionStatus().pipe((0,M.take)(1),(0,M.map)(function(t){return t&&!1===t.appStatus.installed?e.router.parseUrl("install"):!t||!0!==t.active||(e.authService.setCurrentUser(t),n)}),(0,M.catchError)(function(){return(0,x.of)(!0)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(YS),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ym))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(YS),k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ym))},token:e,providedIn:"root"}),e}(),Hx=function(){var e=function(){function e(t,n){I(this,e),this.systemConfigStore=t,this.compiler=n}return j(e,[{key:"load",value:function(e){var t=this,n=this.systemConfigStore.getConfigValue("extensions"),i={};return Object.keys(n).forEach(function(r){if(n[r]){var o=n[r];!o.remoteEntry||!o.remoteName||!o.enabled||(0,w.isFalse)(o.enabled)||(i[r]=t.loadExtension(o,e))}}),Object.keys(i).length<1?(0,x.of)({}):(0,x.forkJoin)(i)}},{key:"loadExtension",value:function(e,t){return this.loadModuleFactory(function(){return function(e){return(0,G.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.remoteEntry,!t.t0){t.next=4;break}return t.next=4,function(e,t){return new Promise(function(n,i){if(ao[e])n();else{var r=document.createElement("script");r.src=e,r.onerror=i,r.onload=function(){(function(e){(0,G.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=window[e],t.t0=so[e],t.t0){t.next=11;break}if(t.t1=lo,t.t1){t.next=8;break}return t.next=7,g.I("default");case 7:lo=!0;case 8:return t.next=10,n.init(g.S.default);case 10:so[e]=!0;case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}},t)}))})(t),ao[e]=!0,n()},document.body.appendChild(r)}})}(e.remoteEntry,e.remoteName);case 4:return t.next=6,function(e,t){return(0,G.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window[e].get(t);case 2:return n.t0=n.sent,n.abrupt("return",(0,n.t0)());case 4:case"end":return n.stop()}},n)}))}(e.remoteName,e.exposedModule);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t)}))}({remoteEntry:e.remoteEntry,remoteName:e.remoteName,exposedModule:"./Module"}).then(function(e){return e.ExtensionModule})}).pipe((0,M.map)(function(e){return e.create(t)}))}},{key:"isPromise",value:function(e){return!!e&&"function"==typeof e.then}},{key:"wrapIntoObservable",value:function(e){return(0,x.isObservable)(e)?e:this.isPromise(e)?(0,x.from)(Promise.resolve(e)):(0,x.of)(e)}},{key:"loadModuleFactory",value:function(e){var t=this;return this.wrapIntoObservable(e()).pipe((0,M.mergeMap)(function(e){return e instanceof k.NgModuleFactory?(0,x.of)(e):(0,x.from)(t.compiler.compileModuleAsync(e))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(k.Compiler))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(k.Compiler))},token:e,providedIn:"root"}),e}(),qx=function(){var e=function(){function e(t,n,i,r,o,a,s,l,u,c){I(this,e),this.systemConfigStore=t,this.languageStore=n,this.navigationStore=i,this.userPreferenceStore=r,this.themeImagesStore=o,this.appState=a,this.moduleNameMapper=s,this.messageService=l,this.appMetadata=u,this.auth=c}return j(e,[{key:"resolve",value:function(e){var t=this,n=this.calculateActiveModule(e);return this.appMetadata.load(n).pipe((0,M.tap)(function(){t.auth.isLoggedIn()&&setTimeout(function(){t.appMetadata.loadModuleMetadata(n).pipe((0,M.take)(1)).subscribe()},0)}))}},{key:"sequentialLoad",value:function(e){var t=this,n={};if(this.isToLoadNavigation(e)&&(n.navigation=this.navigationStore.load()),this.isToLoadConfigs(e)){var i=this.systemConfigStore.load();if(this.isToLoadLanguageStrings(e)){var r=this.getLanguagesToLoad(e);i=i.pipe((0,M.map)(function(e){var n=e.default_language.value,i=t.languageStore.getCurrentLanguage();return i&&(n=i),t.languageStore.load(n,r)}),(0,M.concatAll)(),(0,M.toArray)())}n.configs=i}return this.isToLoadUserPreferences(e)&&(n.preferences=this.userPreferenceStore.load()),(0,x.forkJoin)(n).pipe((0,M.map)(function(e){var n=null;return t.systemConfigStore.getConfigValue("default_theme")&&(n=t.systemConfigStore.getConfigValue("default_theme")),t.userPreferenceStore.getUserPreference("user_theme")&&(n=t.userPreferenceStore.getUserPreference("user_theme")),t.themeImagesStore.getTheme()&&(n=t.themeImagesStore.getTheme()),null!==n?t.themeImagesStore.load(n):e}),(0,M.concatAll)(),(0,M.toArray)(),(0,M.tap)(function(){return t.appState.setLoaded(!0)}))}},{key:"getLanguagesToLoad",value:function(e){var t=this.languageStore.getAvailableStringsTypes();return this.isToLoadNavigation(e)?t:e.data&&e.data.load?(Array.isArray(e.data.load.languageStrings)&&(t=e.data.load.languageStrings),t):[]}},{key:"isToLoadLanguageStrings",value:function(e){return!!this.isToLoadNavigation(e)||!(!e.data||!e.data.load)&&(Array.isArray(e.data.load.languageStrings)||!0===e.data.load.languageStrings)}},{key:"isToLoadConfigs",value:function(e){return!e.data||!e.data.load||!1!==e.data.load.configs}},{key:"isToLoadNavigation",value:function(e){return!e.data||!e.data.load||!1!==e.data.load.navigation}},{key:"isToLoadUserPreferences",value:function(e){return!e.data||!e.data.load||!1!==e.data.load.preferences}},{key:"addMetadataLoadErrorMessage",value:function(){var e=this.languageStore.getAppString("LBL_ERROR_FETCHING_METADATA");e||(e="Error occurred while fetching metadata"),this.messageService.addDangerMessage(e)}},{key:"calculateActiveModule",value:function(e){var t,n,i=e.params.module;i||(i=e.data.module);var r=null!==(n=null===(t=null==e?void 0:e.url[0])||void 0===t?void 0:t.path)&&void 0!==n?n:"";!i&&""!==r&&(i=r);var o=this.getParentModuleMap()[i]||"",a=e.queryParams[o]||"";return a&&(i=this.moduleNameMapper.toFrontend(a)),i}},{key:"getParentModuleMap",value:function(){return{"merge-records":"return_module",import:"import_module"}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject($S),k.\u0275\u0275inject(ah),k.\u0275\u0275inject($v),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(qS),k.\u0275\u0275inject(YS))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject($S),k.\u0275\u0275inject(ah),k.\u0275\u0275inject($v),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(qS),k.\u0275\u0275inject(YS))},token:e,providedIn:"root"}),e}(),Wx=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u,c,d,f,p){var m;return I(this,n),(m=t.call(this,e,i,r,o,a,l,s,c,f,p)).systemConfigStore=e,m.languageStore=i,m.navigationStore=r,m.userPreferenceStore=o,m.themeImagesStore=a,m.moduleNameMapper=s,m.appStateStore=l,m.metadataStore=u,m.messageService=c,m.routeConverter=d,m.appMetadata=f,m.auth=p,m}return j(n,[{key:"resolve",value:function(e){var t=this,i=e.params.module;return i||(i=e.data.module),l(h(n.prototype),"resolve",this).call(this,e).pipe((0,M.concatMap)(function(){return(0,x.forkJoin)({metadata:t.metadataStore.load(i,t.metadataStore.getMetadataTypes()),savedSearchMeta:t.metadataStore.getMetadata("saved-search",["recordView"])})}),(0,M.map)(function(e){var t,n,i;return{base:null!==(t=e[0])&&void 0!==t?t:{},metadata:null!==(n=e[1])&&void 0!==n?n:{},savedSearchMeta:null!==(i=e[2])&&void 0!==i?i:{}}}),(0,M.tap)(function(){var n;if(i){var r=t.calculateActiveModule(e);t.appStateStore.setModule(r)}var o=null!==(n=t.routeConverter.parseRouteURL(e.url).action)&&void 0!==n?n:"index";t.appStateStore.setView(o)},function(){t.addMetadataLoadErrorMessage()}))}}]),n}(qx);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject($S),k.\u0275\u0275inject(ah),k.\u0275\u0275inject($v),k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(CC),k.\u0275\u0275inject(qS),k.\u0275\u0275inject(YS))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject($S),k.\u0275\u0275inject(ah),k.\u0275\u0275inject($v),k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(CC),k.\u0275\u0275inject(qS),k.\u0275\u0275inject(YS))},token:e,providedIn:"root"}),e}(),Qx=function(){var e=function(){function e(t,n){I(this,e),this.metadata=t,this.processService=n}return j(e,[{key:"onNavigationAdd",value:function(e,t){var n,i,r="detail",o=t&&t.data||{};o.mode&&(r=o.mode);var a=null!==(i=null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.record)&&void 0!==i?i:null;if(a&&"create"!==r){var s=this.buildRecentlyViewed(e,a);this.addRecentlyViewed(e,s)}}},{key:"buildRecentlyViewed",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"detailview";return(0,w.deepClone)({module:"Tracker",type:"Tracker",attributes:{module_name:null!=e?e:"",item_id:null!=t?t:"",action:null!=n?n:""}})}},{key:"addRecentlyViewed",value:function(e,t){this.saveRecentlyViewed(e,t)}},{key:"saveRecentlyViewed",value:function(e,t){var n=this,i={recentlyViewed:t};setTimeout(function(){n.processService.submit("add-recently-viewed",i).pipe((0,M.take)(1)).subscribe(function(i){var r,o,a,s,l,u,c,d,f={id:null!==(r=t.id)&&void 0!==r?r:"",module:null!==(o=t.module)&&void 0!==o?o:"",attributes:Object.assign({},null!==(a=t.attributes)&&void 0!==a?a:{})},p=null!==(l=null===(s=null==i?void 0:i.data)||void 0===s?void 0:s.tracker)&&void 0!==l?l:null;if(null!==p){f.attributes.item_summary=p.item_summary;var m=null!==(c=null===(u=null==f?void 0:f.attributes)||void 0===u?void 0:u.item_id)&&void 0!==c?c:"",h=n.metadata.getModuleMeta(e),v=null!==(d=null==h?void 0:h.recentlyViewed)&&void 0!==d?d:null;if(v){var g=v.filter(function(e){var t,n;return(null!==(n=null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.item_id)&&void 0!==n?n:"")!==m});g.unshift(f),h.recentlyViewed=g}n.metadata.setModuleMetadata(e,h)}})},500)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(xh),k.\u0275\u0275inject(th))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(xh),k.\u0275\u0275inject(th))},token:e,providedIn:"root"}),e}(),Yx=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u,c,d,f,p,m,h,v){var g;return I(this,n),(g=t.call(this,e,i,r,a,s,l,c,o,d,f,m,h)).systemConfigStore=e,g.languageStore=i,g.navigationStore=r,g.metadataStore=o,g.userPreferenceStore=a,g.themeImagesStore=s,g.moduleNameMapper=l,g.actionNameMapper=u,g.appStateStore=c,g.messageService=d,g.routeConverter=f,g.router=p,g.appMetadata=m,g.auth=h,g.recentlyViewed=v,g}return j(n,[{key:"resolve",value:function(e){var t=this,i=e.params.module;return i||(i=e.data.module),l(h(n.prototype),"resolve",this).call(this,e).pipe((0,M.concatMap)(function(){return(0,x.forkJoin)({metadata:t.metadataStore.load(i,t.metadataStore.getMetadataTypes())})}),(0,M.tap)(function(){t.auth.isLoggedIn()&&t.recentlyViewed.onNavigationAdd(t.appStateStore.getModule(),e)}))}}]),n}(Wx);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject($S),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(ah),k.\u0275\u0275inject($v),k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(Zy),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(CC),k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(qS),k.\u0275\u0275inject(YS),k.\u0275\u0275inject(Qx))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject($S),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(ah),k.\u0275\u0275inject($v),k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(Zy),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(CC),k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(qS),k.\u0275\u0275inject(YS),k.\u0275\u0275inject(Qx))},token:e,providedIn:"root"}),e}(),Xx=function(){var e=function(){function e(t,n){I(this,e),this.processService=t,this.appStateStore=n,this.processType="recover-password"}return j(e,[{key:"run",value:function(e,t){var n=this,i={username:e,useremail:t};return this.appStateStore.updateLoading("recover-password",!0,!1),this.processService.submit(this.processType,i).pipe((0,M.tap)(function(){return n.appStateStore.updateLoading("recover-password",!1,!1)}),(0,M.catchError)(function(e){throw n.appStateStore.updateLoading("recover-password",!1,!1),e}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(th),k.\u0275\u0275inject(jv))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(th),k.\u0275\u0275inject(jv))},token:e,providedIn:"root"}),e}(),Jx=function(){var e=function(){function e(t,n){I(this,e),this.systemConfig=t,this.docElement=n}return j(e,[{key:"setSystemName",value:function(e){(!e||e.length<1)&&(e="SuiteCRM"),this.docElement.documentElement.childNodes.item(0).childNodes.forEach(function(t){"TITLE"===t.nodeName&&(t.textContent=e)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(B.DOCUMENT))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(B.DOCUMENT))},token:e,providedIn:"root"}),e}(),ej=function(){var e=function(){function e(t){I(this,e),this.http=t}return j(e,[{key:"getAll",value:function(){return this.http.get("users")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Tr.HttpClient))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Tr.HttpClient))},token:e,providedIn:"root"}),e}(),tj=function(){var e=function(){function e(t){I(this,e),this.fetchGQL=t}return j(e,[{key:"create",value:function(){return new TI(this.fetchGQL)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(nC))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(nC))},token:e,providedIn:"root"}),e}(),nj=function(){var e=function(){function e(t){I(this,e),this.fetchGQL=t}return j(e,[{key:"create",value:function(){return new rC(this.fetchGQL)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(nC))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(nC))},token:e,providedIn:"root"}),e}(),ij=function(){var e=function e(t){I(this,e),this.language=t};return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ov))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-admin-card"]],inputs:{content:"content"},decls:2,vars:1,consts:[[1,"widget-panel","h-100","shadow-sm"],["class","card h-100 panel-card border-0",4,"ngIf"],[1,"card","h-100","panel-card","border-0"],[1,"card-header"],[1,"card-title","admin-card-title","m-0",3,"title"],["module","administration",3,"labelKey"],[1,"card-body","d-flex","flex-column","align-items-start"],[4,"ngIf"],["class","admin-card-link-box border-bottom w-100",3,"border-top",4,"ngFor","ngForOf"],[1,"admin-card-link-box","border-bottom","w-100"],["queryParamsHandling","merge",1,"card-link","admin-card-link",3,"queryParams","routerLink","title"],[1,"d-flex","admin-card-link-wrapper","align-items-center","w-100","p-1"],[1,"admin-card-icon","sicon-2x",3,"image"],["module","administration",1,"admin-card-label","pl-1","flex-grow-1",3,"labelKey"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275template(1,Hp,6,3,"div",1),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.content))},directives:[B.NgIf,zv,B.NgForOf,Ar.RouterLinkWithHref,Vv],encapsulation:2}),e}(),rj=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Ar.RouterModule,Gv,Uv]]}),e}(),oj=function(){var e=function(){function e(t){I(this,e),this.adminMetaData=t,this.adminPanelData=[]}return j(e,[{key:"ngOnInit",value:function(){var e=this.adminMetaData.getAdminPanel();this.setData(e)}},{key:"setData",value:function(e){var t=this;e.forEach(function(e){var n=e.icon,i=e.titleLabelKey,r=e.descriptionLabelKey,o=e.linkGroup;t.adminPanelData.push({icon:n,titleLabelKey:i,descriptionLabelKey:r,linkGroup:t.setLinkGroups(o)})})}},{key:"setLinkGroups",value:function(e){for(var t=[],n=Object.keys(e),i=0;i<n.length;i++)for(var r=Object.values(e[n[i]]),o=0;o<r.length;o++)t.push(r[o]);return t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(zS))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-admin-panel"]],decls:3,vars:1,consts:[[1,"admin-view","full-height-view","d-flex","align-items-center"],[1,"row","flex-grow-1"],["class","col-12 col-sm-6 col-lg-4 col-xl-3 mt-3 mb-3",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-lg-4","col-xl-3","mt-3","mb-3"],[3,"content"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275template(2,qp,2,1,"div",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(2),k.\u0275\u0275property("ngForOf",t.adminPanelData))},directives:[B.NgForOf,ij],encapsulation:2}),e}(),aj=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,rj]]}),e}(),sj=function(){var e=function(){function e(t,n,i,r,o,a,s){I(this,e),this.route=t,this.router=n,this.sanitizer=i,this.routeConverter=r,this.auth=o,this.ngZone=a,this.systemConfigs=s,this.iframe=null}return j(e,[{key:"ngOnInit",value:function(){this.url=this.route.snapshot.data.legacyUrl}},{key:"ngAfterViewInit",value:function(){this.initIframe()}},{key:"ngOnDestroy",value:function(){this.cleanObservers(),this.iframe=null;var e=this.wrapper;this.wrapper.firstChild&&e.removeChild(e.firstChild),e.innerHTML="<iframe></iframe>",this.wrapper=null}},{key:"cleanObservers",value:function(){this.iframeResizeHandler&&(this.iframeResizeHandler.destroy(),this.iframeResizeHandler=null),this.iframePageChangeHandler&&(this.iframePageChangeHandler.destroy(),this.iframePageChangeHandler=null)}},{key:"initIframe",value:function(){this.wrapper=this.dataContainer.nativeElement,this.wrapper.firstChild&&this.wrapper.removeChild(this.wrapper.firstChild);var e=document.createElement("iframe");e.src=this.url,this.wrapper.appendChild(e),this.iframe=e,this.iframe.style.display="block",this.initObservers()}},{key:"initObservers",value:function(){this.iframePageChangeHandler=this.buildIframePageChangeObserver(),this.iframeResizeHandler=this.buildIframeResizeHandlerHandler(),this.iframePageChangeHandler&&this.iframePageChangeHandler.init()}},{key:"onPageChange",value:function(e){var t=this;if(!1===this.shouldRedirect(e))return this.iframe.style.display="block",this.cleanObservers(),void this.initObservers();var n=this.routeConverter.toFrontEndRoute(e);"/users/login"!==n?this.ngZone.run(function(){return t.router.navigateByUrl(n).then()}).then():this.auth.logout("LBL_SESSION_EXPIRED")}},{key:"onIFrameLoad",value:function(){this.iframe.contentWindow.document.body.style.overflow="hidden",this.iframeResizeHandler.init(this.iframe)}},{key:"onIFrameUnload",value:function(){this.iframe.style.display="none",this.iframeResizeHandler.destroy()}},{key:"buildIframePageChangeObserver",value:function(){return new Xg(this.iframe,this.onPageChange.bind(this),this.onIFrameLoad.bind(this),this.onIFrameUnload.bind(this))}},{key:"buildIframeResizeHandlerHandler",value:function(){return new Yg}},{key:"shouldRedirect",value:function(e){if(e&&e.includes("/#/"))return!0;var t=this.routeConverter.parse(e);return!(!t||!t.module||!0===this.routeConverter.matchesActiveRoute(this.route,t))&&(!t.action||this.toExclude(t))}},{key:"toExclude",value:function(e){var t=this.systemConfigs.getConfigValue("classicview_routing_exclusions");if(!t||0===Object.keys(t).length)return!0;if(t.any&&t.any.includes(e.action))return!1;if(!t[e.module])return!0;var n=t[e.module];return!(n&&n.includes(e.action))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ar.ActivatedRoute),k.\u0275\u0275directiveInject(Ar.Router),k.\u0275\u0275directiveInject(uo.H7),k.\u0275\u0275directiveInject(CC),k.\u0275\u0275directiveInject(YS),k.\u0275\u0275directiveInject(k.NgZone),k.\u0275\u0275directiveInject(Gm))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-classic-view-ui"]],viewQuery:function(e,t){var n;(1&e&&k.\u0275\u0275viewQuery(Ma,7),2&e)&&(k.\u0275\u0275queryRefresh(n=k.\u0275\u0275loadQuery())&&(t.dataContainer=n.first))},decls:3,vars:0,consts:[[1,"classic-view-container"],["dataContainer",""]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0,1),k.\u0275\u0275element(2,"iframe"),k.\u0275\u0275elementEnd())},encapsulation:2}),e}(),lj=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule]]}),e}(),uj=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u,c,d,f,p,m){var h;return I(this,n),(h=t.call(this,e,i,r,o,a,c,s,u,d,f)).systemConfigStore=e,h.languageStore=i,h.navigationStore=r,h.userPreferenceStore=o,h.themeImagesStore=a,h.moduleNameMapper=s,h.routeConverter=l,h.messageService=u,h.appStateStore=c,h.appMetadata=d,h.auth=f,h.recentlyViewed=p,h.metadataStore=m,h}return j(n,[{key:"resolve",value:function(e){var t=this,i=this.calculateActiveModule(e);return l(h(n.prototype),"resolve",this).call(this,e).pipe((0,M.concatMap)(function(){return(0,x.forkJoin)({metadata:t.metadataStore.load(i,t.metadataStore.getMetadataTypes())})}),(0,M.map)(function(){return t.routeConverter.toLegacy(e.params,e.queryParams)}),(0,M.tap)(function(){var n;if(e.params.module){var i=t.calculateActiveModule(e);t.appStateStore.setModule(i)}var r=null!==(n=t.routeConverter.parseRouteURL(e.url).action)&&void 0!==n?n:"index";t.appStateStore.setView(r),t.recentlyViewed.onNavigationAdd(t.appStateStore.getModule(),e)},function(){t.addMetadataLoadErrorMessage()}))}}]),n}(qx);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject($S),k.\u0275\u0275inject(ah),k.\u0275\u0275inject($v),k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(CC),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(qS),k.\u0275\u0275inject(YS),k.\u0275\u0275inject(Qx),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Gm),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject($S),k.\u0275\u0275inject(ah),k.\u0275\u0275inject($v),k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(CC),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(qS),k.\u0275\u0275inject(YS),k.\u0275\u0275inject(Qx),k.\u0275\u0275inject(xh))},token:e,providedIn:"root"}),e}(),cj=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u,c,d,f,p,m,h,v){var g;return I(this,n),(g=t.call(this,e,i,r,o,a,s,l,u,c,d,f,p,h,v)).recordFetchGQL=e,g.recordSaveGQL=i,g.appStateStore=r,g.languageStore=o,g.navigationStore=a,g.moduleNavigation=s,g.metadataStore=l,g.localStorage=u,g.message=c,g.subpanelFactory=d,g.recordManager=f,g.statisticsBatch=p,g.auth=m,g.recordStoreFactory=h,g.preferences=v,g}return j(n,[{key:"init",value:function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"detail",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.internalState.module=e,this.internalState.recordID=t,this.setMode(r),this.parseParams(o),this.calculateShowWidgets(),this.showTopWidget=!1,this.showSubpanels=!1;var a=null!==(n=this.params.isDuplicate)&&void 0!==n&&n,s=null!==(i=this.params.originalDuplicateId)&&void 0!==i&&i;return!a&&!s&&this.initRecord(o),this.load()}},{key:"save",value:function(){var e=this;return this.appStateStore.updateLoading("".concat(this.internalState.module,"-record-save-new"),!0),this.recordStore.save().pipe((0,M.catchError)(function(){return e.message.addDangerMessageByKey("LBL_ERROR_SAVING"),(0,x.of)({})}),(0,M.finalize)(function(){e.setMode("detail"),e.appStateStore.updateLoading("".concat(e.internalState.module,"-record-save-new"),!1)}))}},{key:"initRecord",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.auth.getCurrentUser(),n={id:"",type:"",module:this.internalState.module,attributes:{assigned_user_id:t.id,assigned_user_name:{id:t.id,user_name:t.userName},relate_to:null==e?void 0:e.return_relationship,relate_id:null==e?void 0:e.parent_id}};this.recordManager.injectParamFields(e,n,this.getVardefs()),this.recordStore.init(n)}},{key:"load",value:function(){var e,t,n=this;return null!==(e=this.params.isDuplicate)&&void 0!==e&&e&&null!==(t=this.params.originalDuplicateId)&&void 0!==t&&t?(this.updateState(Object.assign(Object.assign({},this.internalState),{loading:!0})),this.recordStore.retrieveRecord(this.internalState.module,this.params.originalDuplicateId,!1).pipe((0,M.tap)(function(e){e.id="",e.attributes.id="",e.attributes.date_entered="",n.recordManager.injectParamFields(n.params,e,n.getVardefs()),n.recordStore.setRecord(e),n.updateState(Object.assign(Object.assign({},n.internalState),{module:e.module,loading:!1}))}))):(0,x.of)(this.recordStore.getBaseRecord()).pipe((0,M.shareReplay)())}},{key:"calculateShowWidgets",value:function(){this.showSidebarWidgets=!1,this.widgets=!1}}]),n}(Rw);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(mv),k.\u0275\u0275inject(hv),k.\u0275\u0275inject(jv),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject($S),k.\u0275\u0275inject(qy),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(nh),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(Ow),k.\u0275\u0275inject(vv),k.\u0275\u0275inject(Aw),k.\u0275\u0275inject(YS),k.\u0275\u0275inject(yv),k.\u0275\u0275inject(ah))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),dj=function(){var e=function(){function e(t,n,i){I(this,e),this.appState=t,this.recordStore=n,this.route=i,this.vm$=null,this.showStatusBar=!1}return j(e,[{key:"ngOnInit",value:function(){var e="detail",t=this.route.snapshot&&this.route.snapshot.data||{};t.mode&&(e=t.mode);var n=this.route.snapshot&&this.route.snapshot.queryParams||{};n=Object.assign({},n);var i=this.route.snapshot.params.record;!0===t.duplicate&&(n.originalDuplicateId=i,n.isDuplicate=!0,i=""),this.recordSub=this.recordStore.init(this.appState.getModule(),i,e,n).subscribe(),this.vm$=this.recordStore.vm$}},{key:"ngOnDestroy",value:function(){this.recordSub&&this.recordSub.unsubscribe(),this.recordStore.destroy()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(jv),k.\u0275\u0275directiveInject(cj),k.\u0275\u0275directiveInject(Ar.ActivatedRoute))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-create-record"]],features:[k.\u0275\u0275ProvidersFeature([cj,{provide:Rw,useExisting:cj}])],decls:2,vars:3,consts:[["class","record-view",4,"ngIf"],[1,"record-view"],[1,"record-view-position-sticky"],[1,"record-view-hr-container"],[1,"record-view-hr"],[4,"ngIf"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Qp,7,1,"div",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:function(){return[B.NgIf,Oj,_j,Tw]},pipes:function(){return[B.AsyncPipe]},encapsulation:2}),e}(),fj=function(){var e=function e(t,n){var i=this;I(this,e),this.store=t,this.metadata=n,this.config$=(0,x.combineLatest)([this.metadata.recordViewMetadata$,this.store.showSidebarWidgets$]).pipe((0,M.map)(function(e){var t=v(e,2),n=t[0],r=t[1];return n.sidebarWidgets&&n.sidebarWidgets.length&&n.sidebarWidgets.forEach(function(e){e&&"data-update"===e.refreshOn&&(e.reload$=i.store.record$.pipe((0,M.map)(function(){return!0}))),e&&(e.subpanelReload$=i.store.subpanelReload$)}),{widgets:n.sidebarWidgets||[],show:r}}))};return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Rw),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),pj=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.apply(this,arguments)}return j(n,[{key:"checkRecordAccess",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=null!==(t=e.store.recordStore.getBaseRecord().acls)&&void 0!==t?t:[];if(!r||!r.length)return!1;var o=null!==(n=e.action)&&void 0!==n?n:null;return this.checkAccess(o,r,i)}},{key:"navigateBack",value:function(e,t,n,i,r){var o=e.getReturnModule(t),a=e.getReturnAction(t),s=e.getReturnId(t);n!==s&&(o===i&&"record"===a&&s!==n||!o||!a||e.navigateBack(r,i,t))}}]),n}(w.ActionHandler),mj=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this)).modalService=e,r.navigation=i,r.key="cancel",r.modes=["edit","detail"],r}return j(n,[{key:"run",value:function(e){e.store.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}},{key:"shouldDisplay",value:function(){return!0}},{key:"cancel",value:function(e){var t=e.store.params,n=e.store.getModuleName(),i=e.store.getRecordId(),r=e.store.getBaseRecord();this.navigateBack(this.navigation,t,i,n,r),e.store.recordStore.resetStaging(),e.store.setMode("detail")}},{key:"showConfirmationModal",value:function(e){var t=this,n=this.modalService.open(hk);n.componentInstance.textKey="WARN_UNSAVED_CHANGES",n.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:function(e){return e.dismiss()}},{labelKey:"LBL_PROCEED",klass:["btn-main"],onClick:function(n){t.cancel(e),n.close()}}]}}]),n}(pj);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Z.NgbModal),k.\u0275\u0275inject(qy))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Z.NgbModal),k.\u0275\u0275inject(qy))},token:e,providedIn:"root"}),e}(),hj=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r){var o;return I(this,n),(o=t.call(this)).message=e,o.navigation=i,o.appState=r,o.key="save",o.modes=["edit"],o}return j(n,[{key:"run",value:function(e){var t=this;Object.keys(e.store.recordStore.getStaging().fields).some(function(t){var n;return null!==(n=e.store.recordStore.getStaging().fields[t].loading)&&void 0!==n&&n})?this.message.addWarningMessageByKey("LBL_LOADING_IN_PROGRESS"):e.store.recordStore.validate().pipe((0,M.take)(1)).subscribe(function(n){n?e.store.save().pipe((0,M.take)(1)).subscribe(function(n){var i=e.store.params,r=e.store.getModuleName(),o=n.id;t.appState.conditionalNotificationRefresh("edit"),t.navigateBack(t.navigation,i,o,r,n)}):t.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}},{key:"shouldDisplay",value:function(e){return!0}}]),n}(pj);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(qy),k.\u0275\u0275inject(jv))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(qy),k.\u0275\u0275inject(jv))},token:e,providedIn:"root"}),e}(),vj=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="toggle-widgets",e.modes=["detail","edit"],e}return j(n,[{key:"run",value:function(e){e.store.showSidebarWidgets=!e.store.showSidebarWidgets}},{key:"shouldDisplay",value:function(e){return e.store.widgets}},{key:"getStatus",value:function(e){return e.store.showSidebarWidgets?"active":""}}]),n}(pj);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),gj=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="edit",e.modes=["detail"],e}return j(n,[{key:"run",value:function(e){e.store.setMode("edit")}},{key:"shouldDisplay",value:function(e){return this.checkRecordAccess(e,["edit"])}}]),n}(pj);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),yj=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this)).moduleNameMapper=e,r.router=i,r.key="create",r.modes=["detail"],r}return j(n,[{key:"run",value:function(e){var t=e.store,n=t.getBaseRecord(),i="/"+t.vm.appData.module.name+"/edit",r=this.moduleNameMapper.toLegacy(t.vm.appData.module.name);this.router.navigate([i],{queryParams:{return_module:r,return_action:"DetailView",return_record:n&&n.id||""}}).then()}},{key:"shouldDisplay",value:function(e){return this.checkRecordAccess(e,["edit"])}}]),n}(pj);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(Ar.Router))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(Ar.Router))},token:e,providedIn:"root"}),e}(),bj=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),(r=t.call(this)).message=e,r.navigation=i,r.key="saveNew",r.modes=["create"],r}return j(n,[{key:"run",value:function(e){var t=this;e.store.recordStore.validate().pipe((0,M.take)(1)).subscribe(function(n){n?e.store.save().pipe((0,M.take)(1)).subscribe(function(n){var i=e.store,r=i.params,o=i.getModuleName();t.navigation.navigateBack(n,o,r)}):t.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}},{key:"shouldDisplay",value:function(e){return!0}}]),n}(pj);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(qy))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(qy))},token:e,providedIn:"root"}),e}(),Sj=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this)).modalService=e,a.router=i,a.moduleNameMapper=r,a.actionNameMapper=o,a.key="cancelCreate",a.modes=["create"],a}return j(n,[{key:"run",value:function(e){e.store.recordStore.isDirty()?this.showConfirmationModal(e):this.cancel(e)}},{key:"shouldDisplay",value:function(){return!0}},{key:"cancel",value:function(e){var t=e.store,n=t.getModuleName();t.params.return_module&&(n=this.moduleNameMapper.toFrontend(t.params.return_module));var i=t.params.return_action||"",r=t.params.return_id||"",o="/"+n;i&&(("record"!==(i=this.actionNameMapper.toFrontend(i))||r)&&(o+="/"+i)),r&&(o+="/"+r),this.router.navigate([o]).then()}},{key:"showConfirmationModal",value:function(e){var t=this,n=this.modalService.open(hk);n.componentInstance.textKey="WARN_UNSAVED_CHANGES",n.componentInstance.buttons=[{labelKey:"LBL_CANCEL",klass:["btn-secondary"],onClick:function(e){return e.dismiss()}},{labelKey:"LBL_OK",klass:["btn-main"],onClick:function(n){t.cancel(e),n.close()}}]}}]),n}(pj);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Z.NgbModal),k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(Zy))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Z.NgbModal),k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(Gy),k.\u0275\u0275inject(Zy))},token:e,providedIn:"root"}),e}(),Cj=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="async-process",e.modes=w.ALL_VIEW_MODES,e}return j(n,[{key:"run",value:function(e){}},{key:"shouldDisplay",value:function(e){var t,n,i=null!==(n=null===(t=null==e?void 0:e.action)||void 0===t?void 0:t.acl)&&void 0!==n?n:[];return!i.length||this.checkRecordAccess(e,i)}}]),n}(pj);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),kj=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u){var c;return I(this,n),(c=t.call(this)).edit=e,c.create=i,c.toggleWidgets=r,c.cancel=o,c.cancelCreate=a,c.save=s,c.saveNew=l,c.async=u,e.modes.forEach(function(t){return c.actions[t][e.key]=e}),i.modes.forEach(function(e){return c.actions[e][i.key]=i}),r.modes.forEach(function(e){return c.actions[e][r.key]=r}),o.modes.forEach(function(e){return c.actions[e][o.key]=o}),s.modes.forEach(function(e){return c.actions[e][s.key]=s}),l.modes.forEach(function(e){return c.actions[e][l.key]=l}),a.modes.forEach(function(e){return c.actions[e][a.key]=a}),u.modes.forEach(function(e){return c.actions[e][u.key]=u}),c}return n}(Mg);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(gj),k.\u0275\u0275inject(yj),k.\u0275\u0275inject(vj),k.\u0275\u0275inject(mj),k.\u0275\u0275inject(Sj),k.\u0275\u0275inject(hj),k.\u0275\u0275inject(bj),k.\u0275\u0275inject(Cj))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(gj),k.\u0275\u0275inject(yj),k.\u0275\u0275inject(vj),k.\u0275\u0275inject(mj),k.\u0275\u0275inject(Sj),k.\u0275\u0275inject(hj),k.\u0275\u0275inject(bj),k.\u0275\u0275inject(Cj))},token:e,providedIn:"root"}),e}(),wj=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.apply(this,arguments)}return j(n,[{key:"shouldDisplay",value:function(e){return!0}}]),n}(w.ActionHandler),Ij=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="displayType",e.modes=["edit","detail","list","create","massupdate","filter"],e}return j(n,[{key:"run",value:function(e,t){var n=e.record;if(!n||!e.field)return!0;var i=t.params&&t.params.activeOnFields||{},r=Object.keys(i),o=t.params&&t.params.activeOnAttributes||{},a=Object.keys(o);return!r.length&&!a.length||this.isActive(r,n,i,a,o)}},{key:"isActive",value:function(e,t,n,i,r){var o=!0;return(0,K.isEmpty)(n)||(o=this.areFieldsActive(e,t,n)),(0,K.isEmpty)(r)||(o=o&&this.areAttributesActive(i,t,r)),o}},{key:"areAttributesActive",value:function(e,t,n){var i=this;return e.every(function(e){var r=t.fields&&t.fields[e]||null,o=n[e]&&Object.keys(n[e]);if(r&&o&&o.length)return o.some(function(t){var o=n[e][t],a=r.attributes&&r.attributes[t];if(o&&o.length&&a)return i.isValueActive(a,o)})})}},{key:"areFieldsActive",value:function(e,t,n){var i=this;return e.every(function(e){var r=t.fields&&t.fields[e]||null,o=n[e];return!(r&&o&&o.length)||i.isValueActive(r,o)})}},{key:"isValueActive",value:function(e,t){var n=!1;return e.valueList&&e.valueList.length?(e.valueList.some(function(e){return t.some(function(t){if(t===e)return n=!0,!0})}),n):((0,w.isVoid)(e.value)||t.some(function(t){t===e.value&&(n=!0)}),n)}}]),n}(wj);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),xj=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),i=t.call(this),e.modes.forEach(function(t){return i.actions[t][e.key]=e}),i}return j(n,[{key:"runLogic",value:function(e,t,n,i,r){var o,a=this,s=!0,l=Object.values(n.meta.displayLogic).filter(function(e){var t,n=null!==(t=e.modes)&&void 0!==t?t:[];return!(!n.length||!n.includes(r))});if(!l||!l.length)return s;var u=null!==(o=n.meta.display)&&void 0!==o?o:"show",c="hide";"hide"===u&&(c="show");var d={panel:n,record:i,field:t,module:i.module};l.some(function(e){var t=a.buildActionData(e,d);return a.actions[r][e.key].run(t,e)})&&(u=c),s="show"===u,n.displayState.next(s)}},{key:"buildActionData",value:function(e,t){return{field:t.field,record:t&&t.record||null,panel:t.panel||null}}}]),n}(Mg);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ij))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ij))},token:e,providedIn:"root"}),e}(),jj=function(){var e=function(){function e(t,n,i,r,o){I(this,e),this.store=t,this.metadata=n,this.language=i,this.actions=r,this.logicManager=o,this.fieldSubs=[]}return j(e,[{key:"getEditAction",value:function(){var e={store:this.store};this.actions.run({key:"edit"},this.store.getMode(),e)}},{key:"getDisplayConfig",value:function(){var e=this;return(0,x.combineLatest)([this.metadata.recordViewMetadata$,this.store.mode$]).pipe((0,M.map)(function(t){var n=v(t,2),i=n[0],r=n[1];return{layout:e.getLayout(i),mode:r,maxColumns:i.templateMeta.maxColumns||2,tabDefs:i.templateMeta.tabDefs}}))}},{key:"getPanels",value:function(){var e=this;return(0,x.combineLatest)([this.metadata.recordViewMetadata$,this.store.stagingRecord$,this.language.vm$]).pipe((0,M.map)(function(t){var n=v(t,3),i=n[0],r=n[1],o=n[2],a=[],s=r&&r.module||"";return e.fieldSubs.forEach(function(e){return e.unsubscribe()}),i.panels.forEach(function(t){var n,l,u={label:e.language.getFieldLabel(t.key.toUpperCase(),s,o),key:t.key,rows:[]},c=null!==(n=i.templateMeta.tabDefs[t.key.toUpperCase()])&&void 0!==n?n:null;c&&(u.meta=c),t.rows.forEach(function(e){var t={cols:[]};e.cols.forEach(function(e){t.cols.push(Object.assign({},e))}),u.rows.push(t)}),u.displayState=new x.BehaviorSubject(null===(l=null==c?void 0:c.display)||void 0===l||l),u.display$=u.displayState.asObservable(),a.push(u),(null==c?void 0:c.displayLogic)&&Object.keys(c.displayLogic).forEach(function(t){var n=c.displayLogic[t],i=n.key;n.params.fieldDependencies&&r&&r.fields&&n.params.fieldDependencies.forEach(function(t){var n=r.fields[t]||null;!n||e.fieldSubs.push(n.valueChanges$.subscribe(function(t){e.logicManager.runLogic(i,n,u,r,e.store.getMode())}))})})}),a}))}},{key:"getRecord",value:function(){var e=this;return(0,x.combineLatest)([this.store.stagingRecord$,this.store.mode$]).pipe((0,M.map)(function(t){var n=v(t,2),i=n[0],r=n[1];return"edit"===r||"create"===r?e.store.initValidators(i):e.store.resetValidatorsForAllFields(i),i.formGroup.enable(),i}))}},{key:"getLayout",value:function(e){var t="panels";return e.templateMeta.useTabs&&(t="tabs"),t}},{key:"clean",value:function(){this.fieldSubs.forEach(function(e){return e.unsubscribe()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Rw),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(kj),k.\u0275\u0275inject(xj))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Ej=function(){var e=function e(t,n){var i=this;I(this,e),this.store=t,this.metadata=n,this.config$=(0,x.combineLatest)([this.metadata.recordViewMetadata$,this.store.showTopWidget$]).pipe((0,M.map)(function(e){var t=v(e,2),n=t[0],r=t[1];return n.topWidget&&"data-update"===n.topWidget.refreshOn&&(n.topWidget.reload$=i.store.record$.pipe((0,M.map)(function(){return!0}))),{widget:n.topWidget,show:r}}))};return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Rw),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Mj=function(){var e=function e(t,n){var i=this;I(this,e),this.store=t,this.metadata=n,this.config$=(0,x.combineLatest)([this.metadata.recordViewMetadata$,this.store.widgets$]).pipe((0,M.map)(function(e){var t=v(e,2),n=t[0],r=t[1];return n.bottomWidgets&&n.bottomWidgets.length&&n.bottomWidgets.forEach(function(e){e&&"data-update"===e.refreshOn&&(e.reload$=i.store.record$.pipe((0,M.map)(function(){return!0}))),e&&(e.subpanelReload$=i.store.subpanelReload$)}),{widgets:n.bottomWidgets||[],show:r}}))};return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Rw),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),_j=function(){var e=function(){function e(t,n,i,r,o,a,s){I(this,e),this.recordViewStore=t,this.language=n,this.metadata=i,this.contentAdapter=r,this.topWidgetAdapter=o,this.sidebarWidgetAdapter=a,this.bottomWidgetAdapter=s,this.loading=!0,this.language$=this.language.vm$,this.vm$=(0,x.combineLatest)([this.language$,this.sidebarWidgetAdapter.config$,this.bottomWidgetAdapter.config$,this.topWidgetAdapter.config$,this.recordViewStore.showSubpanels$]).pipe((0,M.map)(function(e){var t=v(e,5);return{language:t[0],sidebarWidgetConfig:t[1],bottomWidgetConfig:t[2],topWidgetConfig:t[3],showSubpanels:t[4]}})),this.subs=[]}return j(e,[{key:"ngOnInit",value:function(){var e=this;this.subs.push(this.recordViewStore.loading$.subscribe(function(t){e.loading=t}))}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()}),this.contentAdapter.clean()}},{key:"getContentAdapter",value:function(){return this.contentAdapter}},{key:"getSubpanelsConfig",value:function(){return{parentModule:this.recordViewStore.getModuleName(),subpanels$:this.recordViewStore.subpanels$,sidebarActive$:this.recordViewStore.widgets$}}},{key:"getViewContext",value:function(){return this.recordViewStore.getViewContext()}},{key:"getViewContext$",value:function(){return this.recordViewStore.viewContext$}},{key:"hasTopWidgetMetadata",value:function(e){return!(!e||!e.type)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Rw),k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(xh),k.\u0275\u0275directiveInject(jj),k.\u0275\u0275directiveInject(Ej),k.\u0275\u0275directiveInject(fj),k.\u0275\u0275directiveInject(Mj))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-container"]],features:[k.\u0275\u0275ProvidersFeature([jj,Ej,fj,Mj])],decls:2,vars:3,consts:[["class","record-view-container view-container container-fluid pt-3 pb-3 small-font",4,"ngIf"],[1,"record-view-container","view-container","container-fluid","pt-3","pb-3","small-font"],[1,"row"],[1,"col-lg-9",3,"ngClass"],[1,"container-fluid","pl-0","pr-0"],["class","row no-gutters",4,"ngIf"],[4,"ngIf"],[1,"row","no-gutters"],[1,"col"],["class","row no-gutters mt-4",4,"ngIf"],["class","row no-gutters pt-1 pb-4",4,"ngIf"],["class","col-lg-3 record-widget-container pl-0",4,"ngIf"],[1,"col","pb-3"],[1,"d-flex","justify-content-center","widget-bar","rounded","pb-1","pt-3","box-loading"],[1,"d-flex","justify-content-center","align-items-baseline","widget-bar-entry","p-2"],[3,"config","context","type"],[3,"dataSource"],[1,"row","no-gutters","mt-4"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[3,"config","context$","context","type"],[1,"row","no-gutters","pt-1","pb-4"],[3,"config"],[1,"col-lg-3","record-widget-container","pl-0"],[3,"type","context","context$","config"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,lm,13,10,"div",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,B.NgClass,_x,Iw,kw,B.NgForOf,lx,wx],pipes:[B.AsyncPipe],encapsulation:2}),e}(),Fj=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,mC,H.AngularSvgIconModule,Ix,ww,Fx,ux,xw]]}),e}(),Lj=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u){var c;return I(this,n),(c=t.call(this,o,a,s,l,r,u,i)).store=e,c.metadata=i,c.language=r,c.actionManager=o,c.asyncActionService=a,c.message=s,c.confirmation=l,c.selectModalService=u,c.defaultActions={detail:[{key:"toggle-widgets",labelKey:"LBL_INSIGHTS",params:{expanded:!0},acl:[]}],edit:[{key:"toggle-widgets",labelKey:"LBL_INSIGHTS",params:{expanded:!0},acl:[]}]},c}return j(n,[{key:"getActions",value:function(e){var t=this;return(0,x.combineLatest)([this.metadata.recordViewMetadata$,this.store.mode$,this.store.record$,this.store.language$,this.store.widgets$]).pipe((0,M.map)(function(e){var n=v(e,2),i=n[0],r=n[1];return r&&i?t.parseModeActions(i.actions,r,t.store.getViewContext()):[]}))}},{key:"buildActionData",value:function(e,t){return{store:this.store,action:e}}},{key:"buildActionInput",value:function(e,t,n){var i=this.store.getBaseRecord();return this.message.removeMessages(),{action:t,module:i.module,id:i.id,params:e&&e.params||[]}}},{key:"getMode",value:function(){return this.store.getMode()}},{key:"getModuleName",value:function(e){return this.store.getModuleName()}},{key:"reload",value:function(e,t,n){this.store.load(!1).pipe((0,M.take)(1)).subscribe()}}]),n}(bk);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Rw),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(kj),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Oj=function(){var e=function(){function e(t,n,i){I(this,e),this.actionsAdapter=t,this.recordViewStore=n,this.moduleNavigation=i,this.displayResponsiveTable=!1,this.mode="detail",this.loading=!0,this.isScrolled=!1,this.subs=[]}return j(e,[{key:"onScroll",value:function(){var e=window.pageYOffset,t=5*parseFloat(getComputedStyle(document.documentElement).fontSize);if(e>t){if(e-t<10)return;this.isScrolled=!0}else{if(t-e<10)return;this.isScrolled=!1}}},{key:"ngOnInit",value:function(){var e=this;this.mode=this.recordViewStore.getMode(),this.subs.push(this.recordViewStore.mode$.subscribe(function(t){e.mode=t})),this.subs.push(this.recordViewStore.record$.subscribe(function(t){e.record=t})),this.subs.push(this.recordViewStore.loading$.subscribe(function(t){e.loading=t}))}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"moduleTitle",get:function(){return this.moduleNavigation.getModuleLabel(this.recordViewStore.vm.appData.module,this.recordViewStore.vm.appData.language.appListStrings)}},{key:"getSummaryTemplate",value:function(){return this.recordViewStore.getSummaryTemplate()}},{key:"getActionContext",value:function(e){return e?{module:e.module||"",record:e}:{}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Lj),k.\u0275\u0275directiveInject(Rw),k.\u0275\u0275directiveInject(qy))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record-header"]],hostBindings:function(e,t){1&e&&k.\u0275\u0275listener("scroll",function(){return t.onScroll()},!1,k.\u0275\u0275resolveWindow)},features:[k.\u0275\u0275ProvidersFeature([Lj])],decls:4,vars:3,consts:[[1,"record-view-header",3,"ngClass"],[4,"ngIf"],[3,"ngIf"],[1,"d-flex","flex-nowrap"],[1,"row"],[1,"col"],[1,"order-3"],[1,"w-100"],[1,"order-2"],[1,"record-view-name","d-flex","align-items-center"],[3,"fields","labelKey",4,"ngIf"],["class","pl-1 d-flex align-items-top",4,"ngIf"],["class","order-1",4,"ngIf"],[3,"fields","labelKey"],[1,"pl-1","d-flex","align-items-top"],[3,"record"],[1,"order-1"],["klass","record-view-actions float-right",3,"config"],["class","row mr-0",4,"ngIf"],[1,"row","mr-0"],[1,"col-md-4","d-flex","align-items-center"],[1,"record-view-title","title-font",3,"title"],[1,"record-view-name","pt-3","pb-3"],[3,"ngClass"],["class","d-inline-block h-100 lh-100",3,"fields","labelKey",4,"ngIf"],[1,"col-md-8","d-flex","align-items-center","justify-content-end"],[1,"row","mr-1","ml-1"],["class","w-100",4,"ngIf"],[1,"d-inline-block","h-100","lh-100",3,"fields","labelKey"],[1,"d-inline-block","h-100","lh-100",3,"record"],["buttonClass","settings-button",3,"config","actionContext","klass"]],template:function(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",0),k.\u0275\u0275template(2,fm,14,3,"ng-container",1),k.\u0275\u0275template(3,ym,2,2,"ng-template",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e&&(k.\u0275\u0275advance(1),k.\u0275\u0275property("ngClass",t.isScrolled?"record-view-header-scrolled shadow-md":""),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",t.displayResponsiveTable),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!t.displayResponsiveTable))},directives:[B.NgClass,B.NgIf,Yv,cI,Dv,pw],encapsulation:2}),e}(),Dj=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,mw,Xv,tg,dI]]}),e}(),Aj=function(){var e=function(){function e(t,n,i){I(this,e),this.appState=t,this.recordStore=n,this.route=i,this.vm$=null,this.showStatusBar=!1}return j(e,[{key:"ngOnInit",value:function(){var e="detail",t=this.route.snapshot&&this.route.snapshot.data||{};t.mode&&(e=t.mode);var n=this.route.snapshot&&this.route.snapshot.queryParams||{};this.recordSub=this.recordStore.init(this.appState.getModule(),this.route.snapshot.params.record,e,n).subscribe(),this.vm$=this.recordStore.vm$}},{key:"ngOnDestroy",value:function(){this.recordSub&&this.recordSub.unsubscribe(),this.recordStore.destroy()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(jv),k.\u0275\u0275directiveInject(Rw),k.\u0275\u0275directiveInject(Ar.ActivatedRoute))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-record"]],features:[k.\u0275\u0275ProvidersFeature([Rw])],decls:2,vars:3,consts:[["class","record-view",4,"ngIf"],[1,"record-view"],[1,"record-view-position-sticky"],[1,"record-view-hr-container"],[1,"record-view-hr"],[4,"ngIf"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Sm,7,1,"div",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,Oj,_j,Tw],pipes:[B.AsyncPipe],encapsulation:2}),e}(),Nj=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,LS,Fj,Dj,Zw,kx]]}),e}(),Rj=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,LS,Nj,Fj,Dj,Zw,kx]]}),e}(),Tj=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.apply(this,arguments)}return n}(w.ActionHandler),Pj=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s){var l;return I(this,n),(l=t.call(this)).message=e,l.asyncActionService=i,l.router=r,l.modalService=o,l.state=a,l.localStorage=s,l.key="install",l.modes=["edit"],l}return j(n,[{key:"run",value:function(e){var t=this;e.store.recordStore.validate().pipe((0,M.take)(1)).subscribe(function(n){if(n){var i=e.store.recordStore.getStaging();t.runInstall(i)}else t.message.addWarningMessageByKey("LBL_VALIDATION_ERRORS")})}},{key:"shouldDisplay",value:function(){return!0}},{key:"runInstall",value:function(e){var t=this,n="suitecrm-app-".concat(this.key);this.message.removeMessages(),this.asyncActionService.run(n,{action:n,module:e.module,id:e.id,payload:e.formGroup.value}).pipe((0,M.take)(1)).subscribe(function(e){3===e.data.statusCode&&t.openErrorModalDialog(e.data.errors),0===e.data.statusCode&&(t.state.clear(),t.localStorage.clear(),t.router.navigate(["/"],{}).then())})}},{key:"openErrorModalDialog",value:function(e){this.modalService.open(qk,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"lg",windowClass:"custom-modal",modalDialogClass:"custom-modal"}).componentInstance.errors=e}}]),n}(Tj);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(Z.NgbModal),k.\u0275\u0275inject(WS),k.\u0275\u0275inject(nh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ar.Router),k.\u0275\u0275inject(Z.NgbModal),k.\u0275\u0275inject(WS),k.\u0275\u0275inject(nh))},token:e,providedIn:"root"}),e}(),Bj=function(){var e=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this)).save=e,e.modes.forEach(function(t){return i.actions[t][e.key]=e}),i}return n}(Mg);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Pj))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Pj))},token:e,providedIn:"root"}),e}(),$j={loading:!1,mode:"detail",params:{returnModule:"",returnId:"",returnAction:""}},Vj=function(){var e=function(){function e(t,n,i,r,o,a){var s=this;I(this,e),this.recordFetchGQL=t,this.recordSaveGQL=n,this.message=i,this.recordManager=r,this.recordStoreFactory=o,this.language=a,this.cache$=null,this.internalState=(0,w.deepClone)($j),this.store=new x.BehaviorSubject(this.internalState),this.state$=this.store.asObservable(),this.subs=[],this.recordStore=o.create(this.getViewFieldsObservable()),this.record$=this.recordStore.state$.pipe((0,M.distinctUntilChanged)()),this.stagingRecord$=this.recordStore.staging$.pipe((0,M.distinctUntilChanged)()),this.loading$=this.state$.pipe((0,M.map)(function(e){return e.loading})),this.mode$=this.state$.pipe((0,M.map)(function(e){return e.mode})),this.vm$=(0,x.combineLatest)([this.record$,this.loading$]).pipe((0,M.map)(function(e){var t=v(e,2),n=t[0],i=t[1];return s.vm={record:n,loading:i},s.vm})),this.viewContext$=this.record$.pipe((0,M.map)(function(){return s.getViewContext()}))}return j(e,[{key:"params",get:function(){return this.internalState.params||{}},set:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{params:e}))}},{key:"getViewContext",value:function(){return{record:this.getBaseRecord()}}},{key:"getActions",value:function(){return(0,x.of)([])}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"edit";this.setMode(e),this.recordStore.init({id:"",module:"install",attributes:{}})}},{key:"clear",value:function(){this.cache$=null,this.updateState((0,w.deepClone)($j))}},{key:"clearAuthBased",value:function(){this.clear()}},{key:"getBaseRecord",value:function(){return this.internalState?this.recordStore.getBaseRecord():null}},{key:"getMode",value:function(){return this.internalState?this.internalState.mode:null}},{key:"setMode",value:function(e){this.updateState(Object.assign(Object.assign({},this.internalState),{mode:e}))}},{key:"getLicenseText",value:function(){return this.language.getFieldLabel("SUITE8_LICENSE_CONTENT")}},{key:"getMetadata",value:function(){return{actions:[],templateMeta:{maxColumns:2,useTabs:!0,tabDefs:{LBL_CONFIG:{newTab:!0,panelDefault:"expanded"}}},panels:[{key:"LBL_CONFIG",display$:(0,x.of)(!0).pipe((0,M.shareReplay)(1)),rows:[{cols:[{name:"site_host",label:"LBL_SITECFG_URL",type:"varchar",fieldDefinition:{name:"site_host",vname:"LBL_SITECFG_URL",type:"varchar",required:!0}},{name:"demoData",label:"LBL_DBCONF_DEMO_DATA",type:"enum",fieldDefinition:{name:"demoData",vname:"LBL_DBCONF_DEMO_DATA",type:"enum",options:"__no_options__",required:!0,metadata:{extraOptions:[{value:"yes",labelKey:"LBL_YES"},{value:"no",labelKey:"LBL_NO"}]}}}]},{cols:[{name:"db_config",label:"LBL_DBCONF_TITLE",type:"grouped-field",fieldDefinition:{name:"db_config",vname:"LBL_DBCONF_TITLE",type:"grouped-field",layout:["db_username","db_password","db_host","db_name","db_port"],display:"vertical",groupFields:{db_username:{name:"db_username",type:"varchar",vname:"LBL_DBCONF_SUITE_DB_USER",labelKey:"LBL_DBCONF_SUITE_DB_USER",label:"LBL_DBCONF_SUITE_DB_USER",showLabel:["*"],required:!0},db_password:{name:"db_password",type:"password",vname:"LBL_DBCONF_DB_PASSWORD",labelKey:"LBL_DBCONF_DB_PASSWORD",showLabel:["*"],required:!0},db_host:{name:"db_host",type:"varchar",vname:"LBL_DBCONF_HOST_NAME",labelKey:"LBL_DBCONF_HOST_NAME",showLabel:["*"],required:!0},db_name:{name:"db_name",type:"varchar",vname:"LBL_DBCONF_DB_NAME",labelKey:"LBL_DBCONF_DB_NAME",showLabel:["*"],required:!0},db_port:{name:"db_port",type:"varchar",vname:"LBL_DBCONF_DB_PORT",labelKey:"LBL_DBCONF_DB_PORT",showLabel:["*"],required:!1}},showLabel:{edit:["*"]}}},{name:"admin_config",label:"LBL_SITECFG_TITLE",type:"grouped-field",fieldDefinition:{name:"admin_config",vname:"LBL_SITECFG_TITLE",type:"grouped-field",layout:["site_username","site_password"],display:"vertical",groupFields:{site_username:{name:"site_username",type:"varchar",vname:"LBL_SITECFG_ADMIN_Name",labelKey:"LBL_SITECFG_ADMIN_Name",showLabel:["edit"],required:!0},site_password:{name:"site_password",type:"password",vname:"LBL_SITECFG_ADMIN_PASS",labelKey:"LBL_SITECFG_ADMIN_PASS",showLabel:["edit"],required:!0}},showLabel:{edit:["*"]}}}]}]}]}}},{key:"getMetadata$",value:function(){return(0,x.of)(this.getMetadata())}},{key:"getModuleName",value:function(){return"install"}},{key:"parseParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e){var t=Object.assign({},this.internalState.params);Object.keys(e).forEach(function(n){(0,w.isVoid)(t[n])||(t[n]=e[n])}),this.params=e}}},{key:"updateState",value:function(e){this.store.next(this.internalState=e)}},{key:"getIgnoreSystemChecksField",value:function(){return this.recordStore.getStaging().fields.sys_check_option}},{key:"getViewFieldsObservable",value:function(){return this.getMetadata$().pipe((0,M.map)(function(e){var t=[];return e.panels.forEach(function(e){e.rows.forEach(function(e){e.cols.forEach(function(e){t.push(e)})})}),t.push({name:"sys_check_option",type:"boolean",fieldDefinition:{name:"sys_check_option",type:"boolean",vname:"LBL_SYS_CHECK_WARNING",labelKey:"LBL_SYS_CHECK_WARNING",showLabel:["edit"],required:!1,value:"false",default:"false"}}),t}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(mv),k.\u0275\u0275inject(hv),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vv),k.\u0275\u0275inject(yv),k.\u0275\u0275inject(Ov))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Uj=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u){var c;return I(this,n),(c=t.call(this,o,a,s,l,r,u,i)).store=e,c.metadata=i,c.language=r,c.actionManager=o,c.asyncActionService=a,c.message=s,c.confirmation=l,c.selectModalService=u,c.defaultActions={detail:[],edit:[{key:"install",labelKey:"LBL_PROCEED",params:{expanded:!0},acl:[]}],create:[]},c.collapseButtons=!1,c}return j(n,[{key:"getActions",value:function(e){var t=this;return(0,x.combineLatest)([this.store.getActions(),this.store.mode$,this.store.stagingRecord$]).pipe((0,M.map)(function(e){var n=v(e,2),i=n[0],r=n[1];return r?t.parseModeActions(i,r,t.store.getViewContext()):[]}))}},{key:"buildActionData",value:function(e,t){return{store:this.store}}},{key:"buildActionInput",value:function(e,t,n){var i=this.store.getBaseRecord();return this.message.removeMessages(),{action:t,module:i.module,id:i.id,record:i}}},{key:"getMode",value:function(){return this.store.getMode()}},{key:"getModuleName",value:function(e){return this.store.getModuleName()}},{key:"reload",value:function(e,t,n){}}]),n}(bk);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Vj),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Bj),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),Kj=function(){var e=function(){function e(t,n,i,r){I(this,e),this.store=t,this.metadata=n,this.language=i,this.actions=r}return j(e,[{key:"getEditAction",value:function(){}},{key:"getDisplayConfig",value:function(){var e=this;return(0,x.combineLatest)([this.store.getMetadata$(),this.store.mode$]).pipe((0,M.map)(function(t){var n=v(t,2),i=n[0],r=n[1];return{layout:e.getLayout(i),mode:r,maxColumns:i.templateMeta.maxColumns||2,tabDefs:i.templateMeta.tabDefs}}))}},{key:"getPanels",value:function(){var e=this;return(0,x.combineLatest)([this.store.getMetadata$(),this.store.stagingRecord$,this.language.vm$]).pipe((0,M.map)(function(t){var n=v(t,3),i=n[0],r=n[1],o=n[2],a=[],s=r&&r.module||"";return i.panels.forEach(function(t){var n,i={label:e.language.getFieldLabel(t.key.toUpperCase(),s,o),key:t.key,display$:null!==(n=null==t?void 0:t.display$)&&void 0!==n?n:(0,x.of)(!0).pipe((0,M.shareReplay)(1)),rows:[]};t.rows.forEach(function(e){var t={cols:[]};e.cols.forEach(function(e){t.cols.push(Object.assign({},e))}),i.rows.push(t)}),a.push(i)}),a}))}},{key:"getRecord",value:function(){return this.store.stagingRecord$}},{key:"getLayout",value:function(e){var t="panels";return e.templateMeta.useTabs&&(t="tabs"),t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Vj),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Bj))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),zj=function(){var e=function(){function e(t,n){I(this,e),this.metadata=t,this.contentAdapter=n}return j(e,[{key:"getContentAdapter",value:function(){return this.contentAdapter}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(xh),k.\u0275\u0275directiveInject(Kj))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-install-container"]],features:[k.\u0275\u0275ProvidersFeature([Kj])],decls:4,vars:1,consts:[[1,"install-view-container","record-view-container","view-container","container-fluid","pt-3","pb-3","small-font"],[1,"row","no-gutters"],[1,"col"],[3,"dataSource"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275elementStart(2,"div",2),k.\u0275\u0275element(3,"scrm-record-content",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(3),k.\u0275\u0275property("dataSource",t.getContentAdapter()))},directives:[kw],encapsulation:2}),e}(),Gj=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,H.AngularSvgIconModule,ww]]}),e}(),Zj=function(){var e=function(){function e(t,n){I(this,e),this.actionsAdapter=t,this.store=n,this.vm$=(0,x.combineLatest)([this.store.record$]).pipe((0,M.map)(function(e){return{record:v(e,1)[0]}}))}return j(e,[{key:"getActionContext",value:function(e){return e?{module:e.module||"",record:e}:{}}},{key:"getTitle",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Uj),k.\u0275\u0275directiveInject(Vj))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-install-header"]],features:[k.\u0275\u0275ProvidersFeature([Uj])],decls:2,vars:3,consts:[[4,"ngIf"],[1,"install-view-header"],[1,"row","mr-0"],[1,"col-md-4","install-header-title-col"],[1,"install-view-title","record-view-name"],["labelKey","LBL_WELCOME","module","install"],[1,"install-view-subtitle","record-view-title"],["labelKey","LBL_INSTALL","module","install"],[1,"col-md-8","install-header-buttons-col"],[1,"row","mr-1","ml-1"],[1,"w-100","d-flex","justify-content-end","align-items-center"],[1,"w-100","install-header-options","d-flex","justify-content-end","align-items-center","pr-5"],[1,"label-container","pr-2"],[1,"m-0","small"],[3,"labelKey"],[1,"d-flex"],[1,"flex-grow-1","text-break"],[3,"field","mode","record","type"],["buttonClass","settings-button","klass","install-view-actions float-right",3,"actionContext","config"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Cm,21,7,"ng-container",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,zv,ES,Dv],pipes:[B.AsyncPipe],encapsulation:2}),e}(),Hj=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,mw,tg,Gv,LS]]}),e}(),qj=function(){var e=function(){function e(t,n){I(this,e),this.store=t,this.route=n,this.vm$=null,this.showStatusBar=!1}return j(e,[{key:"ngOnInit",value:function(){var e="edit",t=this.route.snapshot&&this.route.snapshot.data||{};t.mode&&(e=t.mode),this.store.init(e),this.vm$=this.store.vm$}},{key:"ngOnDestroy",value:function(){this.store.clear()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Vj),k.\u0275\u0275directiveInject(Ar.ActivatedRoute))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-install-view"]],features:[k.\u0275\u0275ProvidersFeature([Vj])],decls:2,vars:3,consts:[["class","install-view",4,"ngIf"],[1,"install-view"],[1,"record-view-hr-container"],[1,"record-view-hr"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,km,5,0,"div",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,Zj,zj],pipes:[B.AsyncPipe],encapsulation:2}),e}(),Wj=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,LS,Hj,Gj]]}),e}(),Qj=function(e){c(n,e);var t=f(n);function n(){return I(this,n),t.apply(this,arguments)}return n}(OI),Yj=function(){var e=function(e){c(n,e);var t=f(n);function n(){var e;return I(this,n),(e=t.call(this)).key="cancel",e.modes=["detail","edit","list","create","massupdate"],e}return j(n,[{key:"run",value:function(e){e.listStore.closeRecordPanel()}},{key:"shouldDisplay",value:function(){return!0}}]),n}(Qj);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Xj=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o){var a;return I(this,n),(a=t.call(this)).message=e,a.asyncActionService=i,a.confirmation=r,a.asyncAction=o,a.key="bulk-action",a.modes=["detail","edit","list","create","massupdate"],a}return j(n,[{key:"run",value:function(e){var t=e.action,n=e.listStore.recordList.selection,i=t&&t.params||{};if((0,w.isFalse)(i.allowAll)&&n.all)this.message.addDangerMessage(e.listStore.appStrings.LBL_SELECT_ALL_NOT_ALLOWED);else{if(i.min&&n.count<i.min){var r=e.listStore.appStrings.LBL_TOO_FEW_SELECTED;return r=r.replace("{min}",i.min),void this.message.addDangerMessage(r)}if(i.max&&n.count>i.max){var o=e.listStore.appStrings.LBL_TOO_MANY_SELECTED;return o=o.replace("{max}",i.max),void this.message.addDangerMessage(o)}this.runBulkAction(e)}}},{key:"shouldDisplay",value:function(){return!0}},{key:"runBulkAction",value:function(e){var t=this,n="bulk-".concat(e.action.params.bulkAction),i=this.buildActionInput(n,e);this.asyncAction.run(n,i).subscribe(function(n){t.handleProcessResult(n,e)})}},{key:"buildActionInput",value:function(e,t){var n=[];t.listStore.metadata.listView.fields.forEach(function(e){n.push(e.name)});var i={action:e,module:t.listStore.getModuleName(),criteria:null,sort:null,ids:null,fields:n,payload:{panelRecord:t.store.recordStore.getBaseStaging()}},r=t.listStore.recordList.selection;return r.all&&r.count>t.listStore.recordList.records.length&&(i.criteria=t.listStore.recordList.criteria,i.sort=t.listStore.recordList.sort),r.all&&r.count<=t.listStore.recordList.records.length&&(i.ids=[],t.listStore.recordList.records.forEach(function(e){t.ids.push(e.id)})),r.all||(i.ids=Object.keys(r.selected)),i}},{key:"handleProcessResult",value:function(e,t){e.data&&e.data.reload&&(t.listStore.recordList.clearSelection(),t.listStore.load(!1).pipe((0,M.take)(1)).subscribe()),e.data&&e.data.dataUpdated&&t.listStore.triggerDataUpdate(),t.listStore.closeRecordPanel()}}]),n}(Qj);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(ty))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(ty))},token:e,providedIn:"root"}),e}(),Jj=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i){var r;return I(this,n),r=t.call(this),e.modes.forEach(function(t){return r.actions[t][e.key]=e}),i.modes.forEach(function(e){return r.actions[e][i.key]=i}),r}return n}(Mg);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Xj),k.\u0275\u0275inject(Yj))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Xj),k.\u0275\u0275inject(Yj))},token:e,providedIn:"root"}),e}(),eE=function(){var e=function(){function e(t,n,i,r,o,a){I(this,e),this.store=t,this.message=n,this.confirmation=i,this.selectModalService=r,this.asyncAction=o,this.metadata=a}return j(e,[{key:"getBulkActions",value:function(){return this.store.metadata$.pipe((0,M.map)(function(e){return e.listView.bulkActions}))}},{key:"executeBulkAction",value:function(e){var t=this,n=this.store.recordList.selection,i=this.store.metadata.listView.bulkActions[e],r="bulk-".concat(e);if(this.message.removeMessages(),(0,w.isFalse)(i.params.allowAll)&&n.all)this.message.addDangerMessage(this.store.appStrings.LBL_SELECT_ALL_NOT_ALLOWED);else{if(i.params.min&&n.count<i.params.min){var o=this.store.appStrings.LBL_TOO_FEW_SELECTED;return o=o.replace("{min}",i.params.min),void this.message.addDangerMessage(o)}if(i.params.max&&n.count>i.params.max){var a=this.store.appStrings.LBL_TOO_MANY_SELECTED;return a=a.replace("{max}",i.params.max),void this.message.addDangerMessage(a)}var s=[];this.store.metadata.listView.fields.forEach(function(e){s.push(e.name)});var l={action:r,module:this.store.getModuleName(),criteria:null,sort:null,ids:null,fields:s};n.all&&n.count>this.store.recordList.records.length&&(l.criteria=this.store.recordList.criteria,l.sort=this.store.recordList.sort),n.all&&n.count<=this.store.recordList.records.length&&(l.ids=[],this.store.recordList.records.forEach(function(e){l.ids.push(e.id)})),n.all||(l.ids=Object.keys(n.selected));var u=i&&i.params||{},c=u.displayConfirmation||!1,d=u.confirmationLabel||"",f=i.params&&i.params.selectModal,p=f&&f.module,m=i.params&&i.params.recordPanel;m?this.store.openRecordPanel(m):c?this.confirmation.showModal(d,function(){p?t.showSelectModal(f.module,r,l):t.runBulkAction(r,l)}):p?this.showSelectModal(f.module,r,l):this.runBulkAction(r,l)}}},{key:"showSelectModal",value:function(e,t,n){var i=this;this.selectModalService.showSelectModal(e,function(e){if(e){var r=(0,G._T)(e,["fields","formGroup"]);n.modalRecord=r}i.runBulkAction(t,n)})}},{key:"runBulkAction",value:function(e,t){var n=this;this.asyncAction.run(e,t).subscribe(function(e){n.handleProcessResult(e)})}},{key:"handleProcessResult",value:function(e){e.data&&e.data.reload&&(this.store.recordList.clearSelection(),this.store.load(!1).pipe((0,M.take)(1)).subscribe()),e.data&&e.data.dataUpdated&&this.store.triggerDataUpdate(),this.reloadMetadata(this.store.getModuleName(),e)}},{key:"reloadMetadata",value:function(e,t){var n=[];this.shouldReloadRecentlyViewed(t)&&n.push(this.metadata.typeKeys.recentlyViewed),this.shouldReloadFavorites(t)&&n.push(this.metadata.typeKeys.favorites),n&&n.length&&this.metadata.reloadModuleMetadata(e,n,!1).pipe((0,M.take)(1)).subscribe()}},{key:"shouldReloadRecentlyViewed",value:function(e){return!(!e.data||!e.data.reloadRecentlyViewed)}},{key:"shouldReloadFavorites",value:function(e){return!(!e.data||!e.data.reloadFavorites)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Vw),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),tE=function(){var e=function(){function e(t,n,i,r,o){I(this,e),this.message=t,this.confirmation=n,this.selectModalService=i,this.asyncAction=r,this.metadata=o}return j(e,[{key:"create",value:function(e){return new eE(e,this.message,this.confirmation,this.selectModalService,this.asyncAction,this.metadata)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(xh))},token:e,providedIn:"root"}),e}(),nE=function(){var e=function(){function e(t){I(this,e),this.store=t}return j(e,[{key:"getConfig",value:function(){var e=this;return{savedFilterEdit:!0,displayHeader:!0,module:this.store.getModuleName(),filter$:this.store.openFilter$,savedFilters$:this.store.filterList.records$,searchFields$:this.store.metadata$.pipe((0,M.map)(function(e){if(!e||!e.search)return{};var t=e.search,n="advanced";return t.layout.advanced||(n="basic"),t.layout[n]})),listFields:this.store.metadata.listView.fields,onClose:function(){e.store.showFilters=!1},onSearch:function(){e.store.showFilters=!1},updateFilter:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i={};i[t.key]=t,e.store.setFilters(i,n)},resetFilter:function(t){e.store.resetFilters(t)},addSavedFilter:function(t){e.store.addSavedFilter(t)},removeSavedFilter:function(t){e.store.removeSavedFilter(t)},setOpenFilter:function(t){e.store.setOpenFilter(t)}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Vw))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),iE=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u){var c;return I(this,n),(c=t.call(this,i,r,o,a,s,l,u)).store=e,c.actionManager=i,c.asyncActionService=r,c.message=o,c.confirmation=a,c.language=s,c.selectModalService=l,c.metadata=u,c}return j(n,[{key:"getActions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,x.combineLatest)([this.store.lineActions$,(0,x.of)("list").pipe((0,M.shareReplay)())]).pipe((0,M.map)(function(n){var i=v(n,2),r=i[0],o=i[1];return e.parseModeActions(r,o,t)}))}},{key:"getModuleName",value:function(e){return this.store.getModuleName()}},{key:"reload",value:function(e,t,n){this.store.recordList.clearSelection(),this.store.recordList.resetPagination()}},{key:"getMode",value:function(){return"list"}}]),n}(oI);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Vw),k.\u0275\u0275inject(rI),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),rE=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,o,a,s,l,u,c){var d;return I(this,n),(d=t.call(this,o,a,s,l,r,u,c)).store=e,d.listStore=i,d.language=r,d.actionManager=o,d.asyncActionService=a,d.message=s,d.confirmation=l,d.selectModalService=u,d.metadata=c,d.collapseButtons=!1,d}return j(n,[{key:"getActions",value:function(e){var t=this;return(0,x.combineLatest)([this.store.meta$,this.store.mode$,this.store.stagingRecord$,this.language.vm$]).pipe((0,M.map)(function(e){var n=v(e,2),i=n[0],r=n[1];return r&&i?t.parseModeActions(i.actions,r):[]}))}},{key:"buildActionData",value:function(e,t){return{store:this.store,listStore:this.listStore,action:e}}},{key:"getMode",value:function(){return this.store.getMode()}},{key:"getModuleName",value:function(e){return this.store.getModuleName()}},{key:"reload",value:function(e,t,n){this.listStore.load(!1).pipe((0,M.take)(1)).subscribe()}}]),n}(bk);return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(AI),k.\u0275\u0275inject(Vw),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Jj),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),oE=function(){var e=function(){function e(t,n,i,r,o,a,s){I(this,e),this.language=t,this.actionManager=n,this.asyncActionService=i,this.message=r,this.confirmation=o,this.selectModalService=a,this.metadata=s}return j(e,[{key:"create",value:function(e,t){var n,i,r=new rE(e,t,this.language,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.selectModalService,this.metadata),o=null!==(i=null===(n=null==t?void 0:t.recordPanelConfig)||void 0===n?void 0:n.collapseActions)&&void 0!==i?i:null;return null!==o&&(r.collapseButtons=o),r}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Jj),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({factory:function(){return new e(k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(Jj),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(xh))},token:e,providedIn:"root"}),e}(),aE=function(){var e=function(){function e(t,n,i,r){I(this,e),this.store=t,this.recordPanelStoreFactory=n,this.actionAdapterFactory=i,this.recordManager=r}return j(e,[{key:"getConfig",value:function(){var e=this,t=this.createStore();return{module:this.getModule(),title:this.store.recordPanelConfig&&this.store.recordPanelConfig.title||"",store:t,meta:this.store.recordPanelConfig,actions:this.createActionAdapter(t),onClose:function(){e.store.closeRecordPanel()}}}},{key:"getModule",value:function(){return this.store.recordPanelConfig.module||this.store.getModuleName()}},{key:"getViewMode",value:function(){return this.store.recordPanelConfig.mode||"edit"}},{key:"createStore",value:function(){var e=this.recordPanelStoreFactory.create(),t=this.recordManager.buildEmptyRecord(this.getModule());return e.setMetadata(this.store.recordPanelConfig),e.initRecord(t,this.getViewMode(),!1),e}},{key:"createActionAdapter",value:function(e){return this.actionAdapterFactory.create(e,this.store)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Vw),k.\u0275\u0275inject(NI),k.\u0275\u0275inject(oE),k.\u0275\u0275inject(vv))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),sE=function(){var e=function e(t,n){var i=this;I(this,e),this.store=t,this.metadata=n,this.config$=(0,x.combineLatest)([this.metadata.listMetadata$,this.store.showSidebarWidgets$,this.store.widgets$]).pipe((0,M.map)(function(e){var t=v(e,3),n=t[0],r=t[1],o=t[2];return n.sidebarWidgets&&n.sidebarWidgets.length&&n.sidebarWidgets.forEach(function(e){e&&"data-update"===e.refreshOn?e.reload$=i.store.dataSetUpdate$.pipe((0,M.map)(function(){return!0})):e&&"data-reload"===e.refreshOn&&(e.reload$=i.store.records$.pipe((0,M.map)(function(){return!0})))}),{widgets:n.sidebarWidgets||[],show:r,widgetsEnabled:o}}))};return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Vw),k.\u0275\u0275inject(xh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),lE=function(){var e=function(){function e(t,n,i,r,o,a,s,l,u,c,d){I(this,e),this.store=t,this.metadata=n,this.actionManager=i,this.asyncActionService=r,this.message=o,this.confirmation=a,this.language=s,this.bulkActionsAdapterFactory=l,this.selectModalService=u,this.preferences=c,this.systemConfigs=d}return j(e,[{key:"getTable",value:function(){var e,t,n=this;return{showHeader:!0,showFooter:!0,module:this.store.getModuleName(),columns:this.store.columns$,lineActions:this.getLineActionsDataSource(),selection$:this.store.selection$,sort$:this.store.sort$,maxColumns$:(0,x.of)(4),loading$:this.store.recordList.loading$,dataSource:this.store.recordList,selection:this.store.recordList,bulkActions:this.getBulkActionsDataSource(this.store),pagination:this.store.recordList,paginationType:null!==(e=this.preferences.getUserPreference("listview_pagination_type"))&&void 0!==e?e:this.systemConfigs.getConfigValue("listview_pagination_type"),toggleRecordSelection:function(e){n.store.recordList.toggleSelection(e)},updateSorting:function(e,t){n.store.recordList.updateSorting(e,t),n.store.updateSortLocalStorage()},maxListHeight:null!==(t=this.preferences.getUserPreference("listview_max_height"))&&void 0!==t?t:this.systemConfigs.getConfigValue("listview_max_height"),loadMore:function(){var e,t=null!==(e=n.preferences.getUserPreference("list_max_entries_per_page"))&&void 0!==e?e:n.systemConfigs.getConfigValue("list_max_entries_per_page"),i=n.store.recordList.getPagination(),r=Number(i.pageSize||0)+Number(t);n.store.recordList.setPageSize(r),n.store.recordList.updatePagination(i.current)},allLoaded:function(){var e=n.store.recordList.getPagination();return!!e&&(Number(e.pageLast)>=Number(e.total)||Number(e.pageSize)>=Number(e.total))}}}},{key:"getLineActionsDataSource",value:function(){return new iE(this.store,this.actionManager,this.asyncActionService,this.message,this.confirmation,this.language,this.selectModalService,this.metadata)}},{key:"getBulkActionsDataSource",value:function(e){return this.bulkActionsAdapterFactory.create(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(Vw),k.\u0275\u0275inject(xh),k.\u0275\u0275inject(rI),k.\u0275\u0275inject(ty),k.\u0275\u0275inject(Ym),k.\u0275\u0275inject(vk),k.\u0275\u0275inject(Ov),k.\u0275\u0275inject(tE),k.\u0275\u0275inject(gk),k.\u0275\u0275inject(ah),k.\u0275\u0275inject(Gm))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),uE=function(){var e=function(){function e(t,n,i,r,o,a){I(this,e),this.store=t,this.adapter=n,this.maxColumnCalculator=i,this.languageStore=r,this.sidebarWidgetAdapter=o,this.systemConfigs=a,this.screen=Zm.Medium,this.maxColumns=5,this.vm$=(0,x.combineLatest)([this.sidebarWidgetAdapter.config$]).pipe((0,M.map)(function(e){return{sidebarWidgetConfig:v(e,1)[0]}}))}return j(e,[{key:"ngOnInit",value:function(){var e,t,n,i,r,o,a,s;if(this.tableConfig=this.adapter.getTable(),this.tableConfig.maxColumns$=this.getMaxColumns(),(null===(n=null===(t=null===(e=this.store)||void 0===e?void 0:e.metadata)||void 0===t?void 0:t.listView)||void 0===n?void 0:n.maxHeight)&&(this.tableConfig.maxListHeight=this.store.metadata.listView.maxHeight),!(null===(i=this.tableConfig)||void 0===i?void 0:i.maxListHeight)){var l=this.systemConfigs.getConfigValue("ui");this.tableConfig.maxListHeight=l.listview_max_height}this.tableConfig.paginationType=null!==(s=null===(a=null===(o=null===(r=null==this?void 0:this.store)||void 0===r?void 0:r.metadata)||void 0===o?void 0:o.listView)||void 0===a?void 0:a.paginationType)&&void 0!==s?s:this.tableConfig.paginationType}},{key:"getMaxColumns",value:function(){return this.maxColumnCalculator.getMaxColumns(this.store.widgets$)}},{key:"getDisplayWidgets",value:function(){return this.store.widgets&&this.store.showSidebarWidgets}},{key:"getDisplay",value:function(e){var t="none";return e&&(t="block"),t}},{key:"getViewContext",value:function(){return this.store.getViewContext()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Vw),k.\u0275\u0275directiveInject(lE),k.\u0275\u0275directiveInject(vb),k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(sE),k.\u0275\u0275directiveInject(Gm))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-list-container"]],features:[k.\u0275\u0275ProvidersFeature([lE,vb,sE])],decls:2,vars:3,consts:[["class","list-view-container container-fluid pt-2",4,"ngIf"],[1,"list-view-container","container-fluid","pt-2"],[1,"row"],[1,"col-lg-9",3,"ngClass"],[3,"config"],[4,"ngIf"],[1,"col-lg-3","list-widget-container","pl-0"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[3,"config","context","context$","type"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,xm,5,5,"div",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,B.NgClass,Hw,B.NgForOf,lx],pipes:[B.AsyncPipe],encapsulation:2}),e}(),cE=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,eI,mC,H.AngularSvgIconModule,ux]]}),e}(),dE=function(){var e=function(){function e(t,n,i,r){I(this,e),this.filterAdapter=t,this.listStore=n,this.moduleNavigation=i,this.recordPanelAdapter=r,this.displayResponsiveTable=!1,this.actionPanel="",this.subs=[]}return j(e,[{key:"moduleTitle",get:function(){return this.moduleNavigation.getModuleLabel(this.listStore.vm.appData.module,this.listStore.vm.appData.language.appListStrings)}},{key:"ngOnInit",value:function(){var e=this;this.listStore.actionPanel$.subscribe(function(t){e.actionPanel=t,e.recordPanelConfig="recordPanel"===e.actionPanel?e.recordPanelAdapter.getConfig():null})}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()}),this.recordPanelConfig=null}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(nE),k.\u0275\u0275directiveInject(Vw),k.\u0275\u0275directiveInject(qy),k.\u0275\u0275directiveInject(aE))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-list-header"]],features:[k.\u0275\u0275ProvidersFeature([nE,aE])],decls:4,vars:2,consts:[[1,"list-view-header"],[4,"ngIf"],[3,"ngIf"],[1,"d-flex","flex-nowrap"],[1,"row"],[1,"col"],[1,"order-3"],[1,"w-100"],[1,"order-2"],[1,"list-view-title",3,"title"],[1,"order-1"],[1,"row","mr-0","align-items-center"],[1,"col-md-4"],[1,"col-md-8"],[1,"row","mr-0","ml-1"],[1,"list-view-hr-container"],[1,"list-view-hr"],["class","container-fluid pt-2 small-font",4,"ngIf"],[1,"container-fluid","pt-2","small-font"],[3,"config"]],template:function(e,t){1&e&&(k.\u0275\u0275elementContainerStart(0),k.\u0275\u0275elementStart(1,"div",0),k.\u0275\u0275template(2,jm,14,1,"ng-container",1),k.\u0275\u0275template(3,_m,13,3,"ng-template",2),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementContainerEnd()),2&e&&(k.\u0275\u0275advance(2),k.\u0275\u0275property("ngIf",t.displayResponsiveTable),k.\u0275\u0275advance(1),k.\u0275\u0275property("ngIf",!t.displayResponsiveTable))},directives:[B.NgIf,Uw,pw,zw,MI,LI],encapsulation:2}),e}(),fE=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,mw,Kw,Gw,H.AngularSvgIconModule,_I,DI]]}),e}(),pE=function(){var e=function(){function e(t,n){I(this,e),this.appState=t,this.listStore=n,this.vm$=null}return j(e,[{key:"ngOnInit",value:function(){this.listSub=this.listStore.init(this.appState.getModule()).subscribe(),this.vm$=this.listStore.vm$}},{key:"ngOnDestroy",value:function(){this.listSub&&this.listSub.unsubscribe(),this.listStore.destroy()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(jv),k.\u0275\u0275directiveInject(Vw))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-list"]],features:[k.\u0275\u0275ProvidersFeature([Vw])],decls:2,vars:3,consts:[["class","list-view",4,"ngIf"],[1,"list-view"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,Fm,3,0,"div",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,dE,uE],pipes:[B.AsyncPipe],encapsulation:2}),e}(),mE=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,fE,cE,LS]]}),e}(),hE=function(){var e=function(){function e(t,n,i,r,o,a,s){I(this,e),this.router=t,this.auth=n,this.message=i,this.configs=r,this.languageStore=o,this.recoverPasswordService=a,this.appState=s,this.hidden=!0,this.loading=!1,this.error="",this.uname="",this.passw="",this.email="",this.cardState="front",this.systemConfigs$=this.configs.configs$,this.appStrings$=this.languageStore.appStrings$,this.language=null,this.vm$=(0,x.combineLatest)([this.systemConfigs$,this.appStrings$]).pipe((0,M.map)(function(e){var t=v(e,2),n=t[0],i=t[1],r=!1,o=!1;return n.languages&&n.languages.items&&(r=Object.keys(n.languages.items).length>1),n.passwordsetting&&n.passwordsetting.items&&(o=[!0,"1","true"].includes(n.passwordsetting.items.forgotpasswordON)),{systemConfigs:n,appStrings:i,showLanguages:r,showForgotPassword:o}})),this.loading=!1,this.hidden=!1,this.language=null}return j(e,[{key:"ngOnInit",value:function(){this.setCurrentLanguage()}},{key:"onLanguageSelect",value:function(e){!e||e!==this.language&&this.changeLanguage(e)}},{key:"changeLanguage",value:function(e){this.language=e,this.languageStore.changeLanguage(e,!0)}},{key:"getEnabledLanguages",value:function(){return this.languageStore.getEnabledLanguages()}},{key:"getEnabledLanguagesKeys",value:function(){var e,t;return null!==(t=Object.keys(null!==(e=this.languageStore.getEnabledLanguages())&&void 0!==e?e:{}))&&void 0!==t?t:[]}},{key:"flipCard",value:function(){this.cardState="front"===this.cardState?"back":"front"}},{key:"doLogin",value:function(){this.loading=!0,this.auth.doLogin(this.uname,this.passw,this.onLoginSuccess.bind(this),this.onLoginError.bind(this))}},{key:"recoverPassword",value:function(){var e=this;this.recoverPasswordService.run(this.uname,this.email).subscribe(function(t){e.message.log("Recover Password Status: "+t.status);var n="addSuccessMessageByKey";"error"===t.status&&(n="addDangerMessageByKey"),t.messages&&t.messages.forEach(function(t){e.message[n](t)})},function(){e.message.log("Recover Password failed"),e.message.addDangerMessageByKey("ERR_AJAX_LOAD_FAILURE")})}},{key:"onLoginSuccess",value:function(e){var t=this;this.loading=!1,this.message.log("Login success"),this.message.removeMessages(),this.languageStore.setSessionLanguage().pipe((0,M.catchError)(function(){return(0,x.of)({})})).subscribe(function(){if(e&&e.redirect)t.router.navigate([e.redirect]).then();else if(t.appState.getPreLoginUrl())t.router.navigateByUrl(t.appState.getPreLoginUrl()).then(function(){t.appState.setPreLoginUrl("")});else{var n=t.configs.getHomePage();t.router.navigate(["/"+n]).then()}})}},{key:"onLoginError",value:function(e){var t,n;this.loading=!1,this.message.log("Login failed");var i=this.languageStore.getFieldLabel("LOGIN_INCORRECT"),r=null!==(n=null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.error)&&void 0!==n?n:"";"string"==typeof r&&r.includes("Too many failed login attempts, please try again in")&&(i=this.getTooManyFailedMessage("Too many failed login attempts, please try again later.")),i||(i="Login credentials incorrect, please try again."),this.message.addDangerMessage(i)}},{key:"getTooManyFailedMessage",value:function(e){var t=this.languageStore.getFieldLabel("LOGIN_TOO_MANY_FAILED");return t||(t=e),t}},{key:"setCurrentLanguage",value:function(){var e,t,n=null!==(e=this.languageStore.getSelectedLanguage())&&void 0!==e?e:"",i=this.languageStore.getActiveLanguage();if(n||(n=i),this.languageStore.isLanguageEnabled(n)||(n=""),!this.language||n!==this.language){var r=null!==(t=this.configs.getConfigValue("default_language"))&&void 0!==t?t:"en_us";n||(n=r),this.languageStore.isLanguageEnabled(n)||(n=this.languageStore.getFirstLanguage()),this.language=n,this.changeLanguage(n)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Ar.Router),k.\u0275\u0275directiveInject(YS),k.\u0275\u0275directiveInject(Ym),k.\u0275\u0275directiveInject(Gm),k.\u0275\u0275directiveInject(Ov),k.\u0275\u0275directiveInject(Xx),k.\u0275\u0275directiveInject(jv))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-login-ui"]],decls:2,vars:3,consts:[["class","login-view full-height-view d-flex align-items-center",4,"ngIf"],[1,"login-view","full-height-view","d-flex","align-items-center"],["name","login",1,"login-form"],["loginForm","ngForm"],[1,"form-row","form-group"],[1,"col"],["class","form-row",4,"ngIf"],[1,"form-row","fade-card"],["class","fade-card-front col",4,"ngIf"],["class","fade-card-back col",4,"ngIf"],[1,"form-row"],["for","languages",1,""],[1,"w-100"],[1,"inner-addon","left-addon"],["id","languages",3,"change"],["languageSelect",""],[3,"selected","value",4,"ngFor","ngForOf"],[3,"selected","value"],[1,"fade-card-front","col"],["image","login_user"],["type","text","name","username","aria-label","Username","required","",3,"ngModel","placeholder","ngModelChange"],["username","ngModel"],["class","invalid-feedback",4,"ngIf"],["image","login_password"],["type","password","name","password","aria-label","Password","required","",3,"ngModel","placeholder","ngModelChange"],["password","ngModel"],["id","login-button",1,"login-button",3,"scrm-button-loading","click"],["class","forgotten-password",4,"ngIf"],[1,"invalid-feedback"],[1,"forgotten-password"],[1,"forgotten-password-link",3,"click"],[1,"fade-card-back","col"],["image","email"],["type","email","name","email","aria-label","Email","required","",3,"ngModel","placeholder","ngModelChange"],["mail","ngModel"],["scrm-button-loading","",1,"submit-button","login-button",3,"click"],[1,"back-link","forgotten-password-link",3,"click"]],template:function(e,t){1&e&&(k.\u0275\u0275template(0,$m,10,3,"div",0),k.\u0275\u0275pipe(1,"async")),2&e&&k.\u0275\u0275property("ngIf",k.\u0275\u0275pipeBind1(1,1,t.vm$))},directives:[B.NgIf,V.\u0275NgNoValidate,V.NgControlStatusGroup,V.NgForm,xC,B.NgForOf,V.NgSelectOption,V.\u0275NgSelectMultipleOption,Vv,V.DefaultValueAccessor,V.RequiredValidator,V.NgControlStatus,V.NgModel,Ox],pipes:[B.AsyncPipe],encapsulation:2,data:{animation:[(0,Nr.trigger)("fade",[(0,Nr.transition)(":enter",(0,Nr.useAnimation)(io.fadeIn,{params:{timing:.5,delay:0}}))])]}}),e}(),vE=[{path:"",component:hE}],gE=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[V.FormsModule,jC,Ar.RouterModule.forChild(vE),B.CommonModule,H.AngularSvgIconModule,Uv,Dx]]}),e}(),yE=function(){var e=function(){function e(t){I(this,e),this.configs=t}return j(e,[{key:"getLoginURL",value:function(){return"./"}}]),e}();return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(Gm))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["scrm-logout"]],decls:11,vars:1,consts:[[1,"logged-out-view","full-height-view","d-flex","flex-column","align-items-center","justify-content-center"],[1,"logo-row","full-height-view-row"],[1,"mt-3","mb-1","page-title","full-height-view-row"],["labelKey","LBL_LOGGED_OUT_MESSAGE"],[1,"page-subtitle","full-height-view-row"],["labelKey","LBL_LOGIN_AGAIN"],[1,"text-lowercase",3,"href"],["labelKey","LBL_CLICK_HERE"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275element(2,"scrm-logo-ui"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(3,"div",2),k.\u0275\u0275elementStart(4,"h2"),k.\u0275\u0275element(5,"scrm-label",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(6,"div",4),k.\u0275\u0275elementStart(7,"h5"),k.\u0275\u0275element(8,"scrm-label",5),k.\u0275\u0275elementStart(9,"a",6),k.\u0275\u0275element(10,"scrm-label",7),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(9),k.\u0275\u0275property("href",t.getLoginURL(),k.\u0275\u0275sanitizeUrl))},directives:[xC,zv],encapsulation:2}),e}(),bE=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[B.CommonModule,Gv,jC]]}),e}()},73331:function(e,t,n){"use strict";n.d(t,{vT:function(){return l},Is:function(){return s}});var i,r=n(14468),o=n(1090),a=new r.InjectionToken("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,r.inject)(o.DOCUMENT)}}),s=((i=function(){function e(t){if(I(this,e),this.value="ltr",this.change=new r.EventEmitter,t){var n=t.documentElement?t.documentElement.dir:null,i=(t.body?t.body.dir:null)||n;this.value="ltr"===i||"rtl"===i?i:"ltr"}}return j(e,[{key:"ngOnDestroy",value:function(){this.change.complete()}}]),e}()).\u0275fac=function(e){return new(e||i)(r.\u0275\u0275inject(a,8))},i.\u0275prov=r.\u0275\u0275defineInjectable({factory:function(){return new i(r.\u0275\u0275inject(a,8))},token:i,providedIn:"root"}),i),l=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({}),e}()},99957:function(e,t,n){"use strict";n.d(t,{Eq:function(){return a},Ig:function(){return r},fI:function(){return s},su:function(){return o}});var i=n(14468);function r(e){return null!=e&&"false"!="".concat(e)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):t}function a(e){return Array.isArray(e)?e:[e]}function s(e){return e instanceof i.ElementRef?e.nativeElement:e}},27517:function(e,t,n){"use strict";n.d(t,{P3:function(){return s},o2:function(){return o},yy:function(){return l},eX:function(){return u},k:function(){return d},Z9:function(){return a}});var i=n(71180),r=n(14468),o=function e(){I(this,e)};function a(e){return e&&"function"==typeof e.connect}var s=function(e){c(n,e);var t=f(n);function n(e){var i;return I(this,n),(i=t.call(this))._data=e,i}return j(n,[{key:"connect",value:function(){return(0,i.isObservable)(this._data)?this._data:(0,i.of)(this._data)}},{key:"disconnect",value:function(){}}]),n}(o),l=function(){function e(){I(this,e)}return j(e,[{key:"applyChanges",value:function(e,t,n,i,r){e.forEachOperation(function(e,i,o){var a,s;if(null==e.previousIndex){var l=n(e,i,o);a=t.createEmbeddedView(l.templateRef,l.context,l.index),s=1}else null==o?(t.remove(i),s=3):(a=t.get(i),t.move(a,o),s=2);r&&r({context:null==a?void 0:a.context,operation:s,record:e})})}},{key:"detach",value:function(){}}]),e}(),u=function(){function e(){I(this,e),this.viewCacheSize=20,this._viewCache=[]}return j(e,[{key:"applyChanges",value:function(e,t,n,i,r){var o=this;e.forEachOperation(function(e,a,s){var l,u;null==e.previousIndex?u=(l=o._insertView(function(){return n(e,a,s)},s,t,i(e)))?1:0:null==s?(o._detachAndCacheView(a,t),u=3):(l=o._moveView(a,s,t,i(e)),u=2),r&&r({context:null==l?void 0:l.context,operation:u,record:e})})}},{key:"detach",value:function(){var e,t=b(this._viewCache);try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}this._viewCache=[]}},{key:"_insertView",value:function(e,t,n,i){var r=this._insertViewFromCache(t,n);if(!r){var o=e();return n.createEmbeddedView(o.templateRef,o.context,o.index)}r.context.$implicit=i}},{key:"_detachAndCacheView",value:function(e,t){var n=t.detach(e);this._maybeCacheView(n,t)}},{key:"_moveView",value:function(e,t,n,i){var r=n.get(e);return n.move(r,t),r.context.$implicit=i,r}},{key:"_maybeCacheView",value:function(e,t){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(e);else{var n=t.indexOf(e);-1===n?e.destroy():t.remove(n)}}},{key:"_insertViewFromCache",value:function(e,t){var n=this._viewCache.pop();return n&&t.insert(n,e),n||null}}]),e}(),d=new r.InjectionToken("_ViewRepeater")},66825:function(e,t,n){"use strict";n.d(t,{t4:function(){return d},ud:function(){return f},sA:function(){return y},ht:function(){return g},kV:function(){return v},_i:function(){return h},i$:function(){return p},Mq:function(){return m}});var i,r=n(14468),o=n(1090);try{i="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(c){i=!1}var a,s,l,u,c,d=((c=function e(t){I(this,e),this._platformId=t,this.isBrowser=this._platformId?(0,o.isPlatformBrowser)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!i)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}).\u0275fac=function(e){return new(e||c)(r.\u0275\u0275inject(r.PLATFORM_ID))},c.\u0275prov=r.\u0275\u0275defineInjectable({factory:function(){return new c(r.\u0275\u0275inject(r.PLATFORM_ID))},token:c,providedIn:"root"}),c),f=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({}),e}();function p(e){return function(){if(null==a&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return a=!0}}))}finally{a=a||!1}return a}()?e:!!e.capture}function m(){if(null==l){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return l=!1;if("scrollBehavior"in document.documentElement.style)l=!0;else{var e=Element.prototype.scrollTo;l=!!e&&!/\{\s*\[native code\]\s*\}/.test(e.toString())}}return l}function h(){if("object"!=typeof document||!document)return 0;if(null==s){var e=document.createElement("div"),t=e.style;e.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";var n=document.createElement("div"),i=n.style;i.width="2px",i.height="1px",e.appendChild(n),document.body.appendChild(e),s=0,0===e.scrollLeft&&(e.scrollLeft=1,s=0===e.scrollLeft?1:2),e.parentNode.removeChild(e)}return s}function v(e){if(function(){if(null==u){var e="undefined"!=typeof document?document.head:null;u=!(!e||!e.createShadowRoot&&!e.attachShadow)}return u}()){var t=e.getRootNode?e.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function g(){for(var e="undefined"!=typeof document&&document?document.activeElement:null;e&&e.shadowRoot;){var t=e.shadowRoot.activeElement;if(t===e)break;e=t}return e}function y(e){return e.composedPath?e.composedPath()[0]:e.target}},21669:function(e,t,n){"use strict";n.d(t,{xd:function(){return C},ZD:function(){return _},N7:function(){return M},mF:function(){return k},Cl:function(){return F},rL:function(){return x}});var i=n(99957),r=n(14468),o=n(71180),a=n(92343),s=n(66825),u=n(1090),d=n(73331);n(27517);var p=["contentWrapper"],m=["*"],v=new r.InjectionToken("VIRTUAL_SCROLL_STRATEGY"),g=function(){function e(t,n,i){I(this,e),this._scrolledIndexChange=new o.Subject,this.scrolledIndexChange=this._scrolledIndexChange.pipe((0,a.distinctUntilChanged)()),this._viewport=null,this._itemSize=t,this._minBufferPx=n,this._maxBufferPx=i}return j(e,[{key:"attach",value:function(e){this._viewport=e,this._updateTotalContentSize(),this._updateRenderedRange()}},{key:"detach",value:function(){this._scrolledIndexChange.complete(),this._viewport=null}},{key:"updateItemAndBufferSize",value:function(e,t,n){this._itemSize=e,this._minBufferPx=t,this._maxBufferPx=n,this._updateTotalContentSize(),this._updateRenderedRange()}},{key:"onContentScrolled",value:function(){this._updateRenderedRange()}},{key:"onDataLengthChanged",value:function(){this._updateTotalContentSize(),this._updateRenderedRange()}},{key:"onContentRendered",value:function(){}},{key:"onRenderedOffsetChanged",value:function(){}},{key:"scrollToIndex",value:function(e,t){this._viewport&&this._viewport.scrollToOffset(e*this._itemSize,t)}},{key:"_updateTotalContentSize",value:function(){!this._viewport||this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}},{key:"_updateRenderedRange",value:function(){if(this._viewport){var e=this._viewport.getRenderedRange(),t={start:e.start,end:e.end},n=this._viewport.getViewportSize(),i=this._viewport.getDataLength(),r=this._viewport.measureScrollOffset(),o=this._itemSize>0?r/this._itemSize:0;if(t.end>i){var a=Math.ceil(n/this._itemSize),s=Math.max(0,Math.min(o,i-a));o!=s&&(o=s,r=s*this._itemSize,t.start=Math.floor(o)),t.end=Math.max(0,Math.min(i,t.start+a))}var l=r-t.start*this._itemSize;if(l<this._minBufferPx&&0!=t.start){var u=Math.ceil((this._maxBufferPx-l)/this._itemSize);t.start=Math.max(0,t.start-u),t.end=Math.min(i,Math.ceil(o+(n+this._minBufferPx)/this._itemSize))}else{var c=t.end*this._itemSize-(r+n);if(c<this._minBufferPx&&t.end!=i){var d=Math.ceil((this._maxBufferPx-c)/this._itemSize);d>0&&(t.end=Math.min(i,t.end+d),t.start=Math.max(0,Math.floor(o-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(t),this._viewport.setRenderedContentOffset(this._itemSize*t.start),this._scrolledIndexChange.next(Math.floor(o))}}}]),e}();function y(e){return e._scrollStrategy}var S,C=((S=function(){function e(){I(this,e),this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new g(this.itemSize,this.minBufferPx,this.maxBufferPx)}return j(e,[{key:"itemSize",get:function(){return this._itemSize},set:function(e){this._itemSize=(0,i.su)(e)}},{key:"minBufferPx",get:function(){return this._minBufferPx},set:function(e){this._minBufferPx=(0,i.su)(e)}},{key:"maxBufferPx",get:function(){return this._maxBufferPx},set:function(e){this._maxBufferPx=(0,i.su)(e)}},{key:"ngOnChanges",value:function(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}}]),e}()).\u0275fac=function(e){return new(e||S)},S.\u0275dir=r.\u0275\u0275defineDirective({type:S,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[r.\u0275\u0275ProvidersFeature([{provide:v,useFactory:y,deps:[(0,r.forwardRef)(function(){return S})]}]),r.\u0275\u0275NgOnChangesFeature]}),S),k=function(){var e=function(){function e(t,n,i){I(this,e),this._ngZone=t,this._platform=n,this._scrolled=new o.Subject,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}return j(e,[{key:"register",value:function(e){var t=this;this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(function(){return t._scrolled.next(e)}))}},{key:"deregister",value:function(e){var t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}},{key:"scrolled",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return this._platform.isBrowser?new o.Observable(function(n){e._globalSubscription||e._addGlobalListener();var i=t>0?e._scrolled.pipe((0,a.auditTime)(t)).subscribe(n):e._scrolled.subscribe(n);return e._scrolledCount++,function(){i.unsubscribe(),e._scrolledCount--,e._scrolledCount||e._removeGlobalListener()}}):(0,o.of)()}},{key:"ngOnDestroy",value:function(){var e=this;this._removeGlobalListener(),this.scrollContainers.forEach(function(t,n){return e.deregister(n)}),this._scrolled.complete()}},{key:"ancestorScrolled",value:function(e,t){var n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe((0,a.filter)(function(e){return!e||n.indexOf(e)>-1}))}},{key:"getAncestorScrollContainers",value:function(e){var t=this,n=[];return this.scrollContainers.forEach(function(i,r){t._scrollableContainsElement(r,e)&&n.push(r)}),n}},{key:"_getWindow",value:function(){return this._document.defaultView||window}},{key:"_scrollableContainsElement",value:function(e,t){var n=(0,i.fI)(t),r=e.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}},{key:"_addGlobalListener",value:function(){var e=this;this._globalSubscription=this._ngZone.runOutsideAngular(function(){var t=e._getWindow();return(0,o.fromEvent)(t.document,"scroll").subscribe(function(){return e._scrolled.next()})})}},{key:"_removeGlobalListener",value:function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(r.NgZone),r.\u0275\u0275inject(s.t4),r.\u0275\u0275inject(u.DOCUMENT,8))},e.\u0275prov=r.\u0275\u0275defineInjectable({factory:function(){return new e(r.\u0275\u0275inject(r.NgZone),r.\u0275\u0275inject(s.t4),r.\u0275\u0275inject(u.DOCUMENT,8))},token:e,providedIn:"root"}),e}(),w=function(){var e=function(){function e(t,n,i,r){var s=this;I(this,e),this.elementRef=t,this.scrollDispatcher=n,this.ngZone=i,this.dir=r,this._destroyed=new o.Subject,this._elementScrolled=new o.Observable(function(e){return s.ngZone.runOutsideAngular(function(){return(0,o.fromEvent)(s.elementRef.nativeElement,"scroll").pipe((0,a.takeUntil)(s._destroyed)).subscribe(e)})})}return j(e,[{key:"ngOnInit",value:function(){this.scrollDispatcher.register(this)}},{key:"ngOnDestroy",value:function(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}},{key:"elementScrolled",value:function(){return this._elementScrolled}},{key:"getElementRef",value:function(){return this.elementRef}},{key:"scrollTo",value:function(e){var t=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=n?e.end:e.start),null==e.right&&(e.right=n?e.start:e.end),null!=e.bottom&&(e.top=t.scrollHeight-t.clientHeight-e.bottom),n&&0!=(0,s._i)()?(null!=e.left&&(e.right=t.scrollWidth-t.clientWidth-e.left),2==(0,s._i)()?e.left=e.right:1==(0,s._i)()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=t.scrollWidth-t.clientWidth-e.right),this._applyScrollToOptions(e)}},{key:"_applyScrollToOptions",value:function(e){var t=this.elementRef.nativeElement;(0,s.Mq)()?t.scrollTo(e):(null!=e.top&&(t.scrollTop=e.top),null!=e.left&&(t.scrollLeft=e.left))}},{key:"measureScrollOffset",value:function(e){var t="left",n=this.elementRef.nativeElement;if("top"==e)return n.scrollTop;if("bottom"==e)return n.scrollHeight-n.clientHeight-n.scrollTop;var i=this.dir&&"rtl"==this.dir.value;return"start"==e?e=i?"right":t:"end"==e&&(e=i?t:"right"),i&&2==(0,s._i)()?e==t?n.scrollWidth-n.clientWidth-n.scrollLeft:n.scrollLeft:i&&1==(0,s._i)()?e==t?n.scrollLeft+n.scrollWidth-n.clientWidth:-n.scrollLeft:e==t?n.scrollLeft:n.scrollWidth-n.clientWidth-n.scrollLeft}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(k),r.\u0275\u0275directiveInject(r.NgZone),r.\u0275\u0275directiveInject(d.Is,8))},e.\u0275dir=r.\u0275\u0275defineDirective({type:e,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),e}(),x=function(){var e=function(){function e(t,n,i){var r=this;I(this,e),this._platform=t,this._change=new o.Subject,this._changeListener=function(e){r._change.next(e)},this._document=i,n.runOutsideAngular(function(){if(t.isBrowser){var e=r._getWindow();e.addEventListener("resize",r._changeListener),e.addEventListener("orientationchange",r._changeListener)}r.change().subscribe(function(){return r._viewportSize=null})})}return j(e,[{key:"ngOnDestroy",value:function(){if(this._platform.isBrowser){var e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}},{key:"getViewportSize",value:function(){this._viewportSize||this._updateViewportSize();var e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}},{key:"getViewportRect",value:function(){var e=this.getViewportScrollPosition(),t=this.getViewportSize(),n=t.width,i=t.height;return{top:e.top,left:e.left,bottom:e.top+i,right:e.left+n,height:i,width:n}}},{key:"getViewportScrollPosition",value:function(){if(!this._platform.isBrowser)return{top:0,left:0};var e=this._document,t=this._getWindow(),n=e.documentElement,i=n.getBoundingClientRect();return{top:-i.top||e.body.scrollTop||t.scrollY||n.scrollTop||0,left:-i.left||e.body.scrollLeft||t.scrollX||n.scrollLeft||0}}},{key:"change",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return e>0?this._change.pipe((0,a.auditTime)(e)):this._change}},{key:"_getWindow",value:function(){return this._document.defaultView||window}},{key:"_updateViewportSize",value:function(){var e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(s.t4),r.\u0275\u0275inject(r.NgZone),r.\u0275\u0275inject(u.DOCUMENT,8))},e.\u0275prov=r.\u0275\u0275defineInjectable({factory:function(){return new e(r.\u0275\u0275inject(s.t4),r.\u0275\u0275inject(r.NgZone),r.\u0275\u0275inject(u.DOCUMENT,8))},token:e,providedIn:"root"}),e}(),E="undefined"!=typeof requestAnimationFrame?o.animationFrameScheduler:o.asapScheduler,M=function(){var e=function(e){c(n,e);var t=f(n);function n(e,i,r,a,s,l,u){var c;return I(this,n),(c=t.call(this,e,l,r,s)).elementRef=e,c._changeDetectorRef=i,c._scrollStrategy=a,c._detachedSubject=new o.Subject,c._renderedRangeSubject=new o.Subject,c._orientation="vertical",c._appendOnly=!1,c.scrolledIndexChange=new o.Observable(function(e){return c._scrollStrategy.scrolledIndexChange.subscribe(function(t){return Promise.resolve().then(function(){return c.ngZone.run(function(){return e.next(t)})})})}),c.renderedRangeStream=c._renderedRangeSubject,c._totalContentSize=0,c._totalContentWidth="",c._totalContentHeight="",c._renderedRange={start:0,end:0},c._dataLength=0,c._viewportSize=0,c._renderedContentOffset=0,c._renderedContentOffsetNeedsRewrite=!1,c._isChangeDetectionPending=!1,c._runAfterChangeDetection=[],c._viewportChanges=o.Subscription.EMPTY,c._viewportChanges=u.change().subscribe(function(){c.checkViewportSize()}),c}return j(n,[{key:"orientation",get:function(){return this._orientation},set:function(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}},{key:"appendOnly",get:function(){return this._appendOnly},set:function(e){this._appendOnly=(0,i.Ig)(e)}},{key:"ngOnInit",value:function(){var e=this;l(h(n.prototype),"ngOnInit",this).call(this),this.ngZone.runOutsideAngular(function(){return Promise.resolve().then(function(){e._measureViewportSize(),e._scrollStrategy.attach(e),e.elementScrolled().pipe((0,a.startWith)(null),(0,a.auditTime)(0,E)).subscribe(function(){return e._scrollStrategy.onContentScrolled()}),e._markChangeDetectionNeeded()})})}},{key:"ngOnDestroy",value:function(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),l(h(n.prototype),"ngOnDestroy",this).call(this)}},{key:"attach",value:function(e){var t=this;this.ngZone.runOutsideAngular(function(){t._forOf=e,t._forOf.dataStream.pipe((0,a.takeUntil)(t._detachedSubject)).subscribe(function(e){var n=e.length;n!==t._dataLength&&(t._dataLength=n,t._scrollStrategy.onDataLengthChanged()),t._doChangeDetection()})})}},{key:"detach",value:function(){this._forOf=null,this._detachedSubject.next()}},{key:"getDataLength",value:function(){return this._dataLength}},{key:"getViewportSize",value:function(){return this._viewportSize}},{key:"getRenderedRange",value:function(){return this._renderedRange}},{key:"setTotalContentSize",value:function(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}},{key:"setRenderedRange",value:function(e){var t=this;(function(e,t){return e.start==t.start&&e.end==t.end})(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(function(){return t._scrollStrategy.onContentRendered()}))}},{key:"getOffsetToRenderedContentStart",value:function(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}},{key:"setRenderedContentOffset",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"to-start",i="horizontal"==this.orientation,r=i?"X":"Y",o="translate".concat(r,"(").concat(Number((i&&this.dir&&"rtl"==this.dir.value?-1:1)*e),"px)");this._renderedContentOffset=e,"to-end"===n&&(o+=" translate".concat(r,"(-100%)"),this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=o&&(this._renderedContentTransform=o,this._markChangeDetectionNeeded(function(){t._renderedContentOffsetNeedsRewrite?(t._renderedContentOffset-=t.measureRenderedContentSize(),t._renderedContentOffsetNeedsRewrite=!1,t.setRenderedContentOffset(t._renderedContentOffset)):t._scrollStrategy.onRenderedOffsetChanged()}))}},{key:"scrollToOffset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto",n={behavior:t};"horizontal"===this.orientation?n.start=e:n.top=e,this.scrollTo(n)}},{key:"scrollToIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";this._scrollStrategy.scrollToIndex(e,t)}},{key:"measureScrollOffset",value:function(e){return l(h(n.prototype),"measureScrollOffset",this).call(this,e||("horizontal"===this.orientation?"start":"top"))}},{key:"measureRenderedContentSize",value:function(){var e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}},{key:"measureRangeSize",value:function(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}},{key:"checkViewportSize",value:function(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}},{key:"_measureViewportSize",value:function(){var e=this.elementRef.nativeElement;this._viewportSize="horizontal"===this.orientation?e.clientWidth:e.clientHeight}},{key:"_markChangeDetectionNeeded",value:function(e){var t=this;e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(function(){return Promise.resolve().then(function(){t._doChangeDetection()})}))}},{key:"_doChangeDetection",value:function(){var e=this;this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(function(){return e._changeDetectorRef.markForCheck()});var t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];var n,i=b(t);try{for(i.s();!(n=i.n()).done;){(0,n.value)()}}catch(r){i.e(r)}finally{i.f()}}},{key:"_calculateSpacerSize",value:function(){this._totalContentHeight="horizontal"===this.orientation?"":"".concat(this._totalContentSize,"px"),this._totalContentWidth="horizontal"===this.orientation?"".concat(this._totalContentSize,"px"):""}}]),n}(w);return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(r.NgZone),r.\u0275\u0275directiveInject(v,8),r.\u0275\u0275directiveInject(d.Is,8),r.\u0275\u0275directiveInject(k),r.\u0275\u0275directiveInject(x))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,t){var n;(1&e&&r.\u0275\u0275viewQuery(p,7),2&e)&&(r.\u0275\u0275queryRefresh(n=r.\u0275\u0275loadQuery())&&(t._contentWrapper=n.first))},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,t){2&e&&r.\u0275\u0275classProp("cdk-virtual-scroll-orientation-horizontal","horizontal"===t.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==t.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[r.\u0275\u0275ProvidersFeature([{provide:w,useExisting:e}]),r.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:m,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,t){1&e&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"div",0,1),r.\u0275\u0275projection(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(3,"div",2)),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275styleProp("width",t._totalContentWidth)("height",t._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0}[dir=rtl] .cdk-virtual-scroll-spacer{right:0;left:auto;transform-origin:100% 0}\n"],encapsulation:2,changeDetection:0}),e}(),_=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({}),e}(),F=function(){var e=function e(){I(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[d.vT,s.ud,_],d.vT,_]}),e}()},81275:function(e,t){var n;!function(i){"use strict";var r=function(e){return.5*(Math.exp(e)+Math.exp(-e))},o=function(e){return.5*(Math.exp(e)-Math.exp(-e))},a=function(){throw SyntaxError("Invalid Param")};function s(e,t){var n=Math.abs(e),i=Math.abs(t);return 0===e?Math.log(i):0===t?Math.log(n):n<3e3&&i<3e3?.5*Math.log(e*e+t*t):Math.log(e/Math.cos(Math.atan2(t,e)))}function l(e,t){if(!(this instanceof l))return new l(e,t);var n=function(e,t){var n={re:0,im:0};if(null==e)n.re=n.im=0;else if(void 0!==t)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return l.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return l.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else 2===e.length?(n.re=e[0],n.im=e[1]):a();break;case"string":n.im=n.re=0;var i=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),r=1,o=0;null===i&&a();for(var s=0;s<i.length;s++){var u=i[s];" "===u||"\t"===u||"\n"===u||("+"===u?r++:"-"===u?o++:"i"===u||"I"===u?(r+o===0&&a()," "===i[s+1]||isNaN(i[s+1])?n.im+=parseFloat((o%2?"-":"")+"1"):(n.im+=parseFloat((o%2?"-":"")+i[s+1]),s++),r=o=0):((r+o===0||isNaN(u))&&a(),"i"===i[s+1]||"I"===i[s+1]?(n.im+=parseFloat((o%2?"-":"")+u),s++):n.re+=parseFloat((o%2?"-":"")+u),r=o=0))}r+o>0&&a();break;case"number":n.im=0,n.re=e;break;default:a()}return isNaN(n.re)||isNaN(n.im),n}(e,t);this.re=n.re,this.im=n.im}l.prototype={re:0,im:0,sign:function(){var e=this.abs();return new l(this.re/e,this.im/e)},add:function(e,t){var n=new l(e,t);return this.isInfinite()&&n.isInfinite()?l.NAN:this.isInfinite()||n.isInfinite()?l.INFINITY:new l(this.re+n.re,this.im+n.im)},sub:function(e,t){var n=new l(e,t);return this.isInfinite()&&n.isInfinite()?l.NAN:this.isInfinite()||n.isInfinite()?l.INFINITY:new l(this.re-n.re,this.im-n.im)},mul:function(e,t){var n=new l(e,t);return this.isInfinite()&&n.isZero()||this.isZero()&&n.isInfinite()?l.NAN:this.isInfinite()||n.isInfinite()?l.INFINITY:0===n.im&&0===this.im?new l(this.re*n.re,0):new l(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){var n=new l(e,t);if(this.isZero()&&n.isZero()||this.isInfinite()&&n.isInfinite())return l.NAN;if(this.isInfinite()||n.isZero())return l.INFINITY;if(this.isZero()||n.isInfinite())return l.ZERO;e=this.re,t=this.im;var i,r,o=n.re,a=n.im;return 0===a?new l(e/o,t/o):Math.abs(o)<Math.abs(a)?new l((e*(r=o/a)+t)/(i=o*r+a),(t*r-e)/i):new l((e+t*(r=a/o))/(i=a*r+o),(t-e*r)/i)},pow:function(e,t){var n=new l(e,t);if(e=this.re,t=this.im,n.isZero())return l.ONE;if(0===n.im){if(0===t&&e>0)return new l(Math.pow(e,n.re),0);if(0===e)switch((n.re%4+4)%4){case 0:return new l(Math.pow(t,n.re),0);case 1:return new l(0,Math.pow(t,n.re));case 2:return new l(-Math.pow(t,n.re),0);case 3:return new l(0,-Math.pow(t,n.re))}}if(0===e&&0===t&&n.re>0&&n.im>=0)return l.ZERO;var i=Math.atan2(t,e),r=s(e,t);return e=Math.exp(n.re*r-n.im*i),t=n.im*r+n.re*i,new l(e*Math.cos(t),e*Math.sin(t))},sqrt:function(){var e,t,n=this.re,i=this.im,r=this.abs();if(n>=0){if(0===i)return new l(Math.sqrt(n),0);e=.5*Math.sqrt(2*(r+n))}else e=Math.abs(i)/Math.sqrt(2*(r-n));return t=n<=0?.5*Math.sqrt(2*(r-n)):Math.abs(i)/Math.sqrt(2*(r+n)),new l(e,i<0?-t:t)},exp:function(){var e=Math.exp(this.re);return new l(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,t=this.im;return new l(Math.expm1(e)*Math.cos(t)+function(e){var t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;var n=e*e;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(t),Math.exp(e)*Math.sin(t))},log:function(){var e=this.re,t=this.im;return new l(s(e,t),Math.atan2(t,e))},abs:function(){return e=this.re,t=this.im,n=Math.abs(e),i=Math.abs(t),n<3e3&&i<3e3?Math.sqrt(n*n+i*i):(n<i?(n=i,i=e/t):i=t/e,n*Math.sqrt(1+i*i));var e,t,n,i},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,t=this.im;return new l(Math.sin(e)*r(t),Math.cos(e)*o(t))},cos:function(){var e=this.re,t=this.im;return new l(Math.cos(e)*r(t),-Math.sin(e)*o(t))},tan:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)+r(t);return new l(Math.sin(e)/n,o(t)/n)},cot:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)-r(t);return new l(-Math.sin(e)/n,o(t)/n)},sec:function(){var e=this.re,t=this.im,n=.5*r(2*t)+.5*Math.cos(2*e);return new l(Math.cos(e)*r(t)/n,Math.sin(e)*o(t)/n)},csc:function(){var e=this.re,t=this.im,n=.5*r(2*t)-.5*Math.cos(2*e);return new l(Math.sin(e)*r(t)/n,-Math.cos(e)*o(t)/n)},asin:function(){var e=this.re,t=this.im,n=new l(t*t-e*e+1,-2*e*t).sqrt(),i=new l(n.re-t,n.im+e).log();return new l(i.im,-i.re)},acos:function(){var e=this.re,t=this.im,n=new l(t*t-e*e+1,-2*e*t).sqrt(),i=new l(n.re-t,n.im+e).log();return new l(Math.PI/2-i.im,i.re)},atan:function(){var e=this.re,t=this.im;if(0===e){if(1===t)return new l(0,1/0);if(-1===t)return new l(0,-1/0)}var n=e*e+(1-t)*(1-t),i=new l((1-t*t-e*e)/n,-2*e/n).log();return new l(-.5*i.im,.5*i.re)},acot:function(){var e=this.re,t=this.im;if(0===t)return new l(Math.atan2(1,e),0);var n=e*e+t*t;return 0!==n?new l(e/n,-t/n).atan():new l(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new l(0,1/0);var n=e*e+t*t;return 0!==n?new l(e/n,-t/n).acos():new l(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new l(Math.PI/2,1/0);var n=e*e+t*t;return 0!==n?new l(e/n,-t/n).asin():new l(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){var e=this.re,t=this.im;return new l(o(e)*Math.cos(t),r(e)*Math.sin(t))},cosh:function(){var e=this.re,t=this.im;return new l(r(e)*Math.cos(t),o(e)*Math.sin(t))},tanh:function(){var e=2*this.re,t=2*this.im,n=r(e)+Math.cos(t);return new l(o(e)/n,Math.sin(t)/n)},coth:function(){var e=2*this.re,t=2*this.im,n=r(e)-Math.cos(t);return new l(o(e)/n,-Math.sin(t)/n)},csch:function(){var e=this.re,t=this.im,n=Math.cos(2*t)-r(2*e);return new l(-2*o(e)*Math.cos(t)/n,2*r(e)*Math.sin(t)/n)},sech:function(){var e=this.re,t=this.im,n=Math.cos(2*t)+r(2*e);return new l(2*r(e)*Math.cos(t)/n,-2*o(e)*Math.sin(t)/n)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){var e=this.acos();if(e.im<=0){var t=e.re;e.re=-e.im,e.im=t}else t=e.im,e.im=-e.re,e.re=t;return e},atanh:function(){var e=this.re,t=this.im,n=e>1&&0===t,i=1-e,r=1+e,o=i*i+t*t,a=0!==o?new l((r*i-t*t)/o,(t*i+r*t)/o):new l(-1!==e?e/0:0,0!==t?t/0:0),u=a.re;return a.re=s(a.re,a.im)/2,a.im=Math.atan2(a.im,u)/2,n&&(a.im=-a.im),a},acoth:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new l(0,Math.PI/2);var n=e*e+t*t;return 0!==n?new l(e/n,-t/n).atanh():new l(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){var e=this.re,t=this.im;if(0===t)return new l(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var n=e*e+t*t;return 0!==n?new l(e/n,-t/n).asinh():new l(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){var e=this.re,t=this.im;if(this.isZero())return l.INFINITY;var n=e*e+t*t;return 0!==n?new l(e/n,-t/n).acosh():new l(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){if(this.isZero())return l.INFINITY;if(this.isInfinite())return l.ZERO;var e=this.re,t=this.im,n=e*e+t*t;return new l(e/n,-t/n)},conjugate:function(){return new l(this.re,-this.im)},neg:function(){return new l(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new l(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new l(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new l(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){var n=new l(e,t);return Math.abs(n.re-this.re)<=l.EPSILON&&Math.abs(n.im-this.im)<=l.EPSILON},clone:function(){return new l(this.re,this.im)},toString:function(){var e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<l.EPSILON&&(e=0),Math.abs(t)<l.EPSILON&&(t=0),0===t?n+e:(0!==e?(n+=e,n+=" ",t<0?(t=-t,n+="-"):n+="+",n+=" "):t<0&&(t=-t,n+="-"),1!==t&&(n+=t),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return isNaN(this.re)||isNaN(this.im)}),isZero:function(){return 0===this.im&&0===this.re},isFinite:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return isFinite(this.re)&&isFinite(this.im)}),isInfinite:function(){return!(this.isNaN()||this.isFinite())}},l.ZERO=new l(0,0),l.ONE=new l(1,0),l.I=new l(0,1),l.PI=new l(Math.PI,0),l.E=new l(Math.E,0),l.INFINITY=new l(1/0,1/0),l.NAN=new l(NaN,NaN),l.EPSILON=1e-15,void 0!==(n=(function(){return l}).apply(t,[]))&&(e.exports=n)}()},80672:function(e,t,n){var i;!function(r){"use strict";var o,a,s,l=9e15,u=1e9,c="0123456789abcdef",d="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",f="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",p={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-l,maxE:l,crypto:!1},m=!0,h="[DecimalError] ",v=h+"Invalid argument: ",g=h+"Precision limit exceeded",y=h+"crypto unavailable",b="[object Decimal]",S=Math.floor,C=Math.pow,k=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,w=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,I=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,x=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,j=1e7,E=d.length-1,M=f.length-1,_={toStringTag:b};function F(e){var t,n,i,r=e.length-1,o="",a=e[0];if(r>0){for(o+=a,t=1;t<r;t++)(n=7-(i=e[t]+"").length)&&(o+=V(n)),o+=i;(n=7-(i=(a=e[t])+"").length)&&(o+=V(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}function L(e,t,n){if(e!==~~e||e<t||e>n)throw Error(v+e)}function O(e,t,n,i){var r,o,a,s;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=7,r=0):(r=Math.ceil((t+1)/7),t%=7),o=C(10,7-t),s=e[r]%o|0,null==i?t<3?(0==t?s=s/100|0:1==t&&(s=s/10|0),a=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):a=(n<4&&s+1==o||n>3&&s+1==o/2)&&(e[r+1]/o/100|0)==C(10,t-2)-1||(s==o/2||0==s)&&0==(e[r+1]/o/100|0):t<4?(0==t?s=s/1e3|0:1==t?s=s/100|0:2==t&&(s=s/10|0),a=(i||n<4)&&9999==s||!i&&n>3&&4999==s):a=((i||n<4)&&s+1==o||!i&&n>3&&s+1==o/2)&&(e[r+1]/o/1e3|0)==C(10,t-3)-1,a}function D(e,t,n){for(var i,r,o=[0],a=0,s=e.length;a<s;){for(r=o.length;r--;)o[r]*=t;for(o[0]+=c.indexOf(e.charAt(a++)),i=0;i<o.length;i++)o[i]>n-1&&(void 0===o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/n|0,o[i]%=n)}return o.reverse()}_.absoluteValue=_.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),N(e)},_.ceil=function(){return N(new this.constructor(this),this.e+1,2)},_.clampedTo=_.clamp=function(e,t){var n=this,i=n.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(v+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new i(n)},_.comparedTo=_.cmp=function(e){var t,n,i,r,o=this,a=o.d,s=(e=new o.constructor(e)).d,l=o.s,u=e.s;if(!a||!s)return l&&u?l!==u?l:a===s?0:!a^l<0?1:-1:NaN;if(!a[0]||!s[0])return a[0]?l:s[0]?-u:0;if(l!==u)return l;if(o.e!==e.e)return o.e>e.e^l<0?1:-1;for(t=0,n=(i=a.length)<(r=s.length)?i:r;t<n;++t)if(a[t]!==s[t])return a[t]>s[t]^l<0?1:-1;return i===r?0:i>r^l<0?1:-1},_.cosine=_.cos=function(){var e,t,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.rounding,i.precision=(e=i.precision)+Math.max(n.e,n.sd())+7,i.rounding=1,n=function(e,t){var n,i,r;if(t.isZero())return t;(i=t.d.length)<32?r=(1/Q(4,n=Math.ceil(i/3))).toString():(n=16,r="2.3283064365386962890625e-10"),e.precision+=n,t=W(e,1,t.times(r),new e(1));for(var o=n;o--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=n,t}(i,Y(i,n)),i.precision=e,i.rounding=t,N(2==s||3==s?n.neg():n,e,t,!0)):new i(1):new i(NaN)},_.cubeRoot=_.cbrt=function(){var e,t,n,i,r,o,a,s,l,u,c=this,d=c.constructor;if(!c.isFinite()||c.isZero())return new d(c);for(m=!1,(o=c.s*C(c.s*c,1/3))&&Math.abs(o)!=1/0?i=new d(o.toString()):(n=F(c.d),(o=((e=c.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=C(n,1/3),e=S((e+1)/3)-(e%3==(e<0?-1:2)),(i=new d(n=o==1/0?"5e"+e:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=c.s),a=(e=d.precision)+3;;)if(u=(l=(s=i).times(s).times(s)).plus(c),i=A(u.plus(c).times(s),u.plus(l),a+2,1),F(s.d).slice(0,a)===(n=F(i.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(r||"4999"!=n)){(!+n||!+n.slice(1)&&"5"==n.charAt(0))&&(N(i,e+1,1),t=!i.times(i).times(i).eq(c));break}if(!r&&(N(s,e+1,0),s.times(s).times(s).eq(c))){i=s;break}a+=4,r=1}return m=!0,N(i,e,d.rounding,t)},_.decimalPlaces=_.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-S(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},_.dividedBy=_.div=function(e){return A(this,new this.constructor(e))},_.dividedToIntegerBy=_.divToInt=function(e){var t=this.constructor;return N(A(this,new t(e),0,1,1),t.precision,t.rounding)},_.equals=_.eq=function(e){return 0===this.cmp(e)},_.floor=function(){return N(new this.constructor(this),this.e+1,3)},_.greaterThan=_.gt=function(e){return this.cmp(e)>0},_.greaterThanOrEqualTo=_.gte=function(e){var t=this.cmp(e);return 1==t||0===t},_.hyperbolicCosine=_.cosh=function(){var e,t,n,i,r,o=this,a=o.constructor,s=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return s;i=a.rounding,a.precision=(n=a.precision)+Math.max(o.e,o.sd())+4,a.rounding=1,(r=o.d.length)<32?t=(1/Q(4,e=Math.ceil(r/3))).toString():(e=16,t="2.3283064365386962890625e-10"),o=W(a,1,o.times(t),new a(1),!0);for(var l,u=e,c=new a(8);u--;)l=o.times(o),o=s.minus(l.times(c.minus(l.times(c))));return N(o,a.precision=n,a.rounding=i,!0)},_.hyperbolicSine=_.sinh=function(){var e,t,n,i,r=this,o=r.constructor;if(!r.isFinite()||r.isZero())return new o(r);if(n=o.rounding,o.precision=(t=o.precision)+Math.max(r.e,r.sd())+4,o.rounding=1,(i=r.d.length)<3)r=W(o,2,r,r,!0);else{e=1.4*Math.sqrt(i),r=W(o,2,r=r.times(1/Q(5,e=e>16?16:0|e)),r,!0);for(var a,s=new o(5),l=new o(16),u=new o(20);e--;)a=r.times(r),r=r.times(s.plus(a.times(l.times(a).plus(u))))}return o.precision=t,o.rounding=n,N(r,t,n,!0)},_.hyperbolicTangent=_.tanh=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.rounding,i.precision=(e=i.precision)+7,i.rounding=1,A(n.sinh(),n.cosh(),i.precision=e,i.rounding=t)):new i(n.s)},_.inverseCosine=_.acos=function(){var e,t=this,n=t.constructor,i=t.abs().cmp(1),r=n.precision,o=n.rounding;return-1!==i?0===i?t.isNeg()?B(n,r,o):new n(0):new n(NaN):t.isZero()?B(n,r+4,o).times(.5):(n.precision=r+6,n.rounding=1,t=t.asin(),e=B(n,r+4,o).times(.5),n.precision=r,n.rounding=o,e.minus(t))},_.inverseHyperbolicCosine=_.acosh=function(){var e,t,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.rounding,i.precision=(e=i.precision)+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,m=!1,n=n.times(n).minus(1).sqrt().plus(n),m=!0,i.precision=e,i.rounding=t,n.ln()):new i(n)},_.inverseHyperbolicSine=_.asinh=function(){var e,t,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.rounding,i.precision=(e=i.precision)+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,m=!1,n=n.times(n).plus(1).sqrt().plus(n),m=!0,i.precision=e,i.rounding=t,n.ln())},_.inverseHyperbolicTangent=_.atanh=function(){var e,t,n,i,r=this,o=r.constructor;return r.isFinite()?r.e>=0?new o(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(e=o.precision,t=o.rounding,i=r.sd(),Math.max(i,e)<2*-r.e-1?N(new o(r),e,t,!0):(o.precision=n=i-r.e,r=A(r.plus(1),new o(1).minus(r),n+e,1),o.precision=e+4,o.rounding=1,r=r.ln(),o.precision=e,o.rounding=t,r.times(.5))):new o(NaN)},_.inverseSine=_.asin=function(){var e,t,n,i,r=this,o=r.constructor;return r.isZero()?new o(r):(t=r.abs().cmp(1),n=o.precision,i=o.rounding,-1!==t?0===t?((e=B(o,n+4,i).times(.5)).s=r.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,r=r.div(new o(1).minus(r.times(r)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=i,r.times(2)))},_.inverseTangent=_.atan=function(){var e,t,n,i,r,o,a,s,l,u=this,c=u.constructor,d=c.precision,f=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&d+4<=M)return(a=B(c,d+4,f).times(.25)).s=u.s,a}else{if(!u.s)return new c(NaN);if(d+4<=M)return(a=B(c,d+4,f).times(.5)).s=u.s,a}for(c.precision=s=d+10,c.rounding=1,e=n=Math.min(28,s/7+2|0);e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(m=!1,t=Math.ceil(s/7),i=1,l=u.times(u),a=new c(u),r=u;-1!==e;)if(r=r.times(l),o=a.minus(r.div(i+=2)),r=r.times(l),void 0!==(a=o.plus(r.div(i+=2))).d[t])for(e=t;a.d[e]===o.d[e]&&e--;);return n&&(a=a.times(2<<n-1)),m=!0,N(a,c.precision=d,c.rounding=f,!0)},_.isFinite=function(){return!!this.d},_.isInteger=_.isInt=function(){return!!this.d&&S(this.e/7)>this.d.length-2},_.isNaN=function(){return!this.s},_.isNegative=_.isNeg=function(){return this.s<0},_.isPositive=_.isPos=function(){return this.s>0},_.isZero=function(){return!!this.d&&0===this.d[0]},_.lessThan=_.lt=function(e){return this.cmp(e)<0},_.lessThanOrEqualTo=_.lte=function(e){return this.cmp(e)<1},_.logarithm=_.log=function(e){var t,n,i,r,o,a,s,l,u=this,c=u.constructor,d=c.precision,f=c.rounding;if(null==e)e=new c(10),t=!0;else{if(n=(e=new c(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new c(n&&!n[0]?-1/0:1!=u.s?NaN:n?0:1/0);if(t)if(n.length>1)o=!0;else{for(r=n[0];r%10==0;)r/=10;o=1!==r}if(m=!1,a=Z(u,s=d+5),i=t?P(c,s+10):Z(e,s),O((l=A(a,i,s,1)).d,r=d,f))do{if(a=Z(u,s+=10),i=t?P(c,s+10):Z(e,s),l=A(a,i,s,1),!o){+F(l.d).slice(r+1,r+15)+1==1e14&&(l=N(l,d+1,0));break}}while(O(l.d,r+=10,f));return m=!0,N(l,d,f)},_.minus=_.sub=function(e){var t,n,i,r,o,a,s,l,u,c,d,f,p=this,h=p.constructor;if(e=new h(e),!p.d||!e.d)return p.s&&e.s?p.d?e.s=-e.s:e=new h(e.d||p.s!==e.s?p:NaN):e=new h(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(f=e.d,s=h.precision,l=h.rounding,!(u=p.d)[0]||!f[0]){if(f[0])e.s=-e.s;else{if(!u[0])return new h(3===l?-0:0);e=new h(p)}return m?N(e,s,l):e}if(n=S(e.e/7),c=S(p.e/7),u=u.slice(),o=c-n){for((d=o<0)?(t=u,o=-o,a=f.length):(t=f,n=c,a=u.length),o>(i=Math.max(Math.ceil(s/7),a)+2)&&(o=i,t.length=1),t.reverse(),i=o;i--;)t.push(0);t.reverse()}else{for((d=(i=u.length)<(a=f.length))&&(a=i),i=0;i<a;i++)if(u[i]!=f[i]){d=u[i]<f[i];break}o=0}for(d&&(t=u,u=f,f=t,e.s=-e.s),i=f.length-(a=u.length);i>0;--i)u[a++]=0;for(i=f.length;i>o;){if(u[--i]<f[i]){for(r=i;r&&0===u[--r];)u[r]=j-1;--u[r],u[i]+=j}u[i]-=f[i]}for(;0===u[--a];)u.pop();for(;0===u[0];u.shift())--n;return u[0]?(e.d=u,e.e=T(u,n),m?N(e,s,l):e):new h(3===l?-0:0)},_.modulo=_.mod=function(e){var t,n=this,i=n.constructor;return e=new i(e),!n.d||!e.s||e.d&&!e.d[0]?new i(NaN):!e.d||n.d&&!n.d[0]?N(new i(n),i.precision,i.rounding):(m=!1,9==i.modulo?(t=A(n,e.abs(),0,3,1)).s*=e.s:t=A(n,e,0,i.modulo,1),t=t.times(e),m=!0,n.minus(t))},_.naturalExponential=_.exp=function(){return G(this)},_.naturalLogarithm=_.ln=function(){return Z(this)},_.negated=_.neg=function(){var e=new this.constructor(this);return e.s=-e.s,N(e)},_.plus=_.add=function(e){var t,n,i,r,o,a,s,l,u,c,d=this,f=d.constructor;if(e=new f(e),!d.d||!e.d)return d.s&&e.s?d.d||(e=new f(e.d||d.s===e.s?d:NaN)):e=new f(NaN),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(c=e.d,s=f.precision,l=f.rounding,!(u=d.d)[0]||!c[0])return c[0]||(e=new f(d)),m?N(e,s,l):e;if(o=S(d.e/7),i=S(e.e/7),u=u.slice(),r=o-i){for(r<0?(n=u,r=-r,a=c.length):(n=c,i=o,a=u.length),r>(a=(o=Math.ceil(s/7))>a?o+1:a+1)&&(r=a,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for((a=u.length)-(r=c.length)<0&&(r=a,n=c,c=u,u=n),t=0;r;)t=(u[--r]=u[r]+c[r]+t)/j|0,u[r]%=j;for(t&&(u.unshift(t),++i),a=u.length;0==u[--a];)u.pop();return e.d=u,e.e=T(u,i),m?N(e,s,l):e},_.precision=_.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(v+e);return n.d?(t=$(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},_.round=function(){var e=this,t=e.constructor;return N(new t(e),e.e+1,t.rounding)},_.sine=_.sin=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.rounding,i.precision=(e=i.precision)+Math.max(n.e,n.sd())+7,i.rounding=1,n=function(e,t){var n,i=t.d.length;if(i<3)return t.isZero()?t:W(e,2,t,t);n=1.4*Math.sqrt(i),t=W(e,2,t=t.times(1/Q(5,n=n>16?16:0|n)),t);for(var r,o=new e(5),a=new e(16),s=new e(20);n--;)r=t.times(t),t=t.times(o.plus(r.times(a.times(r).minus(s))));return t}(i,Y(i,n)),i.precision=e,i.rounding=t,N(s>2?n.neg():n,e,t,!0)):new i(NaN)},_.squareRoot=_.sqrt=function(){var e,t,n,i,r,o,a=this,s=a.d,l=a.e,u=a.s,c=a.constructor;if(1!==u||!s||!s[0])return new c(!u||u<0&&(!s||s[0])?NaN:s?a:1/0);for(m=!1,0==(u=Math.sqrt(+a))||u==1/0?(((t=F(s)).length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=S((l+1)/2)-(l<0||l%2),i=new c(t=u==1/0?"5e"+l:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+l)):i=new c(u.toString()),n=(l=c.precision)+3;;)if(i=(o=i).plus(A(a,o,n+2,1)).times(.5),F(o.d).slice(0,n)===(t=F(i.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(r||"4999"!=t)){(!+t||!+t.slice(1)&&"5"==t.charAt(0))&&(N(i,l+1,1),e=!i.times(i).eq(a));break}if(!r&&(N(o,l+1,0),o.times(o).eq(a))){i=o;break}n+=4,r=1}return m=!0,N(i,l,c.rounding,e)},_.tangent=_.tan=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.rounding,i.precision=(e=i.precision)+10,i.rounding=1,(n=n.sin()).s=1,n=A(n,new i(1).minus(n.times(n)).sqrt(),e+10,0),i.precision=e,i.rounding=t,N(2==s||4==s?n.neg():n,e,t,!0)):new i(NaN)},_.times=_.mul=function(e){var t,n,i,r,o,a,s,l,u,c=this.constructor,d=this.d,f=(e=new c(e)).d;if(e.s*=this.s,!(d&&d[0]&&f&&f[0]))return new c(!e.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:d&&f?0*e.s:e.s/0);for(n=S(this.e/7)+S(e.e/7),(l=d.length)<(u=f.length)&&(o=d,d=f,f=o,a=l,l=u,u=a),o=[],i=a=l+u;i--;)o.push(0);for(i=u;--i>=0;){for(t=0,r=l+i;r>i;)s=o[r]+f[i]*d[r-i-1]+t,o[r--]=s%j|0,t=s/j|0;o[r]=(o[r]+t)%j|0}for(;!o[--a];)o.pop();return t?++n:o.shift(),e.d=o,e.e=T(o,n),m?N(e,c.precision,c.rounding):e},_.toBinary=function(e,t){return X(this,2,e,t)},_.toDecimalPlaces=_.toDP=function(e,t){var n=this,i=n.constructor;return n=new i(n),void 0===e?n:(L(e,0,u),void 0===t?t=i.rounding:L(t,0,8),N(n,e+n.e+1,t))},_.toExponential=function(e,t){var n,i=this,r=i.constructor;return void 0===e?n=R(i,!0):(L(e,0,u),void 0===t?t=r.rounding:L(t,0,8),n=R(i=N(new r(i),e+1,t),!0,e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},_.toFixed=function(e,t){var n,i,r=this,o=r.constructor;return void 0===e?n=R(r):(L(e,0,u),void 0===t?t=o.rounding:L(t,0,8),n=R(i=N(new o(r),e+r.e+1,t),!1,e+i.e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},_.toFraction=function(e){var t,n,i,r,o,a,s,l,u,c,d,f,p=this,h=p.d,g=p.constructor;if(!h)return new g(p);if(u=n=new g(1),i=l=new g(0),o=(t=new g(i)).e=$(h)-p.e-1,t.d[0]=C(10,(a=o%7)<0?7+a:a),null==e)e=o>0?t:u;else{if(!(s=new g(e)).isInt()||s.lt(u))throw Error(v+s);e=s.gt(t)?o>0?t:u:s}for(m=!1,s=new g(F(h)),c=g.precision,g.precision=o=7*h.length*2;d=A(s,t,0,1,1),1!=(r=n.plus(d.times(i))).cmp(e);)n=i,i=r,u=l.plus(d.times(r=u)),l=r,t=s.minus(d.times(r=t)),s=r;return r=A(e.minus(n),i,0,1,1),l=l.plus(r.times(u)),n=n.plus(r.times(i)),l.s=u.s=p.s,f=A(u,i,o,1).minus(p).abs().cmp(A(l,n,o,1).minus(p).abs())<1?[u,i]:[l,n],g.precision=c,m=!0,f},_.toHexadecimal=_.toHex=function(e,t){return X(this,16,e,t)},_.toNearest=function(e,t){var n=this,i=n.constructor;if(n=new i(n),null==e){if(!n.d)return n;e=new i(1),t=i.rounding}else{if(e=new i(e),void 0===t?t=i.rounding:L(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(m=!1,n=A(n,e,0,t,1).times(e),m=!0,N(n)):(e.s=n.s,n=e),n},_.toNumber=function(){return+this},_.toOctal=function(e,t){return X(this,8,e,t)},_.toPower=_.pow=function(e){var t,n,i,r,o,a,s=this,l=s.constructor,u=+(e=new l(e));if(!(s.d&&e.d&&s.d[0]&&e.d[0]))return new l(C(+s,u));if((s=new l(s)).eq(1))return s;if(i=l.precision,o=l.rounding,e.eq(1))return N(s,i,o);if((t=S(e.e/7))>=e.d.length-1&&(n=u<0?-u:u)<=9007199254740991)return r=U(l,s,n,i),e.s<0?new l(1).div(r):N(r,i,o);if((a=s.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(a=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=a,s}return(t=0!=(n=C(+s,u))&&isFinite(n)?new l(n+"").e:S(u*(Math.log("0."+F(s.d))/Math.LN10+s.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?a/0:0):(m=!1,l.rounding=s.s=1,n=Math.min(12,(t+"").length),(r=G(e.times(Z(s,i+n)),i)).d&&O((r=N(r,i+5,1)).d,i,o)&&+F((r=N(G(e.times(Z(s,(t=i+10)+n)),t),t+5,1)).d).slice(i+1,i+15)+1==1e14&&(r=N(r,i+1,0)),r.s=a,m=!0,l.rounding=o,N(r,i,o))},_.toPrecision=function(e,t){var n,i=this,r=i.constructor;return void 0===e?n=R(i,i.e<=r.toExpNeg||i.e>=r.toExpPos):(L(e,1,u),void 0===t?t=r.rounding:L(t,0,8),n=R(i=N(new r(i),e,t),e<=i.e||i.e<=r.toExpNeg,e)),i.isNeg()&&!i.isZero()?"-"+n:n},_.toSignificantDigits=_.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(L(e,1,u),void 0===t?t=n.rounding:L(t,0,8)),N(new n(this),e,t)},_.toString=function(){var e=this,t=e.constructor,n=R(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},_.truncated=_.trunc=function(){return N(new this.constructor(this),this.e+1,1)},_.valueOf=_.toJSON=function(){var e=this,t=e.constructor,n=R(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var A=function(){function e(e,t,n){var i,r=0,o=e.length;for(e=e.slice();o--;)e[o]=(i=e[o]*t+r)%n|0,r=i/n|0;return r&&e.unshift(r),e}function t(e,t,n,i){var r,o;if(n!=i)o=n>i?1:-1;else for(r=o=0;r<n;r++)if(e[r]!=t[r]){o=e[r]>t[r]?1:-1;break}return o}function n(e,t,n,i){for(var r=0;n--;)e[n]-=r,e[n]=(r=e[n]<t[n]?1:0)*i+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(i,r,o,s,l,u){var c,d,f,p,m,h,v,g,y,b,C,k,w,I,x,E,M,_,F,L,O=i.constructor,D=i.s==r.s?1:-1,A=i.d,R=r.d;if(!(A&&A[0]&&R&&R[0]))return new O(i.s&&r.s&&(A?!R||A[0]!=R[0]:R)?A&&0==A[0]||!R?0*D:D/0:NaN);for(u?(m=1,d=i.e-r.e):(u=j,d=S(i.e/(m=7))-S(r.e/m)),F=R.length,M=A.length,b=(y=new O(D)).d=[],f=0;R[f]==(A[f]||0);f++);if(R[f]>(A[f]||0)&&d--,null==o?(I=o=O.precision,s=O.rounding):I=l?o+(i.e-r.e)+1:o,I<0)b.push(1),h=!0;else{if(I=I/m+2|0,f=0,1==F){for(p=0,R=R[0],I++;(f<M||p)&&I--;f++)b[f]=(x=p*u+(A[f]||0))/R|0,p=x%R|0;h=p||f<M}else{for((p=u/(R[0]+1)|0)>1&&(R=e(R,p,u),A=e(A,p,u),F=R.length,M=A.length),E=F,k=(C=A.slice(0,F)).length;k<F;)C[k++]=0;(L=R.slice()).unshift(0),_=R[0],R[1]>=u/2&&++_;do{p=0,(c=t(R,C,F,k))<0?(w=C[0],F!=k&&(w=w*u+(C[1]||0)),(p=w/_|0)>1?(p>=u&&(p=u-1),1==(c=t(v=e(R,p,u),C,g=v.length,k=C.length))&&(p--,n(v,F<g?L:R,g,u))):(0==p&&(c=p=1),v=R.slice()),(g=v.length)<k&&v.unshift(0),n(C,v,k,u),-1==c&&(c=t(R,C,F,k=C.length))<1&&(p++,n(C,F<k?L:R,k,u)),k=C.length):0===c&&(p++,C=[0]),b[f++]=p,c&&C[0]?C[k++]=A[E]||0:(C=[A[E]],k=1)}while((E++<M||void 0!==C[0])&&I--);h=void 0!==C[0]}b[0]||b.shift()}if(1==m)y.e=d,a=h;else{for(f=1,p=b[0];p>=10;p/=10)f++;y.e=f+d*m-1,N(y,l?o+y.e+1:o,s,h)}return y}}();function N(e,t,n,i){var r,o,a,s,l,u,c,d,f,p=e.constructor;e:if(null!=t){if(!(d=e.d))return e;for(r=1,s=d[0];s>=10;s/=10)r++;if((o=t-r)<0)o+=7,l=(c=d[f=0])/C(10,r-(a=t)-1)%10|0;else if((f=Math.ceil((o+1)/7))>=(s=d.length)){if(!i)break e;for(;s++<=f;)d.push(0);c=l=0,r=1,a=(o%=7)-7+1}else{for(c=s=d[f],r=1;s>=10;s/=10)r++;l=(a=(o%=7)-7+r)<0?0:c/C(10,r-a-1)%10|0}if(i=i||t<0||void 0!==d[f+1]||(a<0?c:c%C(10,r-a-1)),u=n<4?(l||i)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||i||6==n&&(o>0?a>0?c/C(10,r-a):0:d[f-1])%10&1||n==(e.s<0?8:7)),t<1||!d[0])return d.length=0,u?(d[0]=C(10,(7-(t-=e.e+1)%7)%7),e.e=-t||0):d[0]=e.e=0,e;if(0==o?(d.length=f,s=1,f--):(d.length=f+1,s=C(10,7-o),d[f]=a>0?(c/C(10,r-a)%C(10,a)|0)*s:0),u)for(;;){if(0==f){for(o=1,a=d[0];a>=10;a/=10)o++;for(a=d[0]+=s,s=1;a>=10;a/=10)s++;o!=s&&(e.e++,d[0]==j&&(d[0]=1));break}if(d[f]+=s,d[f]!=j)break;d[f--]=0,s=1}for(o=d.length;0===d[--o];)d.pop()}return m&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function R(e,t,n){if(!e.isFinite())return H(e);var i,r=e.e,o=F(e.d),a=o.length;return t?(n&&(i=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+V(i):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):r<0?(o="0."+V(-r-1)+o,n&&(i=n-a)>0&&(o+=V(i))):r>=a?(o+=V(r+1-a),n&&(i=n-r-1)>0&&(o=o+"."+V(i))):((i=r+1)<a&&(o=o.slice(0,i)+"."+o.slice(i)),n&&(i=n-a)>0&&(r+1===a&&(o+="."),o+=V(i))),o}function T(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function P(e,t,n){if(t>E)throw m=!0,n&&(e.precision=n),Error(g);return N(new e(d),t,1,!0)}function B(e,t,n){if(t>M)throw Error(g);return N(new e(f),t,n,!0)}function $(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function V(e){for(var t="";e--;)t+="0";return t}function U(e,t,n,i){var r,o=new e(1),a=Math.ceil(i/7+4);for(m=!1;;){if(n%2&&J((o=o.times(t)).d,a)&&(r=!0),0===(n=S(n/2))){n=o.d.length-1,r&&0===o.d[n]&&++o.d[n];break}J((t=t.times(t)).d,a)}return m=!0,o}function K(e){return 1&e.d[e.d.length-1]}function z(e,t,n){for(var i,r=new e(t[0]),o=0;++o<t.length;){if(!(i=new e(t[o])).s){r=i;break}r[n](i)&&(r=i)}return r}function G(e,t){var n,i,r,o,a,s,l,u=0,c=0,d=0,f=e.constructor,p=f.rounding,h=f.precision;if(!e.d||!e.d[0]||e.e>17)return new f(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(m=!1,l=h):l=t,s=new f(.03125);e.e>-2;)e=e.times(s),d+=5;for(l+=i=Math.log(C(2,d))/Math.LN10*2+5|0,n=o=a=new f(1),f.precision=l;;){if(o=N(o.times(e),l,1),n=n.times(++c),F((s=a.plus(A(o,n,l,1))).d).slice(0,l)===F(a.d).slice(0,l)){for(r=d;r--;)a=N(a.times(a),l,1);if(null!=t)return f.precision=h,a;if(!(u<3&&O(a.d,l-i,p,u)))return N(a,f.precision=h,p,m=!0);f.precision=l+=10,n=o=s=new f(1),c=0,u++}a=s}}function Z(e,t){var n,i,r,o,a,s,l,u,c,d,f,p=1,h=e,v=h.d,g=h.constructor,y=g.rounding,b=g.precision;if(h.s<0||!v||!v[0]||!h.e&&1==v[0]&&1==v.length)return new g(v&&!v[0]?-1/0:1!=h.s?NaN:v?0:h);if(null==t?(m=!1,c=b):c=t,g.precision=c+=10,i=(n=F(v)).charAt(0),!(Math.abs(o=h.e)<15e14))return u=P(g,c+2,b).times(o+""),h=Z(new g(i+"."+n.slice(1)),c-10).plus(u),g.precision=b,null==t?N(h,b,y,m=!0):h;for(;i<7&&1!=i||1==i&&n.charAt(1)>3;)i=(n=F((h=h.times(e)).d)).charAt(0),p++;for(o=h.e,i>1?(h=new g("0."+n),o++):h=new g(i+"."+n.slice(1)),d=h,l=a=h=A(h.minus(1),h.plus(1),c,1),f=N(h.times(h),c,1),r=3;;){if(a=N(a.times(f),c,1),F((u=l.plus(A(a,new g(r),c,1))).d).slice(0,c)===F(l.d).slice(0,c)){if(l=l.times(2),0!==o&&(l=l.plus(P(g,c+2,b).times(o+""))),l=A(l,new g(p),c,1),null!=t)return g.precision=b,l;if(!O(l.d,c-10,y,s))return N(l,g.precision=b,y,m=!0);g.precision=c+=10,u=a=h=A(d.minus(1),d.plus(1),c,1),f=N(h.times(h),c,1),r=s=1}l=u,r+=2}}function H(e){return String(e.s*e.s/0)}function q(e,t){var n,i,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;48===t.charCodeAt(i);i++);for(r=t.length;48===t.charCodeAt(r-1);--r);if(t=t.slice(i,r)){if(r-=i,e.e=n=n-i-1,e.d=[],i=(n+1)%7,n<0&&(i+=7),i<r){for(i&&e.d.push(+t.slice(0,i)),r-=7;i<r;)e.d.push(+t.slice(i,i+=7));i=7-(t=t.slice(i)).length}else i-=r;for(;i--;)t+="0";e.d.push(+t),m&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function W(e,t,n,i,r){var o,a,s,l,u=e.precision,c=Math.ceil(u/7);for(m=!1,l=n.times(n),s=new e(i);;){if(a=A(s.times(l),new e(t++*t++),u,1),s=r?i.plus(a):i.minus(a),i=A(a.times(l),new e(t++*t++),u,1),void 0!==(a=s.plus(i)).d[c]){for(o=c;a.d[o]===s.d[o]&&o--;);if(-1==o)break}o=s,s=i,i=a,a=o}return m=!0,a.d.length=c+1,a}function Q(e,t){for(var n=e;--t;)n*=e;return n}function Y(e,t){var n,i=t.s<0,r=B(e,e.precision,1),o=r.times(.5);if((t=t.abs()).lte(o))return s=i?4:1,t;if((n=t.divToInt(r)).isZero())s=i?3:2;else{if((t=t.minus(n.times(r))).lte(o))return s=K(n)?i?2:3:i?4:1,t;s=K(n)?i?1:4:i?3:2}return t.minus(r).abs()}function X(e,t,n,i){var r,o,s,l,d,f,p,m,h,v=e.constructor,g=void 0!==n;if(g?(L(n,1,u),void 0===i?i=v.rounding:L(i,0,8)):(n=v.precision,i=v.rounding),e.isFinite()){for(g?(r=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):r=t,(s=(p=R(e)).indexOf("."))>=0&&(p=p.replace(".",""),(h=new v(1)).e=p.length-s,h.d=D(R(h),10,r),h.e=h.d.length),o=d=(m=D(p,10,r)).length;0==m[--d];)m.pop();if(m[0]){if(s<0?o--:((e=new v(e)).d=m,e.e=o,m=(e=A(e,h,n,i,0,r)).d,o=e.e,f=a),s=m[n],l=r/2,f=f||void 0!==m[n+1],f=i<4?(void 0!==s||f)&&(0===i||i===(e.s<0?3:2)):s>l||s===l&&(4===i||f||6===i&&1&m[n-1]||i===(e.s<0?8:7)),m.length=n,f)for(;++m[--n]>r-1;)m[n]=0,n||(++o,m.unshift(1));for(d=m.length;!m[d-1];--d);for(s=0,p="";s<d;s++)p+=c.charAt(m[s]);if(g){if(d>1)if(16==t||8==t){for(s=16==t?4:3,--d;d%s;d++)p+="0";for(d=(m=D(p,r,t)).length;!m[d-1];--d);for(s=1,p="1.";s<d;s++)p+=c.charAt(m[s])}else p=p.charAt(0)+"."+p.slice(1);p=p+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)p="0"+p;p="0."+p}else if(++o>d)for(o-=d;o--;)p+="0";else o<d&&(p=p.slice(0,o)+"."+p.slice(o))}else p=g?"0p+0":"0";p=(16==t?"0x":2==t?"0b":8==t?"0o":"")+p}else p=H(e);return e.s<0?"-"+p:p}function J(e,t){if(e.length>t)return e.length=t,!0}function ee(e){return new this(e).abs()}function te(e){return new this(e).acos()}function ne(e){return new this(e).acosh()}function ie(e,t){return new this(e).plus(t)}function re(e){return new this(e).asin()}function oe(e){return new this(e).asinh()}function ae(e){return new this(e).atan()}function se(e){return new this(e).atanh()}function le(e,t){e=new this(e),t=new this(t);var n,i=this.precision,r=this.rounding,o=i+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?B(this,i,r):new this(0)).s=e.s:!e.d||t.isZero()?(n=B(this,o,1).times(.5)).s=e.s:t.s<0?(this.precision=o,this.rounding=1,n=this.atan(A(e,t,o,1)),t=B(this,o,1),this.precision=i,this.rounding=r,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(A(e,t,o,1)):(n=B(this,o,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function ue(e){return new this(e).cbrt()}function ce(e){return N(e=new this(e),e.e+1,2)}function de(e,t,n){return new this(e).clamp(t,n)}function fe(e){if(!e||"object"!=typeof e)throw Error(h+"Object expected");var t,n,i,r=!0===e.defaults,o=["precision",1,u,"rounding",0,8,"toExpNeg",-l,0,"toExpPos",0,l,"maxE",0,l,"minE",-l,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],r&&(this[n]=p[n]),void 0!==(i=e[n])){if(!(S(i)===i&&i>=o[t+1]&&i<=o[t+2]))throw Error(v+n+": "+i);this[n]=i}if(n="crypto",r&&(this[n]=p[n]),void 0!==(i=e[n])){if(!0!==i&&!1!==i&&0!==i&&1!==i)throw Error(v+n+": "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(y);this[n]=!0}else this[n]=!1}return this}function pe(e){return new this(e).cos()}function me(e){return new this(e).cosh()}function he(e,t){return new this(e).div(t)}function ve(e){return new this(e).exp()}function ge(e){return N(e=new this(e),e.e+1,3)}function ye(){var e,t,n=new this(0);for(m=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return m=!0,new this(1/0);n=t}return m=!0,n.sqrt()}function be(e){return e instanceof o||e&&e.toStringTag===b||!1}function Se(e){return new this(e).ln()}function Ce(e,t){return new this(e).log(t)}function ke(e){return new this(e).log(2)}function we(e){return new this(e).log(10)}function Ie(){return z(this,arguments,"lt")}function xe(){return z(this,arguments,"gt")}function je(e,t){return new this(e).mod(t)}function Ee(e,t){return new this(e).mul(t)}function Me(e,t){return new this(e).pow(t)}function _e(e){var t,n,i,r,o=0,a=new this(1),s=[];if(void 0===e?e=this.precision:L(e,1,u),i=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));o<i;)(r=t[o])>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:s[o++]=r%1e7;else{if(!crypto.randomBytes)throw Error(y);for(t=crypto.randomBytes(i*=4);o<i;)(r=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((127&t[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,o):(s.push(r%1e7),o+=4);o=i/4}else for(;o<i;)s[o++]=1e7*Math.random()|0;for(e%=7,(i=s[--o])&&e&&(r=C(10,7-e),s[o]=(i/r|0)*r);0===s[o];o--)s.pop();if(o<0)n=0,s=[0];else{for(n=-1;0===s[0];n-=7)s.shift();for(i=1,r=s[0];r>=10;r/=10)i++;i<7&&(n-=7-i)}return a.e=n,a.d=s,a}function Fe(e){return N(e=new this(e),e.e+1,this.rounding)}function Le(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Oe(e){return new this(e).sin()}function De(e){return new this(e).sinh()}function Ae(e){return new this(e).sqrt()}function Ne(e,t){return new this(e).sub(t)}function Re(){var e=0,t=arguments,n=new this(t[e]);for(m=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return m=!0,N(n,this.precision,this.rounding)}function Te(e){return new this(e).tan()}function Pe(e){return new this(e).tanh()}function Be(e){return N(e=new this(e),e.e+1,1)}(o=function e(t){var n,i,r;function a(e){var t,n,i,r=this;if(!(r instanceof a))return new a(e);if(r.constructor=a,be(e))return r.s=e.s,void(m?!e.d||e.e>a.maxE?(r.e=NaN,r.d=null):e.e<a.minE?(r.e=0,r.d=[0]):(r.e=e.e,r.d=e.d.slice()):(r.e=e.e,r.d=e.d?e.d.slice():e.d));if("number"==(i=typeof e)){if(0===e)return r.s=1/e<0?-1:1,r.e=0,void(r.d=[0]);if(e<0?(e=-e,r.s=-1):r.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(m?t>a.maxE?(r.e=NaN,r.d=null):t<a.minE?(r.e=0,r.d=[0]):(r.e=t,r.d=[e]):(r.e=t,r.d=[e]))}return 0*e!=0?(e||(r.s=NaN),r.e=NaN,void(r.d=null)):q(r,e.toString())}if("string"!==i)throw Error(v+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),r.s=-1):(43===n&&(e=e.slice(1)),r.s=1),x.test(e)?q(r,e):function(e,t){var n,i,r,a,s,l,u,c,d;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),x.test(t))return q(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(w.test(t))n=16,t=t.toLowerCase();else if(k.test(t))n=2;else{if(!I.test(t))throw Error(v+t);n=8}for((a=t.search(/p/i))>0?(u=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),a=t.indexOf("."),i=e.constructor,(s=a>=0)&&(a=(l=(t=t.replace(".","")).length)-a,r=U(i,new i(n),a,2*a)),a=d=(c=D(t,n,j)).length-1;0===c[a];--a)c.pop();return a<0?new i(0*e.s):(e.e=T(c,d),e.d=c,m=!1,s&&(e=A(e,r,4*l)),u&&(e=e.times(Math.abs(u)<54?C(2,u):o.pow(2,u))),m=!0,e)}(r,e)}if(a.prototype=_,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=fe,a.clone=e,a.isDecimal=be,a.abs=ee,a.acos=te,a.acosh=ne,a.add=ie,a.asin=re,a.asinh=oe,a.atan=ae,a.atanh=se,a.atan2=le,a.cbrt=ue,a.ceil=ce,a.clamp=de,a.cos=pe,a.cosh=me,a.div=he,a.exp=ve,a.floor=ge,a.hypot=ye,a.ln=Se,a.log=Ce,a.log10=we,a.log2=ke,a.max=Ie,a.min=xe,a.mod=je,a.mul=Ee,a.pow=Me,a.random=_e,a.round=Fe,a.sign=Le,a.sin=Oe,a.sinh=De,a.sqrt=Ae,a.sub=Ne,a.sum=Re,a.tan=Te,a.tanh=Pe,a.trunc=Be,void 0===t&&(t={}),t&&!0!==t.defaults)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<r.length;)t.hasOwnProperty(i=r[n++])||(t[i]=this[i]);return a.config(t),a}(p)).prototype.constructor=o,o.default=o.Decimal=o,d=new o(d),f=new o(f),void 0!==(i=(function(){return o}).call(t,n,t,e))&&(e.exports=i)}()},60530:function(e,t){var n;!function(i){"use strict";var r={s:1,n:0,d:1};function o(e){function t(){var t=Error.apply(this,arguments);t.name=this.name=e,this.stack=t.stack,this.message=t.message}function n(){}return n.prototype=Error.prototype,t.prototype=new n,t}var a=p.DivisionByZero=o("DivisionByZero"),s=p.InvalidParameter=o("InvalidParameter");function l(e,t){return isNaN(e=parseInt(e,10))&&u(),e*t}function u(){throw new s}function c(e){for(var t={},n=e,i=2,r=4;r<=n;){for(;n%i==0;)n/=i,t[i]=(t[i]||0)+1;r+=1+2*i++}return n!==e?n>1&&(t[n]=(t[n]||0)+1):t[e]=(t[e]||0)+1,t}var d=function(e,t){var n,i=0,o=1,s=1,c=0,d=0,f=0,p=1,m=1,h=0,v=1,g=1,y=1,b=1e7;if(null!=e)if(void 0!==t)s=(i=e)*(o=t);else switch(typeof e){case"object":"d"in e&&"n"in e?(i=e.n,o=e.d,"s"in e&&(i*=e.s)):0 in e?(i=e[0],1 in e&&(o=e[1])):u(),s=i*o;break;case"number":if(e<0&&(s=e,e=-e),e%1==0)i=e;else if(e>0){for(e>=1&&(e/=m=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)));v<=b&&y<=b;){if(e===(n=(h+g)/(v+y))){v+y<=b?(i=h+g,o=v+y):y>v?(i=g,o=y):(i=h,o=v);break}e>n?(h+=g,v+=y):(g+=h,y+=v),v>b?(i=g,o=y):(i=h,o=v)}i*=m}else(isNaN(e)||isNaN(t))&&(o=i=NaN);break;case"string":if(null===(v=e.match(/\d+|./g))&&u(),"-"===v[h]?(s=-1,h++):"+"===v[h]&&h++,v.length===h+1?d=l(v[h++],s):"."===v[h+1]||"."===v[h]?("."!==v[h]&&(c=l(v[h++],s)),(1+ ++h===v.length||"("===v[h+1]&&")"===v[h+3]||"'"===v[h+1]&&"'"===v[h+3])&&(d=l(v[h],s),p=Math.pow(10,v[h].length),h++),("("===v[h]&&")"===v[h+2]||"'"===v[h]&&"'"===v[h+2])&&(f=l(v[h+1],s),m=Math.pow(10,v[h+1].length)-1,h+=3)):"/"===v[h+1]||":"===v[h+1]?(d=l(v[h],s),p=l(v[h+2],1),h+=3):"/"===v[h+3]&&" "===v[h+1]&&(c=l(v[h],s),d=l(v[h+2],s),p=l(v[h+4],1),h+=5),v.length<=h){s=i=f+(o=p*m)*c+m*d;break}default:u()}if(0===o)throw new a;r.s=s<0?-1:1,r.n=Math.abs(i),r.d=Math.abs(o)};function f(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function p(e,t){if(!(this instanceof p))return new p(e,t);d(e,t),e=p.REDUCE?f(r.d,r.n):1,this.s=r.s,this.n=r.n/e,this.d=r.d/e}p.REDUCE=1,p.prototype={s:1,n:0,d:1,abs:function(){return new p(this.n,this.d)},neg:function(){return new p(-this.s*this.n,this.d)},add:function(e,t){return d(e,t),new p(this.s*this.n*r.d+r.s*this.d*r.n,this.d*r.d)},sub:function(e,t){return d(e,t),new p(this.s*this.n*r.d-r.s*this.d*r.n,this.d*r.d)},mul:function(e,t){return d(e,t),new p(this.s*r.s*this.n*r.n,this.d*r.d)},div:function(e,t){return d(e,t),new p(this.s*r.s*this.n*r.d,this.d*r.n)},clone:function(){return new p(this)},mod:function(e,t){return isNaN(this.n)||isNaN(this.d)?new p(NaN):void 0===e?new p(this.s*this.n%this.d,1):(d(e,t),0===r.n&&0===this.d&&p(0,0),new p(this.s*(r.d*this.n)%(r.n*this.d),r.d*this.d))},gcd:function(e,t){return d(e,t),new p(f(r.n,this.n)*f(r.d,this.d),r.d*this.d)},lcm:function(e,t){return d(e,t),0===r.n&&0===this.n?new p:new p(r.n*this.n,f(r.n,this.n)*f(r.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):new p(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):new p(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):new p(Math.round(e*this.s*this.n/this.d),e)},inverse:function(){return new p(this.s*this.d,this.n)},pow:function(e,t){if(d(e,t),1===r.d)return r.s<0?new p(Math.pow(this.s*this.d,r.n),Math.pow(this.n,r.n)):new p(Math.pow(this.s*this.n,r.n),Math.pow(this.d,r.n));if(this.s<0)return null;var n=c(this.n),i=c(this.d),o=1,a=1;for(var s in n)if("1"!==s){if("0"===s){o=0;break}if(n[s]*=r.n,n[s]%r.d!=0)return null;n[s]/=r.d,o*=Math.pow(s,n[s])}for(var s in i)if("1"!==s){if(i[s]*=r.n,i[s]%r.d!=0)return null;i[s]/=r.d,a*=Math.pow(s,i[s])}return r.s<0?new p(a,o):new p(o,a)},equals:function(e,t){return d(e,t),this.s*this.n*r.d==r.s*r.n*this.d},compare:function(e,t){d(e,t);var n=this.s*this.n*r.d-r.s*r.n*this.d;return(0<n)-(n<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;var t=this.abs().toContinued();function n(e){return 1===e.length?new p(e[0]):n(e.slice(1)).inverse().add(e[0])}e=e||.001;for(var i=0;i<t.length;i++){var r=n(t.slice(0,i+1));if(r.sub(this.abs()).abs().valueOf()<e)return r.mul(this.s)}return this},divisible:function(e,t){return d(e,t),!(!(r.n*this.d)||this.n*r.d%(r.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,n="",i=this.n,r=this.d;return this.s<0&&(n+="-"),1===r?n+=i:(e&&(t=Math.floor(i/r))>0&&(n+=t,n+=" ",i%=r),n+=i,n+="/",n+=r),n},toLatex:function(e){var t,n="",i=this.n,r=this.d;return this.s<0&&(n+="-"),1===r?n+=i:(e&&(t=Math.floor(i/r))>0&&(n+=t,i%=r),n+="\\frac{",n+=i,n+="}{",n+=r,n+="}"),n},toContinued:function(){var e,t=this.n,n=this.d,i=[];if(isNaN(t)||isNaN(n))return i;do{i.push(Math.floor(t/n)),e=t%n,t=n,n=e}while(1!==t);return i},toString:function(e){var t,n=this.n,i=this.d;if(isNaN(n)||isNaN(i))return"NaN";p.REDUCE||(n/=t=f(n,i),i/=t),e=e||15;var r=function(e,t){for(;t%2==0;t/=2);for(;t%5==0;t/=5);if(1===t)return 0;for(var n=10%t,i=1;1!==n;i++)if(n=10*n%t,i>2e3)return 0;return i}(0,i),o=function(e,t,n){for(var i=1,r=function(e,t,n){for(var i=1;t>0;e=e*e%n,t>>=1)1&t&&(i=i*e%n);return i}(10,n,t),o=0;o<300;o++){if(i===r)return o;i=10*i%t,r=10*r%t}return 0}(0,i,r),a=-1===this.s?"-":"";if(a+=n/i|0,n%=i,(n*=10)&&(a+="."),r){for(var s=o;s--;)a+=n/i|0,n%=i,n*=10;for(a+="(",s=r;s--;)a+=n/i|0,n%=i,n*=10;a+=")"}else for(s=e;n&&s--;)a+=n/i|0,n%=i,n*=10;return a}},void 0!==(n=(function(){return p}).apply(t,[]))&&(e.exports=n)}()},3258:function(e){e.exports=function e(t,n){"use strict";var i,r,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,u=/^0/,c=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},d=c(t).replace(a,"")||"",f=c(n).replace(a,"")||"",p=d.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=f.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(d.match(l),16)||1!==p.length&&d.match(s)&&Date.parse(d),v=parseInt(f.match(l),16)||h&&f.match(s)&&Date.parse(f)||null;if(v){if(h<v)return-1;if(h>v)return 1}for(var g=0,y=Math.max(p.length,m.length);g<y;g++){if(i=!(p[g]||"").match(u)&&parseFloat(p[g])||p[g]||0,r=!(m[g]||"").match(u)&&parseFloat(m[g])||m[g]||0,isNaN(i)!==isNaN(r))return isNaN(i)?1:-1;if(typeof i!=typeof r&&(i+="",r+=""),i<r)return-1;if(i>r)return 1}return 0}},30214:function(e,t,n){var i=n(65531),r=n(193),o=n(77741),a=n(43082),s=n(91297),l=n(39739),u=n(79780);u.alea=i,u.xor128=r,u.xorwow=o,u.xorshift7=a,u.xor4096=s,u.tychei=l,e.exports=u},65531:function(e,t,n){var i;!function(e,r,o){function a(e){var t=this,n=function(){var e=4022871197;return function(t){t=String(t);for(var n=0;n<t.length;n++){var i=.02519603282416938*(e+=t.charCodeAt(n));i-=e=i>>>0,e=(i*=e)>>>0,e+=4294967296*(i-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new a(e),i=t&&t.state,r=n.next;return r.int32=function(){return 4294967296*n.next()|0},r.double=function(){return r()+11102230246251565e-32*(2097152*r()|0)},r.quick=r,i&&("object"==typeof i&&s(i,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0!==(i=(function(){return l}).call(t,n,t,r))&&(r.exports=i):this.alea=l}(0,e=n.nmd(e))},39739:function(e,t,n){var i;!function(e,r,o){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,i=t.d,r=t.a;return e=e<<25^e>>>7^n,n=n-i|0,i=i<<24^i>>>8^r,r=r-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-i|0,t.d=i<<16^n>>>16^r,t.a=r-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var i=0;i<n.length+20;i++)t.b^=0|n.charCodeAt(i),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new a(e),i=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,i&&("object"==typeof i&&s(i,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0!==(i=(function(){return l}).call(t,n,t,r))&&(r.exports=i):this.tychei=l}(0,e=n.nmd(e))},193:function(e,t,n){var i;!function(e,r,o){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var i=0;i<n.length+64;i++)t.x^=0|n.charCodeAt(i),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new a(e),i=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,i&&("object"==typeof i&&s(i,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0!==(i=(function(){return l}).call(t,n,t,r))&&(r.exports=i):this.xor128=l}(0,e=n.nmd(e))},91297:function(e,t,n){var i;!function(e,r,o){function a(e){var t=this;t.next=function(){var e,n,i=t.w,r=t.X,o=t.i;return t.w=i=i+1640531527|0,n=r[o+34&127],e=r[o=o+1&127],n^=n<<13,e^=e<<17,n=r[o]=(n^=n>>>15)^(e^=e>>>12),t.i=o,n+(i^i>>>16)|0},function(e,t){var n,i,r,o,a,s=[],l=128;for(t===(0|t)?(i=t,t=null):(t+="\0",i=0,l=Math.max(l,t.length)),r=0,o=-32;o<l;++o)t&&(i^=t.charCodeAt((o+32)%t.length)),0===o&&(a=i),i^=i<<10,i^=i>>>15,i^=i<<4,i^=i>>>13,o>=0&&(r=0==(n=s[127&o]^=i+(a=a+1640531527|0))?r+1:0);for(r>=128&&(s[127&(t&&t.length||0)]=-1),r=127,o=512;o>0;--o)i=s[r+34&127],n=s[r=r+1&127],i^=i<<13,n^=n<<17,s[r]=(i^=i>>>15)^(n^=n>>>12);e.w=a,e.X=s,e.i=r}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new a(e),i=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,i&&(i.X&&s(i,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0!==(i=(function(){return l}).call(t,n,t,r))&&(r.exports=i):this.xor4096=l}(0,e=n.nmd(e))},43082:function(e,t,n){var i;!function(e,r,o){function a(e){var t=this;t.next=function(){var e,n,i=t.x,r=t.i;return e=i[r],n=(e^=e>>>7)^e<<24,n^=(e=i[r+1&7])^e>>>10,n^=(e=i[r+3&7])^e>>>3,n^=(e=i[r+4&7])^e<<7,e=i[r+7&7],i[r]=n^=(e^=e<<13)^e<<9,t.i=r+1&7,n},function(e,t){var n,i=[];if(t===(0|t))i[0]=t;else for(t=""+t,n=0;n<t.length;++n)i[7&n]=i[7&n]<<15^t.charCodeAt(n)+i[n+1&7]<<13;for(;i.length<8;)i.push(0);for(n=0;n<8&&0===i[n];++n);for(8==n&&(i[7]=-1),e.x=i,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new a(e),i=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,i&&(i.x&&s(i,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0!==(i=(function(){return l}).call(t,n,t,r))&&(r.exports=i):this.xorshift7=l}(0,e=n.nmd(e))},77741:function(e,t,n){var i;!function(e,r,o){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var i=0;i<n.length+64;i++)t.x^=0|n.charCodeAt(i),i==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new a(e),i=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,i&&("object"==typeof i&&s(i,n),r.state=function(){return s(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0!==(i=(function(){return l}).call(t,n,t,r))&&(r.exports=i):this.xorwow=l}(0,e=n.nmd(e))},79780:function(e,t,n){var i;!function(r,o,a){var s,l=256,u=a.pow(l,6),c=a.pow(2,52),d=2*c,f=255;function p(e,t,n){var i=[],f=g(v((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(o)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(l):(e=new Uint8Array(l),(r.crypto||r.msCrypto).getRandomValues(e)),y(e)}catch(i){var t=r.navigator,n=t&&t.plugins;return[+new Date,r,n,r.screen,y(o)]}}():e,3),i),p=new m(i),b=function(){for(var e=p.g(6),t=u,n=0;e<c;)e=(e+n)*l,t*=l,n=p.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|p.g(4)},b.quick=function(){return p.g(4)/4294967296},b.double=b,g(y(p.S),o),(t.pass||n||function(e,t,n,i){return i&&(i.S&&h(i,p),e.state=function(){return h(p,{})}),n?(a.random=e,t):e})(b,f,"global"in t?t.global:this==a,t.state)}function m(e){var t,n=e.length,i=this,r=0,o=i.i=i.j=0,a=i.S=[];for(n||(e=[n++]);r<l;)a[r]=r++;for(r=0;r<l;r++)a[r]=a[o=f&o+e[r%n]+(t=a[r])],a[o]=t;(i.g=function(e){for(var t,n=0,r=i.i,o=i.j,a=i.S;e--;)t=a[r=f&r+1],n=n*l+a[f&(a[r]=a[o=f&o+t])+(a[o]=t)];return i.i=r,i.j=o,n})(l)}function h(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){var n,i=[],r=typeof e;if(t&&"object"==r)for(n in e)try{i.push(v(e[n],t-1))}catch(o){}return i.length?i:"string"==r?e:e+"\0"}function g(e,t){for(var n,i=e+"",r=0;r<i.length;)t[f&r]=f&(n^=19*t[f&r])+i.charCodeAt(r++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(g(a.random(),o),e.exports){e.exports=p;try{s=n(75042)}catch(b){}}else void 0!==(i=(function(){return p}).call(t,n,t,e))&&(e.exports=i)}("undefined"!=typeof self?self:this,[],Math)},26572:function(e,t){"use strict";var n,i;void 0!==(i="function"==typeof(n=function(){function e(){return!0}function t(){return!1}function n(){}return function i(){var r=[{name:"number",test:function(e){return"number"==typeof e}},{name:"string",test:function(e){return"string"==typeof e}},{name:"boolean",test:function(e){return"boolean"==typeof e}},{name:"Function",test:function(e){return"function"==typeof e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:function(e){return"object"==typeof e&&null!==e&&e.constructor===Object}},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}],o={name:"any",test:e},a=[],s=[],l={types:r,conversions:s,ignore:a};function u(e){var t=P(l.types,function(t){return t.name===e});if(t)return t;if("any"===e)return o;var n=P(l.types,function(t){return t.name.toLowerCase()===e.toLowerCase()});throw new TypeError('Unknown type "'+e+'"'+(n?'. Did you mean "'+n.name+'"?':""))}function c(e){return e===o?999:l.types.indexOf(e)}function d(e){var t=P(l.types,function(t){return t.test(e)});if(t)return t.name;throw new TypeError("Value has unknown type. Value: "+e)}function f(e){return e.map(function(e){var t=e.types.map(y);return(e.restParam?"...":"")+t.join("|")}).join(",")}function p(e){var t=A(e);return!!t&&t.restParam}function m(e){return e.types.some(function(e){return null!=e.conversion})}function h(t){if(!t||0===t.types.length)return e;if(1===t.types.length)return u(t.types[0].name).test;if(2===t.types.length){var n=u(t.types[0].name).test,i=u(t.types[1].name).test;return function(e){return n(e)||i(e)}}var r=t.types.map(function(e){return u(e.name).test});return function(e){for(var t=0;t<r.length;t++)if(r[t](e))return!0;return!1}}function v(e,t){return t<e.params.length?e.params[t]:p(e.params)?A(e.params):null}function g(e,t,n){var i=v(e,t);return(i?n?i.types.filter(b):i.types:[]).map(y)}function y(e){return e.name}function b(e){return null==e.conversion}function S(e,t){var n=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return Object.keys(t)}(B(e,function(e){return g(e,t,!1)}));return-1!==n.indexOf("any")?["any"]:n}function C(e,t,n){var i,r,o,a=e||"unnamed",s=n;for(o=0;o<t.length;o++){var l=s.filter(function(e){var n=h(v(e,o));return(o<e.params.length||p(e.params))&&n(t[o])});if(0===l.length){if((r=S(s,o)).length>0){var u=d(t[o]);return(i=new TypeError("Unexpected type of argument in function "+a+" (expected: "+r.join(" or ")+", actual: "+u+", index: "+o+")")).data={category:"wrongType",fn:a,index:o,actual:u,expected:r},i}}else s=l}var c=s.map(function(e){return p(e.params)?1/0:e.params.length});if(t.length<Math.min.apply(null,c))return r=S(s,o),(i=new TypeError("Too few arguments in function "+a+" (expected: "+r.join(" or ")+", index: "+t.length+")")).data={category:"tooFewArgs",fn:a,index:t.length,expected:r},i;var f=Math.max.apply(null,c);return t.length>f?((i=new TypeError("Too many arguments in function "+a+" (expected: "+f+", actual: "+t.length+")")).data={category:"tooManyArgs",fn:a,index:t.length,expectedLength:f},i):((i=new TypeError('Arguments of type "'+t.join(", ")+'" do not match any of the defined signatures of function '+a+".")).data={category:"mismatch",actual:t.map(d)},i)}function k(e){for(var t=999,n=0;n<e.types.length;n++)b(e.types[n])&&(t=Math.min(t,e.types[n].typeIndex));return t}function w(e){for(var t=999,n=0;n<e.types.length;n++)b(e.types[n])||(t=Math.min(t,e.types[n].conversionIndex));return t}function I(e,t){var n;return 0!=(n=e.restParam-t.restParam)||0!=(n=m(e)-m(t))||0!=(n=k(e)-k(t))?n:w(e)-w(t)}function x(e,t){var n,i,r=Math.min(e.params.length,t.params.length);if(0!=(i=e.params.some(m)-t.params.some(m)))return i;for(n=0;n<r;n++)if(0!=(i=m(e.params[n])-m(t.params[n])))return i;for(n=0;n<r;n++)if(0!==(i=I(e.params[n],t.params[n])))return i;return e.params.length-t.params.length}function j(e){var t,n,i,r,o=[],a=[];switch(e.types.forEach(function(e){e.conversion&&(o.push(u(e.conversion.from).test),a.push(e.conversion.convert))}),a.length){case 0:return function(e){return e};case 1:return t=o[0],i=a[0],function(e){return t(e)?i(e):e};case 2:return t=o[0],n=o[1],i=a[0],r=a[1],function(e){return t(e)?i(e):n(e)?r(e):e};default:return function(e){for(var t=0;t<a.length;t++)if(o[t](e))return a[t](e);return e}}}function E(e,t){return function e(n,i,r){if(i<n.length){var o,a=n[i],s=t?a.types.filter(b):a.types;if(a.restParam){var l=s.filter(b);o=l.length<s.length?[l,s]:[s]}else o=s.map(function(e){return[e]});return B(o,function(t){return e(n,i+1,r.concat([t]))})}return[r.map(function(e,t){return{types:e,restParam:t===n.length-1&&p(n)}})]}(e,0,[])}function M(e,i){if(0===Object.keys(i).length)throw new SyntaxError("No signatures provided");var r=[];Object.keys(i).map(function(e){return function(e,t,n){var i=[];return""!==e.trim()&&(i=e.split(",").map(F).map(function(e,t,i){var r=function(e,t){var n=0===e.indexOf("..."),i=(n?e.length>3?e.slice(3):"any":e).split("|").map(F).filter(L).filter(_),r=function(e,t){var n={};return e.forEach(function(e){-1===t.indexOf(e.from)&&-1!==t.indexOf(e.to)&&!n[e.from]&&(n[e.from]=e)}),Object.keys(n).map(function(e){return n[e]})}(t,i),o=i.map(function(e){var t=u(e);return{name:e,typeIndex:c(t),test:t.test,conversion:null,conversionIndex:-1}}),a=r.map(function(e){var n=u(e.from);return{name:e.from,typeIndex:c(n),test:n.test,conversion:e,conversionIndex:t.indexOf(e)}});return{types:o.concat(a),restParam:n}}(e,n);if(r.restParam&&t!==i.length-1)throw new SyntaxError('Unexpected rest parameter "'+e+'": only allowed for the last parameter');return r})),i.some(D)?null:{params:i,fn:t}}(e,i[e],l.conversions)}).filter(O).forEach(function(e){var t=P(r,function(t){return function(e,t){for(var n=Math.max(e.params.length,t.params.length),i=0;i<n;i++)if(!T(g(e,i,!0),g(t,i,!0)))return!1;var r=e.params.length,o=t.params.length,a=p(e.params),s=p(t.params);return a?s?r===o:o>=r:s?r>=o:r===o}(t,e)});if(t)throw new TypeError('Conflicting signatures "'+f(t.params)+'" and "'+f(e.params)+'".');r.push(e)});var o=B(r,function(e){return(e?E(e.params,!1):[]).map(function(t){return{params:t,fn:e.fn}})}).filter(O);o.sort(x);var a=o[0]&&o[0].params.length<=2&&!p(o[0].params),s=o[1]&&o[1].params.length<=2&&!p(o[1].params),d=o[2]&&o[2].params.length<=2&&!p(o[2].params),v=o[3]&&o[3].params.length<=2&&!p(o[3].params),y=o[4]&&o[4].params.length<=2&&!p(o[4].params),b=o[5]&&o[5].params.length<=2&&!p(o[5].params),S=a&&s&&d&&v&&y&&b,k=o.map(function(e){return function(e){var t,n,i;if(p(e)){var r=(t=function(e){return e.slice(0,e.length-1)}(e).map(h)).length,o=h(A(e));return function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return function(e){for(var t=r;t<e.length;t++)if(!o(e[t]))return!1;return!0}(e)&&e.length>=r+1}}return 0===e.length?function(e){return 0===e.length}:1===e.length?(n=h(e[0]),function(e){return n(e[0])&&1===e.length}):2===e.length?(n=h(e[0]),i=h(e[1]),function(e){return n(e[0])&&i(e[1])&&2===e.length}):(t=e.map(h),function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return e.length===t.length})}(e.params)}),w=a?h(o[0].params[0]):t,I=s?h(o[1].params[0]):t,M=d?h(o[2].params[0]):t,R=v?h(o[3].params[0]):t,$=y?h(o[4].params[0]):t,V=b?h(o[5].params[0]):t,U=a?h(o[0].params[1]):t,K=s?h(o[1].params[1]):t,z=d?h(o[2].params[1]):t,G=v?h(o[3].params[1]):t,Z=y?h(o[4].params[1]):t,H=b?h(o[5].params[1]):t,q=o.map(function(e){return function(e,t){var n=t;if(e.some(m)){var i=p(e),r=e.map(j);n=function(){for(var e=[],n=i?arguments.length-1:arguments.length,o=0;o<n;o++)e[o]=r[o](arguments[o]);return i&&(e[n]=arguments[n].map(r[n])),t.apply(this,e)}}var o=n;if(p(e)){var a=e.length-1;o=function(){return n.apply(this,N(arguments,0,a).concat([N(arguments,a)]))}}return o}(e.params,e.fn)}),W=a?q[0]:n,Q=s?q[1]:n,Y=d?q[2]:n,X=v?q[3]:n,J=y?q[4]:n,ee=b?q[5]:n,te=a?o[0].params.length:-1,ne=s?o[1].params.length:-1,ie=d?o[2].params.length:-1,re=v?o[3].params.length:-1,oe=y?o[4].params.length:-1,ae=b?o[5].params.length:-1,se=S?6:0,le=o.length,ue=function(){for(var t=se;t<le;t++)if(k[t](arguments))return q[t].apply(this,arguments);throw C(e,arguments,o)},ce=function e(t,n){return arguments.length===te&&w(t)&&U(n)?W.apply(e,arguments):arguments.length===ne&&I(t)&&K(n)?Q.apply(e,arguments):arguments.length===ie&&M(t)&&z(n)?Y.apply(e,arguments):arguments.length===re&&R(t)&&G(n)?X.apply(e,arguments):arguments.length===oe&&$(t)&&Z(n)?J.apply(e,arguments):arguments.length===ae&&V(t)&&H(n)?ee.apply(e,arguments):ue.apply(e,arguments)};try{Object.defineProperty(ce,"name",{value:e})}catch(de){}return ce.signatures=function(e){var t={};return e.forEach(function(e){e.params.some(m)||E(e.params,!0).forEach(function(n){t[f(n)]=e.fn})}),t}(o),ce}function _(e){return-1===l.ignore.indexOf(e)}function F(e){return e.trim()}function L(e){return!!e}function O(e){return null!==e}function D(e){return 0===e.types.length}function A(e){return e[e.length-1]}function N(e,t,n){return Array.prototype.slice.call(e,t,n)}function R(e,t){return-1!==e.indexOf(t)}function T(e,t){for(var n=0;n<e.length;n++)if(R(t,e[n]))return!0;return!1}function P(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function B(e,t){return Array.prototype.concat.apply([],e.map(t))}function $(e){for(var t="",n=0;n<e.length;n++){var i=e[n];if(("object"==typeof i.signatures||"string"==typeof i.signature)&&""!==i.name)if(""===t)t=i.name;else if(t!==i.name){var r=new Error("Function names do not match (expected: "+t+", actual: "+i.name+")");throw r.data={actual:i.name,expected:t},r}}return t}function V(e){var t,n={};function i(e,i){if(n.hasOwnProperty(e)&&i!==n[e])throw(t=new Error('Signature "'+e+'" is defined twice')).data={signature:e},t}for(var r=0;r<e.length;r++){var o=e[r];if("object"==typeof o.signatures)for(var a in o.signatures)o.signatures.hasOwnProperty(a)&&(i(a,o.signatures[a]),n[a]=o.signatures[a]);else{if("string"!=typeof o.signature)throw(t=new TypeError("Function is no typed-function (index: "+r+")")).data={index:r},t;i(o.signature,o),n[o.signature]=o}}return n}return(l=M("typed",{"string, Object":M,Object:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return M($(t),e)},"...Function":function(e){return M($(e),V(e))},"string, ...Function":function(e,t){return M(e,V(t))}})).create=i,l.types=r,l.conversions=s,l.ignore=a,l.convert=function(e,t){var n=d(e);if(t===n)return e;for(var i=0;i<l.conversions.length;i++){var r=l.conversions[i];if(r.from===n&&r.to===t)return r.convert(e)}throw new Error("Cannot convert from "+n+" to "+t)},l.find=function(e,t){if(!e.signatures)throw new TypeError("Function is no typed-function");var n;if("string"==typeof t){n=t.split(",");for(var i=0;i<n.length;i++)n[i]=n[i].trim()}else{if(!Array.isArray(t))throw new TypeError("String array or a comma separated string expected");n=t}var r=n.join(","),o=e.signatures[r];if(o)return o;throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+n.join(", ")+"))")},l.addType=function(e,t){if(!e||"string"!=typeof e.name||"function"!=typeof e.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==t)for(var n=0;n<l.types.length;n++)if("Object"===l.types[n].name)return void l.types.splice(n,0,e);l.types.push(e)},l.addConversion=function(e){if(!e||"string"!=typeof e.from||"string"!=typeof e.to||"function"!=typeof e.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");l.conversions.push(e)},l}()})?n.apply(t,[]):n)&&(e.exports=i)},75042:function(){},77828:function(e,t,n){"use strict";var i=n(30267),r=n(14149);function o(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}(o.prototype=(0,i.Z)(r.Z.prototype)).constructor=o,t.Z=o},98960:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(32051),r=function(e,t){for(var n=e.length;n--;)if((0,i.Z)(e[n][0],t))return n;return-1},o=Array.prototype.splice;function a(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}a.prototype.clear=function(){this.__data__=[],this.size=0},a.prototype.delete=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))},a.prototype.get=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]},a.prototype.has=function(e){return r(this.__data__,e)>-1},a.prototype.set=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};var s=a},18861:function(e,t,n){"use strict";var i=n(30267),r=n(14149);function o(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}(o.prototype=(0,i.Z)(r.Z.prototype)).constructor=o,t.Z=o},22422:function(e,t,n){"use strict";var i=n(17757),r=n(28475),o=(0,i.Z)(r.Z,"Map");t.Z=o},96119:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=(0,n(17757).Z)(Object,"create"),r=Object.prototype.hasOwnProperty,o=Object.prototype.hasOwnProperty;function a(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}a.prototype.clear=function(){this.__data__=i?i(null):{},this.size=0},a.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},a.prototype.get=function(e){var t=this.__data__;if(i){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(t,e)?t[e]:void 0},a.prototype.has=function(e){var t=this.__data__;return i?void 0!==t[e]:o.call(t,e)},a.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?"__lodash_hash_undefined__":t,this};var s=a,l=n(98960),u=n(22422),c=function(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map};function d(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}d.prototype.clear=function(){this.size=0,this.__data__={hash:new s,map:new(u.Z||l.Z),string:new s}},d.prototype.delete=function(e){var t=c(this,e).delete(e);return this.size-=t?1:0,t},d.prototype.get=function(e){return c(this,e).get(e)},d.prototype.has=function(e){return c(this,e).has(e)},d.prototype.set=function(e,t){var n=c(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};var f=d},60063:function(e,t,n){"use strict";var i=n(28475);t.Z=i.Z.Symbol},8266:function(e,t,n){"use strict";var i=n(17757),r=n(28475),o=(0,i.Z)(r.Z,"WeakMap");t.Z=o},67403:function(e,t){"use strict";t.Z=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},11784:function(e,t){"use strict";t.Z=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}},28993:function(e,t,n){"use strict";var i=n(61383);t.Z=function(e,t){return!(null==e||!e.length)&&(0,i.Z)(e,t,0)>-1}},32152:function(e,t,n){"use strict";var i=n(66023),r=n(81711),o=n(86534),a=n(52389),s=n(79856),l=n(49),u=Object.prototype.hasOwnProperty;t.Z=function(e,t){var n=(0,o.Z)(e),c=!n&&(0,r.Z)(e),d=!n&&!c&&(0,a.Z)(e),f=!n&&!c&&!d&&(0,l.Z)(e),p=n||c||d||f,m=p?(0,i.Z)(e.length,String):[],h=m.length;for(var v in e)(t||u.call(e,v))&&(!p||!("length"==v||d&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||(0,s.Z)(v,h)))&&m.push(v);return m}},76512:function(e,t){"use strict";t.Z=function(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}},72212:function(e,t,n){"use strict";var i=n(824),r=n(32051),o=Object.prototype.hasOwnProperty;t.Z=function(e,t,n){var a=e[t];(!o.call(e,t)||!(0,r.Z)(a,n)||void 0===n&&!(t in e))&&(0,i.Z)(e,t,n)}},824:function(e,t,n){"use strict";var i=n(30961);t.Z=function(e,t,n){"__proto__"==t&&i.Z?(0,i.Z)(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},30267:function(e,t,n){"use strict";var i=n(65601),r=Object.create,o=function(){function e(){}return function(t){if(!(0,i.Z)(t))return{};if(r)return r(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();t.Z=o},9554:function(e,t){"use strict";t.Z=function(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}},15814:function(e,t,n){"use strict";var i=n(15611),r=n(4369);t.Z=function(e,t){for(var n=0,o=(t=(0,i.Z)(t,e)).length;null!=e&&n<o;)e=e[(0,r.Z)(t[n++])];return n&&n==o?e:void 0}},73984:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(60063),r=Object.prototype,o=r.hasOwnProperty,a=r.toString,s=i.Z?i.Z.toStringTag:void 0,l=Object.prototype.toString,u=i.Z?i.Z.toStringTag:void 0,c=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":u&&u in Object(e)?function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var i=!0}catch(l){}var r=a.call(e);return i&&(t?e[s]=n:delete e[s]),r}(e):function(e){return l.call(e)}(e)}},61383:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(9554),r=n(35628),o=function(e,t,n){return t==t?function(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}(e,t,n):(0,i.Z)(e,r.Z,n)}},35628:function(e,t){"use strict";t.Z=function(e){return e!=e}},59545:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i,r=n(60336),o=n(51576),a=(i=/[^.]+$/.exec(o.Z&&o.Z.keys&&o.Z.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",s=n(65601),l=n(84796),u=/^\[object .+?Constructor\]$/,c=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),d=function(e){return!(!(0,s.Z)(e)||function(e){return!!a&&a in e}(e))&&((0,r.Z)(e)?c:u).test((0,l.Z)(e))}},14149:function(e,t){"use strict";t.Z=function(){}},58212:function(e,t,n){"use strict";var i=n(1613),r=n(12174),o=n(25938);t.Z=function(e,t){return(0,o.Z)((0,r.Z)(e,t,i.Z),e+"")}},69681:function(e,t,n){"use strict";var i=n(72212),r=n(15611),o=n(79856),a=n(65601),s=n(4369);t.Z=function(e,t,n,l){if(!(0,a.Z)(e))return e;for(var u=-1,c=(t=(0,r.Z)(t,e)).length,d=c-1,f=e;null!=f&&++u<c;){var p=(0,s.Z)(t[u]),m=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(u!=d){var h=f[p];void 0===(m=l?l(h,p,f):void 0)&&(m=(0,a.Z)(h)?h:(0,o.Z)(t[u+1])?[]:{})}(0,i.Z)(f,p,m),f=f[p]}return e}},49662:function(e,t,n){"use strict";var i=n(1613),r=n(2588);t.Z=r.Z?function(e,t){return r.Z.set(e,t),e}:i.Z},66023:function(e,t){"use strict";t.Z=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}},2479:function(e,t,n){"use strict";var i=n(60063),r=n(76512),o=n(86534),a=n(18186),s=i.Z?i.Z.prototype:void 0,l=s?s.toString:void 0;t.Z=function e(t){if("string"==typeof t)return t;if((0,o.Z)(t))return(0,r.Z)(t,e)+"";if((0,a.Z)(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},59682:function(e,t,n){"use strict";var i=n(55851),r=/^\s+/;t.Z=function(e){return e&&e.slice(0,(0,i.Z)(e)+1).replace(r,"")}},80894:function(e,t){"use strict";t.Z=function(e){return function(t){return e(t)}}},15611:function(e,t,n){"use strict";var i=n(86534),r=n(75797),o=n(17791),a=n(27128);t.Z=function(e,t){return(0,i.Z)(e)?e:(0,r.Z)(e,t)?[e]:(0,o.Z)((0,a.Z)(e))}},69434:function(e,t){"use strict";var n=Math.max;t.Z=function(e,t,i,r){for(var o=-1,a=e.length,s=i.length,l=-1,u=t.length,c=n(a-s,0),d=Array(u+c),f=!r;++l<u;)d[l]=t[l];for(;++o<s;)(f||o<a)&&(d[i[o]]=e[o]);for(;c--;)d[l++]=e[o++];return d}},42808:function(e,t){"use strict";var n=Math.max;t.Z=function(e,t,i,r){for(var o=-1,a=e.length,s=-1,l=i.length,u=-1,c=t.length,d=n(a-l,0),f=Array(d+c),p=!r;++o<d;)f[o]=e[o];for(var m=o;++u<c;)f[m+u]=t[u];for(;++s<l;)(p||o<a)&&(f[m+i[s]]=e[o++]);return f}},82306:function(e,t){"use strict";t.Z=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}},51576:function(e,t,n){"use strict";var i=n(28475);t.Z=i.Z["__core-js_shared__"]},68930:function(e,t,n){"use strict";var i=n(30267),r=n(65601);t.Z=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=(0,i.Z)(e.prototype),o=e.apply(n,t);return(0,r.Z)(o)?o:n}}},41499:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var i=n(69434),r=n(42808),o=function(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i},a=n(68930),s=n(42734),l=n(98559),u=n(82306),c=n(79856),d=Math.min,f=function(e,t){for(var n=e.length,i=d(t.length,n),r=(0,u.Z)(e);i--;){var o=t[i];e[i]=(0,c.Z)(o,n)?r[o]:void 0}return e},p=n(70438),m=n(28475),h=function e(t,n,u,c,d,h,v,g,y,b){var S=128&n,C=1&n,k=2&n,w=24&n,I=512&n,x=k?void 0:(0,a.Z)(t);return function j(){for(var E=arguments.length,M=Array(E),_=E;_--;)M[_]=arguments[_];if(w)var F=(0,l.Z)(j),L=o(M,F);if(c&&(M=(0,i.Z)(M,c,d,w)),h&&(M=(0,r.Z)(M,h,v,w)),E-=L,w&&E<b){var O=(0,p.Z)(M,F);return(0,s.Z)(t,n,e,j.placeholder,u,M,O,g,y,b-E)}var D=C?u:this,A=k?D[t]:t;return E=M.length,g?M=f(M,g):I&&E>1&&M.reverse(),S&&y<E&&(M.length=y),this&&this!==m.Z&&this instanceof j&&(A=x||(0,a.Z)(A)),A.apply(D,M)}}},42734:function(e,t,n){"use strict";var i=n(37706),r=n(62029),o=n(56170);t.Z=function(e,t,n,a,s,l,u,c,d,f){var p=8&t;t|=p?32:64,4&(t&=~(p?64:32))||(t&=-4);var m=[e,t,s,p?l:void 0,p?u:void 0,p?void 0:l,p?void 0:u,c,d,f],h=n.apply(void 0,m);return(0,i.Z)(e)&&(0,r.Z)(h,m),h.placeholder=a,(0,o.Z)(h,e,t)}},77968:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var i=n(49662),r=n(68930),o=n(28475),a=n(67403),s=n(41499),l=n(42734),u=n(98559),c=n(70438),d=n(56690),f=n(69434),p=n(42808),m="__lodash_placeholder__",h=Math.min,v=n(62029),g=n(56170),y=n(66078),b=Math.max,S=function(e,t,n,S,C,k,w,I){var x=2&t;if(!x&&"function"!=typeof e)throw new TypeError("Expected a function");var j=S?S.length:0;if(j||(t&=-97,S=C=void 0),w=void 0===w?w:b((0,y.Z)(w),0),I=void 0===I?I:(0,y.Z)(I),j-=C?C.length:0,64&t){var E=S,M=C;S=C=void 0}var _=x?void 0:(0,d.Z)(e),F=[e,t,n,S,C,E,M,k,w,I];if(_&&function(e,t){var n=e[1],i=t[1],r=n|i;if(!(r<131||128==i&&8==n||128==i&&256==n&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n))return e;1&i&&(e[2]=t[2],r|=1&n?0:4);var o=t[3];if(o){var a=e[3];e[3]=a?(0,f.Z)(a,o,t[4]):o,e[4]=a?(0,c.Z)(e[3],m):t[4]}(o=t[5])&&(e[5]=(a=e[5])?(0,p.Z)(a,o,t[6]):o,e[6]=a?(0,c.Z)(e[5],m):t[6]),(o=t[7])&&(e[7]=o),128&i&&(e[8]=null==e[8]?t[8]:h(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r}(F,_),e=F[0],t=F[1],n=F[2],S=F[3],C=F[4],!(I=F[9]=void 0===F[9]?x?0:e.length:b(F[9]-j,0))&&24&t&&(t&=-25),t&&1!=t)L=8==t||16==t?function(e,t,n){var i=(0,r.Z)(e);return function r(){for(var d=arguments.length,f=Array(d),p=d,m=(0,u.Z)(r);p--;)f[p]=arguments[p];var h=d<3&&f[0]!==m&&f[d-1]!==m?[]:(0,c.Z)(f,m);return(d-=h.length)<n?(0,l.Z)(e,t,s.Z,r.placeholder,void 0,f,h,void 0,void 0,n-d):(0,a.Z)(this&&this!==o.Z&&this instanceof r?i:e,this,f)}}(e,t,I):32!=t&&33!=t||C.length?s.Z.apply(void 0,F):function(e,t,n,i){var s=1&t,l=(0,r.Z)(e);return function t(){for(var r=-1,u=arguments.length,c=-1,d=i.length,f=Array(d+u),p=this&&this!==o.Z&&this instanceof t?l:e;++c<d;)f[c]=i[c];for(;u--;)f[c++]=arguments[++r];return(0,a.Z)(p,s?n:this,f)}}(e,t,n,S);else var L=function(e,t,n){var i=1&t,a=(0,r.Z)(e);return function t(){return(this&&this!==o.Z&&this instanceof t?a:e).apply(i?n:this,arguments)}}(e,t,n);return(0,g.Z)((_?i.Z:v.Z)(L,F),e,t)}},30961:function(e,t,n){"use strict";var i=n(17757),r=function(){try{var e=(0,i.Z)(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();t.Z=r},94143:function(e,t){"use strict";var n="object"==typeof global&&global&&global.Object===Object&&global;t.Z=n},56690:function(e,t,n){"use strict";var i=n(2588),r=n(88948);t.Z=i.Z?function(e){return i.Z.get(e)}:r.Z},46612:function(e,t,n){"use strict";var i=n(26519),r=Object.prototype.hasOwnProperty;t.Z=function(e){for(var t=e.name+"",n=i.Z[t],o=r.call(i.Z,t)?n.length:0;o--;){var a=n[o],s=a.func;if(null==s||s==e)return a.name}return t}},98559:function(e,t){"use strict";t.Z=function(e){return e.placeholder}},17757:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(59545),r=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return(0,i.Z)(n)?n:void 0}},79856:function(e,t){"use strict";var n=/^(?:0|[1-9]\d*)$/;t.Z=function(e,t){var i=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&n.test(e))&&e>-1&&e%1==0&&e<t}},32965:function(e,t,n){"use strict";var i=n(32051),r=n(39888),o=n(79856),a=n(65601);t.Z=function(e,t,n){if(!(0,a.Z)(n))return!1;var s=typeof t;return!!("number"==s?(0,r.Z)(n)&&(0,o.Z)(t,n.length):"string"==s&&t in n)&&(0,i.Z)(n[t],e)}},75797:function(e,t,n){"use strict";var i=n(86534),r=n(18186),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.Z=function(e,t){if((0,i.Z)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!(0,r.Z)(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}},37706:function(e,t,n){"use strict";var i=n(77828),r=n(56690),o=n(46612),a=n(25607);t.Z=function(e){var t=(0,o.Z)(e),n=a.Z[t];if("function"!=typeof n||!(t in i.Z.prototype))return!1;if(e===n)return!0;var s=(0,r.Z)(n);return!!s&&e===s[0]}},91305:function(e,t){"use strict";var n=Object.prototype;t.Z=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},2588:function(e,t,n){"use strict";var i=n(8266),r=i.Z&&new i.Z;t.Z=r},76187:function(e,t,n){"use strict";var i=n(94143),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=r&&"object"==typeof module&&module&&!module.nodeType&&module,a=o&&o.exports===r&&i.Z.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();t.Z=s},12174:function(e,t,n){"use strict";var i=n(67403),r=Math.max;t.Z=function(e,t,n){return t=r(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=r(o.length-t,0),l=Array(s);++a<s;)l[a]=o[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=o[a];return u[t]=n(l),(0,i.Z)(e,this,u)}}},26519:function(e,t){"use strict";t.Z={}},70438:function(e,t){"use strict";var n="__lodash_placeholder__";t.Z=function(e,t){for(var i=-1,r=e.length,o=0,a=[];++i<r;){var s=e[i];(s===t||s===n)&&(e[i]=n,a[o++]=i)}return a}},28475:function(e,t,n){"use strict";var i=n(94143),r="object"==typeof self&&self&&self.Object===Object&&self,o=i.Z||r||Function("return this")();t.Z=o},62029:function(e,t,n){"use strict";var i=n(49662),r=(0,n(77483).Z)(i.Z);t.Z=r},25938:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(9329),r=n(30961),o=n(1613),a=r.Z?function(e,t){return(0,r.Z)(e,"toString",{configurable:!0,enumerable:!1,value:(0,i.Z)(t),writable:!0})}:o.Z,s=(0,n(77483).Z)(a)},56170:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /,o=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,a=n(25938),s=n(11784),l=n(28993),u=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],c=function(e,t,n){var c=t+"";return(0,a.Z)(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(o,"{\n/* [wrapped with "+t+"] */\n")}(c,function(e,t){return(0,s.Z)(u,function(n){var i="_."+n[0];t&n[1]&&!(0,l.Z)(e,i)&&e.push(i)}),e.sort()}(function(e){var t=e.match(i);return t?t[1].split(r):[]}(c),n)))}},77483:function(e,t){"use strict";var n=Date.now;t.Z=function(e){var t=0,i=0;return function(){var r=n(),o=16-(r-i);if(i=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},17791:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i,r,o=n(19125),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,l=(i=(0,o.Z)(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,function(e,n,i,r){t.push(i?r.replace(s,"$1"):n||e)}),t},function(e){return 500===r.size&&r.clear(),e}),r=i.cache,i)},4369:function(e,t,n){"use strict";var i=n(18186);t.Z=function(e){if("string"==typeof e||(0,i.Z)(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},84796:function(e,t){"use strict";var n=Function.prototype.toString;t.Z=function(e){if(null!=e){try{return n.call(e)}catch(t){}try{return e+""}catch(t){}}return""}},55851:function(e,t){"use strict";var n=/\s/;t.Z=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},63437:function(e,t,n){"use strict";var i=n(77828),r=n(18861),o=n(82306);t.Z=function(e){if(e instanceof i.Z)return e.clone();var t=new r.Z(e.__wrapped__,e.__chain__);return t.__actions__=(0,o.Z)(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}},9329:function(e,t){"use strict";t.Z=function(e){return function(){return e}}},23886:function(e,t,n){"use strict";var i=n(58212),r=n(32051),o=n(32965),a=n(7269),s=Object.prototype,l=s.hasOwnProperty,u=(0,i.Z)(function(e,t){e=Object(e);var n=-1,i=t.length,u=i>2?t[2]:void 0;for(u&&(0,o.Z)(t[0],t[1],u)&&(i=1);++n<i;)for(var c=t[n],d=(0,a.Z)(c),f=-1,p=d.length;++f<p;){var m=d[f],h=e[m];(void 0===h||(0,r.Z)(h,s[m])&&!l.call(e,m))&&(e[m]=c[m])}return e});t.Z=u},32051:function(e,t){"use strict";t.Z=function(e,t){return e===t||e!=e&&t!=t}},79503:function(e,t,n){"use strict";var i=n(15814);t.Z=function(e,t,n){var r=null==e?void 0:(0,i.Z)(e,t);return void 0===r?n:r}},1613:function(e,t){"use strict";t.Z=function(e){return e}},81711:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(73984),r=n(48317),o=function(e){return(0,r.Z)(e)&&"[object Arguments]"==(0,i.Z)(e)},a=Object.prototype,s=a.hasOwnProperty,l=a.propertyIsEnumerable,u=o(function(){return arguments}())?o:function(e){return(0,r.Z)(e)&&s.call(e,"callee")&&!l.call(e,"callee")}},86534:function(e,t){"use strict";t.Z=Array.isArray},39888:function(e,t,n){"use strict";var i=n(60336),r=n(17957);t.Z=function(e){return null!=e&&(0,r.Z)(e.length)&&!(0,i.Z)(e)}},52389:function(e,t,n){"use strict";var i=n(28475),r=n(93992),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=o&&"object"==typeof module&&module&&!module.nodeType&&module,s=a&&a.exports===o?i.Z.Buffer:void 0;t.Z=(s?s.isBuffer:void 0)||r.Z},60336:function(e,t,n){"use strict";var i=n(73984),r=n(65601);t.Z=function(e){if(!(0,r.Z)(e))return!1;var t=(0,i.Z)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},17957:function(e,t){"use strict";t.Z=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},65601:function(e,t){"use strict";t.Z=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},48317:function(e,t){"use strict";t.Z=function(e){return null!=e&&"object"==typeof e}},18186:function(e,t,n){"use strict";var i=n(73984),r=n(48317);t.Z=function(e){return"symbol"==typeof e||(0,r.Z)(e)&&"[object Symbol]"==(0,i.Z)(e)}},49:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(73984),r=n(17957),o=n(48317),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var s=n(80894),l=n(76187),u=l.Z&&l.Z.isTypedArray,c=u?(0,s.Z)(u):function(e){return(0,o.Z)(e)&&(0,r.Z)(e.length)&&!!a[(0,i.Z)(e)]}},7269:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(32152),r=n(65601),o=n(91305),a=Object.prototype.hasOwnProperty,s=n(39888),l=function(e){return(0,s.Z)(e)?(0,i.Z)(e,!0):function(e){if(!(0,r.Z)(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=(0,o.Z)(e),n=[];for(var i in e)"constructor"==i&&(t||!a.call(e,i))||n.push(i);return n}(e)}},19125:function(e,t,n){"use strict";var i=n(96119);function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=e.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(r.Cache||i.Z),n}r.Cache=i.Z,t.Z=r},88948:function(e,t){"use strict";t.Z=function(){}},85526:function(e,t,n){"use strict";var i=n(58212),r=n(77968),o=n(98559),a=n(70438),s=(0,i.Z)(function(e,t){var n=(0,a.Z)(t,(0,o.Z)(s));return(0,r.Z)(e,32,void 0,t,n)});s.placeholder={},t.Z=s},15508:function(e,t,n){"use strict";var i=n(69681);t.Z=function(e,t,n){return null==e?e:(0,i.Z)(e,t,n)}},93992:function(e,t){"use strict";t.Z=function(){return!1}},61113:function(e,t,n){"use strict";var i=n(74463),r=1/0;t.Z=function(e){return e?(e=(0,i.Z)(e))===r||e===-r?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},66078:function(e,t,n){"use strict";var i=n(61113);t.Z=function(e){var t=(0,i.Z)(e),n=t%1;return t==t?n?t-n:t:0}},74463:function(e,t,n){"use strict";var i=n(59682),r=n(65601),o=n(18186),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;t.Z=function(e){if("number"==typeof e)return e;if((0,o.Z)(e))return NaN;if((0,r.Z)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,r.Z)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=(0,i.Z)(e);var n=s.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):a.test(e)?NaN:+e}},27128:function(e,t,n){"use strict";var i=n(2479);t.Z=function(e){return null==e?"":(0,i.Z)(e)}},25607:function(e,t,n){"use strict";var i=n(77828),r=n(18861),o=n(14149),a=n(86534),s=n(48317),l=n(63437),u=Object.prototype.hasOwnProperty;function c(e){if((0,s.Z)(e)&&!(0,a.Z)(e)&&!(e instanceof i.Z)){if(e instanceof r.Z)return e;if(u.call(e,"__wrapped__"))return(0,l.Z)(e)}return new r.Z(e)}(c.prototype=o.Z.prototype).constructor=c,t.Z=c}}])}();